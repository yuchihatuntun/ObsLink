/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var _t=Object.create;var fe=Object.defineProperty,Ht=Object.defineProperties,Nt=Object.getOwnPropertyDescriptor,Wt=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertyNames,st=Object.getOwnPropertySymbols,Bt=Object.getPrototypeOf,at=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var ot=(t,e,s)=>e in t?fe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,ie=(t,e)=>{for(var s in e||(e={}))at.call(e,s)&&ot(t,s,e[s]);if(st)for(var s of st(e))Rt.call(e,s)&&ot(t,s,e[s]);return t},He=(t,e)=>Ht(t,Wt(e)),it=t=>fe(t,"__esModule",{value:!0});var Ft=(t,e)=>{it(t);for(var s in e)fe(t,s,{get:e[s],enumerable:!0})},Vt=(t,e,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Gt(e))!at.call(t,a)&&a!=="default"&&fe(t,a,{get:()=>e[a],enumerable:!(s=Nt(e,a))||s.enumerable});return t},ee=t=>Vt(it(fe(t!=null?_t(Bt(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var m=(t,e,s)=>new Promise((a,o)=>{var i=d=>{try{l(s.next(d))}catch(r){o(r)}},n=d=>{try{l(s.throw(d))}catch(r){o(r)}},l=d=>d.done?a(d.value):Promise.resolve(d.value).then(i,n);l((s=s.apply(t,e)).next())});Ft(exports,{default:()=>tt});var $t=ee(require("obsidian"));var Ne={lightStyle:"oxygen-light",darkStyle:"oxygen-dark",lightScheme:"oxygen-oxygen-light",darkScheme:"oxygen-oxygen-dark",editorFont:"",lineHeight:1.5,lineWidth:40,lineWidthWide:50,maxWidth:88,textNormal:16,textSmall:13,imgGrid:!1,imgWidth:"img-default-width",tableWidth:"table-default-width",iframeWidth:"iframe-default-width",mapWidth:"map-default-width",chartWidth:"chart-default-width",colorfulHeadings:!1,colorfulFrame:!1,colorfulActiveStates:!1,trimNames:!0,labeledNav:!1,fullWidthMedia:!0,workspaceBorders:"enhanced",minimalStatus:!0,focusMode:!1,underlineInternal:!0,underlineExternal:!0,folding:!0,lineNumbers:!1,readableLineLength:!1,devBlockWidth:!1,customPresets:[],enableCustomPresets:!0,navIndentationGuideWidth:"0px",navIndentationGuideColor:"rgba(var(--mono-rgb-100), 0.12)",deemphasizeProperties:!1,autoHideTabBarWhenSingleTab:!1,animationPersonality:"default",animationSpeed:1,enableBlur:!1};var vt=ee(require("obsidian"));var ce=ee(require("obsidian"));function H(t,e){if((0,ce.requireApiVersion)("1.11.0")){let s=new ce.SettingGroup(t).setHeading(e);return{addSetting(a){s.addSetting(a)}}}else return t.createDiv("setting-group-heading").createEl("h3",{text:e}),{addSetting(a){let o=new ce.Setting(t);a(o)}}}function nt(t,e){let s=H(t,"Color scheme");s.addSetting(a=>a.setName("Light mode color scheme").setDesc("Preset color options for light mode. To create a custom color scheme use the Style Settings plugin. See Documentation for details.").addDropdown(o=>{o.addOption("oxygen-oxygen-light","Oxygen").addOption("oxygen-minimal-light","Minimal").addOption("oxygen-atom-light","Atom").addOption("oxygen-ayu-light","Ayu").addOption("oxygen-catppuccin-light","Catppuccin").addOption("oxygen-eink-light","E-ink (beta)").addOption("oxygen-everforest-light","Everforest").addOption("oxygen-flexoki-light","Flexoki").addOption("oxygen-gruvbox-light","Gruvbox").addOption("oxygen-macos-light","macOS").addOption("oxygen-nord-light","Nord").addOption("oxygen-rose-pine-light","Ros\xE9 Pine").addOption("oxygen-notion-light","Sky").addOption("oxygen-solarized-light","Solarized").addOption("oxygen-things-light","Things"),e.settings.enableCustomPresets&&e.settings.customPresets.length>0&&e.settings.customPresets.sort((i,n)=>i.name.localeCompare(n.name)).forEach(i=>{o.addOption(`oxygen-custom-${i.id}`,i.name)}),o.setValue(e.settings.lightScheme).onChange(i=>m(this,null,function*(){e.settings.lightScheme=i,yield e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS()}))})),s.addSetting(a=>a.setName("Light mode background contrast").setDesc("Level of contrast between sidebar and main content.").addDropdown(o=>o.addOption("oxygen-light","Default").addOption("oxygen-light-white","All white").addOption("oxygen-light-tonal","Low contrast").addOption("oxygen-light-contrast","High contrast").setValue(e.settings.lightStyle).onChange(i=>m(this,null,function*(){e.settings.lightStyle=i,yield e.saveData(e.settings),document.body.classList.contains("theme-light")&&e.updateLightStyle()})))),s.addSetting(a=>a.setName("Dark mode color scheme").setDesc("Preset colors options for dark mode.").addDropdown(o=>{o.addOption("oxygen-oxygen-dark","Oxygen").addOption("oxygen-minimal-dark","Minimal").addOption("oxygen-atom-dark","Atom").addOption("oxygen-ayu-dark","Ayu").addOption("oxygen-catppuccin-dark","Catppuccin").addOption("oxygen-dracula-dark","Dracula").addOption("oxygen-eink-dark","E-ink (beta)").addOption("oxygen-everforest-dark","Everforest").addOption("oxygen-flexoki-dark","Flexoki").addOption("oxygen-gruvbox-dark","Gruvbox").addOption("oxygen-macos-dark","macOS").addOption("oxygen-nord-dark","Nord").addOption("oxygen-rose-pine-dark","Ros\xE9 Pine").addOption("oxygen-notion-dark","Sky").addOption("oxygen-solarized-dark","Solarized").addOption("oxygen-things-dark","Things"),e.settings.enableCustomPresets&&e.settings.customPresets.length>0&&e.settings.customPresets.sort((i,n)=>i.name.localeCompare(n.name)).forEach(i=>{o.addOption(`oxygen-custom-${i.id}`,i.name)}),o.setValue(e.settings.darkScheme).onChange(i=>m(this,null,function*(){e.settings.darkScheme=i,yield e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS()}))})),s.addSetting(a=>a.setName("Dark mode background contrast").setDesc("Level of contrast between sidebar and main content.").addDropdown(o=>o.addOption("oxygen-dark","Default").addOption("oxygen-dark-tonal","Low contrast").addOption("oxygen-dark-black","True black").setValue(e.settings.darkStyle).onChange(i=>m(this,null,function*(){e.settings.darkStyle=i,yield e.saveData(e.settings),document.body.classList.contains("theme-dark")&&e.updateDarkStyle()}))))}function rt(t,e){let s=H(t,"Features");s.addSetting(a=>a.setName("Text labels for primary navigation").setDesc("Navigation items in the left sidebar uses text labels. See Documentation for details.").addToggle(o=>o.setValue(e.settings.labeledNav).onChange(i=>m(this,null,function*(){e.settings.labeledNav=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Colorful window frame").setDesc("The top area of the app uses your accent color.").addToggle(o=>o.setValue(e.settings.colorfulFrame).onChange(i=>m(this,null,function*(){e.settings.colorfulFrame=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Colorful active states").setDesc("Active file and menu items use your accent color.").addToggle(o=>o.setValue(e.settings.colorfulActiveStates).onChange(i=>m(this,null,function*(){e.settings.colorfulActiveStates=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Colorful headings").setDesc("Headings use a different color for each size.").addToggle(o=>o.setValue(e.settings.colorfulHeadings).onChange(i=>m(this,null,function*(){e.settings.colorfulHeadings=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Minimal status bar").setDesc("Turn off to use full-width status bar.").addToggle(o=>o.setValue(e.settings.minimalStatus).onChange(i=>m(this,null,function*(){e.settings.minimalStatus=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Trim file names in sidebars").setDesc("Use ellipses to fit file names on a single line.").addToggle(o=>o.setValue(e.settings.trimNames).onChange(i=>m(this,null,function*(){e.settings.trimNames=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Borders").setDesc("Border style for workspace elements.").addDropdown(o=>o.addOption("enhanced","Enhanced").addOption("default","Default").addOption("none","None").setValue(e.settings.workspaceBorders).onChange(i=>m(this,null,function*(){e.settings.workspaceBorders=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Indentation guides thickness").setDesc("Thickness of indentation guides in the sidebar file explorer.").addDropdown(o=>o.addOption("0px","None").addOption("1px","Thin").addOption("2px","Medium").addOption("3px","Thick").setValue(e.settings.navIndentationGuideWidth).onChange(i=>m(this,null,function*(){e.settings.navIndentationGuideWidth=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Indentation guides color").setDesc("Color of indentation guides in the sidebar.").addDropdown(o=>o.addOption("rgba(var(--mono-rgb-100), 0.12)","Subtle").addOption("var(--text-faint)","Strong").addOption("var(--color-accent)","Accent color").setValue(e.settings.navIndentationGuideColor).onChange(i=>m(this,null,function*(){e.settings.navIndentationGuideColor=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Underline internal links").setDesc("Show underlines on internal links.").addToggle(o=>o.setValue(e.settings.underlineInternal).onChange(i=>m(this,null,function*(){e.settings.underlineInternal=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Underline external links").setDesc("Show underlines on external links.").addToggle(o=>o.setValue(e.settings.underlineExternal).onChange(i=>m(this,null,function*(){e.settings.underlineExternal=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Maximize media").setDesc("Images and videos fill the width of the line.").addToggle(o=>o.setValue(e.settings.fullWidthMedia).onChange(i=>m(this,null,function*(){e.settings.fullWidthMedia=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>("enableBlur"in e.settings||(e.settings.enableBlur=!1),a.setName("Enable background blur").setDesc("Adds background blur to modal dialogs. Disable if scrolling becomes laggy. Not available on mobile devices.").addToggle(o=>o.setValue(e.settings.enableBlur).onChange(i=>m(this,null,function*(){e.settings.enableBlur=i,yield e.saveData(e.settings),e.refresh()})))))}function dt(t,e){let s=H(t,"Focus");s.addSetting(a=>a.setName("Focus mode").setDesc("Hide tab bar and status bar, hover to display. Can be toggled via hotkey.").addToggle(o=>o.setValue(e.settings.focusMode).onChange(i=>m(this,null,function*(){e.settings.focusMode=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Auto-hide tab bar when single tab").setDesc("Hide the tab bar automatically when only 1 tab is open. Inspired by Meridian Theme.").addToggle(o=>o.setValue(e.settings.autoHideTabBarWhenSingleTab).onChange(i=>m(this,null,function*(){e.settings.autoHideTabBarWhenSingleTab=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Deemphasize properties").setDesc("Softens visual prominence of file properties. They become more visible on hover.").addToggle(o=>o.setValue(e.settings.deemphasizeProperties).onChange(i=>m(this,null,function*(){e.settings.deemphasizeProperties=i,yield e.saveData(e.settings),e.refresh()}))))}function lt(t,e){let s=H(t,"Layout");s.addSetting(a=>a.setName("Image grids").setDesc("Turn consecutive images into columns \u2014 to make a new row, add an extra line break between images. These options can also be defined on a per-file basis, see Documentation for details.").addToggle(o=>o.setValue(e.settings.imgGrid).onChange(i=>m(this,null,function*(){e.settings.imgGrid=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Chart width").setDesc("Default width for chart blocks.").addDropdown(o=>o.addOption("chart-default-width","Default").addOption("chart-wide","Wide line width").addOption("chart-max","Maximum line width").addOption("chart-100","100% pane width").setValue(e.settings.chartWidth).onChange(i=>m(this,null,function*(){e.settings.chartWidth=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Iframe width").setDesc("Default width for iframe blocks.").addDropdown(o=>o.addOption("iframe-default-width","Default").addOption("iframe-wide","Wide line width").addOption("iframe-max","Maximum line width").addOption("iframe-100","100% pane width").setValue(e.settings.iframeWidth).onChange(i=>m(this,null,function*(){e.settings.iframeWidth=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Image width").setDesc("Default width for image blocks.").addDropdown(o=>o.addOption("img-default-width","Default").addOption("img-wide","Wide line width").addOption("img-max","Maximum line width").addOption("img-100","100% pane width").setValue(e.settings.imgWidth).onChange(i=>m(this,null,function*(){e.settings.imgWidth=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Map width").setDesc("Default width for map blocks.").addDropdown(o=>o.addOption("map-default-width","Default").addOption("map-wide","Wide line width").addOption("map-max","Maximum line width").addOption("map-100","100% pane width").setValue(e.settings.mapWidth).onChange(i=>m(this,null,function*(){e.settings.mapWidth=i,yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Table width").setDesc("Default width for table and Dataview blocks.").addDropdown(o=>o.addOption("table-default-width","Default").addOption("table-wide","Wide line width").addOption("table-max","Maximum line width").addOption("table-100","100% pane width").setValue(e.settings.tableWidth).onChange(i=>m(this,null,function*(){e.settings.tableWidth=i,yield e.saveData(e.settings),e.refresh()}))))}function ct(t,e){let s=H(t,"Typography");s.addSetting(a=>a.setName("Text font size").setDesc("Used for the main text (default 16).").addText(o=>o.setPlaceholder("16").setValue((e.settings.textNormal||"")+"").onChange(i=>m(this,null,function*(){e.settings.textNormal=parseFloat(i),yield e.saveData(e.settings),e.setFontSize()})))),s.addSetting(a=>a.setName("Small font size").setDesc("Used for text in the sidebars and tabs (default 13).").addText(o=>o.setPlaceholder("13").setValue((e.settings.textSmall||"")+"").onChange(i=>m(this,null,function*(){e.settings.textSmall=parseFloat(i),yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Line height").setDesc("Line height of text (default 1.5).").addText(o=>o.setPlaceholder("1.5").setValue((e.settings.lineHeight||"")+"").onChange(i=>m(this,null,function*(){e.settings.lineHeight=parseFloat(i),yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Normal line width").setDesc("Number of characters per line (default 40).").addText(o=>o.setPlaceholder("40").setValue((e.settings.lineWidth||"")+"").onChange(i=>m(this,null,function*(){e.settings.lineWidth=parseInt(i.trim()),yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Wide line width").setDesc("Number of characters per line for wide elements (default 50).").addText(o=>o.setPlaceholder("50").setValue((e.settings.lineWidthWide||"")+"").onChange(i=>m(this,null,function*(){e.settings.lineWidthWide=parseInt(i.trim()),yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Maximum line width %").setDesc("Percentage of space inside a pane that a line can fill (default 88).").addText(o=>o.setPlaceholder("88").setValue((e.settings.maxWidth||"")+"").onChange(i=>m(this,null,function*(){e.settings.maxWidth=parseInt(i.trim()),yield e.saveData(e.settings),e.refresh()})))),s.addSetting(a=>a.setName("Editor font").setDesc("Overrides the text font defined in Obsidian appearance settings when in edit mode.").addText(o=>o.setPlaceholder("").setValue((e.settings.editorFont||"")+"").onChange(i=>m(this,null,function*(){e.settings.editorFont=i,yield e.saveData(e.settings),e.refresh()}))))}var ft=ee(require("obsidian"));function me(t,e){for(let[s,a]of Object.entries(e))t.style.setProperty(s,a)}function D(t,e,s){t.style.setProperty(e,s)}function mt(t){t=t.replace("#","");let e=parseInt(t.substring(0,2),16)/255,s=parseInt(t.substring(2,4),16)/255,a=parseInt(t.substring(4,6),16)/255,o=Math.max(e,s,a),i=Math.min(e,s,a),n=0,l=0,d=(o+i)/2;if(o!==i){let r=o-i;switch(l=d>.5?r/(2-o-i):r/(o+i),o){case e:n=(s-a)/r+(s<a?6:0);break;case s:n=(a-e)/r+2;break;case a:n=(e-s)/r+4;break}n/=6}return{h:Math.round(n*360),s:Math.round(l*100),l:Math.round(d*100)}}function p(t){let e=t.h/360,s=t.s/100,a=t.l/100,o=(r,h,c)=>(c<0&&(c+=1),c>1&&(c-=1),c<1/6?r+(h-r)*6*c:c<1/2?h:c<2/3?r+(h-r)*(2/3-c)*6:r),i,n,l;if(s===0)i=n=l=a;else{let r=a<.5?a*(1+s):a+s-a*s,h=2*a-r;i=o(h,r,e+1/3),n=o(h,r,e),l=o(h,r,e-1/3)}let d=r=>{let h=Math.round(r*255).toString(16);return h.length===1?"0"+h:h};return`#${d(i)}${d(n)}${d(l)}`}function We(t){return/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}|[A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/.test(t)}function ht(t){let e=document.createElement("div");e.className="custom-preset-swatch";let s=p(t.light.base),a=p(t.light.accent),o=p(t.dark.base);return me(e,{"--swatch-gradient-start":s,"--swatch-gradient-mid":a,"--swatch-gradient-end":o}),e}function Ge(t){return t.trim().replace(/[<>:"/\\|?*]/g,"")}function Be(t){return Ge(t).toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").substring(0,50)}function gt(t){return/^[a-z0-9-]+$/.test(t)&&t.length>0&&t.length<=50}function ut(t,e,s){return!e.some(a=>a.id===t&&a.id!==s)}var q=class{static validatePresetId(e,s,a){return gt(e)&&ut(e,s,a)}static sanitizePresetName(e){return Ge(e)}static createPreset(e,s="",a=[]){let o=this.sanitizePresetName(e);if(!o)throw new Error("Preset name cannot be empty");let i=Be(o),n=1;for(;!this.validatePresetId(i,a);)i=`${Be(o)}-${n}`,n++;return{id:i,name:o,author:s.trim(),version:"1.0.0",light:{base:{h:210,s:2,l:96},accent:{h:200,s:80,l:50},colors:{}},dark:{base:{h:210,s:2,l:13},accent:{h:200,s:80,l:50},colors:{}}}}static updatePreset(e,s,a){let o=a.find(n=>n.id===e);if(!o)throw new Error(`Preset with ID "${e}" not found`);let i=ie(ie({},o),s);if(s.id&&s.id!==e&&!this.validatePresetId(s.id,a,e))throw new Error(`Preset ID "${s.id}" is invalid or already exists`);if(s.name&&(i.name=this.sanitizePresetName(s.name),!i.name))throw new Error("Preset name cannot be empty");return i}static deletePreset(e,s){return s.filter(a=>a.id!==e)}static exportPresetAsJSON(e){return JSON.stringify(e,null,2)}static importPresetFromJSON(e){try{let s=JSON.parse(e);if(!s.id||!s.name||!s.light||!s.dark)throw new Error("Invalid preset format: missing required fields");if(!s.light.base||!s.light.accent||!s.dark.base||!s.dark.accent)throw new Error("Invalid preset format: missing base or accent colors");let a=i=>i&&typeof i.h=="number"&&i.h>=0&&i.h<=360&&typeof i.s=="number"&&i.s>=0&&i.s<=100&&typeof i.l=="number"&&i.l>=0&&i.l<=100;if(!a(s.light.base)||!a(s.light.accent)||!a(s.dark.base)||!a(s.dark.accent))throw new Error("Invalid preset format: HSL values out of range");let o={id:this.sanitizePresetName(s.id),name:this.sanitizePresetName(s.name),author:s.author||"",version:s.version||"1.0.0",light:{base:s.light.base,accent:s.light.accent,colors:s.light.colors||{},frameLightnessOffset:s.light.frameLightnessOffset},dark:{base:s.dark.base,accent:s.dark.accent,colors:s.dark.colors||{},frameLightnessOffset:s.dark.frameLightnessOffset}};if(!o.id||!o.name)throw new Error("Invalid preset format: ID or name is empty after sanitization");return o}catch(s){throw s instanceof SyntaxError?new Error("Invalid JSON format"):s}}static getPresetById(e,s){return s.find(a=>a.id===e)}static isPresetActive(e,s,a){return s===`oxygen-custom-${e}`||a===`oxygen-custom-${e}`}static generatePresetPreview(e){var s,a,o,i;return{light:[p(e.light.base),p(e.light.accent),((s=e.light.colors)==null?void 0:s.bg1)||p(e.light.base),((a=e.light.colors)==null?void 0:a.tx1)||p(He(ie({},e.light.base),{l:Math.max(0,e.light.base.l-30)}))],dark:[p(e.dark.base),p(e.dark.accent),((o=e.dark.colors)==null?void 0:o.bg1)||p(e.dark.base),((i=e.dark.colors)==null?void 0:i.tx1)||p(He(ie({},e.dark.base),{l:Math.min(100,e.dark.base.l+30)}))]}}};var z=ee(require("obsidian"));function we(t,e){let s=e.base.h,a=e.base.s,o=e.base.l,i=e.accent.h,n=o>50,l={red:"#e74c3c",orange:"#e67e22",yellow:"#f39c12",green:"#27ae60",cyan:"#16a085",blue:"#3498db",purple:"#9b59b6",pink:"#e91e63"};if(l[t])return l[t];let d,r;switch(t){case"bg1":return p({h:s,s:a,l:o});case"bg2":return r=n?Math.max(0,o-5):Math.min(100,o+5),p({h:s,s:a,l:r});case"bg3":return r=n?Math.max(0,o-10):Math.min(100,o+10),p({h:s,s:a,l:r});case"ui1":return r=n?Math.max(0,o-15):Math.min(100,o+15),p({h:s,s:a,l:r});case"ui2":return r=n?Math.max(0,o-10):Math.min(100,o+10),p({h:s,s:a,l:r});case"ui3":return r=n?Math.max(0,o-5):Math.min(100,o+5),p({h:s,s:a,l:r});case"tx1":return d=Math.max(0,a-10),r=n?Math.max(0,o-87):Math.min(100,o+77),p({h:s,s:d,l:r});case"tx2":return d=Math.max(0,a-20),r=n?Math.max(0,o-53):Math.min(100,o+45),p({h:s,s:d,l:r});case"tx3":return d=Math.max(0,a-10),r=n?Math.max(0,o-78):Math.min(100,o+30),p({h:s,s:d,l:r});case"tx4":return d=Math.max(0,a-10),r=n?Math.max(0,o-48):Math.min(100,o+40),p({h:s,s:d,l:r});case"hl1":return p({h:i,s:50,l:40});case"hl2":return"#ffb150";default:return"#000000"}}function Re(t,e,s){let a=t.createEl("div",{cls:"hsl-controls"}),o=ie({},e),i=a.createEl("div",{cls:"color-preview-wrapper"}),n=i.createEl("div",{cls:"color-preview"});D(n,"--preview-color",p(o)),n.title="Click to pick a color with hex input";let l=i.createEl("input",{type:"color",cls:"hsl-color-input-overlay"});l.value=p(o);let d=()=>{let C=p(o);D(n,"--preview-color",C),l.value=C};l.onchange=()=>{let C=mt(l.value);o.h=C.h,o.s=C.s,o.l=C.l,h.value=C.h.toString(),c.textContent=C.h.toString(),b.value=C.s.toString(),g.textContent=C.s.toString(),v.value=C.l.toString(),A.textContent=C.l.toString(),d(),s(o)};let r=a.createEl("div",{cls:"hsl-control"});r.createEl("label",{text:"Hue"});let h=r.createEl("input",{type:"range"});h.min="0",h.max="360";let c=r.createEl("span",{text:e.h.toString()});h.value=e.h.toString(),h.oninput=()=>{o.h=parseInt(h.value),c.textContent=o.h.toString(),d(),s(o)};let u=a.createEl("div",{cls:"hsl-control"});u.createEl("label",{text:"Saturation"});let b=u.createEl("input",{type:"range"});b.min="0",b.max="100";let g=u.createEl("span",{text:e.s.toString()});b.value=e.s.toString(),b.oninput=()=>{o.s=parseInt(b.value),g.textContent=o.s.toString(),d(),s(o)};let M=a.createEl("div",{cls:"hsl-control"});M.createEl("label",{text:"Lightness"});let v=M.createEl("input",{type:"range"});v.min="0",v.max="100";let A=M.createEl("span",{text:e.l.toString()});v.value=e.l.toString(),v.oninput=()=>{o.l=parseInt(v.value),A.textContent=o.l.toString(),d(),s(o)}}function Fe(t,e,s,a,o,i){let n=t.createEl("div",{cls:"color-override collapsible-item"}),l=n.createEl("div",{cls:"override-header"}),d=l.createEl("input",{type:"checkbox"});l.createEl("label",{text:e});let r=l.createEl("div",{cls:"color-input-wrapper"}),h=r.createEl("div",{cls:"color-preview-swatch"}),c=r.createEl("input",{type:"color",cls:"hsl-color-input-overlay"});c.disabled=!0;let u=null,b=g=>{D(h,"--preview-color",g),c.value=g};if(a[s])d.checked=!0,c.disabled=!1,b(a[s]),u=a[s];else{let g=we(s,o);b(g),u=g}return c.onclick=()=>{if(!d.checked){d.checked=!0,c.disabled=!1;let g=u||a[s]||we(s,o);a[s]=g,b(g),u=g,i()}},d.onchange=()=>{if(d.checked){c.disabled=!1;let g=u||a[s]||we(s,o);a[s]=g,b(g),u=g}else c.disabled=!0,u=a[s]||u,delete a[s];i()},c.onchange=()=>{We(c.value)&&(a[s]=c.value,u=c.value,b(c.value),i())},c.oninput=()=>{We(c.value)&&(a[s]=c.value,u=c.value,b(c.value),i())},n}var be=class extends z.Modal{constructor(e,s,a,o){super(e);this.plugin=s,this.isEditing=a!==null,this.preset=a||this.createDefaultPreset(),this.onSave=o}createDefaultPreset(){return q.createPreset("New Preset","",this.plugin.settings.customPresets)}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("preset-editor-modal"),e.createEl("div",{cls:"modal-header"}).createEl("h2",{text:this.isEditing?"Edit preset":"Create new preset"});let a=e.createEl("div",{cls:"modal-section"});new z.Setting(a).setName("Preset name").setDesc("A unique name for your color preset").addText(c=>{this.nameInput=c.inputEl,c.setValue(this.preset.name).setPlaceholder("Enter preset name").onChange(u=>{this.preset.name=u,this.updatePreview()})}),new z.Setting(a).setName("Author (optional)").setDesc("Your name or the creator of this preset").addText(c=>{this.authorInput=c.inputEl,c.setValue(this.preset.author||"").setPlaceholder("Enter author name").onChange(u=>{this.preset.author=u})});let o=e.createEl("div",{cls:"modes-container"}),i=o.createEl("div",{cls:"mode-section"});i.createEl("h3",{text:"Light mode"}),this.buildModeContent(i,"light");let n=o.createEl("div",{cls:"mode-section"});n.createEl("h3",{text:"Dark mode"}),this.buildModeContent(n,"dark");let l=e.createEl("div",{cls:"modal-section"});l.createEl("h3",{text:"Preview"}),this.previewSwatch=l.createEl("div",{cls:"preview-swatch"}),this.updatePreview();let d=e.createEl("div",{cls:"modal-footer"}),r=d.createEl("button",{text:"Cancel",cls:"mod-cta"});r.onclick=()=>this.close();let h=d.createEl("button",{text:this.isEditing?"Update":"Create",cls:"mod-cta"});h.onclick=()=>this.savePreset()}buildModeContent(e,s){e.empty();let a=s==="light"?this.preset.light:this.preset.dark,o=e.createEl("div",{cls:"color-section"}),i=s==="light"?"Light theme colors":"Dark theme colors";o.createEl("h3",{text:i});let n=o.createEl("div",{cls:"color-group"});n.createEl("label",{text:"Base color"}),Re(n,a.base,y=>{s==="light"?this.preset.light.base=y:this.preset.dark.base=y,this.updatePreview()});let l=o.createEl("div",{cls:"color-group"});l.createEl("label",{text:"Accent color"}),Re(l,a.accent,y=>{s==="light"?this.preset.light.accent=y:this.preset.dark.accent=y,this.updatePreview()});let d=o.createEl("div",{cls:"color-group"});d.createEl("label",{text:"Colorful frame lightness override (optional)",cls:"frame-label"});let r=d.createEl("div",{cls:"setting-item-description frame-description"});r.textContent=s==="dark"?"Offset from accent lightness for colorful frame. Default: -25 (darkens by 25%). Leave empty for default.":"Offset from accent lightness for colorful frame. Default: +30 (brightens by 30%). Leave empty for default.";let h=d.createEl("input",{type:"number",cls:"frame-input"});h.placeholder=s==="dark"?"-25":"+30",h.min="-100",h.max="100",h.step="5",a.frameLightnessOffset!==void 0&&(h.value=a.frameLightnessOffset.toString()),h.oninput=()=>{let y=h.value.trim();if(y==="")s==="light"?delete this.preset.light.frameLightnessOffset:delete this.preset.dark.frameLightnessOffset;else{let x=parseInt(y);isNaN(x)||(s==="light"?this.preset.light.frameLightnessOffset=x:this.preset.dark.frameLightnessOffset=x)}this.updatePreview()};let c=e.createEl("div",{cls:"color-section"}),u=c.createEl("div",{cls:"collapsible-header"});u.createEl("h4",{text:"Advanced overrides (optional)"});let b=u.createEl("button",{cls:"collapse-toggle"});(0,z.setIcon)(b,"chevron-down"),a.colors||(a.colors={});let g=[],M=["bg1","bg2","bg3","ui1","ui2","ui3","tx1","tx2","tx3","tx4","hl1","hl2"],v=["Background 1","Background 2","Background 3","UI 1","UI 2","UI 3","Text 1","Text 2","Text 3","Text 4","Highlight 1","Highlight 2"],A=a.colors;M.forEach((y,x)=>{let _=Fe(c,v[x],y,A,a,()=>this.updatePreview());g.push(_),_.addClass("collapsible-content-item")}),b.onclick=()=>{let y=!g[0].classList.contains("expanded");g.forEach(x=>{y?x.addClass("expanded"):x.removeClass("expanded")}),(0,z.setIcon)(b,y?"chevron-up":"chevron-down")};let C=e.createEl("div",{cls:"color-section"}),G=C.createEl("div",{cls:"collapsible-header"});G.createEl("h4",{text:"Syntax colors (optional)"});let N=G.createEl("button",{cls:"collapse-toggle"});(0,z.setIcon)(N,"chevron-down");let R=["red","orange","yellow","green","cyan","blue","purple","pink"],W=[];R.forEach(y=>{let x=Fe(C,y.charAt(0).toUpperCase()+y.slice(1),y,A,a,()=>this.updatePreview());W.push(x),x.addClass("collapsible-content-item")}),N.onclick=()=>{let y=!W[0].classList.contains("expanded");W.forEach(x=>{y?x.addClass("expanded"):x.removeClass("expanded")}),(0,z.setIcon)(N,y?"chevron-up":"chevron-down")}}updatePreview(){this.previewSwatch.empty();let e=this.plugin.settings.customPresets.findIndex(v=>v.id===this.preset.id);if(e!==-1){this.plugin.settings.customPresets[e]=this.preset;let v=`oxygen-custom-${this.preset.id}`;(this.plugin.settings.lightScheme===v||this.plugin.settings.darkScheme===v)&&(this.plugin.updateStyle(),this.plugin.updateCustomPresetCSS())}let s=this.preset.light,a=this.preset.dark,o=p(s.base),i=p(s.accent),n=p(a.base),l=p(a.accent),d=this.previewSwatch.createEl("div",{cls:"preview-row"});d.createEl("div",{text:"Light mode",cls:"preview-label"});let r=d.createEl("div",{cls:"preview-colors"}),h=r.createEl("div",{cls:"preview-color"});h.setAttribute("data-color",o),D(h,"--preview-color",o);let c=r.createEl("div",{cls:"preview-color"});c.setAttribute("data-color",i),D(c,"--preview-color",i);let u=this.previewSwatch.createEl("div",{cls:"preview-row"});u.createEl("div",{text:"Dark mode",cls:"preview-label"});let b=u.createEl("div",{cls:"preview-colors"}),g=b.createEl("div",{cls:"preview-color"});g.setAttribute("data-color",n),D(g,"--preview-color",n);let M=b.createEl("div",{cls:"preview-color"});M.setAttribute("data-color",l),D(M,"--preview-color",l)}savePreset(){try{if(!this.preset.name.trim())throw new Error("Preset name is required");this.isEditing||(this.preset.id=q.createPreset(this.preset.name,this.preset.author||"",this.plugin.settings.customPresets).id),this.onSave(this.preset),this.close()}catch(e){console.error("Error saving preset:",e)}}onClose(){let{contentEl:e}=this;e.empty()}};var ke=ee(require("obsidian"));var ye=class extends ke.Modal{constructor(e,s,a){super(e);this.parsedPreset=null;this.plugin=s,this.onImport=a}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("preset-import-modal"),e.createEl("div",{cls:"modal-header"}).createEl("h2",{text:"Import custom preset"}),e.createEl("div",{cls:"modal-section"}).createEl("p",{text:"Paste a JSON preset below. You can export presets from this plugin or create them manually following the correct format."});let o=e.createEl("div",{cls:"modal-section"});o.createEl("h3",{text:"JSON preset data"}),new ke.Setting(o).setName("Preset JSON").setDesc("Paste the complete JSON preset data here").addTextArea(r=>{this.textArea=r.inputEl,this.textArea.addClass("preset-json-input"),r.setPlaceholder("Paste JSON preset data here...").onChange(h=>this.parseJSON(h))});let i=e.createEl("div",{cls:"modal-section"});i.createEl("h3",{text:"Preview"}),this.previewContainer=i.createEl("div",{cls:"preview-container"}),this.previewContainer.createEl("p",{text:"Enter valid JSON to see a preview of the preset",cls:"preview-placeholder"}),e.createEl("div",{cls:"modal-section error-section hidden"}).createEl("div",{cls:"error-message"});let l=e.createEl("div",{cls:"modal-footer"}),d=l.createEl("button",{text:"Cancel",cls:"mod-cta"});d.onclick=()=>this.close(),this.importButton=l.createEl("button",{text:"Import preset",cls:"mod-cta"}),this.importButton.disabled=!0,this.importButton.onclick=()=>this.importPreset()}parseJSON(e){let s=this.contentEl.querySelector(".error-section"),a=this.contentEl.querySelector(".error-message");if(this.parsedPreset=null,this.importButton.disabled=!0,s.addClass("hidden"),this.previewContainer.empty(),!e.trim()){this.previewContainer.createEl("p",{text:"Enter valid JSON to see a preview of the preset",cls:"preview-placeholder"});return}try{if(this.parsedPreset=q.importPresetFromJSON(e),this.plugin.settings.customPresets.find(i=>i.id===this.parsedPreset.id))throw new Error(`A preset with ID "${this.parsedPreset.id}" already exists. Please rename the preset.`);this.showPreview(this.parsedPreset),this.importButton.disabled=!1}catch(o){a.textContent=o instanceof Error?o.message:"Invalid JSON format",s.removeClass("hidden"),this.previewContainer.createEl("p",{text:"Fix the JSON errors above to see a preview",cls:"preview-error"})}}showPreview(e){this.previewContainer.empty();let s=this.previewContainer.createEl("div",{cls:"preset-info"}),a=s.createEl("div",{cls:"info-row"});if(a.createEl("strong",{text:"Name: "}),a.createEl("span",{text:e.name}),e.author){let w=s.createEl("div",{cls:"info-row"});w.createEl("strong",{text:"Author: "}),w.createEl("span",{text:e.author})}let o=s.createEl("div",{cls:"info-row"});o.createEl("strong",{text:"Version: "}),o.createEl("span",{text:e.version||"1.0.0"});let i=s.createEl("div",{cls:"info-row"});i.createEl("strong",{text:"ID: "}),i.createEl("span",{text:e.id,cls:"preset-id"});let n=this.previewContainer.createEl("div",{cls:"color-preview-section"});n.createEl("h4",{text:"Color preview"});let l=n.createEl("div",{cls:"mode-toggle"}),d=l.createEl("button",{text:"Light mode",cls:"mode-btn active"}),r=l.createEl("button",{text:"Dark mode",cls:"mode-btn"}),h=n.createEl("div",{cls:"swatch-container"}),c=h.createEl("div",{cls:"mode-swatches active"}),u=c.createEl("div",{cls:"color-swatch"}),b=`${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%`;u.setAttribute("data-hsl",b),D(u,"--swatch-hsl",b),u.title=`Base: hsl(${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%)`;let g=c.createEl("div",{cls:"color-swatch"}),M=`${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%`;g.setAttribute("data-hsl",M),D(g,"--swatch-hsl",M),g.title=`Accent: hsl(${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%)`;let v=h.createEl("div",{cls:"mode-swatches"}),A=v.createEl("div",{cls:"color-swatch"}),C=`${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%`;A.setAttribute("data-hsl",C),D(A,"--swatch-hsl",C),A.title=`Base: hsl(${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%)`;let G=v.createEl("div",{cls:"color-swatch"}),N=`${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%`;G.setAttribute("data-hsl",N),D(G,"--swatch-hsl",N),G.title=`Accent: hsl(${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%)`,d.onclick=()=>{d.classList.add("active"),r.classList.remove("active"),c.classList.add("active"),v.classList.remove("active")},r.onclick=()=>{r.classList.add("active"),d.classList.remove("active"),v.classList.add("active"),c.classList.remove("active")};let R=this.previewContainer.createEl("div",{cls:"color-details-section"});R.createEl("h4",{text:"Color values"});let W=R.createEl("div",{cls:"mode-details"});W.createEl("h5",{text:"Light mode"});let y=W.createEl("div",{cls:"color-detail"}),x=y.createEl("div",{cls:"detail-swatch"}),_=`${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%`;x.setAttribute("data-hsl",_),D(x,"--detail-hsl",_),y.createEl("span",{text:"Base: "}),y.createEl("span",{text:`hsl(${e.light.base.h}, ${e.light.base.s}%, ${e.light.base.l}%)`});let U=W.createEl("div",{cls:"color-detail"}),j=U.createEl("div",{cls:"detail-swatch"}),ne=`${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%`;j.setAttribute("data-hsl",ne),D(j,"--detail-hsl",ne),U.createEl("span",{text:"Accent: "}),U.createEl("span",{text:`hsl(${e.light.accent.h}, ${e.light.accent.s}%, ${e.light.accent.l}%)`});let te=R.createEl("div",{cls:"mode-details"});te.createEl("h5",{text:"Dark mode"});let se=te.createEl("div",{cls:"color-detail"}),re=se.createEl("div",{cls:"detail-swatch"}),de=`${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%`;re.setAttribute("data-hsl",de),D(re,"--detail-hsl",de),se.createEl("span",{text:"Base: "}),se.createEl("span",{text:`hsl(${e.dark.base.h}, ${e.dark.base.s}%, ${e.dark.base.l}%)`});let Y=te.createEl("div",{cls:"color-detail"}),X=Y.createEl("div",{cls:"detail-swatch"}),Z=`${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%`;X.setAttribute("data-hsl",Z),D(X,"--detail-hsl",Z),Y.createEl("span",{text:"Accent: "}),Y.createEl("span",{text:`hsl(${e.dark.accent.h}, ${e.dark.accent.s}%, ${e.dark.accent.l}%)`});let ae=Object.keys(e.light.colors||{}).length,Q=Object.keys(e.dark.colors||{}).length;(ae>0||Q>0)&&this.previewContainer.createEl("div",{cls:"overrides-info"}).createEl("p",{text:`Custom overrides: ${ae} light mode, ${Q} dark mode`})}importPreset(){this.parsedPreset&&(this.onImport(this.parsedPreset),this.close())}onClose(){let{contentEl:e}=this;e.empty()}};var pt=ee(require("obsidian")),xe=class extends pt.Modal{constructor(e,s,a,o="Yes",i="Cancel"){super(e);this.title=s,this.message=a,this.confirmText=o,this.cancelText=i}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.title}),e.createEl("p",{text:this.message});let s=e.createDiv("modal-button-container");s.createEl("button",{text:this.cancelText,cls:"mod-cta"}).addEventListener("click",()=>{this.close(),this.resolve(!1)});let o=s.createEl("button",{text:this.confirmText,cls:"mod-cta confirm-button"});o.addEventListener("click",()=>{this.close(),this.resolve(!0)}),o.focus()}onClose(){let{contentEl:e}=this;e.empty()}static show(e,s,a,o="Yes",i="Cancel"){return m(this,null,function*(){return new Promise(n=>{let l=new xe(e,s,a,o,i);l.resolve=n,l.open()})})}};function bt(t,e,s,a){let o=H(t,"Custom color schemes");if(o.addSetting(i=>i.setName("Enable custom presets").setDesc("Allow creation and use of custom color presets").addToggle(n=>n.setValue(e.settings.enableCustomPresets).onChange(l=>m(this,null,function*(){if(e.settings.enableCustomPresets=l,!l){let d=!1;e.settings.lightScheme.startsWith("oxygen-custom-")&&(e.settings.lightScheme="oxygen-oxygen-light",d=!0),e.settings.darkScheme.startsWith("oxygen-custom-")&&(e.settings.darkScheme="oxygen-oxygen-dark",d=!0),d&&(e.updateStyle(),e.updateCustomPresetCSS())}yield e.saveData(e.settings),a()})))),!!e.settings.enableCustomPresets){if(o.addSetting(i=>i.setName("Create new preset").setDesc("Design a custom color scheme from scratch").addExtraButton(n=>n.setIcon("plus").setTooltip("Create new preset").onClick(()=>yt(s,e,null,a)))),o.addSetting(i=>i.setName("Import preset").setDesc("Import a preset from JSON data").addExtraButton(n=>n.setIcon("download").setTooltip("Import preset").onClick(()=>Ut(s,e,a)))),t.createEl("br"),e.settings.customPresets.length>0){let i=t.createEl("div",{cls:"custom-presets-list"});e.settings.customPresets.sort((n,l)=>n.name.localeCompare(l.name)).forEach(n=>{zt(i,n,s,e,a)})}else t.createEl("div",{cls:"custom-presets-empty"}).createEl("p",{text:"No custom presets yet. Create your first preset to get started!",cls:"empty-message"});t.createEl("br")}}function zt(t,e,s,a,o){let i=t.createEl("div",{cls:"custom-preset-item"}),n=i.createEl("div",{cls:"preset-info"}),l=ht(e);n.appendChild(l);let d=n.createEl("div",{cls:"preset-details"});d.createEl("div",{text:e.name,cls:"preset-name"}),e.author&&d.createEl("div",{text:`by ${e.author}`,cls:"preset-author"}),d.createEl("div",{text:e.id,cls:"preset-id preset-id-display"}),new ft.Setting(i).setName("").setDesc("").addExtraButton(r=>r.setIcon("edit").setTooltip("Edit preset").onClick(()=>yt(s,a,e,o))).addExtraButton(r=>r.setIcon("download").setTooltip("Export preset").onClick(()=>Yt(e))).addExtraButton(r=>r.setIcon("trash").setTooltip("Delete preset").onClick(()=>m(this,null,function*(){return yield Kt(s,a,e,o)})))}function yt(t,e,s,a){new be(t,e,s,i=>{if(s){let l=e.settings.customPresets.findIndex(d=>d.id===s.id);l!==-1&&(e.settings.customPresets[l]=i)}else e.settings.customPresets.push(i);e.saveData(e.settings);let n=`oxygen-custom-${i.id}`;(e.settings.lightScheme===n||e.settings.darkScheme===n)&&(e.updateStyle(),e.updateCustomPresetCSS()),a()}).open()}function Ut(t,e,s){new ye(t,e,o=>{e.settings.customPresets.push(o),e.saveData(e.settings),s()}).open()}function Yt(t){let e=q.exportPresetAsJSON(t),s=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`${t.id}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}function Kt(t,e,s,a){return m(this,null,function*(){if(q.isPresetActive(s.id,e.settings.lightScheme,e.settings.darkScheme)){if(!(yield xe.show(t,"Delete active preset","This preset is currently active. Deleting it will switch to the default scheme. Continue?","Delete")))return;e.settings.lightScheme===`oxygen-custom-${s.id}`&&(e.settings.lightScheme="oxygen-oxygen-light"),e.settings.darkScheme===`oxygen-custom-${s.id}`&&(e.settings.darkScheme="oxygen-oxygen-dark")}e.settings.customPresets=e.settings.customPresets.filter(i=>i.id!==s.id),yield e.saveData(e.settings),e.updateStyle(),e.updateCustomPresetCSS(),a()})}function xt(t,e){let s=H(t,"Animations"),a;s.addSetting(o=>{o.setName("Animation personality").setDesc("Choose the animation style: Default (smooth), Playful (bouncy), or Off (disabled).").addDropdown(i=>i.addOption("default","Default").addOption("playful","Playful").addOption("off","Off").setValue(e.settings.animationPersonality||"default").onChange(n=>m(this,null,function*(){e.settings.animationPersonality=n,yield e.saveData(e.settings),e.refresh(),a&&(a.settingEl.style.display=n==="off"?"none":"")})))}),s.addSetting(o=>{a=o,o.setName("Animation speed").setDesc("Control the speed of animations. Range: 0 (disabled) to 2 (half speed / slower). Default: 1 (normal speed). Lower values = faster animations, higher values = slower animations.").addSlider(i=>i.setLimits(0,2,.1).setValue(e.settings.animationSpeed).setDynamicTooltip().onChange(n=>m(this,null,function*(){e.settings.animationSpeed=n,yield e.saveData(e.settings),e.refresh()}))),e.settings.animationPersonality==="off"&&(a.settingEl.style.display="none")})}var Ve=class extends vt.PluginSettingTab{constructor(e,s){super(e,s);this.plugin=s}display(){let{containerEl:e}=this;e.empty(),nt(e,this.plugin),bt(e,this.plugin,this.app,()=>this.display()),rt(e,this.plugin),xt(e,this.plugin),dt(e,this.plugin),lt(e,this.plugin),ct(e,this.plugin)}};var ze=class{static generateProperties(e,s){let a=s==="light"?e.light:e.dark,o=a.base.h,i=a.base.s,n=a.base.l,l=a.accent.h,d=a.accent.s,r=a.accent.l,h=s==="light",c=n>50,u=`hsl(${o}, ${i}%, ${n}%)`,b=`hsl(${o}, ${i}%, ${c?Math.max(0,n-5):Math.min(100,n+5)}%)`,g=`hsl(${o}, ${i}%, ${c?Math.max(0,n-10):Math.min(100,n+10)}%)`,M=c?Math.max(0,n-15):Math.min(100,n+15),v=c?Math.max(0,n-10):Math.min(100,n+10),A=c?Math.max(0,n-5):Math.min(100,n+5),C=`hsl(${o}, ${i}%, ${M}%)`,G=`hsl(${o}, ${i}%, ${v}%)`,N=`hsl(${o}, ${i}%, ${A}%)`,R=c?15:85,W=c?25:75,y=c?35:65,x=c?30:70,_=`hsl(${o}, ${Math.max(0,i-10)}%, ${R}%)`,U=`hsl(${o}, ${Math.max(0,i-20)}%, ${W}%)`,j=`hsl(${o}, ${Math.max(0,i-10)}%, ${y}%)`,ne=`hsl(${o}, ${Math.max(0,i-10)}%, ${x}%)`,te=`hsla(${l}, 50%, 40%, 30%)`,se="rgba(255, 177, 80, 0.3)",re=h?"white":"black",de=(O,k,E)=>{O=O/360,k=k/100,E=E/100;let L=(oe,pe,I)=>(I<0&&(I+=1),I>1&&(I-=1),I<1/6?oe+(pe-oe)*6*I:I<1/2?pe:I<2/3?oe+(pe-oe)*(2/3-I)*6:oe);if(k===0)return[E,E,E];let T=E<.5?E*(1+k):E+k-E*k,V=2*E-T,le=L(V,T,O+1/3),ue=L(V,T,O),$e=L(V,T,O-1/3);return[le,ue,$e]},[Y,X,Z]=de(l,d,r),Q=.2126*(Y<=.03928?Y/12.92:Math.pow((Y+.055)/1.055,2.4))+.7152*(X<=.03928?X/12.92:Math.pow((X+.055)/1.055,2.4))+.0722*(Z<=.03928?Z/12.92:Math.pow((Z+.055)/1.055,2.4))>.5?"black":"white",w={"--base-h":`${o}`,"--base-s":`${i}%`,"--base-l":`${n}%`,"--accent-h":`${l}`,"--accent-s":`${d}%`,"--accent-l":`${r}%`,"--bg1":u,"--bg2":b,"--bg-tab":b,"--bg3":g,"--ui1":C,"--ui2":G,"--ui3":N,"--tx1":_,"--tx2":U,"--tx3":j,"--tx4":ne,"--hl1":te,"--hl2":se,"--sp1":re,"--text-on-accent":Q},K=d,F=c?55:65;if(w["--color-red"]=`hsl(0, ${K}%, ${F}%)`,w["--color-orange"]=`hsl(25, ${K}%, ${F}%)`,w["--color-yellow"]=`hsl(50, ${K}%, ${F}%)`,w["--color-green"]=`hsl(130, ${K}%, ${F}%)`,w["--color-cyan"]=`hsl(180, ${K}%, ${F}%)`,w["--color-blue"]=`hsl(220, ${K}%, ${F}%)`,w["--color-purple"]=`hsl(280, ${K}%, ${F}%)`,w["--color-pink"]=`hsl(330, ${K}%, ${F}%)`,a.frameLightnessOffset!==void 0){let O=r+a.frameLightnessOffset;w["--frame-background-l"]=`${O}%`}return a.colors&&["bg1","bg2","bg3","ui1","ui2","ui3","tx1","tx2","tx3","tx4","hl1","hl2","red","orange","yellow","green","cyan","blue","purple","pink"].forEach(k=>{var L;let E=(L=a.colors)==null?void 0:L[k];if(E)switch(k){case"bg1":case"bg2":case"bg3":case"ui1":case"ui2":case"ui3":case"tx1":case"tx2":case"tx3":case"tx4":case"hl1":case"hl2":w[`--${k}`]=E;break;default:w[`--color-${k}`]=E;break}}),w}static generateCSS(e,s){let a=s==="light"?e.light:e.dark,o=s==="light"?"theme-light":"theme-dark",i=`oxygen-custom-${e.id}`,n=`.${o}.${i} {
`,l=a.base.h,d=a.base.s,r=a.base.l,h=a.accent.h,c=a.accent.s,u=a.accent.l,b=s==="light",g=r>50,M=`hsl(${l}, ${d}%, ${r}%)`,v=`hsl(${l}, ${d}%, ${g?Math.max(0,r-5):Math.min(100,r+5)}%)`,A=`hsl(${l}, ${d}%, ${g?Math.max(0,r-10):Math.min(100,r+10)}%)`,C=g?Math.max(0,r-15):Math.min(100,r+15),G=g?Math.max(0,r-10):Math.min(100,r+10),N=g?Math.max(0,r-5):Math.min(100,r+5),R=`hsl(${l}, ${d}%, ${C}%)`,W=`hsl(${l}, ${d}%, ${G}%)`,y=`hsl(${l}, ${d}%, ${N}%)`,x=g?15:85,_=g?25:75,U=g?35:65,j=g?30:70,ne=`hsl(${l}, ${Math.max(0,d-10)}%, ${x}%)`,te=`hsl(${l}, ${Math.max(0,d-20)}%, ${_}%)`,se=`hsl(${l}, ${Math.max(0,d-10)}%, ${U}%)`,re=`hsl(${l}, ${Math.max(0,d-10)}%, ${j}%)`,de=`hsla(${h}, 50%, 40%, 30%)`,Y="rgba(255, 177, 80, 0.3)",X=b?"white":"black",Z=(E,L,T)=>{E=E/360,L=L/100,T=T/100;let V=(I,_e,J)=>(J<0&&(J+=1),J>1&&(J-=1),J<1/6?I+(_e-I)*6*J:J<1/2?_e:J<2/3?I+(_e-I)*(2/3-J)*6:I);if(L===0)return[T,T,T];let le=T<.5?T*(1+L):T+L-T*L,ue=2*T-le,$e=V(ue,le,E+1/3),oe=V(ue,le,E),pe=V(ue,le,E-1/3);return[$e,oe,pe]},[ae,Q,w]=Z(h,c,u),F=.2126*(ae<=.03928?ae/12.92:Math.pow((ae+.055)/1.055,2.4))+.7152*(Q<=.03928?Q/12.92:Math.pow((Q+.055)/1.055,2.4))+.0722*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))>.5?"black":"white";n+=`  --base-h: ${l};
`,n+=`  --base-s: ${d}%;
`,n+=`  --base-l: ${r}%;
`,n+=`
`,n+=`  --accent-h: ${h};
`,n+=`  --accent-s: ${c}%;
`,n+=`  --accent-l: ${u}%;
`,n+=`
`,n+=`  --bg1: ${M};
`,n+=`  --bg2: ${v};
`,n+=`  --bg-tab: ${v};
`,n+=`  --bg3: ${A};
`,n+=`
`,n+=`  --ui1: ${R};
`,n+=`  --ui2: ${W};
`,n+=`  --ui3: ${y};
`,n+=`
`,n+=`  --tx1: ${ne};
`,n+=`  --tx2: ${te};
`,n+=`  --tx3: ${se};
`,n+=`  --tx4: ${re};
`,n+=`
`,n+=`  --hl1: ${de};
`,n+=`  --hl2: ${Y};
`,n+=`
`,n+=`  --sp1: ${X};
`,n+=`
`,n+=`  --text-on-accent: ${F};
`,n+=`
`;let O=c,k=g?55:65;return n+=`  --color-red: hsl(0, ${O}%, ${k}%);
`,n+=`  --color-orange: hsl(25, ${O}%, ${k}%);
`,n+=`  --color-yellow: hsl(50, ${O}%, ${k}%);
`,n+=`  --color-green: hsl(130, ${O}%, ${k}%);
`,n+=`  --color-cyan: hsl(180, ${O}%, ${k}%);
`,n+=`  --color-blue: hsl(220, ${O}%, ${k}%);
`,n+=`  --color-purple: hsl(280, ${O}%, ${k}%);
`,n+=`  --color-pink: hsl(330, ${O}%, ${k}%);
`,n+=`
`,a.frameLightnessOffset!==void 0&&(n+=`  --frame-background-l: ${u+a.frameLightnessOffset}%;
`,n+=`
`),a.colors&&["bg1","bg2","bg3","ui1","ui2","ui3","tx1","tx2","tx3","tx4","hl1","hl2","red","orange","yellow","green","cyan","blue","purple","pink"].forEach(L=>{var V;let T=(V=a.colors)==null?void 0:V[L];if(T)switch(L){case"bg1":case"bg2":case"bg3":case"ui1":case"ui2":case"ui3":case"tx1":case"tx2":case"tx3":case"tx4":case"hl1":case"hl2":n+=`  --${L}: ${T};
`;break;default:n+=`  --color-${L}: ${T};
`;break}}),n+=`}
`,n}};var Ue=class{constructor(e){this.isUpdating=!1;this.plugin=e}initialize(){!this.plugin.isOxygenThemeActive()||this.updateCSS()}updateCSS(){if(this.isUpdating||!this.plugin.isOxygenThemeActive())return;this.isUpdating=!0,Array.from(document.body.classList).filter(l=>l.startsWith("oxygen-custom-")).forEach(l=>document.body.classList.remove(l)),["--base-h","--base-s","--base-l","--accent-h","--accent-s","--accent-l","--bg1","--bg2","--bg-tab","--bg3","--ui1","--ui2","--ui3","--tx1","--tx2","--tx3","--tx4","--hl1","--hl2","--sp1","--text-on-accent","--color-red","--color-orange","--color-yellow","--color-green","--color-cyan","--color-blue","--color-purple","--color-pink","--frame-background-l"].forEach(l=>{document.body.style.removeProperty(l)});let a=this.plugin.settings.customPresets.find(l=>this.plugin.settings.lightScheme===`oxygen-custom-${l.id}`),o=this.plugin.settings.customPresets.find(l=>this.plugin.settings.darkScheme===`oxygen-custom-${l.id}`),i=document.body.classList.contains("theme-light"),n=i?a:o;if(n){let l=`oxygen-custom-${n.id}`;document.body.classList.add(l);let d=i?"light":"dark",r=ze.generateProperties(n,d);me(document.body,r)}setTimeout(()=>{this.isUpdating=!1},50)}cleanup(){Array.from(document.body.classList).filter(a=>a.startsWith("oxygen-custom-")).forEach(a=>document.body.classList.remove(a)),["--base-h","--base-s","--base-l","--accent-h","--accent-s","--accent-l","--bg1","--bg2","--bg-tab","--bg3","--ui1","--ui2","--ui3","--tx1","--tx2","--tx3","--tx4","--hl1","--hl2","--sp1","--text-on-accent","--color-red","--color-orange","--color-yellow","--color-green","--color-cyan","--color-blue","--color-purple","--color-pink","--frame-background-l"].forEach(a=>{document.body.style.removeProperty(a)})}};var Ye={PLUGIN_THEME:"oxygen-theme",THEME_LIGHT:"theme-light",THEME_DARK:"theme-dark",CUSTOM_PRESETS_STYLE:"oxygen-custom-presets",THEME_OVERRIDE:"data-theme-override"},Te=["oxygen-light","oxygen-light-tonal","oxygen-light-contrast","oxygen-light-white"],Pe=["oxygen-dark","oxygen-dark-tonal","oxygen-dark-black"],ve=["oxygen-oxygen-light","oxygen-minimal-light","oxygen-atom-light","oxygen-ayu-light","oxygen-catppuccin-light","oxygen-eink-light","oxygen-everforest-light","oxygen-flexoki-light","oxygen-gruvbox-light","oxygen-macos-light","oxygen-nord-light","oxygen-rose-pine-light","oxygen-notion-light","oxygen-solarized-light","oxygen-things-light"],Se=["oxygen-oxygen-dark","oxygen-minimal-dark","oxygen-atom-dark","oxygen-ayu-dark","oxygen-catppuccin-dark","oxygen-dracula-dark","oxygen-eink-dark","oxygen-everforest-dark","oxygen-flexoki-dark","oxygen-gruvbox-dark","oxygen-macos-dark","oxygen-nord-dark","oxygen-rose-pine-dark","oxygen-notion-dark","oxygen-solarized-dark","oxygen-things-dark"];var Le=["table-100","table-default-width","table-wide","table-max"],De=["iframe-100","iframe-default-width","iframe-wide","iframe-max"],Me=["img-100","img-default-width","img-wide","img-max"],Oe=["map-100","map-default-width","map-wide","map-max"],Ae=["chart-100","chart-default-width","chart-wide","chart-max"],f={INCREASE_FONT:"increase-body-font-size",DECREASE_FONT:"decrease-body-font-size",CYCLE_DARK_STYLE:"toggle-minimal-dark-cycle",CYCLE_LIGHT_STYLE:"toggle-minimal-light-cycle",TOGGLE_BORDERS:"toggle-hidden-borders",TOGGLE_COLORFUL_HEADINGS:"toggle-colorful-headings",TOGGLE_FOCUS_MODE:"toggle-minimal-focus-mode",TOGGLE_COLORFUL_FRAME:"toggle-minimal-colorful-frame",TOGGLE_IMAGE_GRID:"toggle-minimal-img-grid",TOGGLE_THEME:"toggle-minimal-switch",CYCLE_TABLE_WIDTH:"cycle-minimal-table-width",CYCLE_IMAGE_WIDTH:"cycle-minimal-image-width",CYCLE_IFRAME_WIDTH:"cycle-minimal-iframe-width",CYCLE_CHART_WIDTH:"cycle-minimal-chart-width",CYCLE_MAP_WIDTH:"cycle-minimal-map-width",LIGHT_DEFAULT:"toggle-minimal-light-default",LIGHT_WHITE:"toggle-minimal-light-white",LIGHT_TONAL:"toggle-minimal-light-tonal",LIGHT_CONTRAST:"toggle-minimal-light-contrast",DARK_DEFAULT:"toggle-minimal-dark-default",DARK_TONAL:"toggle-minimal-dark-tonal",DARK_BLACK:"toggle-minimal-dark-black",CREATE_PRESET:"create-custom-preset",IMPORT_PRESET:"import-custom-preset",CYCLE_PRESETS_LIGHT:"cycle-custom-presets-light",CYCLE_PRESETS_DARK:"cycle-custom-presets-dark",DEV_BLOCK_WIDTH:"toggle-minimal-dev-block-width",OPEN_SETTINGS:"oxygen-settings:open-settings"};var Ke={FONT_SIZE_NORMAL:16,FONT_SIZE_SMALL:13,LINE_HEIGHT:1.5,LINE_WIDTH:40,LINE_WIDTH_WIDE:50,MAX_WIDTH:88,FONT_STEP:.5},he={BASE_FONT_SIZE:"baseFontSize",FOLD_HEADING:"foldHeading",SHOW_LINE_NUMBER:"showLineNumber",READABLE_LINE_LENGTH:"readableLineLength",THEME:"theme"},B={LIGHT:"moonstone",DARK:"obsidian",SYSTEM:"system"},St="Oxygen";var Je={"oxygen-oxygen-light":"Oxygen","oxygen-minimal-light":"Minimal","oxygen-atom-light":"Atom","oxygen-ayu-light":"Ayu","oxygen-catppuccin-light":"Catppuccin","oxygen-eink-light":"E-ink (beta)","oxygen-everforest-light":"Everforest","oxygen-flexoki-light":"Flexoki","oxygen-gruvbox-light":"Gruvbox","oxygen-macos-light":"macOS","oxygen-nord-light":"Nord","oxygen-rose-pine-light":"Ros\xE9 Pine","oxygen-notion-light":"Sky","oxygen-solarized-light":"Solarized","oxygen-things-light":"Things","oxygen-oxygen-dark":"Oxygen","oxygen-minimal-dark":"Minimal","oxygen-atom-dark":"Atom","oxygen-ayu-dark":"Ayu","oxygen-catppuccin-dark":"Catppuccin","oxygen-dracula-dark":"Dracula","oxygen-eink-dark":"E-ink (beta)","oxygen-everforest-dark":"Everforest","oxygen-flexoki-dark":"Flexoki","oxygen-gruvbox-dark":"Gruvbox","oxygen-macos-dark":"macOS","oxygen-nord-dark":"Nord","oxygen-rose-pine-dark":"Ros\xE9 Pine","oxygen-notion-dark":"Sky","oxygen-solarized-dark":"Solarized","oxygen-things-dark":"Things"};function S(t,e){return t.vault.getConfig(e)}function P(t,e,s){t.vault.setConfig(e,s)}function $(t,e){t.setTheme(e)}function Ct(t,e){return t.vault.on("config-changed",e)}function Et(t){let e=t;typeof e.updateFontSize=="function"&&e.updateFontSize()}var qe=ee(require("obsidian")),je=class{constructor(e){this.cssObserver=null;this.tabObserver=null;this.sidebarObserver=null;this.plugin=e,this.customPresetCSS=new Ue(e)}detectOS(){return qe.Platform.isMacOS?"macos":qe.Platform.isWin?"windows":"neutral"}initialize(){this.loadRules(),this.plugin.settings.autoHideTabBarWhenSingleTab&&this.setupTabObserver()}initializeCustomPresets(){this.customPresetCSS.initialize()}cleanup(){this.unloadRules(),this.removeStyle(),this.removeSettings(),this.removeLightScheme(),this.removeDarkScheme(),this.customPresetCSS.cleanup(),this.cssObserver&&(this.cssObserver.disconnect(),this.cssObserver=null),this.cleanupTabObserver()}refresh(){!this.plugin.isOxygenThemeActive()||this.updateStyle()}updateCustomPresetCSS(){this.customPresetCSS.updateCSS()}updateStyle(){if(!this.plugin.isOxygenThemeActive())return;this.removeStyle(),this.removeSettings(),this.plugin.settings.lightStyle&&this.plugin.settings.lightStyle.trim()&&document.body.addClass(this.plugin.settings.lightStyle),this.plugin.settings.darkStyle&&this.plugin.settings.darkStyle.trim()&&document.body.addClass(this.plugin.settings.darkStyle);try{document.body.classList.contains("theme-light")?this.updateLightScheme():document.body.classList.contains("theme-dark")?this.updateDarkScheme():(document.body.addClass("theme-light"),this.updateLightScheme())}catch(n){console.error("Error updating schemes:",n)}let e=this.plugin.settings.workspaceBorders;if(e==="enhanced"?document.body.classList.remove("borders-none","borders-on"):e==="default"?(document.body.classList.remove("borders-none"),document.body.classList.add("borders-on")):e==="none"&&(document.body.classList.remove("borders-on"),document.body.classList.add("borders-none")),document.body.classList.toggle("colorful-headings",this.plugin.settings.colorfulHeadings),document.body.classList.toggle("colorful-frame",this.plugin.settings.colorfulFrame),document.body.classList.toggle("colorful-active",this.plugin.settings.colorfulActiveStates),document.body.classList.toggle("oxygen-focus-mode",this.plugin.settings.focusMode),document.body.classList.toggle("enable-blur",this.plugin.settings.enableBlur),document.body.classList.toggle("links-int-on",this.plugin.settings.underlineInternal),document.body.classList.toggle("links-ext-on",this.plugin.settings.underlineExternal),document.body.classList.toggle("full-width-media",this.plugin.settings.fullWidthMedia),document.body.classList.toggle("img-grid",this.plugin.settings.imgGrid),document.body.classList.toggle("oxygen-dev-block-width",this.plugin.settings.devBlockWidth),document.body.classList.toggle("oxygen-status-off",!this.plugin.settings.minimalStatus),document.body.classList.toggle("full-file-names",!this.plugin.settings.trimNames),document.body.classList.toggle("labeled-nav",this.plugin.settings.labeledNav),document.body.classList.toggle("oxygen-folding",this.plugin.settings.folding),document.body.classList.toggle("deemphasize-properties",this.plugin.settings.deemphasizeProperties),document.body.classList.toggle("auto-hide-tab-bar-when-single-tab",this.plugin.settings.autoHideTabBarWhenSingleTab),this.plugin.settings.autoHideTabBarWhenSingleTab){this.setupTabObserver();let n=this.detectOS();document.body.classList.remove("auto-hide-tab-bar-windows","auto-hide-tab-bar-macos","auto-hide-tab-bar-neutral"),document.body.classList.add(`auto-hide-tab-bar-${n}`)}else this.cleanupTabObserver(),document.body.classList.remove("auto-hide-tab-bar-windows","auto-hide-tab-bar-macos","auto-hide-tab-bar-neutral");document.body.addClass(this.plugin.settings.chartWidth,this.plugin.settings.tableWidth,this.plugin.settings.imgWidth,this.plugin.settings.iframeWidth,this.plugin.settings.mapWidth);let s={"--font-ui-small":`${this.plugin.settings.textSmall}px`,"--line-height":String(this.plugin.settings.lineHeight),"--line-width":`${this.plugin.settings.lineWidth}rem`,"--line-width-wide":`${this.plugin.settings.lineWidthWide}rem`,"--max-width":`${this.plugin.settings.maxWidth}%`,"--font-editor-override":this.plugin.settings.editorFont},a=this.plugin.settings.navIndentationGuideWidth==="0px",o=this.plugin.settings.navIndentationGuideColor==="rgba(var(--mono-rgb-100), 0.12)";a?document.body.style.removeProperty("--nav-indentation-guide-width"):s["--nav-indentation-guide-width"]=this.plugin.settings.navIndentationGuideWidth,o?document.body.style.removeProperty("--nav-indentation-guide-color"):s["--nav-indentation-guide-color"]=this.plugin.settings.navIndentationGuideColor,me(document.body,s),document.body.classList.remove("animations-refined","animations-default","animations-playful","animations-off");let i=this.plugin.settings.animationPersonality||"default";i==="off"?(document.body.classList.add("animations-off"),document.body.style.removeProperty("--anim-speed-modifier")):i==="playful"?(document.body.classList.add("animations-playful"),document.body.style.setProperty("--anim-speed-modifier",this.plugin.settings.animationSpeed.toString())):(document.body.classList.add("animations-default"),document.body.style.setProperty("--anim-speed-modifier",this.plugin.settings.animationSpeed.toString())),this.customPresetCSS.updateCSS()}updateLightStyle(){if(!this.plugin.isOxygenThemeActive())return;document.body.removeClass("theme-dark","minimal-light","minimal-light-tonal","minimal-light-contrast","minimal-light-white"),document.body.addClass("theme-light",this.plugin.settings.lightStyle),S(this.plugin.app,"theme")!=="system"&&($(this.plugin.app,"moonstone"),P(this.plugin.app,"theme","moonstone")),this.plugin.app.workspace.trigger("css-change")}updateDarkStyle(){if(!this.plugin.isOxygenThemeActive())return;document.body.removeClass("theme-light","minimal-dark","minimal-dark-tonal","minimal-dark-black"),document.body.addClass("theme-dark",this.plugin.settings.darkStyle),S(this.plugin.app,"theme")!=="system"&&($(this.plugin.app,"obsidian"),P(this.plugin.app,"theme","obsidian")),this.plugin.app.workspace.trigger("css-change")}updateLightScheme(){!this.plugin.isOxygenThemeActive()||(this.removeLightScheme(),this.removeDarkScheme(),document.body.classList.contains("theme-light")||(document.body.removeClass("theme-dark"),document.body.addClass("theme-light")),this.plugin.settings.lightScheme&&this.plugin.settings.lightScheme.trim()&&document.body.addClass(this.plugin.settings.lightScheme))}updateDarkScheme(){!this.plugin.isOxygenThemeActive()||(this.removeDarkScheme(),this.removeLightScheme(),document.body.classList.contains("theme-dark")||(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")),this.plugin.settings.darkScheme&&this.plugin.settings.darkScheme.trim()&&document.body.addClass(this.plugin.settings.darkScheme))}removeStyle(){document.body.removeClass("oxygen-light","oxygen-light-tonal","oxygen-light-contrast","oxygen-light-white","oxygen-dark","oxygen-dark-tonal","oxygen-dark-black")}removeLightScheme(){document.body.removeClass(...ve),this.plugin.settings.customPresets.forEach(e=>{document.body.removeClass(`oxygen-custom-${e.id}`)})}removeDarkScheme(){document.body.removeClass(...Se),this.plugin.settings.customPresets.forEach(e=>{document.body.removeClass(`oxygen-custom-${e.id}`)})}removeSettings(){document.body.removeClass("borders-none","borders-on","colorful-headings","colorful-frame","colorful-active","oxygen-focus-mode","links-int-on","links-ext-on","full-width-media","img-grid","oxygen-dev-block-width","oxygen-status-off","full-file-names","labeled-nav","oxygen-folding","deemphasize-properties","auto-hide-tab-bar-when-single-tab","enable-blur","animations-refined","animations-default","animations-playful","animations-off","table-wide","table-max","table-100","table-default-width","iframe-wide","iframe-max","iframe-100","iframe-default-width","img-wide","img-max","img-100","img-default-width","chart-wide","chart-max","chart-100","chart-default-width","map-wide","map-max","map-100","map-default-width")}loadRules(){!this.plugin.isOxygenThemeActive()||(document.body.classList.add(Ye.PLUGIN_THEME),this.updateStyle())}unloadRules(){document.body.style.removeProperty("--font-ui-small"),document.body.style.removeProperty("--line-height"),document.body.style.removeProperty("--line-width"),document.body.style.removeProperty("--line-width-wide"),document.body.style.removeProperty("--max-width"),document.body.style.removeProperty("--font-editor-override"),document.body.style.removeProperty("--nav-indentation-guide-width"),document.body.style.removeProperty("--nav-indentation-guide-color"),document.body.style.removeProperty("--anim-speed-modifier"),document.body.classList.remove(Ye.PLUGIN_THEME)}setupCSSWatcher(){}setupTabObserver(){if(this.tabObserver)return;let e=()=>{document.querySelectorAll(".mod-root").forEach(d=>{let r=d.querySelector(".workspace-tabs:not(.mod-stacked)");if(r){let c=r.querySelectorAll(".workspace-tab-header").length===1,u=document.querySelector(".workspace-split.mod-left-split")||document.querySelector(".mod-left-split"),b=document.querySelector(".workspace-split.mod-right-split")||document.querySelector(".mod-right-split"),g=u?u.classList.contains("is-sidedock-collapsed"):!1,M=b?b.classList.contains("is-sidedock-collapsed"):!1,v=this.plugin.app.workspace.leftSplit,A=this.plugin.app.workspace.rightSplit,C=v.collapsed,G=A.collapsed,N=x=>x?x.getBoundingClientRect().width:0,R=N(u),W=N(b);d.querySelectorAll(".view-header .view-actions").forEach(x=>{let _=x,U=_.style.getPropertyValue("display"),j=_.style.getPropertyPriority("display");U==="none"&&j==="important"&&_.style.removeProperty("display")}),d.classList.remove("has-single-tab","has-single-tab-left-collapsed","has-single-tab-right-collapsed"),c&&(d.classList.add("has-single-tab"),g&&d.classList.add("has-single-tab-left-collapsed"),M&&d.classList.add("has-single-tab-right-collapsed"))}})},s=null,a=()=>{s&&clearTimeout(s),s=window.setTimeout(()=>{e(),s=null},150)};setTimeout(e,100),this.tabObserver=new MutationObserver(()=>{a()});let o=document.querySelector(".workspace");o&&this.tabObserver.observe(o,{childList:!0,subtree:!0}),this.plugin.registerEvent(this.plugin.app.workspace.on("layout-change",()=>{a()}));let i=document.querySelector(".workspace-split.mod-left-split"),n=document.querySelector(".workspace-split.mod-right-split");i&&(this.sidebarObserver=new MutationObserver(l=>{let d=!1;l.forEach(r=>{r.type==="attributes"&&r.attributeName==="class"&&(d=!0)}),d&&a()}),this.sidebarObserver.observe(i,{attributes:!0,attributeFilter:["class"]}),n&&n!==i&&this.sidebarObserver.observe(n,{attributes:!0,attributeFilter:["class"]}))}cleanupTabObserver(){this.tabObserver&&(this.tabObserver.disconnect(),this.tabObserver=null),this.sidebarObserver&&(this.sidebarObserver.disconnect(),this.sidebarObserver=null),document.querySelectorAll(".mod-root").forEach(e=>{e.classList.remove("has-single-tab","has-single-tab-left-collapsed","has-single-tab-right-collapsed")}),document.body.classList.remove("auto-hide-tab-bar-windows","auto-hide-tab-bar-macos","auto-hide-tab-bar-neutral")}};var Xe=class{constructor(e){this.plugin=e}updateTheme(){if(S(this.plugin.app,"theme")===B.SYSTEM)document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));else{document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));let a=S(this.plugin.app,"theme")===B.LIGHT?B.DARK:B.LIGHT;$(this.plugin.app,a),P(this.plugin.app,"theme",a)}this.plugin.app.workspace.trigger("css-change")}switchToLight(){document.body.removeClass("theme-dark"),document.body.addClass("theme-light"),S(this.plugin.app,"theme")!==B.SYSTEM&&($(this.plugin.app,B.LIGHT),P(this.plugin.app,"theme",B.LIGHT)),this.plugin.app.workspace.trigger("css-change")}switchToDark(){document.body.removeClass("theme-light"),document.body.addClass("theme-dark"),S(this.plugin.app,"theme")!==B.SYSTEM&&($(this.plugin.app,B.DARK),P(this.plugin.app,"theme",B.DARK)),this.plugin.app.workspace.trigger("css-change")}getCurrentMode(){return document.body.classList.contains("theme-light")?"light":"dark"}updateSidebarTheme(){if(!this.plugin.isOxygenThemeActive())return;let e=document.getElementsByClassName("mod-left-split")[0],s=document.getElementsByClassName("side-dock-ribbon")[0];e&&s&&document.body.classList.contains("theme-light")&&this.plugin.settings.lightStyle==="oxygen-light-contrast"?(e.addClass("theme-dark"),s.addClass("theme-dark")):e&&s&&(e.removeClass("theme-dark"),s.removeClass("theme-dark"))}cleanupSidebarTheme(){let e=document.getElementsByClassName("mod-left-split")[0];e&&e.removeClass("theme-dark");let s=document.getElementsByClassName("side-dock-ribbon")[0];s&&s.removeClass("theme-dark")}};var Ze=class{constructor(e){this.plugin=e}setupWatchers(){this.plugin.registerEvent(Ct(this.plugin.app,()=>{this.syncFromVault()})),this.plugin.registerEvent(this.plugin.app.workspace.on("css-change",()=>{this.updateSidebarTheme()}))}syncFromVault(e=!1){let s=S(this.plugin.app,he.BASE_FONT_SIZE);typeof s=="number"&&(this.plugin.settings.textNormal=s),this.plugin.settings.folding=!!S(this.plugin.app,he.FOLD_HEADING),this.plugin.settings.lineNumbers=!!S(this.plugin.app,he.SHOW_LINE_NUMBER),this.plugin.settings.readableLineLength=!!S(this.plugin.app,he.READABLE_LINE_LENGTH);let a=document.body.classList;a.toggle("oxygen-folding",this.plugin.settings.folding),a.toggle("oxygen-line-nums",this.plugin.settings.lineNumbers),a.toggle("oxygen-readable",this.plugin.settings.readableLineLength),a.toggle("oxygen-readable-off",!this.plugin.settings.readableLineLength),e||this.plugin.saveData(this.plugin.settings)}setFontSize(){P(this.plugin.app,he.BASE_FONT_SIZE,this.plugin.settings.textNormal),Et(this.plugin.app)}updateSidebarTheme(){let e=document.getElementsByClassName("mod-left-split")[0],s=document.getElementsByClassName("side-dock-ribbon")[0];e&&s&&document.body.classList.contains("theme-light")&&this.plugin.settings.lightStyle==="oxygen-light-contrast"?(e.addClass("theme-dark"),s.addClass("theme-dark")):e&&s&&(e.removeClass("theme-dark"),s.removeClass("theme-dark"))}cleanup(){}};function wt(t){t.addCommand({id:f.INCREASE_FONT,name:"Increase body font size",callback:()=>{t.settings.textNormal+=Ke.FONT_STEP,t.saveData(t.settings),kt(t)}}),t.addCommand({id:f.DECREASE_FONT,name:"Decrease body font size",callback:()=>{t.settings.textNormal-=Ke.FONT_STEP,t.saveData(t.settings),kt(t)}})}function kt(t){P(t.app,"baseFontSize",t.settings.textNormal),t.app.updateFontSize()}function Tt(t){ve.forEach(e=>{let s=Je[e]||e;t.addCommand({id:`toggle-${e}`,name:`Switch light color scheme to ${s} (light)`,callback:()=>{t.settings.lightScheme=e,t.saveData(t.settings),Qe(t),Jt(t)}})}),Se.forEach(e=>{let s=Je[e]||e;t.addCommand({id:`toggle-${e}`,name:`Switch dark color scheme to ${s} (dark)`,callback:()=>{t.settings.darkScheme=e,t.saveData(t.settings),et(t),qt(t)}})})}function Qe(t){Pt(t),Lt(t),document.body.classList.contains("theme-light")||(document.body.removeClass("theme-dark"),document.body.addClass("theme-light")),document.body.addClass(t.settings.lightScheme)}function et(t){Lt(t),Pt(t),document.body.classList.contains("theme-dark")||(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")),document.body.addClass(t.settings.darkScheme)}function Jt(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-dark","oxygen-light","oxygen-light-tonal","oxygen-light-contrast","oxygen-light-white"),document.body.addClass("theme-light",t.settings.lightStyle),S(t.app,"theme")!=="system"&&($(t.app,"moonstone"),P(t.app,"theme","moonstone")),t.app.workspace.trigger("css-change")}function qt(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-light","oxygen-dark","oxygen-dark-tonal","oxygen-dark-black"),document.body.addClass("theme-dark",t.settings.darkStyle),S(t.app,"theme")!=="system"&&($(t.app,"obsidian"),P(t.app,"theme","obsidian")),t.app.workspace.trigger("css-change")}function Pt(t){document.body.removeClass(...ve),t.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}function Lt(t){document.body.removeClass(...Se),t.settings.customPresets.forEach(e=>{document.body.removeClass(`minimal-custom-${e.id}`)})}function Dt(t){t.addCommand({id:f.CYCLE_DARK_STYLE,name:"Cycle between dark mode styles",callback:()=>{let s=(Pe.indexOf(t.settings.darkStyle)+1)%Pe.length;t.settings.darkStyle=Pe[s],t.saveData(t.settings),Ie(t)}}),t.addCommand({id:f.CYCLE_LIGHT_STYLE,name:"Cycle between light mode styles",callback:()=>{let s=(Te.indexOf(t.settings.lightStyle)+1)%Te.length;t.settings.lightStyle=Te[s],t.saveData(t.settings),Ce(t)}}),t.addCommand({id:f.LIGHT_DEFAULT,name:"Use light mode (default)",callback:()=>{t.settings.lightStyle="oxygen-light",t.settings.lightScheme="oxygen-oxygen-light",t.saveData(t.settings),Qe(t),Ce(t)}}),t.addCommand({id:f.LIGHT_WHITE,name:"Use light mode (all white)",callback:()=>{t.settings.lightStyle="oxygen-light-white",t.saveData(t.settings),Ce(t)}}),t.addCommand({id:f.LIGHT_TONAL,name:"Use light mode (low contrast)",callback:()=>{t.settings.lightStyle="oxygen-light-tonal",t.saveData(t.settings),Ce(t)}}),t.addCommand({id:f.LIGHT_CONTRAST,name:"Use light mode (high contrast)",callback:()=>{t.settings.lightStyle="oxygen-light-contrast",t.saveData(t.settings),Ce(t)}}),t.addCommand({id:f.DARK_DEFAULT,name:"Use dark mode (default)",callback:()=>{t.settings.darkStyle="oxygen-dark",t.settings.darkScheme="oxygen-oxygen-dark",t.saveData(t.settings),et(t),Ie(t)}}),t.addCommand({id:f.DARK_TONAL,name:"Use dark mode (low contrast)",callback:()=>{t.settings.darkStyle="oxygen-dark-tonal",t.saveData(t.settings),Ie(t)}}),t.addCommand({id:f.DARK_BLACK,name:"Use dark mode (true black)",callback:()=>{t.settings.darkStyle="oxygen-dark-black",t.saveData(t.settings),Ie(t)}})}function Ce(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-dark","oxygen-light","oxygen-light-tonal","oxygen-light-contrast","oxygen-light-white"),document.body.addClass("theme-light",t.settings.lightStyle),S(t.app,"theme")!=="system"&&($(t.app,"moonstone"),P(t.app,"theme","moonstone")),t.app.workspace.trigger("css-change")}function Ie(t){if(!t.isOxygenThemeActive())return;document.body.removeClass("theme-light","oxygen-dark","oxygen-dark-tonal","oxygen-dark-black"),document.body.addClass("theme-dark",t.settings.darkStyle),S(t.app,"theme")!=="system"&&($(t.app,"obsidian"),P(t.app,"theme","obsidian")),t.app.workspace.trigger("css-change")}function Mt(t){t.addCommand({id:f.CREATE_PRESET,name:"Create custom color preset",callback:()=>{new be(t.app,t,null,s=>{t.settings.customPresets.push(s),t.saveData(t.settings)}).open()}}),t.addCommand({id:f.IMPORT_PRESET,name:"Import custom color preset",callback:()=>{new ye(t.app,t,s=>{t.settings.customPresets.push(s),t.saveData(t.settings)}).open()}}),t.addCommand({id:f.CYCLE_PRESETS_LIGHT,name:"Cycle through custom presets (light mode)",callback:()=>{if(t.settings.customPresets.length===0)return;let s=(t.settings.customPresets.findIndex(o=>t.settings.lightScheme===`oxygen-custom-${o.id}`)+1)%t.settings.customPresets.length,a=t.settings.customPresets[s];t.settings.lightScheme=`oxygen-custom-${a.id}`,t.saveData(t.settings),jt(t)}}),t.addCommand({id:f.CYCLE_PRESETS_DARK,name:"Cycle through custom presets (dark mode)",callback:()=>{if(t.settings.customPresets.length===0)return;let s=(t.settings.customPresets.findIndex(o=>t.settings.darkScheme===`oxygen-custom-${o.id}`)+1)%t.settings.customPresets.length,a=t.settings.customPresets[s];t.settings.darkScheme=`oxygen-custom-${a.id}`,t.saveData(t.settings),Xt(t)}})}function jt(t){t.updateLightScheme()}function Xt(t){t.updateDarkScheme()}function Ot(t){t.addCommand({id:f.TOGGLE_BORDERS,name:"Toggle sidebar borders",callback:()=>{let e=t.settings.workspaceBorders;e==="enhanced"?t.settings.workspaceBorders="default":e==="default"?t.settings.workspaceBorders="none":t.settings.workspaceBorders="enhanced",t.saveData(t.settings),ge(t)}}),t.addCommand({id:f.TOGGLE_COLORFUL_HEADINGS,name:"Toggle colorful headings",callback:()=>{t.settings.colorfulHeadings=!t.settings.colorfulHeadings,t.saveData(t.settings),ge(t)}}),t.addCommand({id:f.TOGGLE_FOCUS_MODE,name:"Toggle focus mode",callback:()=>{t.settings.focusMode=!t.settings.focusMode,t.saveData(t.settings),ge(t)}}),t.addCommand({id:f.TOGGLE_COLORFUL_FRAME,name:"Toggle colorful window frame",callback:()=>{t.settings.colorfulFrame=!t.settings.colorfulFrame,t.saveData(t.settings),ge(t)}}),t.addCommand({id:f.TOGGLE_IMAGE_GRID,name:"Toggle image grids",callback:()=>{t.settings.imgGrid=!t.settings.imgGrid,t.saveData(t.settings),ge(t)}}),t.addCommand({id:f.TOGGLE_THEME,name:"Switch between light and dark mode",callback:()=>{Zt(t)}}),t.addCommand({id:f.DEV_BLOCK_WIDTH,name:"Dev \u2014 show block widths",callback:()=>{t.settings.devBlockWidth=!t.settings.devBlockWidth,t.saveData(t.settings),ge(t)}}),t.addCommand({id:f.OPEN_SETTINGS,name:"Open Oxygen Theme Settings",icon:"settings-2",callback:()=>{t.app.setting.open(),t.app.setting.openTabById(t.manifest.id)}})}function ge(t){t.updateStyle()}function Zt(t){if(!t.isOxygenThemeActive())return;if(S(t.app,"theme")==="system")document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));else{document.body.classList.contains("theme-light")?(document.body.removeClass("theme-light"),document.body.addClass("theme-dark")):(document.body.removeClass("theme-dark"),document.body.addClass("theme-light"));let a=S(t.app,"theme")==="moonstone"?"obsidian":"moonstone";$(t.app,a),P(t.app,"theme",a)}t.app.workspace.trigger("css-change")}function At(t){t.addCommand({id:f.CYCLE_TABLE_WIDTH,name:"Cycle between table width options",callback:()=>{let s=(Le.indexOf(t.settings.tableWidth)+1)%Le.length;t.settings.tableWidth=Le[s],t.saveData(t.settings),Ee(t)}}),t.addCommand({id:f.CYCLE_IMAGE_WIDTH,name:"Cycle between image width options",callback:()=>{let s=(Me.indexOf(t.settings.imgWidth)+1)%Me.length;t.settings.imgWidth=Me[s],t.saveData(t.settings),Ee(t)}}),t.addCommand({id:f.CYCLE_IFRAME_WIDTH,name:"Cycle between iframe width options",callback:()=>{let s=(De.indexOf(t.settings.iframeWidth)+1)%De.length;t.settings.iframeWidth=De[s],t.saveData(t.settings),Ee(t)}}),t.addCommand({id:f.CYCLE_CHART_WIDTH,name:"Cycle between chart width options",callback:()=>{let s=(Ae.indexOf(t.settings.chartWidth)+1)%Ae.length;t.settings.chartWidth=Ae[s],t.saveData(t.settings),Ee(t)}}),t.addCommand({id:f.CYCLE_MAP_WIDTH,name:"Cycle between map width options",callback:()=>{let s=(Oe.indexOf(t.settings.mapWidth)+1)%Oe.length;t.settings.mapWidth=Oe[s],t.saveData(t.settings),Ee(t)}})}function Ee(t){t.updateStyle()}function It(t){wt(t),Dt(t),Tt(t),Mt(t),Ot(t),At(t)}var tt=class extends $t.Plugin{constructor(){super(...arguments);this._isOxygenActive=!1;this._isInitialized=!1}onload(){return m(this,null,function*(){yield this.loadSettings(),this.styleManager=new je(this),this.themeManager=new Xe(this),this.settingsSyncManager=new Ze(this),this.settingsTab=new Ve(this.app,this),this.addSettingTab(this.settingsTab),this._isOxygenActive=this.checkOxygenTheme();let e=document.body.classList.contains("theme-light")?"light":"dark";this._isOxygenActive&&(this.styleManager.initialize(),this._isInitialized=!0),this.settingsSyncManager.setupWatchers(),this.settingsSyncManager.syncFromVault(!0),this.app.workspace.onLayoutReady(()=>{this._isOxygenActive&&this.themeManager.updateSidebarTheme()}),It(this);let s,a=e;this.registerEvent(this.app.workspace.on("css-change",()=>{window.clearTimeout(s),s=window.setTimeout(()=>{let o=this.checkOxygenTheme(),i=document.body.classList.contains("theme-light")?"light":"dark",n=a!==null&&a!==i;a=i,this._isOxygenActive&&!o?(this._isOxygenActive=!1,this._isInitialized=!1,this.styleManager.cleanup()):!this._isOxygenActive&&o&&!this._isInitialized?(this._isOxygenActive=!0,this._isInitialized=!0,this.styleManager.initialize()):this._isOxygenActive&&o&&this._isInitialized&&n&&this.styleManager.updateStyle()},100)}))})}onunload(){this.themeManager.cleanupSidebarTheme(),this.styleManager.cleanup(),this.settingsSyncManager.cleanup()}loadSettings(){return m(this,null,function*(){let e=yield this.loadData();this.settings=Object.assign({},Ne,e);let s="minimal-to-oxygen-prefix-v1";if(!e||!e._migrationVersions||!e._migrationVersions.includes(s)){let a=!1;this.settings.lightStyle&&this.settings.lightStyle.startsWith("minimal-")&&(this.settings.lightStyle=this.settings.lightStyle.replace(/^minimal-/,"oxygen-"),a=!0),this.settings.darkStyle&&this.settings.darkStyle.startsWith("minimal-")&&(this.settings.darkStyle=this.settings.darkStyle.replace(/^minimal-/,"oxygen-"),a=!0),this.settings.lightScheme&&this.settings.lightScheme.startsWith("minimal-")&&(this.settings.lightScheme=this.settings.lightScheme.replace(/^minimal-/,"oxygen-"),a=!0),this.settings.darkScheme&&this.settings.darkScheme.startsWith("minimal-")&&(this.settings.darkScheme=this.settings.darkScheme.replace(/^minimal-/,"oxygen-"),a=!0),a&&(this.settings._migrationVersions||(this.settings._migrationVersions=[]),this.settings._migrationVersions.push(s),yield this.saveData(this.settings),console.log("[Oxygen Settings] Migrated settings from minimal- to oxygen- prefix"))}this.settings.lightScheme==="minimal-default-light"&&(this.settings.lightScheme="oxygen-minimal-light"),this.settings.darkScheme==="minimal-default-dark"&&(this.settings.darkScheme="oxygen-minimal-dark"),e&&(e.bordersToggle!==void 0||e.workspaceBordersEnhanced!==void 0)&&e.workspaceBorders===void 0&&(e.bordersToggle===!1?this.settings.workspaceBorders="none":e.workspaceBordersEnhanced===!0?this.settings.workspaceBorders="enhanced":this.settings.workspaceBorders="default",yield this.saveData(this.settings)),this.settings.customPresets||(this.settings.customPresets=[]),this.settings.enableCustomPresets===void 0&&(this.settings.enableCustomPresets=!0),e&&e.animationPersonality==="refined"&&(this.settings.animationPersonality="default",yield this.saveData(this.settings)),this.settings.animationPersonality||(this.settings.animationPersonality="default")})}saveSettings(){return m(this,null,function*(){yield this.saveData(this.settings)})}refresh(){this.styleManager.refresh()}updateStyle(){this.styleManager.updateStyle()}updateLightStyle(){this.styleManager.updateLightStyle()}updateDarkStyle(){this.styleManager.updateDarkStyle()}updateLightScheme(){this.styleManager.updateLightScheme()}updateDarkScheme(){this.styleManager.updateDarkScheme()}updateCustomPresetCSS(){this.styleManager.updateCustomPresetCSS()}setFontSize(){this.settingsSyncManager.setFontSize()}isOxygenThemeActive(){return this._isOxygenActive}checkOxygenTheme(){return S(this.app,"cssTheme")===St}};
