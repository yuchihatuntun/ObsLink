/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/ui/panel-utils.ts
function getDisplayPath(fullPath) {
  const cleanPath = fullPath.startsWith("/") ? fullPath.slice(1) : fullPath;
  const parts = cleanPath.split("/");
  if (parts.length <= 1) {
    return cleanPath;
  }
  return parts.slice(-2).join("/");
}
function getVaultFoldersInfo(scanDirectories, fileCount) {
  let baseText = "Vault folders: ";
  if (!scanDirectories || scanDirectories.trim() === "") {
    baseText += "all";
  } else {
    const folders = scanDirectories.split(",").map((f) => f.trim()).filter((f) => f.length > 0);
    baseText += folders.join(", ");
  }
  if (fileCount !== void 0) {
    baseText += `; ${fileCount} files analyzed`;
  }
  return baseText;
}
function sortFiles(files, sortType) {
  const sortedFiles = [...files];
  switch (sortType) {
    case "warnings-desc":
      sortedFiles.sort((a, b) => {
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.noticesCount !== a.noticesCount) {
          return b.noticesCount - a.noticesCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "warnings-asc":
      sortedFiles.sort((a, b) => {
        if (a.warningsCount !== b.warningsCount) {
          return a.warningsCount - b.warningsCount;
        }
        if (a.issuesCount !== b.issuesCount) {
          return a.issuesCount - b.issuesCount;
        }
        if (a.noticesCount !== b.noticesCount) {
          return a.noticesCount - b.noticesCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "issues-desc":
      sortedFiles.sort((a, b) => {
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        if (b.noticesCount !== a.noticesCount) {
          return b.noticesCount - a.noticesCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "issues-asc":
      sortedFiles.sort((a, b) => {
        if (a.issuesCount !== b.issuesCount) {
          return a.issuesCount - b.issuesCount;
        }
        if (a.warningsCount !== b.warningsCount) {
          return a.warningsCount - b.warningsCount;
        }
        if (a.noticesCount !== b.noticesCount) {
          return a.noticesCount - b.noticesCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "notices-desc":
      sortedFiles.sort((a, b) => {
        if (b.noticesCount !== a.noticesCount) {
          return b.noticesCount - a.noticesCount;
        }
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "notices-asc":
      sortedFiles.sort((a, b) => {
        if (a.noticesCount !== b.noticesCount) {
          return a.noticesCount - b.noticesCount;
        }
        if (a.issuesCount !== b.issuesCount) {
          return a.issuesCount - b.issuesCount;
        }
        if (a.warningsCount !== b.warningsCount) {
          return a.warningsCount - b.warningsCount;
        }
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        return aFileName.localeCompare(bFileName);
      });
      break;
    case "filename-asc":
      sortedFiles.sort((a, b) => {
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        const nameCompare = aFileName.localeCompare(bFileName);
        if (nameCompare !== 0) return nameCompare;
        const aParts = a.file.split("/");
        const bParts = b.file.split("/");
        const aParent = aParts.length > 1 ? aParts[aParts.length - 2] || "" : "";
        const bParent = bParts.length > 1 ? bParts[bParts.length - 2] || "" : "";
        const parentCompare = aParent.localeCompare(bParent);
        if (parentCompare !== 0) return parentCompare;
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        return b.noticesCount - a.noticesCount;
      });
      break;
    case "filename-desc":
      sortedFiles.sort((a, b) => {
        const aFileName = a.file.split("/").pop() || "";
        const bFileName = b.file.split("/").pop() || "";
        const nameCompare = bFileName.localeCompare(aFileName);
        if (nameCompare !== 0) return nameCompare;
        const aParts = a.file.split("/");
        const bParts = b.file.split("/");
        const aParent = aParts.length > 1 ? aParts[aParts.length - 2] || "" : "";
        const bParent = bParts.length > 1 ? bParts[bParts.length - 2] || "" : "";
        const parentCompare = bParent.localeCompare(aParent);
        if (parentCompare !== 0) return parentCompare;
        if (b.issuesCount !== a.issuesCount) {
          return b.issuesCount - a.issuesCount;
        }
        if (b.warningsCount !== a.warningsCount) {
          return b.warningsCount - a.warningsCount;
        }
        return b.noticesCount - a.noticesCount;
      });
      break;
  }
  return sortedFiles;
}
var init_panel_utils = __esm({
  "src/ui/panel-utils.ts"() {
    "use strict";
  }
});

// src/checks/utils/content-parser.ts
function removeCodeBlocks(content) {
  return content.replace(/```[\s\S]*?```/g, "").replace(/~~~[\s\S]*?~~~/g, "").replace(/`[^`\n]+`/g, "").replace(/<[^>]*>/g, "").replace(/^---\n[\s\S]*?\n---\n/, "").replace(/::\w+\{[^}]*\}/g, "");
}
function removeHtmlAttributes(content) {
  return content.replace(/```[\s\S]*?```/g, "").replace(/~~~[\s\S]*?~~~/g, "").replace(/`[^`\n]+`/g, "").replace(/<[^>]*>/g, "").replace(/^---\n[\s\S]*?\n---\n/, "").replace(/::\w+\{[^}]*\}/g, "");
}
var init_content_parser = __esm({
  "src/checks/utils/content-parser.ts"() {
    "use strict";
  }
});

// src/checks/utils/position-utils.ts
function findLineNumberForImage(content, imageMatch) {
  const lines = content.split("\n");
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i];
    if (line && line.includes(imageMatch)) {
      return i + 1;
    }
  }
  return 1;
}
function getContextAroundLine(content, lineNumber, contextLines = 2) {
  const lines = content.split("\n");
  const start = Math.max(0, lineNumber - 1 - contextLines);
  const end = Math.min(lines.length, lineNumber - 1 + contextLines + 1);
  return lines.slice(start, end).join("\n");
}
var init_position_utils = __esm({
  "src/checks/utils/position-utils.ts"() {
    "use strict";
  }
});

// src/checks/alt-text-check.ts
function checkAltText(content, file, settings) {
  const results = [];
  if (!settings.checkAltText) {
    return Promise.resolve([]);
  }
  const cleanContent = removeCodeBlocks(content);
  const markdownImages = cleanContent.match(/!\[([^\]]*)\]\([^)]+\)/g);
  if (markdownImages) {
    const missingAltText = markdownImages.filter((match) => {
      var _a;
      const altText = (_a = match.match(/!\[([^\]]*)\]/)) == null ? void 0 : _a[1];
      return !altText || altText.trim() === "";
    });
    if (missingAltText.length > 0) {
      missingAltText.forEach((match, index) => {
        const pathMatch = match.match(/!\[[^\]]*\]\(([^)]+)\)/);
        const imagePath = pathMatch ? pathMatch[1] : match;
        const lineNumber = findLineNumberForImage(content, match);
        results.push({
          passed: false,
          message: `Media missing alt text: ${imagePath}`,
          suggestion: "Add descriptive alt text for accessibility",
          severity: "error",
          position: {
            line: lineNumber,
            searchText: match,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  const wikilinkImages = cleanContent.match(/!\[\[([^\]]+)\]\]/g);
  if (wikilinkImages) {
    const missingAltText = wikilinkImages.filter((match) => !match.includes("|"));
    if (missingAltText.length > 0) {
      missingAltText.forEach((match, index) => {
        const pathMatch = match.match(/!\[\[([^\]]+)\]\]/);
        const imagePath = pathMatch ? pathMatch[1] : match;
        const lineNumber = findLineNumberForImage(content, match);
        results.push({
          passed: false,
          message: `Wikilink media missing alt text: ${imagePath}`,
          suggestion: "Add alt text using ![[media.png|alt text]] syntax or consider using standard markdown media syntax",
          severity: "error",
          position: {
            line: lineNumber,
            searchText: match,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  const htmlImages = cleanContent.match(/<img[^>]*>/g);
  if (htmlImages) {
    const missingAlt = htmlImages.filter((img) => {
      const altMatch = img.match(/alt\s*=\s*["']([^"']*)["']/);
      return !altMatch || !altMatch[1] || altMatch[1].trim() === "";
    });
    if (missingAlt.length > 0) {
      missingAlt.forEach((img, index) => {
        const srcMatch = img.match(/src\s*=\s*["']([^"']*)["']/);
        const imagePath = srcMatch ? srcMatch[1] : "HTML img tag";
        const lineNumber = findLineNumberForImage(content, img);
        results.push({
          passed: false,
          message: `HTML media missing alt attribute: ${imagePath}`,
          suggestion: "Add alt attribute to HTML media tag",
          severity: "error",
          position: {
            line: lineNumber,
            searchText: img,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  if (results.length === 0) {
    const hasMedia = markdownImages && markdownImages.length > 0 || htmlImages && htmlImages.length > 0 || wikilinkImages && wikilinkImages.length > 0;
    if (hasMedia) {
      results.push({
        passed: true,
        message: "All media elements have alt text",
        severity: "info"
      });
    } else {
      results.push({
        passed: true,
        message: "No media elements in this post",
        severity: "info"
      });
    }
  }
  return Promise.resolve(results);
}
var init_alt_text_check = __esm({
  "src/checks/alt-text-check.ts"() {
    "use strict";
    init_content_parser();
    init_position_utils();
  }
});

// src/checks/link-checks.ts
function checkNakedLinks(content, file, settings) {
  const results = [];
  if (!settings.checkNakedLinks) {
    return Promise.resolve([]);
  }
  const cleanContent = removeHtmlAttributes(content);
  const nakedLinks = cleanContent.match(/(?<!\]\()(?<!https?:\/\/[^\s)]*\/)https?:\/\/[^\s)]+/g);
  if (nakedLinks) {
    nakedLinks.forEach((link, index) => {
      if (link.includes("web.archive.org/web/") || link.includes("archive.today/") || link.includes("archive.is/") || link.includes("web.archive.org/save/")) {
        return;
      }
      const lineNumber = findLineNumberForImage(content, link);
      results.push({
        passed: false,
        message: `Naked link found: ${link}`,
        suggestion: "Convert to markdown link format: [link text](url)",
        severity: "warning",
        position: {
          line: lineNumber,
          searchText: link,
          context: getContextAroundLine(content, lineNumber)
        }
      });
    });
  }
  if (results.length === 0) {
    results.push({
      passed: true,
      message: "No naked links found",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkBrokenLinks(content, file, settings, app) {
  const results = [];
  if (!settings.checkBrokenLinks) {
    return Promise.resolve([]);
  }
  const allWikilinks = content.match(/\[\[([^\]]+)\]\]/g);
  if (allWikilinks) {
    const brokenLinks = [];
    for (const wikilink of allWikilinks) {
      const linkStart = content.indexOf(wikilink);
      if (linkStart === -1) continue;
      const contentBeforeLink = content.substring(0, linkStart);
      const codeBlockMatches = contentBeforeLink.match(/```[\s\S]*?```|~~~[\s\S]*?~~~/g);
      const openCodeBlocks = (contentBeforeLink.match(/```/g) || []).length - (codeBlockMatches || []).length;
      const openTildeBlocks = (contentBeforeLink.match(/~~~/g) || []).length - (codeBlockMatches || []).length;
      if (openCodeBlocks > 0 || openTildeBlocks > 0) {
        continue;
      }
      const linkMatch = wikilink.match(/\[\[([^\]]+)\]\]/);
      if (!linkMatch || !linkMatch[1]) continue;
      const linkText = linkMatch[1];
      let linkPath;
      let displayText;
      let anchor = null;
      if (linkText.includes("|")) {
        const parts = linkText.split("|");
        const linkPart = parts[0] || "";
        displayText = parts[1] || linkPart;
        if (linkPart.includes("#")) {
          const anchorParts = linkPart.split("#");
          linkPath = anchorParts[0] || "";
          anchor = anchorParts[1] || null;
        } else {
          linkPath = linkPart;
        }
      } else {
        if (linkText.includes("#")) {
          const anchorParts = linkText.split("#");
          linkPath = anchorParts[0] || "";
          anchor = anchorParts[1] || null;
          displayText = linkPath;
        } else {
          linkPath = linkText;
          displayText = linkText;
        }
      }
      if (app) {
        const resolvedLink = app.metadataCache.getFirstLinkpathDest(linkPath, file.path);
        if (!resolvedLink) {
          brokenLinks.push({
            link: wikilink,
            path: linkPath,
            displayText,
            anchor
          });
        }
      }
    }
    if (brokenLinks.length > 0) {
      brokenLinks.forEach(({ link, path, displayText, anchor }) => {
        const lineNumber = findLineNumberForImage(content, link);
        let suggestion = `Check if the file "${path}.md" exists or update the link`;
        if (anchor) {
          suggestion += ` (anchor: #${anchor})`;
        }
        results.push({
          passed: false,
          message: `Broken internal link: ${displayText}`,
          suggestion,
          severity: "error",
          position: {
            line: lineNumber,
            searchText: link,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  const allMarkdownLinks = content.match(/\[([^\]]+)\]\(([^)]+)\)/g);
  if (allMarkdownLinks) {
    for (const markdownLink of allMarkdownLinks) {
      const linkStart = content.indexOf(markdownLink);
      if (linkStart === -1) continue;
      const contentBeforeLink = content.substring(0, linkStart);
      const codeBlockMatches = contentBeforeLink.match(/```[\s\S]*?```|~~~[\s\S]*?~~~/g);
      const openCodeBlocks = (contentBeforeLink.match(/```/g) || []).length - (codeBlockMatches || []).length;
      const openTildeBlocks = (contentBeforeLink.match(/~~~/g) || []).length - (codeBlockMatches || []).length;
      if (openCodeBlocks > 0 || openTildeBlocks > 0) {
        continue;
      }
      const linkMatch = markdownLink.match(/\[([^\]]+)\]\(([^)]+)\)/);
      if (!linkMatch || !linkMatch[1] || !linkMatch[2]) continue;
      const linkText = linkMatch[1];
      const linkUrl = linkMatch[2];
      if (markdownLink.startsWith("![") || linkText.startsWith("![")) {
        continue;
      }
      if (!linkUrl.startsWith("http://") && !linkUrl.startsWith("https://") && !linkUrl.startsWith("mailto:") && !linkUrl.startsWith("#")) {
        if (settings.publishMode && linkUrl.startsWith("/")) {
          continue;
        }
        if (app) {
          let linkPath = linkUrl;
          let anchor = null;
          if (linkPath.includes("#")) {
            const anchorParts = linkPath.split("#");
            linkPath = anchorParts[0] || "";
            anchor = anchorParts[1] || null;
          }
          const resolvedLink = app.metadataCache.getFirstLinkpathDest(linkPath, file.path);
          if (!resolvedLink) {
            const lineNumber = findLineNumberForImage(content, markdownLink);
            let suggestedPath = linkPath.endsWith(".md") ? linkPath : linkPath + ".md";
            let suggestion = `Check if the file "${suggestedPath}" exists or update the link`;
            if (anchor) {
              suggestion += ` (anchor: #${anchor})`;
            }
            results.push({
              passed: false,
              message: `Broken internal link: ${linkText}`,
              suggestion,
              severity: "error",
              position: {
                line: lineNumber,
                searchText: markdownLink,
                context: getContextAroundLine(content, lineNumber)
              }
            });
          }
        }
      }
    }
  }
  if (results.length === 0) {
    results.push({
      passed: true,
      message: "No broken internal links found",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
async function checkPotentiallyBrokenLinks(content, file, settings, app) {
  const results = [];
  if (!settings.checkPotentiallyBrokenLinks || !settings.publishMode) {
    return Promise.resolve([]);
  }
  const brokenLinksResults = await checkBrokenLinks(content, file, settings, app);
  const definitelyBrokenLinks = /* @__PURE__ */ new Set();
  brokenLinksResults.forEach((result) => {
    var _a;
    if (!result.passed && ((_a = result.position) == null ? void 0 : _a.searchText)) {
      definitelyBrokenLinks.add(result.position.searchText);
    }
  });
  let pos = 0;
  while (pos < content.length) {
    const openBracket = content.indexOf("[", pos);
    if (openBracket === -1) break;
    const contentBeforeBracket = content.substring(0, openBracket);
    const codeBlockMatches = contentBeforeBracket.match(/```[\s\S]*?```|~~~[\s\S]*?~~~/g);
    const openCodeBlocks = (contentBeforeBracket.match(/```/g) || []).length - (codeBlockMatches || []).length;
    const openTildeBlocks = (contentBeforeBracket.match(/~~~/g) || []).length - (codeBlockMatches || []).length;
    if (openCodeBlocks > 0 || openTildeBlocks > 0) {
      pos = openBracket + 1;
      continue;
    }
    let bracketCount = 1;
    let closeBracket = openBracket + 1;
    while (closeBracket < content.length && bracketCount > 0) {
      if (content[closeBracket] === "[") {
        bracketCount++;
      } else if (content[closeBracket] === "]") {
        bracketCount--;
      }
      closeBracket++;
    }
    if (bracketCount > 0) {
      pos = openBracket + 1;
      continue;
    }
    if (closeBracket < content.length && content[closeBracket] === "(") {
      let parenCount = 1;
      let closeParen = closeBracket + 1;
      while (closeParen < content.length && parenCount > 0) {
        if (content[closeParen] === "(") {
          parenCount++;
        } else if (content[closeParen] === ")") {
          parenCount--;
        }
        closeParen++;
      }
      if (parenCount === 0) {
        const linkText = content.substring(openBracket + 1, closeBracket - 1);
        const linkUrl = content.substring(closeBracket + 1, closeParen - 1);
        const fullLink = content.substring(openBracket, closeParen);
        if (linkText.startsWith("![")) {
          pos = closeParen;
          continue;
        }
        if (settings.publishMode && linkUrl.startsWith("/") && !linkUrl.startsWith("http://") && !linkUrl.startsWith("https://")) {
          const lineNumber = findLineNumberForImage(content, fullLink);
          results.push({
            passed: true,
            message: `Relative path link: ${linkText}`,
            suggestion: "This link may be valid for static site generators but may not work in Obsidian",
            severity: "notice",
            position: {
              line: lineNumber,
              searchText: fullLink,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        }
        pos = closeParen;
      } else {
        pos = closeBracket;
      }
    } else {
      pos = closeBracket;
    }
  }
  const allWikilinks = content.match(/\[\[([^\]]+)\]\]/g);
  if (allWikilinks) {
    const potentiallyBroken = [];
    for (const wikilink of allWikilinks) {
      const linkStart = content.indexOf(wikilink);
      if (linkStart === -1) continue;
      const contentBeforeLink = content.substring(0, linkStart);
      const codeBlockMatches = contentBeforeLink.match(/```[\s\S]*?```|~~~[\s\S]*?~~~/g);
      const openCodeBlocks = (contentBeforeLink.match(/```/g) || []).length - (codeBlockMatches || []).length;
      const openTildeBlocks = (contentBeforeLink.match(/~~~/g) || []).length - (codeBlockMatches || []).length;
      if (openCodeBlocks > 0 || openTildeBlocks > 0) {
        continue;
      }
      const linkMatch = wikilink.match(/\[\[([^\]]+)\]\]/);
      if (!linkMatch || !linkMatch[1]) continue;
      if (definitelyBrokenLinks.has(wikilink)) {
        continue;
      }
      const linkText = linkMatch[1];
      let linkPath;
      let displayText;
      let anchor = null;
      if (linkText.includes("|")) {
        const parts = linkText.split("|");
        const linkPart = parts[0] || "";
        displayText = parts[1] || linkPart;
        if (linkPart.includes("#")) {
          const anchorParts = linkPart.split("#");
          linkPath = anchorParts[0] || "";
          anchor = anchorParts[1] || null;
        } else {
          linkPath = linkPart;
        }
      } else {
        if (linkText.includes("#")) {
          const anchorParts = linkText.split("#");
          linkPath = anchorParts[0] || "";
          anchor = anchorParts[1] || null;
          displayText = linkPath;
        } else {
          linkPath = linkText;
          displayText = linkText;
        }
      }
      if (app && linkPath) {
        const resolvedLink = app.metadataCache.getFirstLinkpathDest(linkPath, file.path);
        if (!resolvedLink) {
          const allFiles = app.vault.getMarkdownFiles();
          const similarFiles = allFiles.filter(
            (f) => f.path.toLowerCase().includes(linkPath.toLowerCase()) || f.basename.toLowerCase().includes(linkPath.toLowerCase())
          );
          if (similarFiles.length > 0) {
            potentiallyBroken.push({
              link: wikilink,
              path: linkPath,
              displayText,
              anchor,
              suggestions: similarFiles.map((f) => f.path)
            });
          }
        }
      }
    }
    if (potentiallyBroken.length > 0) {
      potentiallyBroken.forEach(({ link, path, displayText, suggestions }) => {
        const lineNumber = findLineNumberForImage(content, link);
        results.push({
          passed: false,
          message: `Potentially broken link: ${displayText}`,
          suggestion: `Consider these similar files: ${suggestions.slice(0, 3).join(", ")}`,
          severity: "warning",
          position: {
            line: lineNumber,
            searchText: link,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      });
    }
  }
  if (results.length === 0) {
    results.push({
      passed: true,
      message: "No potentially broken links found",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
var init_link_checks = __esm({
  "src/checks/link-checks.ts"() {
    "use strict";
    init_content_parser();
    init_position_utils();
  }
});

// src/checks/external-link-checks.ts
function isValidUrl(url) {
  if (url.includes("&gt;") || url.includes("&lt;") || url.includes("&amp;") || url.includes("&quot;") || url.includes("&apos;") || url.includes("&nbsp;")) {
    return false;
  }
  if (url.includes("<") || url.includes(">") || url.includes('"') || url.includes("'")) {
    return false;
  }
  if (url.endsWith("&gt;") || url.endsWith("&lt;") || url.endsWith("&amp;") || url.endsWith("&quot;") || url.endsWith("&apos;") || url.endsWith("&nbsp;")) {
    return false;
  }
  if (url.includes("/a&gt;") || url.includes("/p&gt;") || url.includes("/div&gt;") || url.includes("/span&gt;") || url.includes("/img&gt;") || url.includes("/script&gt;")) {
    return false;
  }
  try {
    const urlObj = new URL(url);
    if (urlObj.protocol !== "http:" && urlObj.protocol !== "https:") {
      return false;
    }
    if (!urlObj.hostname || urlObj.hostname.length === 0) {
      return false;
    }
    if (urlObj.hostname.includes("<") || urlObj.hostname.includes(">") || urlObj.hostname.includes('"') || urlObj.hostname.includes("'")) {
      return false;
    }
    return true;
  } catch (e) {
    return false;
  }
}
function extractValidExternalLinks(content) {
  const cleanContent = removeCodeBlocks(content);
  const externalLinks = [];
  let pos = 0;
  while (pos < cleanContent.length) {
    const openBracket = cleanContent.indexOf("[", pos);
    if (openBracket === -1) break;
    let bracketCount = 1;
    let closeBracket = openBracket + 1;
    while (closeBracket < cleanContent.length && bracketCount > 0) {
      if (cleanContent[closeBracket] === "[") {
        bracketCount++;
      } else if (cleanContent[closeBracket] === "]") {
        bracketCount--;
      }
      closeBracket++;
    }
    if (bracketCount > 0) {
      pos = openBracket + 1;
      continue;
    }
    if (closeBracket < cleanContent.length && cleanContent[closeBracket] === "(") {
      let parenCount = 1;
      let closeParen = closeBracket + 1;
      while (closeParen < cleanContent.length && parenCount > 0) {
        if (cleanContent[closeParen] === "(") {
          parenCount++;
        } else if (cleanContent[closeParen] === ")") {
          parenCount--;
        }
        closeParen++;
      }
      if (parenCount === 0) {
        const linkUrl = cleanContent.substring(closeBracket + 1, closeParen - 1);
        if (linkUrl.startsWith("http://") || linkUrl.startsWith("https://")) {
          if (isValidUrl(linkUrl)) {
            externalLinks.push(linkUrl);
          }
        }
        pos = closeParen;
      } else {
        pos = closeBracket;
      }
    } else {
      pos = closeBracket;
    }
  }
  const nakedUrls = cleanContent.match(/https?:\/\/[^\s)\]]+/g);
  if (nakedUrls) {
    const markdownLinkUrls = new Set(externalLinks);
    nakedUrls.forEach((url) => {
      if (markdownLinkUrls.has(url)) {
        return;
      }
      if (url.includes("web.archive.org/web/") || url.includes("archive.today/") || url.includes("archive.is/") || url.includes("web.archive.org/save/")) {
        return;
      }
      if (isValidUrl(url)) {
        externalLinks.push(url);
      }
    });
  }
  return [...new Set(externalLinks)];
}
function checkExternalLinks(content, file, settings) {
  const results = [];
  if (!settings.checkExternalLinks) {
    return Promise.resolve([]);
  }
  const uniqueLinks = extractValidExternalLinks(content);
  if (uniqueLinks.length > 0) {
    uniqueLinks.forEach((url, index) => {
      const lineNumber = findLineNumberForImage(content, url);
      results.push({
        passed: true,
        message: `External link: ${url}`,
        suggestion: "To find if any of these are broken, use the 'Check external links for 404s' button to trigger it.",
        severity: "notice",
        position: {
          line: lineNumber,
          searchText: url,
          context: getContextAroundLine(content, lineNumber)
        }
      });
    });
  } else {
    results.push({
      passed: true,
      message: "No external links found",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
async function checkExternalBrokenLinks(content, file, settings, abortController) {
  const results = [];
  if (!settings.enableExternalLinkVaultCheck) {
    return Promise.resolve([]);
  }
  const uniqueLinks = extractValidExternalLinks(content);
  if (uniqueLinks.length === 0) {
    results.push({
      passed: true,
      message: "No external links found",
      severity: "info"
    });
    return Promise.resolve(results);
  }
  const checkTasks = uniqueLinks.map(async (url) => {
    if (abortController == null ? void 0 : abortController.signal.aborted) {
      return null;
    }
    const cached = externalLinkCache.get(url);
    if (cached && Date.now() - cached.timestamp < EXTERNAL_LINK_CACHE_TTL) {
      return cached.result;
    }
    return await limiter.schedule(async () => {
      if (abortController == null ? void 0 : abortController.signal.aborted) return null;
      let linkIsBroken = false;
      let errorMessage = "";
      let suggestion = "";
      let severity = "error";
      try {
        const response = await (0, import_obsidian3.requestUrl)({
          url,
          headers: {
            "User-Agent": "Mozilla/5.0 (compatible; Obsidian-SEO-Plugin/1.0)"
          },
          throw: false
          // Handle status codes manually
        });
        if (response.status === 403) {
          linkIsBroken = true;
          errorMessage = `External link access restricted (403): ${url}`;
          suggestion = "This link returned a 403 Forbidden error. This may indicate bot protection rather than a broken link.";
          severity = "warning";
        } else if (response.status >= 400) {
          linkIsBroken = true;
          errorMessage = `External link error (${response.status}): ${url}`;
          suggestion = `This link returned a ${response.status} error.`;
        }
      } catch (error) {
        linkIsBroken = true;
        errorMessage = `External link unreachable: ${url}`;
        suggestion = "Check if the URL is correct or if the server is down.";
        severity = "warning";
      }
      let result = null;
      if (linkIsBroken) {
        const lines = content.split("\n");
        let lineNumber = 1;
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i];
          if (line && line.includes(url)) {
            lineNumber = i + 1;
            break;
          }
        }
        result = {
          passed: false,
          message: errorMessage,
          suggestion,
          severity,
          position: {
            line: lineNumber,
            searchText: url,
            context: getContextAroundLine(content, lineNumber)
          }
        };
      }
      externalLinkCache.set(url, { result, timestamp: Date.now() });
      return result;
    });
  });
  const taskResults = await Promise.all(checkTasks);
  taskResults.forEach((r) => {
    if (r) results.push(r);
  });
  if (results.length === 0 && uniqueLinks.length > 0) {
    results.push({
      passed: true,
      message: `Found ${uniqueLinks.length} external link(s), all appear to resolve and are working`,
      severity: "info"
    });
  } else if (uniqueLinks.length > 0) {
    const brokenCount = results.filter((r) => !r.passed).length;
    const workingLinks = uniqueLinks.length - brokenCount;
    if (workingLinks > 0) {
      results.push({
        passed: true,
        message: `${workingLinks} of ${uniqueLinks.length} external link(s) are working`,
        severity: "info"
      });
    }
  }
  return results;
}
var import_obsidian3, EXTERNAL_LINK_CACHE_TTL, externalLinkCache, MAX_CONCURRENT_REQUESTS, REQUEST_DELAY_MS, RateLimiter, limiter;
var init_external_link_checks = __esm({
  "src/checks/external-link-checks.ts"() {
    "use strict";
    import_obsidian3 = require("obsidian");
    init_position_utils();
    init_content_parser();
    EXTERNAL_LINK_CACHE_TTL = 36e5;
    externalLinkCache = /* @__PURE__ */ new Map();
    MAX_CONCURRENT_REQUESTS = 5;
    REQUEST_DELAY_MS = 200;
    RateLimiter = class {
      constructor() {
        this.queue = [];
        this.activeRequests = 0;
        this.lastRequestTime = 0;
      }
      async schedule(fn) {
        return new Promise((resolve, reject) => {
          this.queue.push({ fn, resolve, reject });
          this.processQueue();
        });
      }
      async processQueue() {
        if (this.activeRequests >= MAX_CONCURRENT_REQUESTS || this.queue.length === 0) {
          return;
        }
        const now = Date.now();
        const timeSinceLastRequest = now - this.lastRequestTime;
        if (timeSinceLastRequest < REQUEST_DELAY_MS) {
          setTimeout(() => this.processQueue(), REQUEST_DELAY_MS - timeSinceLastRequest);
          return;
        }
        const { fn, resolve, reject } = this.queue.shift();
        this.activeRequests++;
        this.lastRequestTime = Date.now();
        try {
          const result = await fn();
          resolve(result);
        } catch (error) {
          reject(error);
        } finally {
          this.activeRequests--;
          setTimeout(() => this.processQueue(), REQUEST_DELAY_MS);
        }
      }
    };
    limiter = new RateLimiter();
  }
});

// src/checks/utils/reading-level.ts
function countSyllables(word) {
  const cleanWord = word.toLowerCase().replace(/[^a-z]/g, "");
  if (cleanWord.length === 0) return 0;
  let syllables = 0;
  let previousWasVowel = false;
  for (let i = 0; i < cleanWord.length; i++) {
    const char = cleanWord[i];
    if (char) {
      const isVowel = /[aeiouy]/.test(char);
      if (isVowel && !previousWasVowel) {
        syllables++;
      }
      previousWasVowel = isVowel;
    }
  }
  if (cleanWord.endsWith("e") && syllables > 1) {
    syllables--;
  }
  return Math.max(1, syllables);
}
function getReadingLevelDescription(level) {
  if (level <= 6) return "Very easy to read";
  if (level <= 9) return "Easy to read";
  if (level <= 12) return "Moderately easy to read";
  if (level <= 15) return "Moderately difficult to read";
  if (level <= 18) return "Difficult to read";
  return "Very difficult to read";
}
var init_reading_level = __esm({
  "src/checks/utils/reading-level.ts"() {
    "use strict";
  }
});

// src/checks/content-checks.ts
function checkContentLength(content, file, settings) {
  const results = [];
  if (!settings.checkContentLength) {
    return Promise.resolve([]);
  }
  let bodyContent = content.replace(/^---\n[\s\S]*?\n---\n/, "");
  bodyContent = bodyContent.replace(/```[\s\S]*?```/g, "");
  bodyContent = bodyContent.replace(/~~~[\s\S]*?~~~/g, "");
  const wordCount = bodyContent.split(/\s+/).filter((word) => word.length > 0).length;
  if (wordCount < settings.minContentLength) {
    results.push({
      passed: false,
      message: `Content too short: ${wordCount} words`,
      suggestion: `Aim for at least ${settings.minContentLength} words`,
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: `Good content length: ${wordCount} words`,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkReadingLevel(content, file, settings) {
  const results = [];
  if (!settings.checkReadingLevel) {
    return Promise.resolve([]);
  }
  const cleanContent = removeCodeBlocks(content);
  const sentences = cleanContent.split(/[.!?]+/).filter((s) => s.trim().length > 0);
  const words = cleanContent.split(/\s+/).filter((word) => word.length > 0);
  if (sentences.length === 0 || words.length === 0) {
    results.push({
      passed: true,
      message: "No readable content found for reading level analysis",
      severity: "info"
    });
    return Promise.resolve(results);
  }
  const totalSyllables = words.reduce((sum, word) => sum + countSyllables(word), 0);
  const avgWordsPerSentence = words.length / sentences.length;
  const avgSyllablesPerWord = totalSyllables / words.length;
  const readingLevel = 0.39 * avgWordsPerSentence + 11.8 * avgSyllablesPerWord - 15.59;
  const description = getReadingLevelDescription(readingLevel);
  if (readingLevel > 12) {
    results.push({
      passed: false,
      message: `Reading level too high: ${readingLevel.toFixed(1)} (${description})`,
      suggestion: "Consider simplifying sentence structure and using shorter words",
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: `Good reading level: ${readingLevel.toFixed(1)} (${description})`,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkDuplicateContent(content, file, settings) {
  const results = [];
  if (!settings.checkDuplicateContent) {
    return Promise.resolve([]);
  }
  const cleanContent = removeCodeBlocks(content);
  const paragraphs = cleanContent.split(/\n\s*\n/).filter((p) => p.trim().length > 20);
  const duplicateParagraphs = [];
  for (let i = 0; i < paragraphs.length; i++) {
    for (let j = i + 1; j < paragraphs.length; j++) {
      const paragraph1 = paragraphs[i];
      const paragraph2 = paragraphs[j];
      if (paragraph1 && paragraph2) {
        const similarity = calculateSimilarity(paragraph1, paragraph2);
        if (similarity > settings.duplicateThreshold) {
          duplicateParagraphs.push({
            paragraph1: i + 1,
            paragraph2: j + 1,
            similarity
          });
        }
      }
    }
  }
  if (duplicateParagraphs.length > 0) {
    duplicateParagraphs.forEach(({ paragraph1, paragraph2, similarity }) => {
      results.push({
        passed: false,
        message: `Duplicate content detected between paragraphs ${paragraph1} and ${paragraph2}`,
        suggestion: `Similarity: ${similarity.toFixed(1)}% - consider rewriting one of these paragraphs`,
        severity: "warning"
      });
    });
  } else {
    results.push({
      passed: true,
      message: "No duplicate content detected",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function calculateSimilarity(text1, text2) {
  const words1 = text1.toLowerCase().split(/\s+/);
  const words2 = text2.toLowerCase().split(/\s+/);
  const set1 = new Set(words1);
  const set2 = new Set(words2);
  const intersection = new Set([...set1].filter((x) => set2.has(x)));
  const union = /* @__PURE__ */ new Set([...set1, ...set2]);
  return intersection.size / union.size * 100;
}
async function checkDuplicateTitles(content, file, settings, vaultDetector) {
  return await vaultDetector.checkDuplicateTitles(file, settings);
}
async function checkDuplicateDescriptions(content, file, settings, vaultDetector) {
  return await vaultDetector.checkDuplicateDescriptions(file, settings);
}
async function checkVaultDuplicateContent(content, file, settings, vaultDetector) {
  return await vaultDetector.checkDuplicateContent(file, settings);
}
function checkNotices(content, file, settings) {
  return Promise.resolve([]);
}
var init_content_checks = __esm({
  "src/checks/content-checks.ts"() {
    "use strict";
    init_content_parser();
    init_reading_level();
  }
});

// src/checks/meta-checks.ts
function checkMetaDescription(content, file, settings) {
  const results = [];
  if (!settings.descriptionProperty) {
    return Promise.resolve([]);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    results.push({
      passed: false,
      message: "No properties found",
      suggestion: "Add properties with description property",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    results.push({
      passed: false,
      message: "No properties content found",
      suggestion: "Add properties with description property",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const descriptionMatch = frontmatter.match(new RegExp(`^${settings.descriptionProperty}:\\s*(.+)$`, "m"));
  if (!descriptionMatch || !descriptionMatch[1]) {
    results.push({
      passed: false,
      message: `No ${settings.descriptionProperty} found in properties`,
      suggestion: `Add ${settings.descriptionProperty} to properties`,
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  let description = descriptionMatch[1].trim();
  if (description.startsWith('"') && description.endsWith('"') || description.startsWith("'") && description.endsWith("'")) {
    description = description.slice(1, -1);
  }
  const length = description.length;
  if (length < 120) {
    results.push({
      passed: false,
      message: `Description too short: ${length} characters`,
      suggestion: "Aim for 120-160 characters",
      severity: "warning"
    });
  } else if (length > 160) {
    results.push({
      passed: false,
      message: `Description too long: ${length} characters`,
      suggestion: "Aim for 120-160 characters",
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: `Good description length: ${length} characters`,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkTitleLength(content, file, settings) {
  const results = [];
  if (!settings.checkTitleLength) {
    return Promise.resolve([]);
  }
  let title = "";
  if (settings.titleProperty) {
    const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (frontmatterMatch && frontmatterMatch[1]) {
      const frontmatter = frontmatterMatch[1];
      const titleMatch = frontmatter.match(new RegExp(`^${settings.titleProperty}:\\s*(.+)$`, "m"));
      if (titleMatch && titleMatch[1]) {
        title = titleMatch[1].trim();
      }
    }
  }
  if (!title && settings.useFilenameAsTitle) {
    title = file.basename;
  }
  if (!title) {
    const h1Match = content.match(/^#\s+(.+)$/m);
    if (h1Match && h1Match[1]) {
      title = h1Match[1].trim();
    }
  }
  if (!title) {
    return Promise.resolve(results);
  }
  const fullTitle = settings.titlePrefixSuffix ? `${title} ${settings.titlePrefixSuffix}` : title;
  const length = fullTitle.length;
  if (length < 30) {
    const message = settings.titlePrefixSuffix ? `Title too short: ${length} characters (${title} + " ${settings.titlePrefixSuffix}")` : `Title too short: ${length} characters`;
    results.push({
      passed: false,
      message,
      suggestion: "Aim for 30-60 characters",
      severity: "warning"
    });
  } else if (length > 60) {
    const message = settings.titlePrefixSuffix ? `Title too long: ${length} characters (${title} + " ${settings.titlePrefixSuffix}")` : `Title too long: ${length} characters`;
    results.push({
      passed: false,
      message,
      suggestion: "Aim for 30-60 characters",
      severity: "warning"
    });
  } else {
    const message = settings.titlePrefixSuffix ? `Good title length: ${length} characters (${title} + " ${settings.titlePrefixSuffix}")` : `Good title length: ${length} characters`;
    results.push({
      passed: true,
      message,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordDensity(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty) {
    return Promise.resolve([]);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    results.push({
      passed: false,
      message: "No properties found",
      suggestion: "Add properties with keyword property",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    results.push({
      passed: false,
      message: "No properties content found",
      suggestion: "Add properties with keyword property",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  if (!foundKeywordLine) {
    results.push({
      passed: true,
      message: `No ${settings.keywordProperty} defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    results.push({
      passed: true,
      message: `No valid keyword defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  let cleanContent = removeCodeBlocks(content);
  const titleFrontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (titleFrontmatterMatch && titleFrontmatterMatch[1] && settings.titleProperty) {
    const frontmatter2 = titleFrontmatterMatch[1];
    const lines2 = frontmatter2.split("\n");
    for (const line of lines2) {
      if (line.startsWith(settings.titleProperty + ":")) {
        let title = line.substring(settings.titleProperty.length + 1).trim();
        if (title.startsWith('"') && title.endsWith('"') || title.startsWith("'") && title.endsWith("'")) {
          title = title.slice(1, -1);
        }
        cleanContent = title + " " + cleanContent;
        break;
      }
    }
  }
  const keywordLower = keyword.toLowerCase();
  const cleanContentLower = cleanContent.toLowerCase();
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  let keywordCount = 0;
  const contentWords = cleanContentLower.split(/\s+/);
  for (let i = 0; i <= contentWords.length - keywordWords.length; i++) {
    const phrase = contentWords.slice(i, i + keywordWords.length).join(" ");
    const allWordsFound = keywordWords.every((word) => phrase.includes(word));
    if (allWordsFound) {
      keywordCount++;
    }
  }
  const words = cleanContent.split(/\s+/).filter((word) => word.length > 0);
  const totalWords = words.length;
  if (totalWords === 0) {
    results.push({
      passed: false,
      message: "No content found for keyword analysis",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const density = keywordCount / totalWords * 100;
  if (density < settings.keywordDensityMin) {
    results.push({
      passed: false,
      message: `Keyword density too low: ${density.toFixed(1)}%`,
      suggestion: `Aim for at least ${settings.keywordDensityMin}% density`,
      severity: "warning"
    });
  } else if (density > settings.keywordDensityMax) {
    results.push({
      passed: false,
      message: `Keyword density too high: ${density.toFixed(1)}%`,
      suggestion: `Aim for no more than ${settings.keywordDensityMax}% density`,
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: `Good keyword density: ${density.toFixed(1)}%`,
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordInDescription(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty || !settings.descriptionProperty) {
    return Promise.resolve([]);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  if (!foundKeywordLine || !keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    return Promise.resolve(results);
  }
  let description = "";
  let foundDescriptionLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.descriptionProperty + ":")) {
      foundDescriptionLine = true;
      description = line.substring(settings.descriptionProperty.length + 1).trim();
      if (description.startsWith('"') && description.endsWith('"') || description.startsWith("'") && description.endsWith("'")) {
        description = description.slice(1, -1);
      }
      break;
    }
  }
  if (!foundDescriptionLine) {
    results.push({
      passed: false,
      message: "No description found",
      suggestion: "Add a meta description to your properties",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const keywordLower = keyword.toLowerCase();
  const descriptionLower = description.toLowerCase();
  const fullPhraseFound = descriptionLower.includes(keywordLower);
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  const allWordsFound = keywordWords.every((word) => descriptionLower.includes(word));
  const keywordFound = fullPhraseFound || allWordsFound;
  if (keywordFound) {
    results.push({
      passed: true,
      message: `Keyword found in description`,
      severity: "info"
    });
  } else {
    results.push({
      passed: false,
      message: `Keyword not found in description`,
      suggestion: "Include your target keyword in the description",
      severity: "warning"
    });
  }
  return Promise.resolve(results);
}
function checkTitleH1Uniqueness(content, file, settings) {
  const results = [];
  if (!settings.titleProperty) {
    return Promise.resolve(results);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  let metaTitle = "";
  const lines = frontmatter.split("\n");
  for (const line of lines) {
    if (line.startsWith(settings.titleProperty + ":")) {
      metaTitle = line.substring(settings.titleProperty.length + 1).trim();
      if (metaTitle.startsWith('"') && metaTitle.endsWith('"') || metaTitle.startsWith("'") && metaTitle.endsWith("'")) {
        metaTitle = metaTitle.slice(1, -1);
      }
      break;
    }
  }
  if (!metaTitle) {
    return Promise.resolve(results);
  }
  let h1Heading = "";
  if (settings.skipH1Check) {
    if (settings.titlePrefixSuffix && settings.titlePrefixSuffix.trim()) {
      results.push({
        passed: true,
        message: "Meta title and H1 are unique (prefix/suffix configured)",
        severity: "info"
      });
      return Promise.resolve(results);
    }
    h1Heading = metaTitle;
    if (settings.titlePrefixSuffix) {
      const prefixSuffix = settings.titlePrefixSuffix;
      if (h1Heading.startsWith(prefixSuffix)) {
        h1Heading = h1Heading.substring(prefixSuffix.length).trim();
      }
      if (h1Heading.endsWith(prefixSuffix)) {
        h1Heading = h1Heading.substring(0, h1Heading.length - prefixSuffix.length).trim();
      }
    }
  } else {
    const contentLines = content.split("\n");
    for (const line of contentLines) {
      if (!line) continue;
      const h1Match = line.match(/^#\s+(.+)$/);
      if (h1Match && h1Match[1]) {
        h1Heading = h1Match[1].trim();
        break;
      }
    }
  }
  if (!h1Heading) {
    results.push({
      passed: false,
      message: "No H1 heading found to compare with meta title",
      suggestion: "Add an H1 heading to your content, or enable 'Title property is H1' if your static site generator creates H1s from the title",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const metaTitleLower = metaTitle.toLowerCase().trim();
  const h1Lower = h1Heading.toLowerCase().trim();
  if (metaTitleLower === h1Lower) {
    results.push({
      passed: false,
      message: "Meta title and H1 are identical",
      suggestion: "Modify one to be unique, or specify a suffix/prefix in plugin settings",
      severity: "warning"
    });
  } else {
    results.push({
      passed: true,
      message: "Meta title and H1 are unique",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordInHeadings(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty) {
    return Promise.resolve(results);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  if (!foundKeywordLine) {
    results.push({
      passed: true,
      message: `No ${settings.keywordProperty} defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    results.push({
      passed: true,
      message: `No valid keyword defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  const h1Headings = [];
  if (settings.skipH1Check && settings.titleProperty) {
    const titleFrontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
    if (titleFrontmatterMatch && titleFrontmatterMatch[1]) {
      const frontmatter2 = titleFrontmatterMatch[1];
      const lines2 = frontmatter2.split("\n");
      for (const line of lines2) {
        if (line.startsWith(settings.titleProperty + ":")) {
          let title = line.substring(settings.titleProperty.length + 1).trim();
          if (title.startsWith('"') && title.endsWith('"') || title.startsWith("'") && title.endsWith("'")) {
            title = title.slice(1, -1);
          }
          if (settings.titlePrefixSuffix) {
            const prefixSuffix = settings.titlePrefixSuffix;
            if (title.startsWith(prefixSuffix)) {
              title = title.substring(prefixSuffix.length).trim();
            }
            if (title.endsWith(prefixSuffix)) {
              title = title.substring(0, title.length - prefixSuffix.length).trim();
            }
          }
          h1Headings.push({ text: title });
          break;
        }
      }
    }
  }
  const contentLines = content.split("\n");
  for (const line of contentLines) {
    if (!line) continue;
    const h1Match = line.match(/^#\s+(.+)$/);
    if (h1Match && h1Match[1]) {
      h1Headings.push({ text: h1Match[1].trim() });
    }
  }
  if (h1Headings.length === 0) {
    results.push({
      passed: false,
      message: "No H1 heading found in content",
      suggestion: "Add an H1 heading to structure your content and include your target keyword",
      severity: "warning"
    });
    return Promise.resolve(results);
  }
  const keywordLower = keyword.toLowerCase();
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  let keywordFoundInH1 = false;
  for (const h1 of h1Headings) {
    const h1Lower = h1.text.toLowerCase();
    const fullPhraseFound = h1Lower.includes(keywordLower);
    const allWordsFound = keywordWords.every((word) => h1Lower.includes(word));
    if (fullPhraseFound || allWordsFound) {
      keywordFoundInH1 = true;
      break;
    }
  }
  if (keywordFoundInH1) {
    results.push({
      passed: true,
      message: `Keyword found in H1`,
      severity: "info"
    });
  } else {
    results.push({
      passed: false,
      message: `Keyword not found in H1`,
      suggestion: "Include your target keyword in the H1 heading for better SEO",
      severity: "warning"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordInTitle(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty || !settings.titleProperty) {
    return Promise.resolve([]);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  let title = "";
  let foundTitleLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  for (const line of lines) {
    if (line.startsWith(settings.titleProperty + ":")) {
      foundTitleLine = true;
      title = line.substring(settings.titleProperty.length + 1).trim();
      if (title.startsWith('"') && title.endsWith('"') || title.startsWith("'") && title.endsWith("'")) {
        title = title.slice(1, -1);
      }
      break;
    }
  }
  if (!foundKeywordLine) {
    results.push({
      passed: true,
      message: `No ${settings.keywordProperty} defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    results.push({
      passed: true,
      message: `No valid keyword defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!foundTitleLine || !title) {
    return Promise.resolve(results);
  }
  const titleLower = title.toLowerCase();
  const keywordLower = keyword.toLowerCase();
  const fullPhraseFound = titleLower.includes(keywordLower);
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  const allWordsFound = keywordWords.every((word) => titleLower.includes(word));
  const keywordFound = fullPhraseFound || allWordsFound;
  if (keywordFound) {
    results.push({
      passed: true,
      message: `Keyword found in title`,
      severity: "info"
    });
  } else {
    results.push({
      passed: false,
      message: `Keyword not found in title`,
      suggestion: "Include your target keyword in the title",
      severity: "warning"
    });
  }
  return Promise.resolve(results);
}
function checkKeywordInSlug(content, file, settings) {
  const results = [];
  if (!settings.keywordProperty) {
    return Promise.resolve(results);
  }
  const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
  if (!frontmatterMatch) {
    return Promise.resolve(results);
  }
  const frontmatter = frontmatterMatch[1];
  if (!frontmatter) {
    return Promise.resolve(results);
  }
  const lines = frontmatter.split("\n");
  let keyword = "";
  let foundKeywordLine = false;
  for (const line of lines) {
    if (line.startsWith(settings.keywordProperty + ":")) {
      foundKeywordLine = true;
      keyword = line.substring(settings.keywordProperty.length + 1).trim();
      break;
    }
  }
  if (!foundKeywordLine) {
    results.push({
      passed: true,
      message: `No ${settings.keywordProperty} defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  if (!keyword || keyword === "false" || keyword === "true" || keyword === "null" || keyword === "undefined") {
    results.push({
      passed: true,
      message: `No valid keyword defined in properties`,
      severity: "notice"
    });
    return Promise.resolve(results);
  }
  const slug = file.basename.toLowerCase();
  const keywordLower = keyword.toLowerCase();
  const keywordWords = keywordLower.split(/\s+/).filter((word) => word.length > 0);
  const allWordsFound = keywordWords.every((word) => slug.includes(word));
  if (allWordsFound) {
    results.push({
      passed: true,
      message: `Target keyword "${keyword}" found in slug`,
      severity: "info"
    });
  } else {
    results.push({
      passed: false,
      message: `Target keyword "${keyword}" not found in slug`,
      suggestion: "Include your target keyword in the filename",
      severity: "warning"
    });
  }
  return Promise.resolve(results);
}
var init_meta_checks = __esm({
  "src/checks/meta-checks.ts"() {
    "use strict";
    init_content_parser();
  }
});

// src/checks/heading-checks.ts
function checkHeadingOrder(content, file, settings) {
  const results = [];
  if (!settings.checkHeadingOrder) {
    return Promise.resolve([]);
  }
  const originalLines = content.split("\n");
  let lastHeadingLevel = null;
  let hasHeading = false;
  let hasH1 = false;
  let inCodeBlock = false;
  for (let i = 0; i < originalLines.length; i++) {
    const line = originalLines[i];
    if (!line) continue;
    const codeBlockMatch = line.match(/^```(\w+)?/);
    if (codeBlockMatch) {
      if (inCodeBlock) {
        inCodeBlock = false;
      } else {
        inCodeBlock = true;
      }
      continue;
    }
    if (inCodeBlock) {
      continue;
    }
    const headingMatch = line.match(/^(#{1,6})\s+(.+)/);
    if (headingMatch && headingMatch[1] && headingMatch[2]) {
      hasHeading = true;
      const currentLevel = headingMatch[1].length;
      const headingText = headingMatch[2].trim();
      const lineNumber = i + 1;
      if (currentLevel === 1) {
        hasH1 = true;
      }
      if (lastHeadingLevel === null) {
        lastHeadingLevel = currentLevel;
        continue;
      }
      if (currentLevel > lastHeadingLevel + 1) {
        results.push({
          passed: false,
          message: `"${headingText}" (H${currentLevel}) skips heading level(s) after H${lastHeadingLevel}`,
          suggestion: "Use heading levels in order (H1 \u2192 H2 \u2192 H3, etc.)",
          severity: "warning",
          position: {
            line: lineNumber,
            searchText: line,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      }
      if (currentLevel === 1 && lastHeadingLevel > 1) {
        results.push({
          passed: false,
          message: `"${headingText}" (H1) appears after H${lastHeadingLevel}`,
          suggestion: "H1 should be the first heading or not used at all",
          severity: "warning",
          position: {
            line: lineNumber,
            searchText: line,
            context: getContextAroundLine(content, lineNumber)
          }
        });
      }
      lastHeadingLevel = currentLevel;
    }
  }
  if (hasHeading && !settings.skipH1Check && !hasH1) {
    results.unshift({
      passed: false,
      message: "No H1 heading found",
      suggestion: "Add an H1 heading at the beginning of your content",
      severity: "warning"
      // No position info since there's no H1 to jump to
    });
  }
  if (!hasHeading) {
    results.push({
      passed: true,
      message: "No heading structure issues found",
      severity: "info"
    });
  } else if (results.length === 0) {
    results.push({
      passed: true,
      message: "Heading structure is correct",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
var init_heading_checks = __esm({
  "src/checks/heading-checks.ts"() {
    "use strict";
    init_position_utils();
  }
});

// src/checks/image-checks.ts
function checkImageNaming(content, file, settings) {
  const results = [];
  if (!settings.checkImageNaming) {
    return Promise.resolve([]);
  }
  const cleanContent = removeCodeBlocks(content);
  const imageMatches = cleanContent.match(/!\[[^\]]*\]\(([^)]+)\)/g);
  if (imageMatches) {
    imageMatches.forEach((match, index) => {
      var _a;
      const imagePath = (_a = match.match(/!\[[^\]]*\]\(([^)]+)\)/)) == null ? void 0 : _a[1];
      if (imagePath) {
        const fileName = imagePath.split("/").pop() || "";
        const lineNumber = findLineNumberForImage(content, match);
        if (fileName.includes(" ") || fileName.includes("%20")) {
          results.push({
            passed: false,
            message: `Image ${index + 1} has spaces in file name: ${fileName}`,
            suggestion: "Use kebab-case or underscores instead of spaces",
            severity: "warning",
            position: {
              line: lineNumber,
              searchText: match,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        } else if (fileName.match(/^[a-f0-9]{8,}$/) || fileName.match(/^[a-f0-9]{8,}_[A-Z0-9]+\./) || fileName.match(/^[a-f0-9]{8,}_MD5\./) || fileName.match(/^[a-f0-9]{20,}\./)) {
          results.push({
            passed: false,
            message: `Image ${index + 1} has random file name: ${fileName}`,
            suggestion: "Use descriptive file names",
            severity: "warning",
            position: {
              line: lineNumber,
              searchText: match,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        } else if (fileName.toLowerCase().includes("pasted") || fileName.toLowerCase().includes("untitled") || fileName.toLowerCase().includes("photo") || // Only flag generic screenshots (no descriptive content)
        fileName.match(/^screenshot\d*\.(png|jpg|jpeg|gif|webp)$/i) || // Flag screenshots with only random characters
        fileName.toLowerCase().includes("screenshot") && fileName.match(/^screenshot[a-f0-9]{6,}\.(png|jpg|jpeg|gif|webp)$/i)) {
          results.push({
            passed: false,
            message: `Image ${index + 1} has a potentially generic file name: ${fileName}`,
            suggestion: "Use descriptive file names",
            severity: "warning",
            position: {
              line: lineNumber,
              searchText: match,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        } else if (fileName.length < 5 || fileName.length > 50) {
          results.push({
            passed: false,
            message: `Image ${index + 1} exceeds suggested file name length: ${fileName}`,
            suggestion: "Use descriptive file names between 5-50 characters",
            severity: "warning",
            position: {
              line: lineNumber,
              searchText: match,
              context: getContextAroundLine(content, lineNumber)
            }
          });
        }
      }
    });
  }
  if (results.length === 0) {
    results.push({
      passed: true,
      message: "All images have good file names",
      severity: "info"
    });
  }
  return Promise.resolve(results);
}
var init_image_checks = __esm({
  "src/checks/image-checks.ts"() {
    "use strict";
    init_content_parser();
    init_position_utils();
  }
});

// src/checks/utils/note-utils.ts
function getDisplayName(file, content, settings) {
  if (settings.useNoteTitles && settings.titleProperty.trim()) {
    let frontmatterMatch = content.match(/^---\r?\n([\s\S]*?)\r?\n---/);
    if (!frontmatterMatch) {
      frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---/);
    }
    if (!frontmatterMatch) {
      frontmatterMatch = content.match(/^---\s*\n([\s\S]*?)\n\s*---/);
    }
    if (frontmatterMatch && frontmatterMatch[1]) {
      const frontmatter = frontmatterMatch[1];
      const lines = frontmatter.split("\n");
      for (const line of lines) {
        if (!line) continue;
        const trimmedLine = line.trim();
        if (trimmedLine.startsWith(settings.titleProperty + ":")) {
          const colonIndex = trimmedLine.indexOf(":");
          if (colonIndex !== -1) {
            let title = trimmedLine.substring(colonIndex + 1).trim();
            if (title.startsWith('"') && title.endsWith('"') || title.startsWith("'") && title.endsWith("'")) {
              title = title.slice(1, -1);
            }
            if (title) {
              return title;
            }
          }
        }
      }
    }
  }
  return getDisplayPath(file.path);
}
function checkSlugFormat(content, file, settings) {
  return Promise.resolve([]);
}
var init_note_utils = __esm({
  "src/checks/utils/note-utils.ts"() {
    "use strict";
    init_panel_utils();
  }
});

// src/checks/index.ts
var init_checks = __esm({
  "src/checks/index.ts"() {
    "use strict";
    init_alt_text_check();
    init_link_checks();
    init_external_link_checks();
    init_content_checks();
    init_meta_checks();
    init_heading_checks();
    init_image_checks();
    init_content_parser();
    init_position_utils();
    init_reading_level();
    init_note_utils();
  }
});

// src/checks/duplicate-detection.ts
var VaultDuplicateDetector;
var init_duplicate_detection = __esm({
  "src/checks/duplicate-detection.ts"() {
    "use strict";
    init_content_parser();
    VaultDuplicateDetector = class {
      constructor(app, settings) {
        this.vaultData = null;
        this.app = app;
        this.settings = settings;
      }
      /**
       * Collect vault-wide data for duplicate detection
       */
      async collectVaultData() {
        const vaultData = {
          files: /* @__PURE__ */ new Map(),
          titleMap: /* @__PURE__ */ new Map(),
          descriptionMap: /* @__PURE__ */ new Map(),
          lastUpdated: Date.now()
        };
        const files = this.app.vault.getMarkdownFiles();
        const filteredFiles = files.filter((file) => {
          if (this.settings.ignoreUnderscoreFiles && file.basename.startsWith("_")) {
            return false;
          }
          if (this.settings.scanDirectories) {
            const directories = this.settings.scanDirectories.split(",").map((d) => d.trim());
            return directories.some((dir) => file.path.startsWith(dir));
          }
          return true;
        });
        for (const file of filteredFiles) {
          try {
            const content = await this.app.vault.read(file);
            const metadata = this.extractFileMetadata(file, content);
            if (!metadata.ignored) {
              vaultData.files.set(file.path, metadata);
              const titleKey = metadata.title.toLowerCase().trim();
              if (titleKey) {
                if (!vaultData.titleMap.has(titleKey)) {
                  vaultData.titleMap.set(titleKey, []);
                }
                vaultData.titleMap.get(titleKey).push(file.path);
              }
              if (metadata.description) {
                const descKey = metadata.description.toLowerCase().trim();
                if (descKey) {
                  if (!vaultData.descriptionMap.has(descKey)) {
                    vaultData.descriptionMap.set(descKey, []);
                  }
                  vaultData.descriptionMap.get(descKey).push(file.path);
                }
              }
            }
          } catch (error) {
            console.warn(`Failed to process file ${file.path}:`, error);
          }
        }
        this.vaultData = vaultData;
        return vaultData;
      }
      /**
       * Extract metadata from a file
       */
      extractFileMetadata(file, content) {
        const frontmatterMatch = content.match(/^---\n([\s\S]*?)\n---\n/);
        const frontmatter = {};
        if (frontmatterMatch && frontmatterMatch[1]) {
          const frontmatterContent = frontmatterMatch[1];
          const lines = frontmatterContent.split("\n");
          for (const line of lines) {
            const match = line.match(/^(\w+):\s*(.*)$/);
            if (match && match[1] && match[2] !== void 0) {
              const key = match[1];
              let value = match[2];
              if (value.startsWith('"') && value.endsWith('"') || value.startsWith("'") && value.endsWith("'")) {
                value = value.slice(1, -1);
              }
              frontmatter[key] = value;
            }
          }
        }
        let title = "";
        if (this.settings.titleProperty && frontmatter[this.settings.titleProperty]) {
          const titleValue = frontmatter[this.settings.titleProperty];
          title = typeof titleValue === "string" ? titleValue : file.basename;
        } else if (this.settings.useFilenameAsTitle) {
          title = file.basename;
        } else {
          title = file.basename;
        }
        let description;
        if (this.settings.descriptionProperty && frontmatter[this.settings.descriptionProperty]) {
          const descValue = frontmatter[this.settings.descriptionProperty];
          description = typeof descValue === "string" ? descValue : void 0;
        }
        return {
          path: file.path,
          title,
          description,
          content,
          ignored: false
        };
      }
      /**
       * Check for duplicate titles
       */
      async checkDuplicateTitles(file, settings) {
        var _a;
        const results = [];
        if (!settings.checkDuplicateContent || !settings.titleProperty && !settings.useFilenameAsTitle) {
          return results;
        }
        if (!this.vaultData) {
          await this.collectVaultData();
        }
        const fileMetadata = this.vaultData.files.get(file.path);
        if (!fileMetadata) {
          return results;
        }
        const titleKey = fileMetadata.title.toLowerCase().trim();
        if (!titleKey) {
          return results;
        }
        const duplicateFiles = ((_a = this.vaultData) == null ? void 0 : _a.titleMap.get(titleKey)) || [];
        if (duplicateFiles.length > 1) {
          const otherFiles = duplicateFiles.filter((f) => f !== file.path);
          const genericTitles = ["untitled", "new note", "untitled note", "new file", "document"];
          const isGeneric = genericTitles.includes(titleKey);
          const severity = isGeneric ? "warning" : "error";
          const message = isGeneric ? `Generic title "${fileMetadata.title}" used in ${duplicateFiles.length} files` : `Duplicate title "${fileMetadata.title}" found in ${duplicateFiles.length} files`;
          const suggestion = isGeneric ? "Consider using a more descriptive title" : `This title is also used in: ${otherFiles.map((f) => `<a href="#" data-file-path="${f}" class="seo-file-link">${this.getDisplayPath(f)}</a>`).join(", ")}`;
          results.push({
            passed: false,
            message,
            suggestion,
            severity,
            position: {
              line: 1,
              searchText: this.settings.titleProperty || "title",
              context: `title: "${fileMetadata.title}"`
            }
          });
        } else {
          results.push({
            passed: true,
            message: `Unique title: "${fileMetadata.title}"`,
            severity: "info"
          });
        }
        return results;
      }
      /**
       * Check for duplicate descriptions
       */
      async checkDuplicateDescriptions(file, settings) {
        var _a;
        const results = [];
        if (!settings.checkDuplicateContent || !settings.descriptionProperty) {
          return results;
        }
        if (!this.vaultData) {
          await this.collectVaultData();
        }
        const fileMetadata = this.vaultData.files.get(file.path);
        if (!fileMetadata || !fileMetadata.description) {
          return results;
        }
        const descKey = fileMetadata.description.toLowerCase().trim();
        const duplicateFiles = ((_a = this.vaultData) == null ? void 0 : _a.descriptionMap.get(descKey)) || [];
        if (duplicateFiles.length > 1) {
          const otherFiles = duplicateFiles.filter((f) => f !== file.path);
          const genericDescriptions = ["description", "meta description", "page description"];
          const isGeneric = genericDescriptions.includes(descKey);
          const severity = isGeneric ? "warning" : "error";
          const message = isGeneric ? `Generic description "${fileMetadata.description}" used in ${duplicateFiles.length} files` : `Duplicate description "${fileMetadata.description}" found in ${duplicateFiles.length} files`;
          const suggestion = isGeneric ? "Consider using a more descriptive meta description" : `This description is also used in: ${otherFiles.map((f) => `<a href="#" data-file-path="${f}" class="seo-file-link">${this.getDisplayPath(f)}</a>`).join(", ")}`;
          results.push({
            passed: false,
            message,
            suggestion,
            severity,
            position: {
              line: 1,
              searchText: this.settings.descriptionProperty || "description",
              context: `description: "${fileMetadata.description}"`
            }
          });
        } else {
          results.push({
            passed: true,
            message: `Unique description: "${fileMetadata.description}"`,
            severity: "info"
          });
        }
        return results;
      }
      /**
       * Check for duplicate content using Jaccard similarity
       */
      async checkDuplicateContent(file, settings) {
        var _a, _b;
        const results = [];
        if (!settings.checkDuplicateContent) {
          return results;
        }
        if (!this.vaultData) {
          await this.collectVaultData();
        }
        const fileMetadata = (_a = this.vaultData) == null ? void 0 : _a.files.get(file.path);
        if (!fileMetadata) {
          return results;
        }
        const paragraphs = this.splitIntoParagraphs(fileMetadata.content);
        const duplicates = [];
        for (let i = 0; i < paragraphs.length; i++) {
          const paragraph = paragraphs[i];
          if (!paragraph || paragraph.length < 50) continue;
          const similarFiles = [];
          for (const [otherFilePath, otherMetadata] of ((_b = this.vaultData) == null ? void 0 : _b.files) || []) {
            if (otherFilePath === file.path) continue;
            const otherParagraphs = this.splitIntoParagraphs(otherMetadata.content);
            for (const otherParagraph of otherParagraphs) {
              if (!otherParagraph || otherParagraph.length < 50) continue;
              const similarity = this.calculateJaccardSimilarity(paragraph, otherParagraph);
              if (similarity >= settings.duplicateThreshold) {
                similarFiles.push({
                  file: otherFilePath,
                  similarity
                });
              }
            }
          }
          if (similarFiles.length > 0) {
            duplicates.push({
              paragraph: i + 1,
              similarFiles
            });
          }
        }
        if (duplicates.length > 0) {
          duplicates.forEach(({ paragraph, similarFiles }) => {
            var _a2;
            const maxSimilarity = Math.max(...similarFiles.map((s) => s.similarity));
            const fileList = similarFiles.sort((a, b) => b.similarity - a.similarity).slice(0, 3).map((s) => `<a href="#" data-file-path="${s.file}" class="seo-file-link">${this.getDisplayPath(s.file)}</a> (${s.similarity.toFixed(1)}%)`).join(", ");
            results.push({
              passed: false,
              message: `Duplicate content detected in paragraph ${paragraph}`,
              suggestion: `Similarity: ${maxSimilarity.toFixed(1)}% with: ${fileList}`,
              severity: "error",
              position: {
                line: this.findParagraphLine(fileMetadata.content, paragraph - 1),
                searchText: ((_a2 = paragraphs[paragraph - 1]) == null ? void 0 : _a2.substring(0, 50)) + "...",
                context: `Paragraph ${paragraph} content`
              }
            });
          });
        } else {
          results.push({
            passed: true,
            message: "No duplicate content detected",
            severity: "info"
          });
        }
        return results;
      }
      /**
       * Split content into paragraphs, filtering out non-content elements
       */
      splitIntoParagraphs(content) {
        let cleanContent = removeCodeBlocks(content);
        cleanContent = cleanContent.replace(/^#{1,6}\s+/gm, "").replace(/^\s*[-*+]\s+/gm, "").replace(/^\s*\d+\.\s+/gm, "").replace(/^\s*>\s*/gm, "").replace(/^\s*\|.*\|.*$/gm, "").replace(/^\s*\|.*$/gm, "").replace(/\[\[.*?\]\]/g, "").replace(/!\[\[.*?\]\]/g, "").replace(/\[.*?\]\(.*?\)/g, "").replace(/!\[.*?\]\(.*?\)/g, "").replace(/^\s*---\s*$/gm, "").replace(/^\s*\+\+\+\s*$/gm, "").replace(/^\s*==\s*$/gm, "").replace(/^\s*!!\s*$/gm, "").replace(/^\s*>\s*\[!.*?\]\s*$/gm, "").replace(/^\s*>\s*$/gm, "").replace(/^\s*$/gm, "").trim();
        return cleanContent.split(/\n\s*\n/).map((p) => p.trim()).filter((p) => {
          if (p.length < 30) return false;
          const htmlLikeRatio = (p.match(/<[^>]*>/g) || []).join("").length / p.length;
          if (htmlLikeRatio > 0.3) return false;
          const specialCharRatio = (p.match(/[^\w\s.,!?;:'"()-]/g) || []).length / p.length;
          if (specialCharRatio > 0.5) return false;
          const wordRatio = (p.match(/\b\w+\b/g) || []).length / p.split(/\s+/).length;
          if (wordRatio < 0.3) return false;
          return true;
        });
      }
      /**
       * Calculate Jaccard similarity between two texts
       */
      calculateJaccardSimilarity(text1, text2) {
        const normalize = (text) => text.toLowerCase().replace(/\s+/g, " ").trim();
        const normalized1 = normalize(text1);
        const normalized2 = normalize(text2);
        const stopWords = /* @__PURE__ */ new Set(["the", "and", "or", "but", "in", "on", "at", "to", "for", "of", "with", "by", "a", "an", "is", "are", "was", "were", "be", "been", "have", "has", "had", "do", "does", "did", "will", "would", "could", "should", "may", "might", "can", "this", "that", "these", "those", "i", "you", "he", "she", "it", "we", "they", "me", "him", "her", "us", "them"]);
        const words1 = new Set(
          normalized1.split(/\s+/).filter((w) => w.length > 2 && !stopWords.has(w)).map((w) => w.replace(/[^\w]/g, "")).filter((w) => w.length > 0)
        );
        const words2 = new Set(
          normalized2.split(/\s+/).filter((w) => w.length > 2 && !stopWords.has(w)).map((w) => w.replace(/[^\w]/g, "")).filter((w) => w.length > 0)
        );
        if (words1.size === 0 || words2.size === 0) {
          return 0;
        }
        const intersection = new Set([...words1].filter((x) => words2.has(x)));
        const union = /* @__PURE__ */ new Set([...words1, ...words2]);
        return intersection.size / union.size * 100;
      }
      /**
       * Find the line number of a paragraph in the content
       */
      findParagraphLine(content, paragraphIndex) {
        const paragraphs = this.splitIntoParagraphs(content);
        if (paragraphIndex >= paragraphs.length) return 1;
        const targetParagraph = paragraphs[paragraphIndex];
        if (!targetParagraph) return 1;
        const lines = content.split("\n");
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i];
          if (line && line.includes(targetParagraph.substring(0, 50))) {
            return i + 1;
          }
        }
        return 1;
      }
      /**
       * Get display path for a file
       */
      getDisplayPath(filePath) {
        if (this.vaultData && this.settings.useNoteTitles) {
          const fileMetadata = this.vaultData.files.get(filePath);
          if (fileMetadata && fileMetadata.title) {
            return fileMetadata.title;
          }
        }
        const parts = filePath.split("/");
        return parts[parts.length - 1] || filePath;
      }
      /**
       * Clear cached vault data
       */
      clearCache() {
        this.vaultData = null;
      }
      /**
       * Get current vault data
       */
      getVaultData() {
        return this.vaultData;
      }
    };
  }
});

// src/seo-checker.ts
var seo_checker_exports = {};
__export(seo_checker_exports, {
  clearAllCache: () => clearAllCache,
  clearCache: () => clearCache,
  clearCacheForFile: () => clearCacheForFile,
  getCacheStats: () => getCacheStats,
  runSEOCheck: () => runSEOCheck
});
async function runSEOCheck(plugin, files, abortController) {
  const results = [];
  const vaultDetector = new VaultDuplicateDetector(plugin.app, plugin.settings);
  if (plugin.settings.checkDuplicateContent) {
    await vaultDetector.collectVaultData();
  }
  for (const file of files) {
    if (abortController == null ? void 0 : abortController.signal.aborted) {
      throw new DOMException("Operation was aborted", "AbortError");
    }
    try {
      const cachedResult = getCachedResult(file, plugin);
      if (cachedResult) {
        results.push(cachedResult);
        continue;
      }
      const content = await plugin.app.vault.read(file);
      const result = await checkFile(plugin, file, content, vaultDetector, abortController);
      void cacheResult(file, result, plugin);
      results.push(result);
    } catch (error) {
      if (error instanceof Error && error.name === "AbortError") {
        throw error;
      }
      console.error(`Error checking file ${file.path}:`, error);
    }
  }
  return results;
}
async function checkFile(plugin, file, content, vaultDetector, abortController) {
  const checks = {
    titleLength: await checkTitleLength(content, file, plugin.settings),
    metaDescription: await checkMetaDescription(content, file, plugin.settings),
    titleH1Uniqueness: await checkTitleH1Uniqueness(content, file, plugin.settings),
    keywordInTitle: await checkKeywordInTitle(content, file, plugin.settings),
    keywordInDescription: await checkKeywordInDescription(content, file, plugin.settings),
    keywordInHeadings: await checkKeywordInHeadings(content, file, plugin.settings),
    keywordInSlug: await checkKeywordInSlug(content, file, plugin.settings),
    slugFormat: await checkSlugFormat(content, file, plugin.settings),
    keywordDensity: await checkKeywordDensity(content, file, plugin.settings),
    headingOrder: await checkHeadingOrder(content, file, plugin.settings),
    contentLength: await checkContentLength(content, file, plugin.settings),
    duplicateTitles: await checkDuplicateTitles(content, file, plugin.settings, vaultDetector),
    duplicateDescriptions: await checkDuplicateDescriptions(content, file, plugin.settings, vaultDetector),
    duplicateContent: plugin.settings.checkDuplicateContent ? await checkVaultDuplicateContent(content, file, plugin.settings, vaultDetector) : await checkDuplicateContent(content, file, plugin.settings),
    altText: await checkAltText(content, file, plugin.settings),
    imageFileNames: await checkImageNaming(content, file, plugin.settings),
    nakedLinks: await checkNakedLinks(content, file, plugin.settings),
    brokenLinks: await checkBrokenLinks(content, file, plugin.settings, plugin.app),
    potentiallyBrokenLinks: await checkPotentiallyBrokenLinks(content, file, plugin.settings, plugin.app),
    potentiallyBrokenEmbeds: await checkNotices(content, file, plugin.settings),
    externalBrokenLinks: plugin.settings.enableExternalLinkVaultCheck ? await checkExternalBrokenLinks(content, file, plugin.settings, abortController) : plugin.settings.checkExternalLinks ? await checkExternalLinks(content, file, plugin.settings) : [],
    readingLevel: await checkReadingLevel(content, file, plugin.settings)
  };
  const allResults = Object.values(checks).flat();
  const issuesCount = allResults.filter((r) => r.severity === "error").length;
  const warningsCount = allResults.filter((r) => r.severity === "warning").length;
  const noticesCount = allResults.filter((r) => r.severity === "notice").length;
  let overallScore = 0;
  const titleResults = [...checks.titleLength, ...checks.titleH1Uniqueness];
  if (titleResults.length > 0) {
    const passedCount = titleResults.filter((r) => r.passed).length;
    overallScore += passedCount / titleResults.length * 15;
  } else {
    overallScore += 15;
  }
  const metaResults = checks.metaDescription;
  if (metaResults.length > 0) {
    const passedCount = metaResults.filter((r) => r.passed).length;
    overallScore += passedCount / metaResults.length * 15;
  } else {
    overallScore += 15;
  }
  const headingResults = checks.headingOrder;
  if (headingResults.length > 0) {
    const passedCount = headingResults.filter((r) => r.passed).length;
    overallScore += passedCount / headingResults.length * 15;
  } else {
    overallScore += 15;
  }
  const contentResults = [...checks.contentLength, ...checks.readingLevel];
  if (contentResults.length > 0) {
    const passedCount = contentResults.filter((r) => r.passed).length;
    overallScore += passedCount / contentResults.length * 20;
  } else {
    overallScore += 20;
  }
  const altTextResults = checks.altText;
  if (altTextResults.length > 0) {
    const passedCount = altTextResults.filter((r) => r.passed).length;
    overallScore += passedCount / altTextResults.length * 10;
  } else {
    overallScore += 10;
  }
  const linkResults = [...checks.brokenLinks, ...checks.nakedLinks];
  if (linkResults.length > 0) {
    const passedCount = linkResults.filter((r) => r.passed).length;
    overallScore += passedCount / linkResults.length * 15;
  } else {
    overallScore += 15;
  }
  const keywordResults = [
    ...checks.keywordDensity,
    ...checks.keywordInTitle,
    ...checks.keywordInDescription,
    ...checks.keywordInHeadings,
    ...checks.keywordInSlug
  ];
  if (keywordResults.length > 0) {
    const passedCount = keywordResults.filter((r) => r.passed).length;
    overallScore += passedCount / keywordResults.length * 10;
  } else {
    overallScore += 10;
  }
  overallScore = Math.round(Math.max(0, Math.min(100, overallScore)));
  return {
    file: file.path,
    displayName: getDisplayName(file, content, plugin.settings),
    checks,
    overallScore,
    issuesCount,
    warningsCount,
    noticesCount
  };
}
async function generateFileHash(file, app) {
  try {
    const content = await app.vault.read(file);
    const stat = await app.vault.adapter.stat(file.path);
    return `${content.length}-${(stat == null ? void 0 : stat.mtime) || Date.now()}`;
  } catch (e) {
    return `${Date.now()}`;
  }
}
function generateSettingsHash(settings) {
  const relevantSettings = {
    keywordProperty: settings.keywordProperty || "",
    keywordDensityMin: settings.keywordDensityMin,
    keywordDensityMax: settings.keywordDensityMax,
    descriptionProperty: settings.descriptionProperty || "",
    titleProperty: settings.titleProperty || "",
    useFilenameAsTitle: settings.useFilenameAsTitle,
    checkContentLength: settings.checkContentLength,
    minContentLength: settings.minContentLength,
    scanDirectories: settings.scanDirectories || "",
    enableMDXSupport: settings.enableMDXSupport,
    // External link checking settings
    checkExternalLinks: settings.checkExternalLinks,
    enableExternalLinkVaultCheck: settings.enableExternalLinkVaultCheck,
    checkPotentiallyBrokenLinks: settings.checkPotentiallyBrokenLinks,
    checkPotentiallyBrokenEmbeds: settings.checkPotentiallyBrokenEmbeds,
    // Other SEO check settings
    checkAltText: settings.checkAltText,
    checkBrokenLinks: settings.checkBrokenLinks,
    checkNakedLinks: settings.checkNakedLinks,
    checkHeadingOrder: settings.checkHeadingOrder,
    checkTitleLength: settings.checkTitleLength,
    checkImageNaming: settings.checkImageNaming,
    checkDuplicateContent: settings.checkDuplicateContent,
    checkReadingLevel: settings.checkReadingLevel,
    // Thresholds that affect results
    duplicateThreshold: settings.duplicateThreshold
    // Add other settings that affect SEO results
  };
  return JSON.stringify(relevantSettings);
}
function getCachedResult(file, plugin) {
  const entry = cache.get(file.path);
  if (!entry) {
    return null;
  }
  const now = Date.now();
  const isExpired = now - entry.timestamp > CACHE_EXPIRY_MS;
  const currentSettingsHash = generateSettingsHash(plugin.settings);
  const settingsChanged = entry.settingsHash !== currentSettingsHash;
  if (isExpired || settingsChanged) {
    cache.delete(file.path);
    return null;
  }
  return entry.result;
}
async function cacheResult(file, result, plugin) {
  const fileHash = await generateFileHash(file, plugin.app);
  const settingsHash = generateSettingsHash(plugin.settings);
  cache.set(file.path, {
    result,
    timestamp: Date.now(),
    fileHash,
    settingsHash
  });
}
function clearCache() {
  cache.clear();
}
function getCacheStats() {
  return { size: cache.size };
}
function clearCacheForFile(filePath) {
  cache.delete(filePath);
}
function clearAllCache() {
  cache.clear();
}
var cache, CACHE_EXPIRY_MS;
var init_seo_checker = __esm({
  "src/seo-checker.ts"() {
    "use strict";
    init_checks();
    init_content_checks();
    init_duplicate_detection();
    cache = /* @__PURE__ */ new Map();
    CACHE_EXPIRY_MS = 24 * 60 * 60 * 1e3;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => SEOPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian9 = require("obsidian");

// src/settings.ts
var DEFAULT_SETTINGS = {
  scanDirectories: "",
  ignoreUnderscoreFiles: false,
  enableMDXSupport: false,
  keywordProperty: "",
  descriptionProperty: "",
  titleProperty: "",
  useFilenameAsTitle: false,
  slugProperty: "",
  useFilenameAsSlug: false,
  parentFolderSlugFilename: "",
  titlePrefixSuffix: "",
  checkTitleLength: true,
  checkHeadingOrder: true,
  checkAltText: true,
  checkImageNaming: true,
  checkBrokenLinks: true,
  checkExternalLinks: true,
  enableExternalLinkButton: true,
  enableExternalLinkVaultCheck: false,
  checkNakedLinks: true,
  checkContentLength: true,
  checkDuplicateContent: false,
  checkReadingLevel: true,
  checkPotentiallyBrokenLinks: true,
  checkPotentiallyBrokenEmbeds: true,
  useNoteTitles: false,
  skipH1Check: false,
  publishMode: false,
  defaultSort: "issues-desc",
  showRibbonIcon: true,
  minContentLength: 300,
  keywordDensityMin: 1,
  keywordDensityMax: 2,
  duplicateThreshold: 80,
  cachedGlobalResults: [],
  lastScanTimestamp: 0
};

// src/commands/index.ts
function registerCommands(plugin) {
  plugin.addCommand({
    id: "open-current",
    name: "Open current note audit",
    icon: "search-check",
    callback: () => {
      plugin.openCurrentPanel();
    }
  });
  plugin.addCommand({
    id: "open-global",
    name: "Open vault audit",
    icon: "search-check",
    callback: () => {
      plugin.openGlobalPanel();
    }
  });
  plugin.addCommand({
    id: "run-current",
    name: "Run current note audit",
    icon: "search-check",
    callback: () => {
      plugin.openCurrentPanel();
      setTimeout(() => {
        const currentPanel = plugin.app.workspace.getLeavesOfType("seo-current-panel")[0];
        if (currentPanel && currentPanel.view) {
          const checkBtn = currentPanel.view.containerEl.querySelector(".seo-top-btn");
          if (checkBtn) {
            checkBtn.click();
          }
        }
      }, 200);
    }
  });
  plugin.addCommand({
    id: "run-global",
    name: "Run vault audit",
    icon: "search-check",
    callback: () => {
      plugin.openGlobalPanel();
      void setTimeout(() => {
        void (async () => {
          const globalPanels = plugin.app.workspace.getLeavesOfType("seo-global-panel");
          if (globalPanels.length === 0) {
            plugin.openGlobalPanel();
            return;
          }
          const panel = globalPanels[0];
          if (panel == null ? void 0 : panel.view) {
            const seoPanel = panel.view;
            await seoPanel.actions.refreshGlobalResults();
            seoPanel.render();
          }
        })();
      }, 300);
    }
  });
}

// src/settings-tab.ts
var import_obsidian2 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  {
    if (heading) {
      const headingEl = containerEl.createDiv("setting-group-heading");
      headingEl.createEl("h3", { text: heading });
    }
    return {
      addSetting(cb) {
        const setting = new import_obsidian.Setting(containerEl);
        cb(setting);
      }
    };
  }
}

// src/settings-tab.ts
var SEOSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.icon = "lucide-search-check";
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const globalGroup = createSettingsGroup(containerEl, "Global", "seo");
    globalGroup.addSetting((setting) => {
      setting.setName("Scan directories").setDesc("Comma-separated list of directory names to scan. Leave blank to scan all directories.").addText((text) => {
        text.setPlaceholder("like blog, posts, public");
        text.setValue(this.plugin.settings.scanDirectories);
        text.onChange(async (value) => {
          this.plugin.settings.scanDirectories = value;
          await this.plugin.saveSettings();
        });
      });
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Use note titles instead of file names").setDesc("Display note titles from properties instead of file names in the issues list and current note audit").addToggle((toggle) => toggle.setValue(this.plugin.settings.useNoteTitles).onChange(async (value) => {
        this.plugin.settings.useNoteTitles = value;
        await this.plugin.saveSettings();
      }));
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Title prefix / suffix").setDesc("Specify an optional prefix or suffix that gets appended to your meta title - used to factor in character count for the title length check").addText((text) => text.setPlaceholder("Author name").setValue(this.plugin.settings.titlePrefixSuffix).onChange(async (value) => {
        this.plugin.settings.titlePrefixSuffix = value;
        await this.plugin.saveSettings();
      }));
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Ignores files with an underscore prefix").setDesc("Don't process files that begin with an underscore, like _example.md").addToggle((toggle) => toggle.setValue(this.plugin.settings.ignoreUnderscoreFiles).onChange(async (value) => {
        this.plugin.settings.ignoreUnderscoreFiles = value;
        await this.plugin.saveSettings();
      }));
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Enable MDX file support").setDesc("Process MDX files in addition to Markdown files. MDX files use the same properties format as Markdown.").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableMDXSupport).onChange(async (value) => {
        this.plugin.settings.enableMDXSupport = value;
        await this.plugin.saveSettings();
      }));
    });
    globalGroup.addSetting((setting) => {
      setting.setName("Show ribbon icon").setDesc("Show or hide the wizard icon in the left sidebar ribbon").addToggle((toggle) => toggle.setValue(this.plugin.settings.showRibbonIcon).onChange(async (value) => {
        this.plugin.settings.showRibbonIcon = value;
        await this.plugin.saveSettings();
        this.plugin.toggleRibbonIcon();
      }));
    });
    const propertyNamesGroup = createSettingsGroup(containerEl, "Property names", "seo");
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Keyword property").setDesc("Property name for target keyword (targetKeyword, seo, keyword, etc.)").addText((text) => {
        text.setPlaceholder("targetKeyword");
        text.setValue(this.plugin.settings.keywordProperty);
        text.onChange(async (value) => {
          this.plugin.settings.keywordProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Description property").setDesc("Property name for meta description").addText((text) => {
        text.setPlaceholder("description");
        text.setValue(this.plugin.settings.descriptionProperty);
        text.onChange(async (value) => {
          this.plugin.settings.descriptionProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Title property").setDesc("Property name for title (leave blank to skip title checks)").addText((text) => {
        text.setPlaceholder("title");
        text.setValue(this.plugin.settings.titleProperty);
        text.onChange(async (value) => {
          this.plugin.settings.titleProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Use file name as title").setDesc("Use file name as title instead of a property").addToggle((toggle) => toggle.setValue(this.plugin.settings.useFilenameAsTitle).onChange(async (value) => {
        this.plugin.settings.useFilenameAsTitle = value;
        await this.plugin.saveSettings();
      }));
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Slug property").setDesc("Property name for slug (leave blank to skip slug checks)").addText((text) => {
        text.setPlaceholder("slug");
        text.setValue(this.plugin.settings.slugProperty);
        text.onChange(async (value) => {
          this.plugin.settings.slugProperty = value;
          await this.plugin.saveSettings();
        });
      });
    });
    propertyNamesGroup.addSetting((setting) => {
      setting.setName("Use file/folder name as slug").setDesc("Use file/folder name as slug instead of a property").addToggle((toggle) => toggle.setValue(this.plugin.settings.useFilenameAsSlug).onChange(async (value) => {
        this.plugin.settings.useFilenameAsSlug = value;
        await this.plugin.saveSettings();
        this.display();
      }));
    });
    if (this.plugin.settings.useFilenameAsSlug) {
      propertyNamesGroup.addSetting((setting) => {
        setting.setName("Use parent folder name instead when specified file name is used").setDesc("If a markdown file matches this file name, use the parent folder name as the slug instead").addText((text) => {
          text.setPlaceholder("index");
          text.setValue(this.plugin.settings.parentFolderSlugFilename);
          text.onChange(async (value) => {
            this.plugin.settings.parentFolderSlugFilename = value;
            await this.plugin.saveSettings();
          });
        });
      });
    }
    const auditOptionsGroup = createSettingsGroup(containerEl, "Audit options", "seo");
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check meta title length").setDesc("Enable meta title length checking").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkTitleLength).onChange(async (value) => {
        this.plugin.settings.checkTitleLength = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check heading order").setDesc("Enable heading hierarchy checking").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkHeadingOrder).onChange(async (value) => {
        this.plugin.settings.checkHeadingOrder = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check content length").setDesc("Enable content length checking").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkContentLength).onChange(async (value) => {
        this.plugin.settings.checkContentLength = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check duplicate content").setDesc("Enable duplicate content detection").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkDuplicateContent).onChange(async (value) => {
        this.plugin.settings.checkDuplicateContent = value;
        await this.plugin.saveSettings();
      }));
      setting.descEl.createEl("div", {
        // eslint-disable-next-line obsidianmd/ui/sentence-case
        text: "Warning: This feature can be very resource-intensive with large vaults and many notes. Disable for faster audits.",
        cls: "setting-item-description seo-warning-message"
      });
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check alt text").setDesc("Enable alt text checking for media content (images, videos, embeds, etc.)").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkAltText).onChange(async (value) => {
        this.plugin.settings.checkAltText = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check image file names").setDesc("Enable image file name checking").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkImageNaming).onChange(async (value) => {
        this.plugin.settings.checkImageNaming = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check broken internal links").setDesc("Enable broken internal link detection").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkBrokenLinks).onChange(async (value) => {
        this.plugin.settings.checkBrokenLinks = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check external links").setDesc("Return a list of external links").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkExternalLinks).onChange(async (value) => {
        this.plugin.settings.checkExternalLinks = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Enable broken external link check button").setDesc('Show "Check external links for 404s" button in current note panel').addToggle((toggle) => toggle.setValue(this.plugin.settings.enableExternalLinkButton).onChange(async (value) => {
        this.plugin.settings.enableExternalLinkButton = value;
        await this.plugin.saveSettings();
        if (this.plugin.sidePanel) {
          this.plugin.sidePanel.refresh();
        }
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check naked links").setDesc("Enable naked URL detection").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkNakedLinks).onChange(async (value) => {
        this.plugin.settings.checkNakedLinks = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check reading level").setDesc("Enable reading level analysis").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkReadingLevel).onChange(async (value) => {
        this.plugin.settings.checkReadingLevel = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check potentially broken links").setDesc("Check for potentially broken internal links that may not work on web publishing").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkPotentiallyBrokenLinks).onChange(async (value) => {
        this.plugin.settings.checkPotentiallyBrokenLinks = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Check potentially broken embeds").setDesc("Check for potentially broken markdown or wikilink-based embedded media that may not work on web publishing").addToggle((toggle) => toggle.setValue(this.plugin.settings.checkPotentiallyBrokenEmbeds).onChange(async (value) => {
        this.plugin.settings.checkPotentiallyBrokenEmbeds = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Flexible relative link check").setDesc("Uses flexible validation for relative paths like /page that can be resolved by a static site generator, but may be considered broken by typical Obsidian validation").addToggle((toggle) => toggle.setValue(this.plugin.settings.publishMode).onChange(async (value) => {
        this.plugin.settings.publishMode = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Title property is H1").setDesc("Enable when your static site generator uses the title property to automatically generate the H1 heading. This prevents H1 validation errors while still flagging H1s that appear after other heading levels.").addToggle((toggle) => toggle.setValue(this.plugin.settings.skipH1Check).onChange(async (value) => {
        this.plugin.settings.skipH1Check = value;
        await this.plugin.saveSettings();
      }));
    });
    auditOptionsGroup.addSetting((setting) => {
      setting.setName("Automatically include broken external link checks in audits (not recommended)").setDesc("Include broken external link checking in vault-wide and current note audits").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableExternalLinkVaultCheck).onChange(async (value) => {
        this.plugin.settings.enableExternalLinkVaultCheck = value;
        await this.plugin.saveSettings();
        if (this.plugin.sidePanel) {
          this.plugin.sidePanel.refresh();
        }
      }));
      setting.descEl.createEl("div", {
        // eslint-disable-next-line obsidianmd/ui/sentence-case
        text: 'Warning: This will make vault audits extremely slow. Use the "Check external links" button instead for individual notes.',
        cls: "setting-item-description seo-warning-message"
      });
    });
    const thresholdsGroup = createSettingsGroup(containerEl, "Thresholds", "seo");
    thresholdsGroup.addSetting((setting) => {
      setting.setName("Minimum content length").setDesc("Minimum word count for content length check").addText((text) => text.setPlaceholder("300").setValue(this.plugin.settings.minContentLength.toString()).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num)) {
          this.plugin.settings.minContentLength = num;
          await this.plugin.saveSettings();
        }
      }));
    });
    thresholdsGroup.addSetting((setting) => {
      setting.setName("Keyword density minimum").setDesc("Minimum keyword density percentage").addText((text) => text.setPlaceholder("1").setValue(this.plugin.settings.keywordDensityMin.toString()).onChange(async (value) => {
        const num = parseFloat(value);
        if (!isNaN(num)) {
          this.plugin.settings.keywordDensityMin = num;
          await this.plugin.saveSettings();
        }
      }));
    });
    thresholdsGroup.addSetting((setting) => {
      setting.setName("Keyword density maximum").setDesc("Maximum keyword density percentage").addText((text) => text.setPlaceholder("2").setValue(this.plugin.settings.keywordDensityMax.toString()).onChange(async (value) => {
        const num = parseFloat(value);
        if (!isNaN(num)) {
          this.plugin.settings.keywordDensityMax = num;
          await this.plugin.saveSettings();
        }
      }));
    });
    thresholdsGroup.addSetting((setting) => {
      setting.setName("Duplicate content threshold").setDesc("Similarity percentage threshold for duplicate content detection").addText((text) => text.setPlaceholder("80").setValue(this.plugin.settings.duplicateThreshold.toString()).onChange(async (value) => {
        const num = parseInt(value);
        if (!isNaN(num)) {
          this.plugin.settings.duplicateThreshold = num;
          await this.plugin.saveSettings();
        }
      }));
    });
  }
};

// src/ui/side-panel.ts
var import_obsidian6 = require("obsidian");

// src/ui/panel-constants.ts
var SEOCurrentPanelViewType = "seo-current-panel";
var SEOGlobalPanelViewType = "seo-global-panel";

// src/ui/side-panel.ts
init_panel_utils();

// src/ui/panel-actions.ts
var import_obsidian4 = require("obsidian");
init_panel_utils();

// src/utils/file-utils.ts
function isSupportedFile(file, settings) {
  const extension = file.extension.toLowerCase();
  if (extension === "md") {
    return true;
  }
  if (extension === "mdx" && settings.enableMDXSupport) {
    return true;
  }
  return false;
}

// src/ui/panel-actions.ts
var PanelActions = class {
  constructor(app, plugin, panelType) {
    this.app = app;
    this.plugin = plugin;
    this.panelType = panelType;
  }
  async runInitialScan() {
    try {
      const files = await this.plugin.getFilesToCheck();
      if (files.length === 0) {
        return [];
      }
      if (files.length > 20) {
        new import_obsidian4.Notice(`Running SEO audit on ${files.length} files... This may take a moment.`);
      }
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, files);
      this.plugin.settings.cachedGlobalResults = results;
      this.plugin.settings.lastScanTimestamp = Date.now();
      await this.plugin.saveSettings();
      new import_obsidian4.Notice(`SEO audit complete with ${results.length} files.`);
      return results;
    } catch (error) {
      console.error("Error running initial scan:", error);
      new import_obsidian4.Notice("Error analyzing files. Check console for details.");
      return [];
    }
  }
  async checkCurrentNote(abortSignal) {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile || !isSupportedFile(activeFile, this.plugin.settings)) {
      new import_obsidian4.Notice("Please open a markdown or MDX file first.");
      return null;
    }
    try {
      const { clearCacheForFile: clearCacheForFile2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      clearCacheForFile2(activeFile.path);
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, [activeFile], abortSignal ? { signal: abortSignal } : void 0);
      if (results.length > 0) {
        new import_obsidian4.Notice("SEO audit complete.");
        return results[0] || null;
      }
      return null;
    } catch (error) {
      if (error instanceof Error && error.name === "AbortError") {
        new import_obsidian4.Notice("SEO audit cancelled.");
        throw error;
      }
      console.error("Error checking current note:", error);
      new import_obsidian4.Notice("Error analyzing current note. Check console for details.");
      return null;
    }
  }
  async checkExternalLinks() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile || !isSupportedFile(activeFile, this.plugin.settings)) {
      new import_obsidian4.Notice("Please open a markdown or MDX file first.");
      return null;
    }
    try {
      const originalVaultSetting = this.plugin.settings.enableExternalLinkVaultCheck;
      const originalExternalSetting = this.plugin.settings.checkExternalLinks;
      this.plugin.settings.enableExternalLinkVaultCheck = true;
      this.plugin.settings.checkExternalLinks = false;
      const { clearCacheForFile: clearCacheForFile2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      clearCacheForFile2(activeFile.path);
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, [activeFile]);
      this.plugin.settings.enableExternalLinkVaultCheck = originalVaultSetting;
      this.plugin.settings.checkExternalLinks = originalExternalSetting;
      if (results.length > 0) {
        new import_obsidian4.Notice("External links check complete.");
        return results[0] || null;
      }
      return null;
    } catch (error) {
      console.error("Error checking external links:", error);
      new import_obsidian4.Notice("Error checking external links. Check console for details.");
      return null;
    }
  }
  async checkAllExternalLinks() {
    try {
      const files = await this.plugin.getFilesToCheck();
      if (files.length === 0) {
        const fileTypeText = this.plugin.settings.enableMDXSupport ? "markdown or MDX files" : "markdown files";
        new import_obsidian4.Notice(`No ${fileTypeText} found in configured directories.`);
        return [];
      }
      const originalVaultSetting = this.plugin.settings.enableExternalLinkVaultCheck;
      const originalExternalSetting = this.plugin.settings.checkExternalLinks;
      this.plugin.settings.enableExternalLinkVaultCheck = true;
      this.plugin.settings.checkExternalLinks = false;
      const { clearAllCache: clearAllCache3 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      clearAllCache3();
      if (files.length > 20) {
        new import_obsidian4.Notice(`Checking external links for 404s on ${files.length} files... This may take a moment.`);
      }
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, files);
      this.plugin.settings.enableExternalLinkVaultCheck = originalVaultSetting;
      this.plugin.settings.checkExternalLinks = originalExternalSetting;
      this.plugin.settings.cachedGlobalResults = results;
      this.plugin.settings.lastScanTimestamp = Date.now();
      await this.plugin.saveSettings();
      new import_obsidian4.Notice(`External links check complete with ${results.length} files.`);
      return results;
    } catch (error) {
      console.error("Error checking all external links:", error);
      new import_obsidian4.Notice("Error checking external links. Check console for details.");
      return [];
    }
  }
  async refreshGlobalResults(abortSignal) {
    let auditNotice = null;
    try {
      const { clearAllCache: clearAllCache3 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      clearAllCache3();
      const files = await this.plugin.getFilesToCheck();
      if (files.length === 0) {
        const fileTypeText = this.plugin.settings.enableMDXSupport ? "markdown or MDX files" : "markdown files";
        new import_obsidian4.Notice(`No ${fileTypeText} found in configured directories.`);
        return [];
      }
      if (files.length > 20) {
        auditNotice = new import_obsidian4.Notice(`Refreshing SEO audit on ${files.length} files... This may take a moment.`, 0);
      }
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const results = await runSEOCheck2(this.plugin, files, abortSignal ? { signal: abortSignal } : void 0);
      this.plugin.settings.cachedGlobalResults = results;
      this.plugin.settings.lastScanTimestamp = Date.now();
      await this.plugin.saveSettings();
      if (auditNotice) {
        auditNotice.hide();
      }
      new import_obsidian4.Notice(`SEO audit complete with ${results.length} files.`);
      return results;
    } catch (error) {
      if (auditNotice) {
        auditNotice.hide();
      }
      if (error instanceof Error && error.name === "AbortError") {
        console.debug("Vault audit cancelled by user");
        new import_obsidian4.Notice("Vault audit cancelled.");
        return [];
      }
      console.error("Error checking all notes:", error);
      new import_obsidian4.Notice("Error analyzing files. Check console for details.");
      return [];
    }
  }
  async openFile(filePath) {
    try {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file && file instanceof import_obsidian4.TFile) {
        try {
          const leaf = this.app.workspace.getLeaf();
          await leaf.openFile(file);
        } catch (e) {
          await this.app.workspace.openLinkText(filePath, "", true);
        }
      } else {
        new import_obsidian4.Notice(`File not found: ${filePath}
This file may have been renamed or deleted.`);
      }
    } catch (error) {
      console.error(`Error opening file ${filePath}:`, error);
      new import_obsidian4.Notice(`Error opening file: ${filePath}`);
    }
  }
  async openFileAndAudit(filePath) {
    var _a;
    const file = this.app.vault.getAbstractFileByPath(filePath);
    if (!file || !(file instanceof import_obsidian4.TFile)) {
      new import_obsidian4.Notice(`File not found: ${filePath}
This file may have been renamed or deleted.`);
      return;
    }
    await this.app.workspace.getLeaf().openFile(file);
    this.plugin.openCurrentPanel();
    await new Promise((resolve) => {
      const checkPanel = () => {
        const currentPanels = this.app.workspace.getLeavesOfType("seo-current-panel");
        if (currentPanels.length > 0) {
          const currentPanel = currentPanels[0];
          if (currentPanel && currentPanel.view) {
            this.app.workspace.setActiveLeaf(currentPanel);
            if (currentPanel.view instanceof SEOSidePanel) {
              currentPanel.view.render();
            }
            resolve();
          } else {
            setTimeout(checkPanel, 50);
          }
        } else {
          setTimeout(checkPanel, 50);
        }
      };
      checkPanel();
    });
    try {
      if (!SEOSidePanel.globalAuditController) {
        SEOSidePanel.globalAuditController = new AbortController();
      }
      await new Promise((resolve) => setTimeout(resolve, 100));
      const currentPanels = this.app.workspace.getLeavesOfType("seo-current-panel");
      if (currentPanels.length > 0) {
        const currentPanel = currentPanels[0];
        if (currentPanel && currentPanel.view) {
          const refreshBtn = currentPanel.view.containerEl.querySelector("button[data-refresh-btn]");
          if (refreshBtn) {
            refreshBtn.disabled = true;
            refreshBtn.textContent = "Auditing...";
          }
        }
      }
      const results = await this.checkCurrentNote((_a = SEOSidePanel.globalAuditController) == null ? void 0 : _a.signal);
      if (results) {
        if (this.plugin.sidePanel && this.plugin.sidePanel.panelType === "current") {
          this.plugin.sidePanel.currentNoteResults = results;
          this.plugin.sidePanel.render();
        }
      }
    } catch (error) {
      console.error("Error running audit after opening file:", error);
    } finally {
      const currentPanels = this.app.workspace.getLeavesOfType("seo-current-panel");
      if (currentPanels.length > 0) {
        const currentPanel = currentPanels[0];
        if (currentPanel && currentPanel.view) {
          const refreshBtn = currentPanel.view.containerEl.querySelector("button[data-refresh-btn]");
          if (refreshBtn) {
            refreshBtn.disabled = false;
            refreshBtn.textContent = "Refresh";
          }
        }
      }
    }
  }
  showSortMenu(event, issuesFiles, issuesList, currentSort, onSortChange, settings) {
    const menu = new import_obsidian4.Menu();
    const showNotices = settings ? settings.checkPotentiallyBrokenLinks && settings.checkPotentiallyBrokenEmbeds : true;
    const displaySort = !showNotices && (currentSort === "notices-desc" || currentSort === "notices-asc") ? "issues-desc" : currentSort;
    menu.addItem((item) => {
      item.setTitle("Issues (high to low)").onClick(() => {
        onSortChange("issues-desc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "issues-desc", settings);
      });
      if (displaySort === "issues-desc") {
        item.setIcon("check");
      }
    });
    menu.addItem((item) => {
      item.setTitle("Issues (low to high)").onClick(() => {
        onSortChange("issues-asc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "issues-asc", settings);
      });
      if (displaySort === "issues-asc") {
        item.setIcon("check");
      }
    });
    menu.addSeparator();
    menu.addItem((item) => {
      item.setTitle("Warnings (high to low)").onClick(() => {
        onSortChange("warnings-desc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "warnings-desc", settings);
      });
      if (displaySort === "warnings-desc") {
        item.setIcon("check");
      }
    });
    menu.addItem((item) => {
      item.setTitle("Warnings (low to high)").onClick(() => {
        onSortChange("warnings-asc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "warnings-asc", settings);
      });
      if (displaySort === "warnings-asc") {
        item.setIcon("check");
      }
    });
    menu.addSeparator();
    if (showNotices) {
      menu.addItem((item) => {
        item.setTitle("Notices (high to low)").onClick(() => {
          onSortChange("notices-desc");
          this.sortAndRenderFiles(issuesFiles, issuesList, "notices-desc", settings);
        });
        if (displaySort === "notices-desc") {
          item.setIcon("check");
        }
      });
      menu.addItem((item) => {
        item.setTitle("Notices (low to high)").onClick(() => {
          onSortChange("notices-asc");
          this.sortAndRenderFiles(issuesFiles, issuesList, "notices-asc", settings);
        });
        if (displaySort === "notices-asc") {
          item.setIcon("check");
        }
      });
      menu.addSeparator();
    }
    menu.addItem((item) => {
      item.setTitle("File name (A to Z)").onClick(() => {
        onSortChange("filename-asc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "filename-asc", settings);
      });
      if (displaySort === "filename-asc") {
        item.setIcon("check");
      }
    });
    menu.addItem((item) => {
      item.setTitle("File name (Z to A)").onClick(() => {
        onSortChange("filename-desc");
        this.sortAndRenderFiles(issuesFiles, issuesList, "filename-desc", settings);
      });
      if (displaySort === "filename-desc") {
        item.setIcon("check");
      }
    });
    menu.showAtPosition({ x: event.clientX, y: event.clientY });
  }
  sortAndRenderFiles(issuesFiles, issuesList, sortType, settings) {
    const sortedFiles = sortFiles([...issuesFiles], sortType);
    const filesListContainer = issuesList.querySelector(".seo-files-list-container");
    if (!filesListContainer) return;
    filesListContainer.querySelectorAll(".seo-file-issue").forEach((el) => el.remove());
    this.renderFilesList(sortedFiles, filesListContainer, settings);
  }
  renderFilesList(files, container, settings) {
    files.forEach((result) => {
      const fileEl = container.createEl("div", { cls: "seo-file-issue" });
      fileEl.setAttribute("data-file-path", result.file);
      const fileLink = fileEl.createEl("a", {
        text: result.displayName || this.getDisplayPath(result.file),
        cls: "seo-file-link",
        href: "#"
      });
      fileLink.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        void this.openFile(result.file);
      });
      const statsContainer = fileEl.createEl("div", { cls: "seo-stats-container" });
      const showNotices = settings ? settings.checkPotentiallyBrokenLinks && settings.checkPotentiallyBrokenEmbeds : true;
      const statsText = [];
      if (result.issuesCount > 0) statsText.push(`${result.issuesCount} issues`);
      if (result.warningsCount > 0) statsText.push(`${result.warningsCount} warnings`);
      if (showNotices && result.noticesCount > 0) statsText.push(`${result.noticesCount} notices`);
      statsContainer.createEl("span", {
        text: statsText.join(", "),
        cls: "seo-file-stats"
      });
      const auditBtn = statsContainer.createEl("button", {
        cls: "clickable-icon seo-audit-btn",
        attr: { "aria-label": "Audit this note" }
      });
      (0, import_obsidian4.setIcon)(auditBtn, "search-check");
      auditBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        void (async () => {
          await this.openFileAndAudit(result.file);
        })();
      });
    });
  }
  getDisplayPath(fullPath) {
    const cleanPath = fullPath.startsWith("/") ? fullPath.slice(1) : fullPath;
    const parts = cleanPath.split("/");
    if (parts.length <= 1) {
      return cleanPath;
    }
    return parts.slice(-2).join("/");
  }
};

// src/ui/results-display.ts
var import_obsidian5 = require("obsidian");
init_panel_utils();
function createCollapseIcon() {
  const iconEl = document.createElement("span");
  (0, import_obsidian5.setIcon)(iconEl, "chevron-down");
  return iconEl;
}
var ResultsDisplay = class {
  // Track individual item collapse states
  constructor(container, onFileClick, onFileAudit) {
    this.container = container;
    this.onFileClick = onFileClick;
    this.onFileAudit = onFileAudit;
    this.isCollapsed = false;
    // Track collapse state (false = expanded, true = collapsed)
    this.individualCollapseStates = /* @__PURE__ */ new Map();
  }
  // Method to update the container (needed for reusing instances)
  updateContainer(newContainer) {
    this.container = newContainer;
  }
  // Navigation method to jump to specific positions in the note
  async navigateToPosition(position) {
    var _a;
    try {
      const app = window.app;
      if (!app) {
        console.warn("Obsidian app not found");
        return;
      }
      const activeFile = app.workspace.getActiveFile();
      if (!activeFile) {
        console.warn("No active file found for navigation");
        return;
      }
      await this.onFileClick(activeFile.path);
      let markdownView = null;
      let editor = null;
      if (app.workspace.getLeavesOfType) {
        const leaves = app.workspace.getLeavesOfType("markdown");
        if (leaves.length > 0) {
          markdownView = (_a = leaves[0]) == null ? void 0 : _a.view;
        }
      }
      if (!markdownView) {
        app.workspace.iterateAllLeaves((leaf) => {
          if (leaf.view && "editor" in leaf.view && !markdownView) {
            markdownView = leaf.view;
          }
        });
      }
      if (!markdownView) {
        console.warn("No markdown view found");
        return;
      }
      if (typeof markdownView === "object" && markdownView !== null && "editor" in markdownView) {
        editor = markdownView.editor;
      }
      if (!editor) {
        console.warn("No editor found in markdown view");
        return;
      }
      if (typeof editor !== "object" || editor === null) {
        console.warn("Editor is not an object");
        return;
      }
      const editorObj = editor;
      if (position.line && editorObj.setCursor) {
        const lineIndex = Math.max(0, position.line - 1);
        editorObj.setCursor({ line: lineIndex, ch: 0 });
        if (editorObj.scrollIntoView) {
          try {
            editorObj.scrollIntoView({ line: lineIndex, ch: 0 });
          } catch (e) {
            try {
              editorObj.scrollIntoView(lineIndex);
            } catch (e2) {
            }
          }
        }
        if (editorObj.getLine && editorObj.addHighlights && editorObj.removeHighlights) {
          try {
            const lineLength = editorObj.getLine(lineIndex).length;
            editorObj.addHighlights([{
              from: { line: lineIndex, ch: 0 },
              to: { line: lineIndex, ch: lineLength }
            }]);
            setTimeout(() => {
              try {
                if (editorObj.removeHighlights) {
                  editorObj.removeHighlights();
                }
              } catch (e) {
              }
            }, 2e3);
          } catch (e) {
          }
        }
      }
    } catch (error) {
      console.error("Error navigating to position:", error);
    }
  }
  renderResults(results) {
    let filteredNoticesCount = results.noticesCount;
    const scoreEl = this.container.createEl("div", { cls: "seo-score-header" });
    const scoreText = scoreEl.createEl("div", { cls: "seo-score-text" });
    scoreText.createEl("span", { text: "Score: " });
    const scoreNumber = scoreText.createEl("span", { text: `${Math.round(results.overallScore)}%` });
    if (results.overallScore >= 80) {
      scoreNumber.addClass("seo-score-excellent");
    } else if (results.overallScore >= 60) {
      scoreNumber.addClass("seo-score-good");
    } else if (results.overallScore >= 40) {
      scoreNumber.addClass("seo-score-fair");
    } else {
      scoreNumber.addClass("seo-score-poor");
    }
    if (results.issuesCount > 0 || results.warningsCount > 0 || filteredNoticesCount > 0) {
      scoreText.createEl("span", { text: ` (` });
      scoreText.createEl("span", {
        text: `${results.issuesCount} issues`,
        cls: "seo-issues-count-text"
      });
      scoreText.createEl("span", { text: ", " });
      scoreText.createEl("span", {
        text: `${results.warningsCount} warnings`,
        cls: "seo-warnings-count-text"
      });
      if (filteredNoticesCount > 0) {
        scoreText.createEl("span", { text: ", " });
        scoreText.createEl("span", {
          text: `${filteredNoticesCount} notices`,
          cls: "seo-notices-count-text"
        });
      }
      scoreText.createEl("span", { text: ")" });
    } else {
      scoreText.createEl("span", {
        // eslint-disable-next-line obsidianmd/ui/sentence-case
        text: " (All checks passed!)",
        cls: "seo-success"
      });
    }
    const toggleBtn = scoreEl.createEl("div", { cls: "seo-toggle-icon" });
    (0, import_obsidian5.setIcon)(toggleBtn, this.isCollapsed ? "chevrons-up-down" : "chevrons-down-up");
    toggleBtn.addEventListener("mousedown", (e) => {
      e.preventDefault();
      e.stopPropagation();
      this.isCollapsed = !this.isCollapsed;
      (0, import_obsidian5.setIcon)(toggleBtn, this.isCollapsed ? "chevrons-up-down" : "chevrons-down-up");
      this.toggleChecksVisibility();
    });
    const checksContainer = this.container.createEl("div", { cls: "seo-checks" });
    Object.entries(results.checks).forEach(([checkName, checkResults]) => {
      if (checkResults.length === 0) return;
      const checkHasErrors = checkResults.some((r) => r.severity === "error");
      const checkHasWarnings = checkResults.some((r) => r.severity === "warning");
      const checkHasNotices = checkResults.some((r) => r.severity === "notice");
      const checkHasOnlyInfo = checkResults.every((r) => r.severity === "info");
      let statusClass = "seo-passed";
      if (checkHasErrors) {
        statusClass = "seo-error";
      } else if (checkHasWarnings) {
        statusClass = "seo-warning";
      } else if (checkHasNotices) {
        statusClass = "seo-notice";
      } else if (checkHasOnlyInfo) {
        statusClass = "seo-passed";
      }
      const checkEl = checksContainer.createEl("div", { cls: `seo-check ${statusClass}` });
      const header = checkEl.createEl("div", { cls: "seo-check-header seo-collapsible-header" });
      header.setAttribute("data-check-name", checkName);
      let displayName = checkName.replace(/([A-Z])/g, " $1").trim().replace(/^./, (str) => str.toUpperCase());
      if (checkName === "brokenLinks") {
        displayName = "Broken Internal Links";
      } else if (checkName === "externalBrokenLinks") {
        const hasNotices2 = checkResults.some((r) => r.severity === "notice");
        const hasErrors2 = checkResults.some((r) => r.severity === "error");
        if (hasNotices2 && !hasErrors2) {
          displayName = "External Links";
        } else {
          displayName = "External Broken Links";
        }
      } else if (checkName === "duplicateTitles") {
        displayName = "Duplicate Titles";
      } else if (checkName === "duplicateDescriptions") {
        displayName = "Duplicate Descriptions";
      } else if (checkName === "duplicateContent") {
        displayName = "Duplicate Content";
      }
      const collapseIcon = header.createEl("span", { cls: "seo-collapse-icon" });
      collapseIcon.appendChild(createCollapseIcon());
      header.createEl("span", { text: displayName });
      const statusIcon = header.createEl("span", { cls: "seo-status" });
      const hasErrors = checkResults.some((r) => r.severity === "error");
      const hasWarnings = checkResults.some((r) => r.severity === "warning");
      const hasNotices = checkResults.some((r) => r.severity === "notice");
      if (hasErrors) {
        (0, import_obsidian5.setIcon)(statusIcon, "x-circle");
      } else if (hasWarnings) {
        (0, import_obsidian5.setIcon)(statusIcon, "triangle-alert");
      } else if (hasNotices) {
        (0, import_obsidian5.setIcon)(statusIcon, "info");
      } else {
        (0, import_obsidian5.setIcon)(statusIcon, "circle-check");
      }
      const resultsList = checkEl.createEl("ul", { cls: "seo-results seo-results-list-expanded" });
      const savedCollapseState = this.individualCollapseStates.get(checkName);
      if (savedCollapseState !== void 0) {
        if (savedCollapseState) {
          resultsList.classList.add("seo-results-list-collapsed");
          resultsList.classList.remove("seo-results-list-expanded");
          const icon = collapseIcon.querySelector("svg");
          if (icon) {
            icon.classList.add("seo-collapse-icon-rotated");
            icon.classList.remove("seo-collapse-icon-normal");
          }
        } else {
          resultsList.classList.add("seo-results-list-expanded");
          resultsList.classList.remove("seo-results-list-collapsed");
          const icon = collapseIcon.querySelector("svg");
          if (icon) {
            icon.classList.add("seo-collapse-icon-normal");
            icon.classList.remove("seo-collapse-icon-rotated");
          }
        }
      }
      checkResults.forEach((result) => {
        const li = resultsList.createEl("li", {
          cls: `seo-result seo-${result.severity}`
        });
        if (result.position) {
          const messageEl = li.createEl("span", {
            text: result.message,
            cls: "seo-result-message seo-clickable"
          });
          messageEl.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            void (async () => {
              await this.navigateToPosition(result.position);
            })();
          });
          messageEl.addClass("seo-clickable-message");
          messageEl.title = "Click to jump to this issue in the note";
        } else {
          li.createEl("span", {
            text: result.message,
            cls: "seo-result-message"
          });
        }
        if (result.suggestion) {
          const suggestionEl = li.createEl("div", {
            cls: "seo-suggestion"
          });
          if (result.suggestion.includes('<a href="#" data-file-path=')) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(result.suggestion, "text/html");
            const body = doc.body;
            while (body.firstChild) {
              suggestionEl.appendChild(body.firstChild);
            }
            suggestionEl.addEventListener("click", (e) => {
              void (async () => {
                const target = e.target;
                if (target && target.tagName === "A" && target.hasAttribute("data-file-path")) {
                  e.preventDefault();
                  e.stopPropagation();
                  const filePath = target.getAttribute("data-file-path");
                  if (filePath) {
                    await this.onFileClick(filePath);
                  }
                }
              })();
            });
          } else {
            suggestionEl.textContent = result.suggestion;
          }
        }
      });
      header.addEventListener("mousedown", (e) => {
        var _a;
        e.preventDefault();
        e.stopPropagation();
        const currentState = (_a = this.individualCollapseStates.get(checkName)) != null ? _a : false;
        const newState = !currentState;
        this.individualCollapseStates.set(checkName, newState);
        if (newState) {
          resultsList.classList.remove("seo-results-list-expanded");
          resultsList.classList.add("seo-results-list-collapsed");
        } else {
          resultsList.classList.remove("seo-results-list-collapsed");
          resultsList.classList.add("seo-results-list-expanded");
        }
        const icon = collapseIcon.querySelector("svg");
        if (icon) {
          if (newState) {
            icon.classList.remove("seo-collapse-icon-normal");
            icon.classList.add("seo-collapse-icon-rotated");
          } else {
            icon.classList.remove("seo-collapse-icon-rotated");
            icon.classList.add("seo-collapse-icon-normal");
          }
        }
        if (!newState) {
          this.isCollapsed = false;
          const toggleBtn2 = this.container.querySelector(".seo-toggle-icon");
          if (toggleBtn2) {
            (0, import_obsidian5.setIcon)(toggleBtn2, "chevrons-down-up");
          }
        }
      });
    });
  }
  renderGlobalResults(results, settings) {
    const summary = this.container.createEl("div", { cls: "seo-vault-summary" });
    const totalFiles = results.length;
    const totalIssues = results.reduce((sum, r) => sum + r.issuesCount, 0);
    const totalWarnings = results.reduce((sum, r) => sum + r.warningsCount, 0);
    const totalNotices = results.reduce((sum, r) => sum + r.noticesCount, 0);
    const avgScore = Math.round(
      results.reduce((sum, r) => sum + r.overallScore, 0) / totalFiles
    );
    const showNotices = settings ? settings.checkPotentiallyBrokenLinks && settings.checkPotentiallyBrokenEmbeds : true;
    const statsGrid = summary.createEl("div", { cls: "seo-stats-grid" });
    const scoreStat = statsGrid.createEl("div", { cls: "seo-stat-item" });
    const scoreNumber = scoreStat.createEl("div", { cls: "seo-stat-number", text: `${avgScore}%` });
    if (avgScore >= 80) {
      scoreNumber.addClass("seo-score-excellent");
    } else if (avgScore >= 60) {
      scoreNumber.addClass("seo-score-good");
    } else if (avgScore >= 40) {
      scoreNumber.addClass("seo-score-fair");
    } else {
      scoreNumber.addClass("seo-score-poor");
    }
    scoreStat.createEl("div", { cls: "seo-stat-label", text: "Average score" });
    const issuesStat = statsGrid.createEl("div", { cls: "seo-stat-item" });
    const issuesNumber = issuesStat.createEl("div", { cls: "seo-stat-number", text: totalIssues.toString() });
    if (totalIssues > 0) {
      issuesNumber.addClass("seo-issues-count");
    }
    issuesStat.createEl("div", { cls: "seo-stat-label", text: "Issues" });
    const warningsStat = statsGrid.createEl("div", { cls: "seo-stat-item" });
    const warningsNumber = warningsStat.createEl("div", { cls: "seo-stat-number", text: totalWarnings.toString() });
    if (totalWarnings > 0) {
      warningsNumber.addClass("seo-warnings-count");
    }
    warningsStat.createEl("div", { cls: "seo-stat-label", text: "Warnings" });
    if (showNotices) {
      const noticesStat = statsGrid.createEl("div", { cls: "seo-stat-item" });
      const noticesNumber = noticesStat.createEl("div", { cls: "seo-stat-number", text: totalNotices.toString() });
      if (totalNotices > 0) {
        noticesNumber.addClass("seo-notices-count");
      }
      noticesStat.createEl("div", { cls: "seo-stat-label", text: "Notices" });
    }
  }
  renderIssuesList(results, currentSort, onSortChange, onShowSortMenu, settings) {
    const showNotices = settings ? settings.checkPotentiallyBrokenLinks && settings.checkPotentiallyBrokenEmbeds : true;
    const issuesFiles = results.filter((r) => {
      const hasIssues = r.issuesCount > 0;
      const hasWarnings = r.warningsCount > 0;
      const hasNotices = showNotices && r.noticesCount > 0;
      return hasIssues || hasWarnings || hasNotices;
    });
    if (issuesFiles.length === 0) return;
    const issuesList = this.container.createEl("div", { cls: "seo-issues-list" });
    const issuesHeader = issuesList.createEl("div", { cls: "seo-issues-header-container" });
    const collapseIcon = issuesHeader.createEl("span", { cls: "seo-collapse-icon seo-collapsible-header" });
    collapseIcon.appendChild(createCollapseIcon());
    issuesHeader.createEl("h4", { text: "Files with results", cls: "seo-issues-header" });
    const sortBtn = issuesHeader.createEl("button", {
      cls: "seo-sort-btn",
      attr: { "aria-label": "Sort files" }
    });
    (0, import_obsidian5.setIcon)(sortBtn, "arrow-up-narrow-wide");
    sortBtn.addEventListener("click", onShowSortMenu);
    const filesListContainer = issuesList.createEl("div", { cls: "seo-files-list-container" });
    const sortedFiles = this.sortFiles(issuesFiles, currentSort);
    sortedFiles.forEach((result) => {
      const fileEl = filesListContainer.createEl("div", { cls: "seo-file-issue" });
      fileEl.setAttribute("data-file-path", result.file);
      const fileLink = fileEl.createEl("a", {
        text: result.displayName || getDisplayPath(result.file),
        cls: "seo-file-link",
        href: "#"
      });
      fileLink.addEventListener("click", (e) => {
        e.preventDefault();
        void (async () => {
          await this.onFileClick(result.file);
        })();
      });
      const statsContainer = fileEl.createEl("div", { cls: "seo-stats-container" });
      const statsText = [];
      if (result.issuesCount > 0) statsText.push(`${result.issuesCount} issues`);
      if (result.warningsCount > 0) statsText.push(`${result.warningsCount} warnings`);
      if (showNotices && result.noticesCount > 0) statsText.push(`${result.noticesCount} notices`);
      statsContainer.createEl("span", {
        text: statsText.join(", "),
        cls: "seo-file-stats"
      });
      const auditBtn = statsContainer.createEl("button", {
        cls: "clickable-icon seo-audit-btn",
        attr: { "aria-label": "Audit this note" }
      });
      (0, import_obsidian5.setIcon)(auditBtn, "search-check");
      auditBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        void (async () => {
          await this.onFileAudit(result.file);
        })();
      });
    });
    collapseIcon.addEventListener("mousedown", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const isCollapsed = filesListContainer.classList.contains("seo-results-list-collapsed");
      if (isCollapsed) {
        filesListContainer.classList.remove("seo-results-list-collapsed");
        filesListContainer.classList.add("seo-results-list-expanded");
      } else {
        filesListContainer.classList.remove("seo-results-list-expanded");
        filesListContainer.classList.add("seo-results-list-collapsed");
      }
      const icon = collapseIcon.querySelector("svg");
      if (icon) {
        if (isCollapsed) {
          icon.classList.remove("seo-collapse-icon-rotated");
          icon.classList.add("seo-collapse-icon-normal");
        } else {
          icon.classList.remove("seo-collapse-icon-normal");
          icon.classList.add("seo-collapse-icon-rotated");
        }
      }
    });
    this.renderPassingFilesList(results, currentSort, showNotices);
  }
  renderPassingFilesList(results, currentSort, showNotices) {
    const passingFiles = results.filter((r) => {
      const hasIssues = r.issuesCount > 0;
      const hasWarnings = r.warningsCount > 0;
      return !hasIssues && !hasWarnings;
    });
    if (passingFiles.length === 0) return;
    const passingList = this.container.createEl("div", { cls: "seo-issues-list" });
    const passingHeader = passingList.createEl("div", { cls: "seo-issues-header-container" });
    const collapseIcon = passingHeader.createEl("span", { cls: "seo-collapse-icon seo-collapsible-header" });
    collapseIcon.appendChild(createCollapseIcon());
    const icon = collapseIcon.querySelector("svg");
    if (icon) {
      icon.classList.add("seo-collapse-icon-rotated");
    }
    const headingContainer = passingHeader.createEl("div", { cls: "seo-heading-center" });
    headingContainer.createEl("h4", { text: "Files that pass", cls: "seo-issues-header" });
    const filesListContainer = passingList.createEl("div", {
      cls: "seo-files-list-container seo-results-list-collapsed"
    });
    const sortedFiles = this.sortFiles(passingFiles, currentSort);
    sortedFiles.forEach((result) => {
      const fileEl = filesListContainer.createEl("div", { cls: "seo-file-issue" });
      fileEl.setAttribute("data-file-path", result.file);
      const fileLink = fileEl.createEl("a", {
        text: result.displayName || getDisplayPath(result.file),
        cls: "seo-file-link",
        href: "#"
      });
      fileLink.addEventListener("click", (e) => {
        e.preventDefault();
        void (async () => {
          await this.onFileClick(result.file);
        })();
      });
      const statsContainer = fileEl.createEl("div", { cls: "seo-stats-container" });
      if (showNotices && result.noticesCount > 0) {
        statsContainer.createEl("span", {
          text: `${result.noticesCount} notices`,
          cls: "seo-file-stats"
        });
      }
      const auditBtn = statsContainer.createEl("button", {
        cls: "clickable-icon seo-audit-btn",
        attr: { "aria-label": "Audit this note" }
      });
      (0, import_obsidian5.setIcon)(auditBtn, "search-check");
      auditBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        void (async () => {
          await this.onFileAudit(result.file);
        })();
      });
    });
    collapseIcon.addEventListener("mousedown", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const isCollapsed = filesListContainer.classList.contains("seo-results-list-collapsed");
      if (isCollapsed) {
        filesListContainer.classList.remove("seo-results-list-collapsed");
        filesListContainer.classList.add("seo-results-list-expanded");
      } else {
        filesListContainer.classList.remove("seo-results-list-expanded");
        filesListContainer.classList.add("seo-results-list-collapsed");
      }
      const icon2 = collapseIcon.querySelector("svg");
      if (icon2) {
        if (isCollapsed) {
          icon2.classList.remove("seo-collapse-icon-rotated");
          icon2.classList.add("seo-collapse-icon-normal");
        } else {
          icon2.classList.remove("seo-collapse-icon-normal");
          icon2.classList.add("seo-collapse-icon-rotated");
        }
      }
    });
  }
  sortFiles(files, sortType) {
    const sortedFiles = [...files];
    switch (sortType) {
      case "notices-desc":
        sortedFiles.sort((a, b) => {
          const noticesCompare = b.noticesCount - a.noticesCount;
          if (noticesCompare !== 0) return noticesCompare;
          const issuesCompare = b.issuesCount - a.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const warningsCompare = b.warningsCount - a.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "notices-asc":
        sortedFiles.sort((a, b) => {
          const noticesCompare = a.noticesCount - b.noticesCount;
          if (noticesCompare !== 0) return noticesCompare;
          const issuesCompare = a.issuesCount - b.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const warningsCompare = a.warningsCount - b.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "warnings-desc":
        sortedFiles.sort((a, b) => {
          const warningsCompare = b.warningsCount - a.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const issuesCompare = b.issuesCount - a.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "warnings-asc":
        sortedFiles.sort((a, b) => {
          const warningsCompare = a.warningsCount - b.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const issuesCompare = a.issuesCount - b.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "issues-desc":
        sortedFiles.sort((a, b) => {
          const issuesCompare = b.issuesCount - a.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const warningsCompare = b.warningsCount - a.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "issues-asc":
        sortedFiles.sort((a, b) => {
          const issuesCompare = a.issuesCount - b.issuesCount;
          if (issuesCompare !== 0) return issuesCompare;
          const warningsCompare = a.warningsCount - b.warningsCount;
          if (warningsCompare !== 0) return warningsCompare;
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          return aFileName.localeCompare(bFileName);
        });
        break;
      case "filename-asc":
        sortedFiles.sort((a, b) => {
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          const fileNameCompare = aFileName.localeCompare(bFileName);
          if (fileNameCompare !== 0) return fileNameCompare;
          const aParts = a.file.split("/");
          const bParts = b.file.split("/");
          const aParent = aParts.length > 1 ? aParts[aParts.length - 2] || "" : "";
          const bParent = bParts.length > 1 ? bParts[bParts.length - 2] || "" : "";
          const parentCompare = aParent.localeCompare(bParent);
          if (parentCompare !== 0) return parentCompare;
          if (b.issuesCount !== a.issuesCount) {
            return b.issuesCount - a.issuesCount;
          }
          if (b.warningsCount !== a.warningsCount) {
            return b.warningsCount - a.warningsCount;
          }
          return b.noticesCount - a.noticesCount;
        });
        break;
      case "filename-desc":
        sortedFiles.sort((a, b) => {
          const aFileName = a.file.split("/").pop() || "";
          const bFileName = b.file.split("/").pop() || "";
          const fileNameCompare = bFileName.localeCompare(aFileName);
          if (fileNameCompare !== 0) return fileNameCompare;
          const aParts = a.file.split("/");
          const bParts = b.file.split("/");
          const aParent = aParts.length > 1 ? aParts[aParts.length - 2] || "" : "";
          const bParent = bParts.length > 1 ? bParts[bParts.length - 2] || "" : "";
          const parentCompare = bParent.localeCompare(aParent);
          if (parentCompare !== 0) return parentCompare;
          if (b.issuesCount !== a.issuesCount) {
            return b.issuesCount - a.issuesCount;
          }
          if (b.warningsCount !== a.warningsCount) {
            return b.warningsCount - a.warningsCount;
          }
          return b.noticesCount - a.noticesCount;
        });
        break;
    }
    return sortedFiles;
  }
  toggleChecksVisibility() {
    const checksContainer = this.container.querySelector(".seo-checks");
    if (!checksContainer) return;
    const allHeaders = checksContainer.querySelectorAll(".seo-check-header");
    allHeaders.forEach((header) => {
      var _a;
      const htmlHeader = header;
      const resultsList = (_a = htmlHeader.parentElement) == null ? void 0 : _a.querySelector(".seo-results");
      const collapseIcon = htmlHeader.querySelector(".seo-collapse-icon svg");
      const checkName = this.findCheckNameForHeader(htmlHeader);
      if (resultsList && collapseIcon) {
        if (checkName) {
          this.individualCollapseStates.set(checkName, this.isCollapsed);
        }
        if (this.isCollapsed) {
          resultsList.classList.remove("seo-results-list-expanded");
          resultsList.classList.add("seo-results-list-collapsed");
          collapseIcon.classList.remove("seo-collapse-icon-normal");
          collapseIcon.classList.add("seo-collapse-icon-rotated");
        } else {
          resultsList.classList.remove("seo-results-list-collapsed");
          resultsList.classList.add("seo-results-list-expanded");
          collapseIcon.classList.remove("seo-collapse-icon-rotated");
          collapseIcon.classList.add("seo-collapse-icon-normal");
        }
      }
    });
  }
  // Helper method to find the check name for a given header
  findCheckNameForHeader(header) {
    return header.getAttribute("data-check-name");
  }
};

// src/ui/panel-renderer.ts
init_panel_utils();
var PanelRenderer = class {
  constructor(app, plugin, actions) {
    this.app = app;
    this.plugin = plugin;
    this.actions = actions;
  }
  /**
   * Renders the main panel content
   */
  render(containerEl, panelType, currentNoteResults, globalResults, onRefreshClick, onExternalLinksClick) {
    try {
      containerEl.empty();
      containerEl.addClass("seo-panel");
      const header = containerEl.createEl("div", { cls: "seo-panel-header" });
      header.createEl("h2", { text: panelType === "current" ? "SEO audit: current note" : "SEO audit: vault" });
      if (panelType === "current") {
        this.renderCurrentNoteHeader(header, currentNoteResults);
      } else {
        const fileCount = globalResults.length;
        const foldersInfo = getVaultFoldersInfo(this.plugin.settings.scanDirectories, fileCount);
        const foldersEl = header.createEl("div", { cls: "seo-filename" });
        foldersEl.textContent = foldersInfo;
      }
      if (panelType === "current") {
        this.renderCurrentNoteActions(containerEl, onRefreshClick, onExternalLinksClick);
      }
      if (panelType === "current") {
        this.renderCurrentNoteContent(containerEl, currentNoteResults);
      } else {
        if (globalResults.length > 0) {
          this.renderGlobalResults(containerEl, globalResults);
        } else {
          const noGlobal = containerEl.createEl("div", { cls: "seo-no-results" });
          noGlobal.createEl("p", { text: 'Click "Audit all notes" to audit your files in your configured directories.' });
        }
      }
    } catch (error) {
      console.error("Error rendering SEO panel:", error);
      containerEl.createEl("div", { text: "Error loading SEO panel. Please try again." });
    }
  }
  /**
   * Renders the current note header with file path
   */
  renderCurrentNoteHeader(header, currentNoteResults) {
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile && isSupportedFile(activeFile, this.plugin.settings)) {
      const filenameEl = header.createEl("div", { cls: "seo-filename" });
      let displayName = activeFile.path;
      if (currentNoteResults && currentNoteResults.file === activeFile.path) {
        displayName = currentNoteResults.displayName || activeFile.path;
      } else if (this.plugin.settings.cachedGlobalResults) {
        const globalResult = this.plugin.settings.cachedGlobalResults.find(
          (result) => result.file === activeFile.path
        );
        if (globalResult) {
          displayName = globalResult.displayName || activeFile.path;
        }
      }
      filenameEl.textContent = `Target note: ${displayName}`;
    }
  }
  /**
   * Renders action buttons for current note panel
   */
  renderCurrentNoteActions(containerEl, onRefreshClick, onExternalLinksClick) {
    const auditCurrentBtn = containerEl.createEl("button", {
      text: "Refresh",
      cls: "mod-cta seo-btn seo-top-btn",
      attr: { "data-refresh-btn": "true" }
    });
    auditCurrentBtn.addEventListener("click", (event) => {
      event.preventDefault();
      event.stopPropagation();
      void (async () => {
        await onRefreshClick(auditCurrentBtn);
      })();
    });
    if (this.plugin.settings.enableExternalLinkButton && !this.plugin.settings.enableExternalLinkVaultCheck) {
      const externalLinksBtn = containerEl.createEl("button", {
        text: "Check external links for 404s",
        cls: "seo-btn"
      });
      externalLinksBtn.addEventListener("click", () => {
        void (async () => {
          externalLinksBtn.disabled = true;
          externalLinksBtn.textContent = "This may take some time...";
          externalLinksBtn.addClass("seo-btn-disabled");
          try {
            await onExternalLinksClick();
          } finally {
            externalLinksBtn.disabled = false;
            externalLinksBtn.textContent = "Check external links for 404s";
            externalLinksBtn.removeClass("seo-btn-disabled");
            externalLinksBtn.addClass("seo-btn-enabled");
          }
        })();
      });
    }
  }
  /**
   * Renders current note content
   */
  renderCurrentNoteContent(containerEl, currentNoteResults) {
    const activeFile = this.app.workspace.getActiveFile();
    let currentFileResults = null;
    if (activeFile && this.plugin.settings.cachedGlobalResults) {
      currentFileResults = this.plugin.settings.cachedGlobalResults.find(
        (result) => result.file === activeFile.path
      ) || null;
    }
    const resultsToShow = currentNoteResults || currentFileResults;
    if (resultsToShow) {
      const newResultsContainer = containerEl.createEl("div", { cls: "seo-results-container" });
      const tempResultsDisplay = new ResultsDisplay(
        newResultsContainer,
        async (filePath) => await this.actions.openFile(filePath),
        async (filePath) => await this.actions.openFileAndAudit(filePath)
      );
      tempResultsDisplay.renderResults(resultsToShow);
    } else {
      const noResults = containerEl.createEl("div", { cls: "seo-no-results" });
      const fileTypeText = this.plugin.settings.enableMDXSupport ? "markdown or MDX file" : "markdown file";
      noResults.createEl("p", { text: `Open a ${fileTypeText} and click "Refresh" to audit it.` });
    }
  }
  /**
   * Renders global results with sorting and filtering
   */
  renderGlobalResults(containerEl, globalResults) {
    const tempResultsDisplay = new ResultsDisplay(
      containerEl,
      async (filePath) => await this.actions.openFile(filePath),
      async (filePath) => await this.actions.openFileAndAudit(filePath)
    );
    tempResultsDisplay.renderGlobalResults(globalResults, this.plugin.settings);
    const refreshBtn = containerEl.createEl("button", {
      text: "Refresh",
      cls: "mod-cta seo-btn seo-refresh-btn",
      attr: { "data-refresh-btn": "true" }
    });
    if (this.plugin.settings.enableExternalLinkButton && !this.plugin.settings.enableExternalLinkVaultCheck) {
      const externalLinksBtn = containerEl.createEl("button", {
        text: "Check all 404s",
        cls: "seo-btn"
      });
      externalLinksBtn.addEventListener("click", () => {
        void (async () => {
          externalLinksBtn.disabled = true;
          externalLinksBtn.textContent = "Checking...";
          externalLinksBtn.addClass("seo-btn-disabled");
          try {
            const results = await this.actions.checkAllExternalLinks();
            if (results.length > 0) {
              containerEl.dispatchEvent(new CustomEvent("seo-refresh-complete", {
                detail: { results }
              }));
            }
          } finally {
            externalLinksBtn.disabled = false;
            externalLinksBtn.textContent = "Check all 404s";
            externalLinksBtn.removeClass("seo-btn-disabled");
            externalLinksBtn.addClass("seo-btn-enabled");
          }
        })();
      });
    }
    refreshBtn.addEventListener("click", () => {
      void (async () => {
        var _a;
        if (refreshBtn.textContent === "Cancel") {
          if (SEOSidePanel.globalAuditController) {
            SEOSidePanel.globalAuditController.abort();
            SEOSidePanel.globalAuditController = null;
            console.debug("Vault audit cancelled by user");
          }
          refreshBtn.textContent = "Refresh";
          refreshBtn.disabled = false;
          return;
        }
        refreshBtn.textContent = "Cancel";
        refreshBtn.disabled = false;
        SEOSidePanel.globalAuditController = new AbortController();
        try {
          const results = await this.actions.refreshGlobalResults((_a = SEOSidePanel.globalAuditController) == null ? void 0 : _a.signal);
          if (results.length > 0) {
            if (SEOSidePanel.globalAuditController && !SEOSidePanel.globalAuditController.signal.aborted) {
              containerEl.dispatchEvent(new CustomEvent("seo-refresh-complete", {
                detail: { results }
              }));
            }
          }
        } catch (error) {
          if (error instanceof Error && error.name === "AbortError") {
            console.debug("Vault audit cancelled in panel renderer");
          } else {
            console.error("Error in vault audit:", error);
          }
        } finally {
          refreshBtn.textContent = "Refresh";
          refreshBtn.disabled = false;
        }
      })();
    });
    tempResultsDisplay.renderIssuesList(
      globalResults,
      this.plugin.settings.defaultSort,
      (sortType) => {
        containerEl.dispatchEvent(new CustomEvent("seo-sort-change", {
          detail: { sortType }
        }));
      },
      (event) => {
        const showNotices = this.plugin.settings.checkPotentiallyBrokenLinks && this.plugin.settings.checkPotentiallyBrokenEmbeds;
        const issuesFiles = globalResults.filter((r) => {
          const hasIssues = r.issuesCount > 0;
          const hasWarnings = r.warningsCount > 0;
          const hasNotices = showNotices && r.noticesCount > 0;
          return hasIssues || hasWarnings || hasNotices;
        });
        this.actions.showSortMenu(event, issuesFiles, containerEl, this.plugin.settings.defaultSort, (sortType) => {
          containerEl.dispatchEvent(new CustomEvent("seo-sort-change", {
            detail: { sortType }
          }));
        }, this.plugin.settings);
      },
      this.plugin.settings
    );
  }
};

// src/ui/side-panel.ts
var _SEOSidePanel = class _SEOSidePanel extends import_obsidian6.ItemView {
  constructor(plugin, panelType = "current", leaf) {
    super(leaf || plugin.app.workspace.getLeaf());
    this.currentNoteResults = null;
    this.globalResults = [];
    this.panelType = "current";
    this.hasRunInitialScan = false;
    this.isRefreshing = false;
    this.currentAuditController = null;
    this.plugin = plugin;
    this.panelType = panelType;
    this.currentSort = plugin.settings.defaultSort;
    this.actions = new PanelActions(this.app, this.plugin, this.panelType);
    this.resultsDisplay = new ResultsDisplay(
      this.containerEl,
      async (filePath) => await this.actions.openFile(filePath),
      async (filePath) => await this.actions.openFileAndAudit(filePath)
    );
    this.renderer = new PanelRenderer(this.app, this.plugin, this.actions);
    if (this.panelType === "current") {
      this.registerEvent(this.app.workspace.on("active-leaf-change", () => {
        if (_SEOSidePanel.globalAuditController) {
          _SEOSidePanel.globalAuditController.abort();
          _SEOSidePanel.globalAuditController = null;
          console.debug("Audit cancelled due to file switch");
        }
        if (this.isRefreshing) {
          return;
        }
        const activeFile = this.app.workspace.getActiveFile();
        if (!activeFile) {
          return;
        }
        if (activeFile) {
          this.updateCurrentNoteResults(activeFile);
        }
      }));
    }
  }
  getViewType() {
    return this.panelType === "current" ? SEOCurrentPanelViewType : SEOGlobalPanelViewType;
  }
  async handleRefreshClick(button) {
    if (button.disabled) {
      return;
    }
    if (_SEOSidePanel.globalAuditController) {
      _SEOSidePanel.globalAuditController.abort();
    }
    _SEOSidePanel.globalAuditController = new AbortController();
    this.isRefreshing = true;
    button.textContent = "Refreshing...";
    button.disabled = true;
    try {
      const result = await this.actions.checkCurrentNote(_SEOSidePanel.globalAuditController.signal);
      if (result) {
        this.currentNoteResults = result;
        const existingResults = this.containerEl.querySelectorAll(".seo-results-container, .seo-file-issue, .seo-issue, .seo-warning, .seo-notice, .seo-info-note, .seo-check, .seo-result, .seo-score-header, .seo-score-text, .seo-score-number, .seo-toggle-icon, .seo-collapse-icon");
        existingResults.forEach((el) => el.remove());
        const newResultsContainer = this.containerEl.createEl("div", { cls: "seo-results-container" });
        this.resultsDisplay.updateContainer(newResultsContainer);
        this.resultsDisplay.renderResults(result);
        this.updateGlobalResultsIfExists(result);
      }
    } catch (error) {
      if (error instanceof Error && error.name === "AbortError") {
        console.debug("Audit was cancelled");
        return;
      }
      console.error("Error in refresh button:", error);
    } finally {
      this.isRefreshing = false;
      button.textContent = "Refresh";
      button.disabled = false;
      _SEOSidePanel.globalAuditController = null;
    }
  }
  getDisplayText() {
    return this.panelType === "current" ? "SEO audit: current note" : "SEO audit: vault";
  }
  getIcon() {
    return "search-check";
  }
  async onOpen() {
    try {
      if (this.panelType === "global" && this.plugin.settings.cachedGlobalResults.length > 0) {
        this.globalResults = this.plugin.settings.cachedGlobalResults;
      }
      this.forceIconRefresh();
      if (this.panelType === "global" && !this.hasRunInitialScan && this.globalResults.length === 0) {
        this.showLoadingState();
        this.hasRunInitialScan = true;
        await this.runInitialScan();
      } else {
        this.render();
      }
    } catch (error) {
      console.error("Error opening SEO panel:", error);
    }
  }
  async onClose() {
  }
  cleanup() {
  }
  // Run initial scan for global panel
  async runInitialScan() {
    const results = await this.actions.runInitialScan();
    if (results.length > 0) {
      this.globalResults = results;
      this.render();
    }
  }
  // Force icon refresh to handle Obsidian's icon caching issues
  forceIconRefresh() {
    if (this.leaf) {
      void this.leaf.setViewState({
        type: this.getViewType(),
        state: this.leaf.view.getState()
      });
    }
    setTimeout(() => {
      const iconEl = this.containerEl.querySelector(".view-header-icon");
      if (iconEl) {
        while (iconEl.firstChild) {
          iconEl.removeChild(iconEl.firstChild);
        }
        iconEl.setAttribute("data-icon", "search-check");
        iconEl.setAttribute("data-icon", "");
        void iconEl.offsetHeight;
        iconEl.setAttribute("data-icon", "search-check");
      }
      const headerEl = this.containerEl.querySelector(".view-header");
      if (headerEl) {
        headerEl.addClass("seo-header-hidden");
        void headerEl.offsetHeight;
        headerEl.removeClass("seo-header-hidden");
        headerEl.addClass("seo-header-visible");
      }
      this.app.workspace.trigger("layout-change");
    }, 50);
  }
  updateCurrentNoteResults(file) {
    if (!file || !file.path.endsWith(".md")) {
      return;
    }
    try {
      let currentFileResults = null;
      if (this.plugin.settings.cachedGlobalResults) {
        currentFileResults = this.plugin.settings.cachedGlobalResults.find(
          (result) => result.file === file.path
        ) || null;
      }
      if (currentFileResults) {
        this.currentNoteResults = currentFileResults;
      } else {
        this.currentNoteResults = null;
      }
      const resultsToShow = this.currentNoteResults;
      const existingResults = this.containerEl.querySelectorAll(".seo-results-container, .seo-file-issue, .seo-issue, .seo-warning, .seo-notice, .seo-info-note, .seo-check, .seo-result, .seo-score-header, .seo-score-text, .seo-score-number, .seo-toggle-icon, .seo-collapse-icon");
      existingResults.forEach((el) => el.remove());
      if (resultsToShow) {
        const newResultsContainer = this.containerEl.createEl("div", { cls: "seo-results-container" });
        if (!this.resultsDisplay) {
          this.resultsDisplay = new ResultsDisplay(
            newResultsContainer,
            async (filePath) => await this.actions.openFile(filePath),
            async (filePath) => await this.actions.openFileAndAudit(filePath)
          );
        } else {
          this.resultsDisplay.updateContainer(newResultsContainer);
        }
        this.resultsDisplay.renderResults(resultsToShow);
      } else {
        this.containerEl.createEl("div", {
          cls: "seo-info-note seo-no-results-message",
          // eslint-disable-next-line obsidianmd/ui/sentence-case
          text: 'No SEO results available for this file. Click "Refresh" to run an audit.'
        });
      }
      this.updateHeaderAndResults();
    } catch (error) {
      console.error("Error updating current note results:", error);
    }
  }
  /**
   * Updates only the header and results content without re-rendering the entire panel
   * This preserves button event listeners and other UI state
   */
  updateHeaderAndResults() {
    const header = this.containerEl.querySelector(".seo-panel-header");
    if (header) {
      const filenameEl = header.querySelector(".seo-filename");
      if (filenameEl) {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile && isSupportedFile(activeFile, this.plugin.settings)) {
          let displayName = activeFile.path;
          if (this.currentNoteResults && this.currentNoteResults.file === activeFile.path) {
            displayName = this.currentNoteResults.displayName || activeFile.path;
          } else if (this.plugin.settings.cachedGlobalResults) {
            const globalResult = this.plugin.settings.cachedGlobalResults.find(
              (result) => result.file === activeFile.path
            );
            if (globalResult) {
              displayName = globalResult.displayName || activeFile.path;
            }
          }
          filenameEl.textContent = `Target note: ${displayName}`;
        }
      }
    }
  }
  updateResults(results) {
    this.globalResults = results;
    this.render();
  }
  // Show loading state for large scans
  showLoadingState() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.addClass("seo-panel");
    const header = containerEl.createEl("div", { cls: "seo-panel-header" });
    header.createEl("h2", { text: this.panelType === "current" ? "SEO audit: current note" : "SEO audit: vault" });
    if (this.panelType === "global") {
      const foldersInfo = getVaultFoldersInfo(this.plugin.settings.scanDirectories);
      const foldersEl = header.createEl("div", { cls: "seo-filename" });
      foldersEl.textContent = foldersInfo;
    }
    const loadingContainer = containerEl.createEl("div", { cls: "seo-loading-container" });
    const spinnerEl = loadingContainer.createEl("div", { cls: "seo-loading-spinner" });
    (0, import_obsidian6.setIcon)(spinnerEl, "loader-circle");
    loadingContainer.createEl("h3", {
      // eslint-disable-next-line obsidianmd/ui/sentence-case
      text: "Running SEO audit...",
      cls: "seo-loading-title"
    });
    loadingContainer.createEl("p", {
      text: "This may take a moment for large vaults. Please wait...",
      cls: "seo-loading-message"
    });
  }
  // Method to refresh the panel when settings change
  refresh() {
    this.render();
  }
  render() {
    this.renderer.render(
      this.containerEl,
      this.panelType,
      this.currentNoteResults,
      this.globalResults,
      async (btn) => await this.handleRefreshClick(btn),
      async () => {
        const result = await this.actions.checkExternalLinks();
        if (result) {
          this.currentNoteResults = result;
          this.updateGlobalResultsIfExists(result);
          this.render();
        }
      }
    );
    this.containerEl.addEventListener("seo-refresh-complete", (event) => {
      const customEvent = event;
      this.globalResults = customEvent.detail.results;
      this.render();
    });
    this.containerEl.addEventListener("seo-sort-change", (event) => {
      const customEvent = event;
      this.currentSort = customEvent.detail.sortType;
      this.plugin.settings.defaultSort = customEvent.detail.sortType;
      void this.plugin.saveSettings();
      this.render();
    });
  }
  /**
   * Legacy render method - kept as fallback during migration
   * TODO: Remove once PanelRenderer is fully tested
   */
  renderLegacy() {
    try {
      const { containerEl } = this;
      containerEl.empty();
      containerEl.addClass("seo-panel");
      const header = containerEl.createEl("div", { cls: "seo-panel-header" });
      header.createEl("h2", { text: this.panelType === "current" ? "SEO audit: current note" : "SEO audit: vault" });
      if (this.panelType === "current") {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile && isSupportedFile(activeFile, this.plugin.settings)) {
          const filenameEl = header.createEl("div", { cls: "seo-filename" });
          let displayName = activeFile.path;
          if (this.currentNoteResults && this.currentNoteResults.file === activeFile.path) {
            displayName = this.currentNoteResults.displayName || activeFile.path;
          } else if (this.plugin.settings.cachedGlobalResults) {
            const globalResult = this.plugin.settings.cachedGlobalResults.find(
              (result) => result.file === activeFile.path
            );
            if (globalResult) {
              displayName = globalResult.displayName || activeFile.path;
            }
          }
          filenameEl.textContent = `Target note: ${displayName}`;
        }
      } else {
        const fileCount = this.globalResults.length;
        const foldersInfo = getVaultFoldersInfo(this.plugin.settings.scanDirectories, fileCount);
        const foldersEl = header.createEl("div", { cls: "seo-filename" });
        foldersEl.textContent = foldersInfo;
      }
      if (this.panelType === "current") {
        const auditCurrentBtn = containerEl.createEl("button", {
          text: "Refresh",
          cls: "mod-cta seo-btn seo-top-btn"
        });
        auditCurrentBtn.addEventListener("click", (event) => {
          event.preventDefault();
          event.stopPropagation();
          void (async () => {
            await this.handleRefreshClick(auditCurrentBtn);
          })();
        });
        if (this.plugin.settings.enableExternalLinkButton && !this.plugin.settings.enableExternalLinkVaultCheck) {
          const externalLinksBtn = containerEl.createEl("button", {
            text: "Check external links for 404s",
            cls: "seo-btn"
          });
          externalLinksBtn.addEventListener("click", () => {
            void (async () => {
              externalLinksBtn.disabled = true;
              externalLinksBtn.textContent = "This may take some time...";
              externalLinksBtn.addClass("seo-btn-disabled");
              try {
                const result = await this.actions.checkExternalLinks();
                if (result) {
                  this.currentNoteResults = result;
                  this.updateGlobalResultsIfExists(result);
                  this.render();
                }
              } finally {
                externalLinksBtn.disabled = false;
                externalLinksBtn.textContent = "Check external links for 404s";
                externalLinksBtn.removeClass("seo-btn-disabled");
                externalLinksBtn.addClass("seo-btn-enabled");
              }
            })();
          });
        }
      }
      if (this.panelType === "current") {
        const activeFile = this.app.workspace.getActiveFile();
        let currentFileResults = null;
        if (activeFile && this.plugin.settings.cachedGlobalResults) {
          currentFileResults = this.plugin.settings.cachedGlobalResults.find(
            (result) => result.file === activeFile.path
          ) || null;
        }
        const resultsToShow = this.currentNoteResults || currentFileResults;
        if (resultsToShow) {
          const newResultsContainer = this.containerEl.createEl("div", { cls: "seo-results-container" });
          const tempResultsDisplay = new ResultsDisplay(
            newResultsContainer,
            async (filePath) => await this.actions.openFile(filePath),
            async (filePath) => await this.actions.openFileAndAudit(filePath)
          );
          tempResultsDisplay.renderResults(resultsToShow);
        } else {
          const noResults = containerEl.createEl("div", { cls: "seo-no-results" });
          const fileTypeText = this.plugin.settings.enableMDXSupport ? "markdown or MDX file" : "markdown file";
          noResults.createEl("p", { text: `Open a ${fileTypeText} and click "Refresh" to audit it.` });
        }
      } else {
        if (this.globalResults.length > 0) {
          this.renderGlobalResults(containerEl);
        } else {
          const noGlobal = containerEl.createEl("div", { cls: "seo-no-results" });
          noGlobal.createEl("p", { text: 'Click "Audit all notes" to audit your files in your configured directories.' });
        }
      }
    } catch (error) {
      console.error("Error rendering SEO panel:", error);
      this.containerEl.createEl("div", { text: "Error loading SEO panel. Please try again." });
    }
  }
  shouldIncludeFileInGlobalResults(filePath) {
    if (this.plugin.settings.ignoreUnderscoreFiles) {
      const fileName = filePath.split("/").pop() || "";
      const basename = fileName.replace(/\.[^/.]+$/, "");
      if (basename.startsWith("_")) {
        return false;
      }
    }
    const { scanDirectories } = this.plugin.settings;
    if (scanDirectories.trim()) {
      const directories = scanDirectories.split(",").map((dir) => dir.trim());
      const isInConfiguredDirectory = directories.some(
        (dir) => filePath.startsWith(dir + "/") || filePath === dir
      );
      return isInConfiguredDirectory;
    }
    return true;
  }
  updateGlobalResultsIfExists(currentResult) {
    if (this.plugin.settings.cachedGlobalResults && this.plugin.settings.cachedGlobalResults.length > 0) {
      if (!this.shouldIncludeFileInGlobalResults(currentResult.file)) {
        return;
      }
      const globalResults = this.plugin.settings.cachedGlobalResults;
      const existingIndex = globalResults.findIndex((r) => r.file === currentResult.file);
      if (existingIndex !== -1) {
        globalResults[existingIndex] = currentResult;
      } else {
        globalResults.push(currentResult);
      }
      void this.plugin.saveSettings();
      this.updateGlobalPanelIfOpen();
    }
  }
  updateDisplayName() {
    const activeFile = this.app.workspace.getActiveFile();
    if (activeFile && isSupportedFile(activeFile, this.plugin.settings)) {
      const filenameEl = this.containerEl.querySelector(".seo-filename");
      if (filenameEl) {
        let displayName = activeFile.path;
        if (this.currentNoteResults && this.currentNoteResults.file === activeFile.path) {
          displayName = this.currentNoteResults.displayName || activeFile.path;
        } else if (this.plugin.settings.cachedGlobalResults) {
          const globalResult = this.plugin.settings.cachedGlobalResults.find(
            (result) => result.file === activeFile.path
          );
          if (globalResult) {
            displayName = globalResult.displayName || activeFile.path;
          }
        }
        filenameEl.textContent = `Target note: ${displayName}`;
      }
      this.updateResultsForCurrentFile();
    }
  }
  updateResultsForCurrentFile() {
    const activeFile = this.app.workspace.getActiveFile();
    let currentFileResults = null;
    if (activeFile && this.plugin.settings.cachedGlobalResults) {
      currentFileResults = this.plugin.settings.cachedGlobalResults.find(
        (result) => result.file === activeFile.path
      ) || null;
    }
    const resultsToShow = this.currentNoteResults || currentFileResults;
    const existingResults = this.containerEl.querySelectorAll(".seo-results-container, .seo-file-issue, .seo-issue, .seo-warning, .seo-notice, .seo-info-note, .seo-check, .seo-result, .seo-score-header, .seo-score-text, .seo-score-number, .seo-toggle-icon, .seo-collapse-icon");
    existingResults.forEach((el) => el.remove());
    if (resultsToShow) {
      const newResultsContainer = this.containerEl.createEl("div", { cls: "seo-results-container" });
      const tempResultsDisplay = new ResultsDisplay(
        newResultsContainer,
        async (filePath) => await this.actions.openFile(filePath),
        async (filePath) => await this.actions.openFileAndAudit(filePath)
      );
      tempResultsDisplay.renderResults(resultsToShow);
    } else {
      const noResults = this.containerEl.createEl("div", { cls: "seo-no-results" });
      noResults.createEl("p", { text: 'Open a markdown file and click "Refresh" to audit it.' });
    }
  }
  updateGlobalPanelIfOpen() {
    const globalPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
    if (globalPanels.length > 0) {
      const globalPanel = globalPanels[0];
      if ((globalPanel == null ? void 0 : globalPanel.view) && globalPanel.view instanceof _SEOSidePanel) {
        const seoPanel = globalPanel.view;
        seoPanel.globalResults = [...this.plugin.settings.cachedGlobalResults];
        seoPanel.render();
      }
    }
  }
  renderGlobalResults(container) {
    this.resultsDisplay.renderGlobalResults(this.globalResults, this.plugin.settings);
    const refreshBtn = container.createEl("button", {
      text: "Refresh",
      cls: "mod-cta seo-btn seo-refresh-btn",
      attr: { "data-refresh-btn": "true" }
    });
    refreshBtn.addEventListener("click", () => {
      void (async () => {
        refreshBtn.textContent = "Refreshing...";
        refreshBtn.disabled = true;
        try {
          const results = await this.actions.refreshGlobalResults();
          if (results.length > 0) {
            this.globalResults = results;
            this.render();
          }
        } finally {
          refreshBtn.textContent = "Refresh";
          refreshBtn.disabled = false;
        }
      })();
    });
    this.resultsDisplay.renderIssuesList(
      this.globalResults,
      this.currentSort,
      (sortType) => {
        this.currentSort = sortType;
        this.plugin.settings.defaultSort = sortType;
        void this.plugin.saveSettings();
      },
      (event) => {
        const showNotices = this.plugin.settings.checkPotentiallyBrokenLinks && this.plugin.settings.checkPotentiallyBrokenEmbeds;
        const issuesFiles = this.globalResults.filter((r) => {
          const hasIssues = r.issuesCount > 0;
          const hasWarnings = r.warningsCount > 0;
          const hasNotices = showNotices && r.noticesCount > 0;
          return hasIssues || hasWarnings || hasNotices;
        });
        this.actions.showSortMenu(event, issuesFiles, container, this.currentSort, (sortType) => {
          this.currentSort = sortType;
          this.plugin.settings.defaultSort = sortType;
          void this.plugin.saveSettings();
        }, this.plugin.settings);
      },
      this.plugin.settings
    );
  }
};
// Static property to track the current audit controller globally
_SEOSidePanel.globalAuditController = null;
var SEOSidePanel = _SEOSidePanel;

// src/ui/panel-manager.ts
var import_obsidian7 = require("obsidian");
var PanelManager = class {
  constructor(app, plugin) {
    this.app = app;
    this.plugin = plugin;
  }
  openCurrentPanel() {
    void this.openPanel(SEOCurrentPanelViewType, "current");
  }
  openGlobalPanel() {
    void this.openPanel(SEOGlobalPanelViewType, "global");
  }
  async openPanel(viewType, panelType) {
    if (this.app.workspace.rightSplit.collapsed) {
      this.app.workspace.rightSplit.expand();
    }
    const existingLeaf = this.app.workspace.getLeavesOfType(viewType)[0];
    if (existingLeaf) {
      await this.app.workspace.revealLeaf(existingLeaf);
      this.app.workspace.setActiveLeaf(existingLeaf);
      if (existingLeaf.view instanceof SEOSidePanel) {
        this.plugin.sidePanel = existingLeaf.view;
      }
      if (existingLeaf.view instanceof SEOSidePanel) {
        const panel = existingLeaf.view;
        if (typeof panel.forceIconRefresh === "function") {
          setTimeout(() => panel.forceIconRefresh(), 100);
        }
      }
    } else {
      const leaf = this.app.workspace.getRightLeaf(false);
      if (leaf) {
        const panel = new SEOSidePanel(this.plugin, panelType, leaf);
        this.plugin.sidePanel = panel;
        await leaf.open(panel);
        this.app.workspace.setActiveLeaf(leaf);
        setTimeout(() => {
          if (leaf.view instanceof SEOSidePanel) {
            if (typeof leaf.view.forceIconRefresh === "function") {
              leaf.view.forceIconRefresh();
            }
          }
        }, 100);
      }
    }
  }
  getFilesToCheck() {
    const { vault } = this.app;
    const { scanDirectories, ignoreUnderscoreFiles, enableMDXSupport } = this.plugin.settings;
    let files;
    if (!scanDirectories.trim()) {
      files = vault.getMarkdownFiles();
      if (enableMDXSupport) {
        const mdxFiles = vault.getFiles().filter(
          (file) => file instanceof import_obsidian7.TFile && file.extension.toLowerCase() === "mdx"
        );
        files = [...files, ...mdxFiles];
      }
    } else {
      const directories = scanDirectories.split(",").map((dir) => dir.trim());
      files = [];
      for (const dir of directories) {
        const folder = vault.getAbstractFileByPath(dir);
        if (folder && folder instanceof import_obsidian7.TFolder) {
          const mdFiles = vault.getMarkdownFiles().filter(
            (file) => file.path.startsWith(dir + "/") || file.path === dir
          );
          files.push(...mdFiles);
          if (enableMDXSupport) {
            const mdxFiles = vault.getFiles().filter(
              (file) => file instanceof import_obsidian7.TFile && file.extension.toLowerCase() === "mdx" && (file.path.startsWith(dir + "/") || file.path === dir)
            );
            files.push(...mdxFiles);
          }
        }
      }
    }
    files = files.filter((file) => isSupportedFile(file, this.plugin.settings));
    if (ignoreUnderscoreFiles) {
      files = files.filter((file) => {
        const fileName = file.basename;
        return !fileName.startsWith("_");
      });
    }
    return Promise.resolve(files);
  }
};

// src/utils/error-handler.ts
var import_obsidian8 = require("obsidian");
var SEOPluginError = class extends Error {
  constructor(message, severity = "error" /* ERROR */, userMessage, suggestion) {
    super(message);
    this.name = "SEOPluginError";
    this.severity = severity;
    this.userMessage = userMessage || message;
    this.suggestion = suggestion;
  }
};
function handleError(error, context, showNotice = true) {
  let message;
  let severity = "error" /* ERROR */;
  let suggestion;
  if (error instanceof SEOPluginError) {
    message = error.userMessage;
    severity = error.severity;
    suggestion = error.suggestion;
  } else if (error instanceof Error) {
    message = error.message;
    severity = "error" /* ERROR */;
    suggestion = "Please try again or check the plugin settings";
  } else {
    message = "An unexpected error occurred";
    severity = "critical" /* CRITICAL */;
    suggestion = "Please restart Obsidian and try again";
  }
  console.error(`[SEO Plugin] Error in ${context}:`, error);
  if (showNotice) {
    const noticeMessage = suggestion ? `${message} - ${suggestion}` : message;
    new import_obsidian8.Notice(noticeMessage, 5e3);
  }
  return { message, severity, suggestion };
}
async function withErrorHandling(fn, context, fallback) {
  try {
    return await fn();
  } catch (error) {
    handleError(error, context, true);
    return fallback;
  }
}
function validateRequiredParams(params, context) {
  const missing = Object.entries(params).filter(([_, value]) => value === null || value === void 0).map(([name]) => name);
  if (missing.length > 0) {
    throw new SEOPluginError(
      `Missing required parameters: ${missing.join(", ")}`,
      "error" /* ERROR */,
      `Missing required parameters: ${missing.join(", ")}`,
      "Please check your plugin configuration"
    );
  }
}

// src/utils/cache-manager.ts
var CacheManager = class {
  constructor(config = {}) {
    this.cache = /* @__PURE__ */ new Map();
    this.cleanupTimer = null;
    this.config = {
      maxSize: config.maxSize || 100,
      maxAge: config.maxAge || 30 * 60 * 1e3,
      // 30 minutes
      cleanupInterval: config.cleanupInterval || 5 * 60 * 1e3
      // 5 minutes
    };
    this.startCleanupTimer();
  }
  /**
   * Get a value from cache
   * @param key - Cache key
   * @returns Cached value or undefined
   */
  get(key) {
    const entry = this.cache.get(key);
    if (!entry) {
      return void 0;
    }
    if (this.isExpired(entry)) {
      this.cache.delete(key);
      return void 0;
    }
    entry.accessCount++;
    entry.lastAccessed = Date.now();
    return entry.value;
  }
  /**
   * Set a value in cache
   * @param key - Cache key
   * @param value - Value to cache
   */
  set(key, value) {
    if (this.cache.has(key)) {
      this.cache.delete(key);
    }
    if (this.cache.size >= this.config.maxSize) {
      this.evictLRU();
    }
    this.cache.set(key, {
      value,
      timestamp: Date.now(),
      accessCount: 1,
      lastAccessed: Date.now()
    });
  }
  /**
   * Check if a key exists in cache
   * @param key - Cache key
   * @returns True if key exists and is not expired
   */
  has(key) {
    const entry = this.cache.get(key);
    if (!entry) {
      return false;
    }
    if (this.isExpired(entry)) {
      this.cache.delete(key);
      return false;
    }
    return true;
  }
  /**
   * Delete a specific key from cache
   * @param key - Cache key
   */
  delete(key) {
    return this.cache.delete(key);
  }
  /**
   * Clear all cache entries
   */
  clear() {
    this.cache.clear();
  }
  /**
   * Get cache statistics
   */
  getStats() {
    const entries = Array.from(this.cache.values());
    return {
      size: this.cache.size,
      maxSize: this.config.maxSize,
      hitRate: this.calculateHitRate(),
      oldestEntry: Math.min(...entries.map((e) => e.timestamp)),
      newestEntry: Math.max(...entries.map((e) => e.timestamp)),
      expiredEntries: entries.filter((e) => this.isExpired(e)).length
    };
  }
  /**
   * Clean up expired entries
   */
  cleanup() {
    const expiredKeys = [];
    for (const [key, entry] of this.cache.entries()) {
      if (this.isExpired(entry)) {
        expiredKeys.push(key);
      }
    }
    expiredKeys.forEach((key) => this.cache.delete(key));
  }
  /**
   * Destroy the cache manager and cleanup resources
   */
  destroy() {
    if (this.cleanupTimer) {
      clearInterval(this.cleanupTimer);
      this.cleanupTimer = null;
    }
    this.clear();
  }
  /**
   * Check if an entry has expired
   */
  isExpired(entry) {
    return Date.now() - entry.timestamp > this.config.maxAge;
  }
  /**
   * Evict least recently used entry
   */
  evictLRU() {
    let oldestKey = "";
    let oldestTime = Date.now();
    for (const [key, entry] of this.cache.entries()) {
      if (entry.lastAccessed < oldestTime) {
        oldestTime = entry.lastAccessed;
        oldestKey = key;
      }
    }
    if (oldestKey) {
      this.cache.delete(oldestKey);
    }
  }
  /**
   * Calculate cache hit rate
   */
  calculateHitRate() {
    const entries = Array.from(this.cache.values());
    const totalAccesses = entries.reduce((sum, entry) => sum + entry.accessCount, 0);
    return totalAccesses > 0 ? entries.length / totalAccesses : 0;
  }
  /**
   * Start the cleanup timer
   */
  startCleanupTimer() {
    this.cleanupTimer = setInterval(() => {
      this.cleanup();
    }, this.config.cleanupInterval);
  }
};
var SEOCacheManager = class {
  // For file content caching
  constructor() {
    this.resultsCache = new CacheManager({
      maxSize: 50,
      // Store up to 50 scan results
      maxAge: 60 * 60 * 1e3,
      // 1 hour
      cleanupInterval: 10 * 60 * 1e3
      // 10 minutes
    });
    this.fileCache = new CacheManager({
      maxSize: 200,
      // Store up to 200 file contents
      maxAge: 30 * 60 * 1e3,
      // 30 minutes
      cleanupInterval: 5 * 60 * 1e3
      // 5 minutes
    });
  }
  /**
   * Get cached scan results
   * @param key - Cache key (usually scan type + timestamp)
   * @returns Cached results or undefined
   */
  getResults(key) {
    return this.resultsCache.get(key);
  }
  /**
   * Cache scan results
   * @param key - Cache key
   * @param results - Results to cache
   */
  setResults(key, results) {
    this.resultsCache.set(key, results);
  }
  /**
   * Get cached file content
   * @param filePath - File path
   * @returns Cached content or undefined
   */
  getFileContent(filePath) {
    return this.fileCache.get(filePath);
  }
  /**
   * Cache file content
   * @param filePath - File path
   * @param content - Content to cache
   */
  setFileContent(filePath, content) {
    this.fileCache.set(filePath, content);
  }
  /**
   * Clear all caches
   */
  clearAll() {
    this.resultsCache.clear();
    this.fileCache.clear();
  }
  /**
   * Get cache statistics
   */
  getStats() {
    return {
      results: this.resultsCache.getStats(),
      files: this.fileCache.getStats()
    };
  }
  /**
   * Clean up expired entries
   */
  cleanup() {
    this.resultsCache.cleanup();
    this.fileCache.cleanup();
  }
  /**
   * Destroy cache managers
   */
  destroy() {
    this.resultsCache.destroy();
    this.fileCache.destroy();
  }
};
var seoCache = new SEOCacheManager();
function clearAllCache2() {
  seoCache.clearAll();
}

// src/main.ts
var SEOPlugin = class extends import_obsidian9.Plugin {
  constructor() {
    super(...arguments);
    this.panelManager = null;
    this.sidePanel = null;
    this.ribbonIcon = null;
  }
  /**
   * Plugin initialization - called when the plugin is loaded
   * Sets up managers, registers views, and commands
   */
  async onload() {
    try {
      await this.loadSettings();
      validateRequiredParams(
        { app: this.app, settings: this.settings },
        "plugin initialization"
      );
      this.panelManager = await withErrorHandling(
        () => Promise.resolve(new PanelManager(this.app, this)),
        "panel manager initialization",
        null
      );
      this.forceIconRefresh();
      await withErrorHandling(
        () => {
          this.registerView(SEOCurrentPanelViewType, (leaf) => {
            const panel = new SEOSidePanel(this, "current", leaf);
            this.sidePanel = panel;
            return panel;
          });
          this.registerView(SEOGlobalPanelViewType, (leaf) => {
            const panel = new SEOSidePanel(this, "global", leaf);
            this.sidePanel = panel;
            return panel;
          });
        },
        "side panel registration",
        void 0
      );
      await withErrorHandling(
        () => {
          registerCommands(this);
        },
        "command registration",
        void 0
      );
      await withErrorHandling(
        () => {
          this.addSettingTab(new SEOSettingTab(this.app, this));
        },
        "settings tab registration",
        void 0
      );
      if (this.settings.showRibbonIcon) {
        await withErrorHandling(
          () => {
            this.ribbonIcon = this.addRibbonIcon("search-check", "Open SEO audit panel", () => {
              try {
                const existingPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
                const isFirstRun = existingPanels.length === 0;
                this.openGlobalPanel();
                if (!isFirstRun) {
                  void setTimeout(() => {
                    void (async () => {
                      try {
                        const globalPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
                        if (globalPanels.length > 0) {
                          const panel = globalPanels[0];
                          if (panel == null ? void 0 : panel.view) {
                            const seoPanel = panel.view;
                            await seoPanel.actions.refreshGlobalResults();
                            seoPanel.render();
                          }
                        }
                      } catch (error) {
                        handleError(error, "ribbon icon panel refresh", true);
                      }
                    })();
                  }, 500);
                }
              } catch (error) {
                handleError(error, "ribbon icon click handler", true);
              }
            });
          },
          "ribbon icon registration",
          void 0
        );
      }
    } catch (error) {
      handleError(error, "plugin initialization", true);
    }
  }
  onunload() {
    try {
      seoCache.destroy();
    } catch (error) {
      handleError(error, "plugin unload", false);
    }
  }
  /**
   * Load plugin settings from Obsidian's data store
   * Merges saved settings with default values
   */
  async loadSettings() {
    try {
      const loadedData = await this.loadData();
      this.settings = Object.assign({}, DEFAULT_SETTINGS, loadedData);
    } catch (error) {
      handleError(error, "loading settings", true);
      this.settings = { ...DEFAULT_SETTINGS };
    }
  }
  /**
   * Save plugin settings to Obsidian's data store
   * Clears cache to ensure fresh results after settings changes
   */
  async saveSettings() {
    try {
      await this.saveData(this.settings);
      clearAllCache2();
    } catch (error) {
      handleError(error, "saving settings", true);
    }
  }
  addStatusBar() {
  }
  removeStatusBar() {
  }
  /**
   * Opens the current note SEO audit panel
   * Shows SEO analysis for the currently active note
   */
  openCurrentPanel() {
    try {
      if (this.panelManager) {
        this.panelManager.openCurrentPanel();
      } else {
        throw new Error("Panel manager not initialized");
      }
    } catch (error) {
      handleError(error, "opening current panel", true);
    }
  }
  /**
   * Opens the global vault SEO audit panel
   * Shows SEO analysis for all notes in the vault
   */
  openGlobalPanel() {
    try {
      if (this.panelManager) {
        this.panelManager.openGlobalPanel();
      } else {
        throw new Error("Panel manager not initialized");
      }
    } catch (error) {
      handleError(error, "opening global panel", true);
    }
  }
  /**
   * Runs bulk SEO check across all configured files
   * @returns Promise that resolves when bulk check is complete
   */
  async runBulkCheck() {
    try {
      const { runSEOCheck: runSEOCheck2 } = await Promise.resolve().then(() => (init_seo_checker(), seo_checker_exports));
      const files = await this.getFilesToCheck();
      if (files.length === 0) {
        return [];
      }
      const results = await runSEOCheck2(this, files);
      return results;
    } catch (error) {
      handleError(error, "running bulk check", true);
      return [];
    }
  }
  /**
   * Gets the list of files to check based on current settings
   * @returns Promise resolving to array of TFile objects to check
   */
  async getFilesToCheck() {
    try {
      if (this.panelManager) {
        return await this.panelManager.getFilesToCheck();
      } else {
        throw new Error("Panel manager not initialized");
      }
    } catch (error) {
      handleError(error, "getting files to check", true);
      return [];
    }
  }
  // Proper icon refresh using Obsidian's onLayoutReady API
  forceIconRefresh() {
    this.app.workspace.onLayoutReady(() => {
      const existingCurrentPanels = this.app.workspace.getLeavesOfType(SEOCurrentPanelViewType);
      const existingGlobalPanels = this.app.workspace.getLeavesOfType(SEOGlobalPanelViewType);
      [...existingCurrentPanels, ...existingGlobalPanels].forEach((leaf) => {
        if (leaf.view instanceof SEOSidePanel) {
          leaf.view.render();
        }
      });
    });
  }
  /**
   * Toggles the ribbon icon visibility
   * Adds or removes the ribbon icon based on the setting
   */
  toggleRibbonIcon() {
    try {
      if (this.settings.showRibbonIcon) {
        if (!this.ribbonIcon) {
          this.ribbonIcon = this.addRibbonIcon("search-check", "Open SEO audit panel", () => {
            try {
              const existingPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
              const isFirstRun = existingPanels.length === 0;
              this.openGlobalPanel();
              if (!isFirstRun) {
                void setTimeout(() => {
                  void (async () => {
                    try {
                      const globalPanels = this.app.workspace.getLeavesOfType("seo-global-panel");
                      if (globalPanels.length > 0) {
                        const panel = globalPanels[0];
                        if (panel == null ? void 0 : panel.view) {
                          const seoPanel = panel.view;
                          await seoPanel.actions.refreshGlobalResults();
                          seoPanel.render();
                        }
                      }
                    } catch (error) {
                      handleError(error, "ribbon icon panel refresh", true);
                    }
                  })();
                }, 500);
              }
            } catch (error) {
              handleError(error, "ribbon icon click handler", true);
            }
          });
        }
      } else {
        if (this.ribbonIcon) {
          const iconToRemove = this.ribbonIcon;
          this.ribbonIcon = null;
          iconToRemove.remove();
          this.app.workspace.trigger("layout-change");
          setTimeout(() => {
            const contextMenus = document.querySelectorAll(".menu");
            contextMenus.forEach((menu) => {
              const items = menu.querySelectorAll(".menu-item");
              items.forEach((item) => {
                var _a;
                const text = (_a = item.textContent) == null ? void 0 : _a.trim();
                if (text === "Open SEO audit panel") {
                  item.remove();
                }
              });
            });
          }, 100);
        }
      }
    } catch (error) {
      handleError(error, "toggling ribbon icon", true);
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3VpL3BhbmVsLXV0aWxzLnRzIiwgInNyYy9jaGVja3MvdXRpbHMvY29udGVudC1wYXJzZXIudHMiLCAic3JjL2NoZWNrcy91dGlscy9wb3NpdGlvbi11dGlscy50cyIsICJzcmMvY2hlY2tzL2FsdC10ZXh0LWNoZWNrLnRzIiwgInNyYy9jaGVja3MvbGluay1jaGVja3MudHMiLCAic3JjL2NoZWNrcy9leHRlcm5hbC1saW5rLWNoZWNrcy50cyIsICJzcmMvY2hlY2tzL3V0aWxzL3JlYWRpbmctbGV2ZWwudHMiLCAic3JjL2NoZWNrcy9jb250ZW50LWNoZWNrcy50cyIsICJzcmMvY2hlY2tzL21ldGEtY2hlY2tzLnRzIiwgInNyYy9jaGVja3MvaGVhZGluZy1jaGVja3MudHMiLCAic3JjL2NoZWNrcy9pbWFnZS1jaGVja3MudHMiLCAic3JjL2NoZWNrcy91dGlscy9ub3RlLXV0aWxzLnRzIiwgInNyYy9jaGVja3MvaW5kZXgudHMiLCAic3JjL2NoZWNrcy9kdXBsaWNhdGUtZGV0ZWN0aW9uLnRzIiwgInNyYy9zZW8tY2hlY2tlci50cyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL2NvbW1hbmRzL2luZGV4LnRzIiwgInNyYy9zZXR0aW5ncy10YWIudHMiLCAic3JjL3V0aWxzL3NldHRpbmdzLWNvbXBhdC50cyIsICJzcmMvdWkvc2lkZS1wYW5lbC50cyIsICJzcmMvdWkvcGFuZWwtY29uc3RhbnRzLnRzIiwgInNyYy91aS9wYW5lbC1hY3Rpb25zLnRzIiwgInNyYy91dGlscy9maWxlLXV0aWxzLnRzIiwgInNyYy91aS9yZXN1bHRzLWRpc3BsYXkudHMiLCAic3JjL3VpL3BhbmVsLXJlbmRlcmVyLnRzIiwgInNyYy91aS9wYW5lbC1tYW5hZ2VyLnRzIiwgInNyYy91dGlscy9lcnJvci1oYW5kbGVyLnRzIiwgInNyYy91dGlscy9jYWNoZS1tYW5hZ2VyLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBTRU9SZXN1bHRzIH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlzcGxheVBhdGgoZnVsbFBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Ly8gUmVtb3ZlIGxlYWRpbmcgc2xhc2ggaWYgcHJlc2VudCBhbmQgc3BsaXRcclxuXHRjb25zdCBjbGVhblBhdGggPSBmdWxsUGF0aC5zdGFydHNXaXRoKCcvJykgPyBmdWxsUGF0aC5zbGljZSgxKSA6IGZ1bGxQYXRoO1xyXG5cdGNvbnN0IHBhcnRzID0gY2xlYW5QYXRoLnNwbGl0KCcvJyk7XHJcblx0aWYgKHBhcnRzLmxlbmd0aCA8PSAxKSB7XHJcblx0XHRyZXR1cm4gY2xlYW5QYXRoOyAvLyBSZXR1cm4gYXMtaXMgaWYgbm8gcGFyZW50IGZvbGRlciAoanVzdCBmaWxlbmFtZSlcclxuXHR9XHJcblx0cmV0dXJuIHBhcnRzLnNsaWNlKC0yKS5qb2luKCcvJyk7IC8vIFJldHVybiBsYXN0IHR3byBwYXJ0cyAocGFyZW50IGZvbGRlciArIGZpbGUgbmFtZSlcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhdWx0Rm9sZGVyc0luZm8oc2NhbkRpcmVjdG9yaWVzOiBzdHJpbmcsIGZpbGVDb3VudD86IG51bWJlcik6IHN0cmluZyB7XHJcblx0bGV0IGJhc2VUZXh0ID0gJ1ZhdWx0IGZvbGRlcnM6ICc7XHJcblx0aWYgKCFzY2FuRGlyZWN0b3JpZXMgfHwgc2NhbkRpcmVjdG9yaWVzLnRyaW0oKSA9PT0gJycpIHtcclxuXHRcdGJhc2VUZXh0ICs9ICdhbGwnO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRjb25zdCBmb2xkZXJzID0gc2NhbkRpcmVjdG9yaWVzLnNwbGl0KCcsJykubWFwKGYgPT4gZi50cmltKCkpLmZpbHRlcihmID0+IGYubGVuZ3RoID4gMCk7XHJcblx0XHRiYXNlVGV4dCArPSBmb2xkZXJzLmpvaW4oJywgJyk7XHJcblx0fVxyXG5cdFxyXG5cdGlmIChmaWxlQ291bnQgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0YmFzZVRleHQgKz0gYDsgJHtmaWxlQ291bnR9IGZpbGVzIGFuYWx5emVkYDtcclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIGJhc2VUZXh0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc29ydEZpbGVzKGZpbGVzOiBTRU9SZXN1bHRzW10sIHNvcnRUeXBlOiBzdHJpbmcpOiBTRU9SZXN1bHRzW10ge1xyXG5cdGNvbnN0IHNvcnRlZEZpbGVzID0gWy4uLmZpbGVzXTtcclxuXHRcclxuXHRzd2l0Y2ggKHNvcnRUeXBlKSB7XHJcblx0XHRjYXNlICd3YXJuaW5ncy1kZXNjJzpcclxuXHRcdFx0c29ydGVkRmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRcdC8vIFByaW1hcnk6IHdhcm5pbmdzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdGlmIChiLndhcm5pbmdzQ291bnQgIT09IGEud2FybmluZ3NDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGIud2FybmluZ3NDb3VudCAtIGEud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gU2Vjb25kYXJ5OiBpc3N1ZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIuaXNzdWVzQ291bnQgIT09IGEuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gVGVydGlhcnk6IG5vdGljZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIubm90aWNlc0NvdW50ICE9PSBhLm5vdGljZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGIubm90aWNlc0NvdW50IC0gYS5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFF1YXRlcm5hcnk6IGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRjb25zdCBiRmlsZU5hbWUgPSBiLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAnd2FybmluZ3MtYXNjJzpcclxuXHRcdFx0c29ydGVkRmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRcdC8vIFByaW1hcnk6IHdhcm5pbmdzIChsb3cgZmlyc3QpXHJcblx0XHRcdFx0aWYgKGEud2FybmluZ3NDb3VudCAhPT0gYi53YXJuaW5nc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYS53YXJuaW5nc0NvdW50IC0gYi53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBTZWNvbmRhcnk6IGlzc3VlcyAobG93IGZpcnN0KVxyXG5cdFx0XHRcdGlmIChhLmlzc3Vlc0NvdW50ICE9PSBiLmlzc3Vlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYS5pc3N1ZXNDb3VudCAtIGIuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFRlcnRpYXJ5OiBub3RpY2VzIChsb3cgZmlyc3QpXHJcblx0XHRcdFx0aWYgKGEubm90aWNlc0NvdW50ICE9PSBiLm5vdGljZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGEubm90aWNlc0NvdW50IC0gYi5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFF1YXRlcm5hcnk6IGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRjb25zdCBiRmlsZU5hbWUgPSBiLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAnaXNzdWVzLWRlc2MnOlxyXG5cdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJpbWFyeTogaXNzdWVzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdGlmIChiLmlzc3Vlc0NvdW50ICE9PSBhLmlzc3Vlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi5pc3N1ZXNDb3VudCAtIGEuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFNlY29uZGFyeTogd2FybmluZ3MgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIud2FybmluZ3NDb3VudCAhPT0gYS53YXJuaW5nc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi53YXJuaW5nc0NvdW50IC0gYS53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBUZXJ0aWFyeTogbm90aWNlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi5ub3RpY2VzQ291bnQgIT09IGEubm90aWNlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi5ub3RpY2VzQ291bnQgLSBhLm5vdGljZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUXVhdGVybmFyeTogZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdHJldHVybiBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlICdpc3N1ZXMtYXNjJzpcclxuXHRcdFx0c29ydGVkRmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRcdC8vIFByaW1hcnk6IGlzc3VlcyAobG93IGZpcnN0KVxyXG5cdFx0XHRcdGlmIChhLmlzc3Vlc0NvdW50ICE9PSBiLmlzc3Vlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYS5pc3N1ZXNDb3VudCAtIGIuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFNlY29uZGFyeTogd2FybmluZ3MgKGxvdyBmaXJzdClcclxuXHRcdFx0XHRpZiAoYS53YXJuaW5nc0NvdW50ICE9PSBiLndhcm5pbmdzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBhLndhcm5pbmdzQ291bnQgLSBiLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFRlcnRpYXJ5OiBub3RpY2VzIChsb3cgZmlyc3QpXHJcblx0XHRcdFx0aWYgKGEubm90aWNlc0NvdW50ICE9PSBiLm5vdGljZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGEubm90aWNlc0NvdW50IC0gYi5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFF1YXRlcm5hcnk6IGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRjb25zdCBiRmlsZU5hbWUgPSBiLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAnbm90aWNlcy1kZXNjJzpcclxuXHRcdFx0c29ydGVkRmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRcdC8vIFByaW1hcnk6IG5vdGljZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIubm90aWNlc0NvdW50ICE9PSBhLm5vdGljZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGIubm90aWNlc0NvdW50IC0gYS5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFNlY29uZGFyeTogaXNzdWVzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdGlmIChiLmlzc3Vlc0NvdW50ICE9PSBhLmlzc3Vlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi5pc3N1ZXNDb3VudCAtIGEuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFRlcnRpYXJ5OiB3YXJuaW5ncyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRpZiAoYi53YXJuaW5nc0NvdW50ICE9PSBhLndhcm5pbmdzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLndhcm5pbmdzQ291bnQgLSBhLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFF1YXRlcm5hcnk6IGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRjb25zdCBiRmlsZU5hbWUgPSBiLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0Y2FzZSAnbm90aWNlcy1hc2MnOlxyXG5cdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJpbWFyeTogbm90aWNlcyAobG93IGZpcnN0KVxyXG5cdFx0XHRcdGlmIChhLm5vdGljZXNDb3VudCAhPT0gYi5ub3RpY2VzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBhLm5vdGljZXNDb3VudCAtIGIubm90aWNlc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBTZWNvbmRhcnk6IGlzc3VlcyAobG93IGZpcnN0KVxyXG5cdFx0XHRcdGlmIChhLmlzc3Vlc0NvdW50ICE9PSBiLmlzc3Vlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYS5pc3N1ZXNDb3VudCAtIGIuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFRlcnRpYXJ5OiB3YXJuaW5ncyAobG93IGZpcnN0KVxyXG5cdFx0XHRcdGlmIChhLndhcm5pbmdzQ291bnQgIT09IGIud2FybmluZ3NDb3VudCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGEud2FybmluZ3NDb3VudCAtIGIud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUXVhdGVybmFyeTogZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdHJldHVybiBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlICdmaWxlbmFtZS1hc2MnOlxyXG5cdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0Ly8gUHJpbWFyeTogZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdGNvbnN0IG5hbWVDb21wYXJlID0gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0XHRpZiAobmFtZUNvbXBhcmUgIT09IDApIHJldHVybiBuYW1lQ29tcGFyZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBTZWNvbmRhcnk6IHBhcmVudCBmb2xkZXIgQS1aIChyb290IGZpbGVzIGZpcnN0KVxyXG5cdFx0XHRcdGNvbnN0IGFQYXJ0cyA9IGEuZmlsZS5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdGNvbnN0IGJQYXJ0cyA9IGIuZmlsZS5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdGNvbnN0IGFQYXJlbnQgPSBhUGFydHMubGVuZ3RoID4gMSA/IChhUGFydHNbYVBhcnRzLmxlbmd0aCAtIDJdIHx8ICcnKSA6ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJQYXJlbnQgPSBiUGFydHMubGVuZ3RoID4gMSA/IChiUGFydHNbYlBhcnRzLmxlbmd0aCAtIDJdIHx8ICcnKSA6ICcnO1xyXG5cdFx0XHRcdGNvbnN0IHBhcmVudENvbXBhcmUgPSBhUGFyZW50LmxvY2FsZUNvbXBhcmUoYlBhcmVudCk7XHJcblx0XHRcdFx0aWYgKHBhcmVudENvbXBhcmUgIT09IDApIHJldHVybiBwYXJlbnRDb21wYXJlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFRlcnRpYXJ5OiBpc3N1ZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIuaXNzdWVzQ291bnQgIT09IGEuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUXVhdGVybmFyeTogd2FybmluZ3MgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIud2FybmluZ3NDb3VudCAhPT0gYS53YXJuaW5nc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi53YXJuaW5nc0NvdW50IC0gYS53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBRdWluYXJ5OiBub3RpY2VzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdHJldHVybiBiLm5vdGljZXNDb3VudCAtIGEubm90aWNlc0NvdW50O1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHRjYXNlICdmaWxlbmFtZS1kZXNjJzpcclxuXHRcdFx0c29ydGVkRmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRcdC8vIFByaW1hcnk6IGZpbGUgbmFtZSBaLUFcclxuXHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRjb25zdCBiRmlsZU5hbWUgPSBiLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRjb25zdCBuYW1lQ29tcGFyZSA9IGJGaWxlTmFtZS5sb2NhbGVDb21wYXJlKGFGaWxlTmFtZSk7XHJcblx0XHRcdFx0aWYgKG5hbWVDb21wYXJlICE9PSAwKSByZXR1cm4gbmFtZUNvbXBhcmU7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gU2Vjb25kYXJ5OiBwYXJlbnQgZm9sZGVyIFotQSAocm9vdCBmaWxlcyBsYXN0KVxyXG5cdFx0XHRcdGNvbnN0IGFQYXJ0cyA9IGEuZmlsZS5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdGNvbnN0IGJQYXJ0cyA9IGIuZmlsZS5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdGNvbnN0IGFQYXJlbnQgPSBhUGFydHMubGVuZ3RoID4gMSA/IChhUGFydHNbYVBhcnRzLmxlbmd0aCAtIDJdIHx8ICcnKSA6ICcnO1xyXG5cdFx0XHRcdGNvbnN0IGJQYXJlbnQgPSBiUGFydHMubGVuZ3RoID4gMSA/IChiUGFydHNbYlBhcnRzLmxlbmd0aCAtIDJdIHx8ICcnKSA6ICcnO1xyXG5cdFx0XHRcdGNvbnN0IHBhcmVudENvbXBhcmUgPSBiUGFyZW50LmxvY2FsZUNvbXBhcmUoYVBhcmVudCk7XHJcblx0XHRcdFx0aWYgKHBhcmVudENvbXBhcmUgIT09IDApIHJldHVybiBwYXJlbnRDb21wYXJlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFRlcnRpYXJ5OiBpc3N1ZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIuaXNzdWVzQ291bnQgIT09IGEuaXNzdWVzQ291bnQpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUXVhdGVybmFyeTogd2FybmluZ3MgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0aWYgKGIud2FybmluZ3NDb3VudCAhPT0gYS53YXJuaW5nc0NvdW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYi53YXJuaW5nc0NvdW50IC0gYS53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBRdWluYXJ5OiBub3RpY2VzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdHJldHVybiBiLm5vdGljZXNDb3VudCAtIGEubm90aWNlc0NvdW50O1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0YnJlYWs7XHJcblx0fVxyXG5cdFxyXG5cdHJldHVybiBzb3J0ZWRGaWxlcztcclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbnRlbnQgcGFyc2luZyB1dGlsaXRpZXMgZm9yIFNFTyBjaGVja3NcclxuICogUHJvdmlkZXMgZnVuY3Rpb25zIHRvIGNsZWFuIGFuZCBwYXJzZSBtYXJrZG93biBjb250ZW50XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgY29kZSBibG9ja3MsIGlubGluZSBjb2RlLCBhbmQgSFRNTCBjb250ZW50IGZyb20gY29udGVudFxyXG4gKiBVc2VkIHRvIGF2b2lkIGZhbHNlIHBvc2l0aXZlcyBpbiBTRU8gY2hlY2tzXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIHJhdyBtYXJrZG93biBjb250ZW50XHJcbiAqIEByZXR1cm5zIENsZWFuZWQgY29udGVudCB3aXRoIGNvZGUgYmxvY2tzIGFuZCBIVE1MIHJlbW92ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDb2RlQmxvY2tzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0cmV0dXJuIGNvbnRlbnRcclxuXHRcdC5yZXBsYWNlKC9gYGBbXFxzXFxTXSo/YGBgL2csICcnKSAvLyBSZW1vdmUgY29kZSBibG9ja3NcclxuXHRcdC5yZXBsYWNlKC9+fn5bXFxzXFxTXSo/fn5+L2csICcnKSAvLyBSZW1vdmUgY29kZSBibG9ja3Mgd2l0aCB+fn5cclxuXHRcdC5yZXBsYWNlKC9gW15gXFxuXStgL2csICcnKSAvLyBSZW1vdmUgaW5saW5lIGNvZGVcclxuXHRcdC5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzIChidXQga2VlcCB0ZXh0IGNvbnRlbnQpXHJcblx0XHQucmVwbGFjZSgvXi0tLVxcbltcXHNcXFNdKj9cXG4tLS1cXG4vLCAnJykgLy8gUmVtb3ZlIGZyb250bWF0dGVyXHJcblx0XHQucmVwbGFjZSgvOjpcXHcrXFx7W159XSpcXH0vZywgJycpOyAvLyBSZW1vdmUgT2JzaWRpYW4gY2FsbG91dC1zdHlsZSBibG9ja3MgbGlrZSA6Omxpbmt7dXJsPVwiLi4uXCJ9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW1vdmVzIEhUTUwgYXR0cmlidXRlcyBhbmQgdGFncyBjb21wbGV0ZWx5XHJcbiAqIFVzZWQgc3BlY2lmaWNhbGx5IGZvciBuYWtlZCBsaW5rIGRldGVjdGlvblxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSByYXcgbWFya2Rvd24gY29udGVudFxyXG4gKiBAcmV0dXJucyBDb250ZW50IHdpdGggYWxsIEhUTUwgcmVtb3ZlZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUh0bWxBdHRyaWJ1dGVzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0cmV0dXJuIGNvbnRlbnRcclxuXHRcdC5yZXBsYWNlKC9gYGBbXFxzXFxTXSo/YGBgL2csICcnKSAvLyBSZW1vdmUgY29kZSBibG9ja3NcclxuXHRcdC5yZXBsYWNlKC9+fn5bXFxzXFxTXSo/fn5+L2csICcnKSAvLyBSZW1vdmUgY29kZSBibG9ja3Mgd2l0aCB+fn5cclxuXHRcdC5yZXBsYWNlKC9gW15gXFxuXStgL2csICcnKSAvLyBSZW1vdmUgaW5saW5lIGNvZGVcclxuXHRcdC5yZXBsYWNlKC88W14+XSo+L2csICcnKSAvLyBSZW1vdmUgSFRNTCB0YWdzIGNvbXBsZXRlbHlcclxuXHRcdC5yZXBsYWNlKC9eLS0tXFxuW1xcc1xcU10qP1xcbi0tLVxcbi8sICcnKSAvLyBSZW1vdmUgZnJvbnRtYXR0ZXJcclxuXHRcdC5yZXBsYWNlKC86OlxcdytcXHtbXn1dKlxcfS9nLCAnJyk7IC8vIFJlbW92ZSBPYnNpZGlhbiBjYWxsb3V0LXN0eWxlIGJsb2NrcyBsaWtlIDo6bGlua3t1cmw9XCIuLi5cIn1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZpbmRzIHRoZSBsaW5lIG51bWJlciB3aGVyZSBhIHNwZWNpZmljIGltYWdlIG1hdGNoIG9jY3Vyc1xyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBjb250ZW50IHRvIHNlYXJjaCBpblxyXG4gKiBAcGFyYW0gaW1hZ2VNYXRjaCAtIFRoZSBpbWFnZSBtYXRjaCBzdHJpbmcgdG8gZmluZFxyXG4gKiBAcmV0dXJucyBMaW5lIG51bWJlciAoMS1iYXNlZCkgd2hlcmUgdGhlIG1hdGNoIG9jY3Vyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudDogc3RyaW5nLCBpbWFnZU1hdGNoOiBzdHJpbmcpOiBudW1iZXIge1xyXG5cdGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Y29uc3QgbGluZSA9IGxpbmVzW2ldO1xyXG5cdFx0aWYgKGxpbmUgJiYgbGluZS5pbmNsdWRlcyhpbWFnZU1hdGNoKSkge1xyXG5cdFx0XHRyZXR1cm4gaSArIDE7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiAxO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0cyBjb250ZXh0IGFyb3VuZCBhIHNwZWNpZmljIGxpbmUgbnVtYmVyXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbnRlbnQgdG8gZXh0cmFjdCBjb250ZXh0IGZyb21cclxuICogQHBhcmFtIGxpbmVOdW1iZXIgLSBUaGUgbGluZSBudW1iZXIgdG8gZ2V0IGNvbnRleHQgYXJvdW5kXHJcbiAqIEBwYXJhbSBjb250ZXh0TGluZXMgLSBOdW1iZXIgb2YgbGluZXMgYmVmb3JlIGFuZCBhZnRlciB0byBpbmNsdWRlXHJcbiAqIEByZXR1cm5zIENvbnRleHQgc3RyaW5nIHdpdGggc3Vycm91bmRpbmcgbGluZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50OiBzdHJpbmcsIGxpbmVOdW1iZXI6IG51bWJlciwgY29udGV4dExpbmVzOiBudW1iZXIgPSAyKTogc3RyaW5nIHtcclxuXHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cdGNvbnN0IHN0YXJ0ID0gTWF0aC5tYXgoMCwgbGluZU51bWJlciAtIDEgLSBjb250ZXh0TGluZXMpO1xyXG5cdGNvbnN0IGVuZCA9IE1hdGgubWluKGxpbmVzLmxlbmd0aCwgbGluZU51bWJlciAtIDEgKyBjb250ZXh0TGluZXMgKyAxKTtcclxuXHRyZXR1cm4gbGluZXMuc2xpY2Uoc3RhcnQsIGVuZCkuam9pbignXFxuJyk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBQb3NpdGlvbiBhbmQgbGluZSBudW1iZXIgdXRpbGl0aWVzIGZvciBTRU8gY2hlY2tzXHJcbiAqIFByb3ZpZGVzIGZ1bmN0aW9ucyB0byBmaW5kIGFuZCBuYXZpZ2F0ZSB0byBzcGVjaWZpYyBjb250ZW50IHBvc2l0aW9uc1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBGaW5kcyB0aGUgbGluZSBudW1iZXIgd2hlcmUgYSBzcGVjaWZpYyBpbWFnZSBtYXRjaCBvY2N1cnNcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY29udGVudCB0byBzZWFyY2ggaW5cclxuICogQHBhcmFtIGltYWdlTWF0Y2ggLSBUaGUgaW1hZ2UgbWF0Y2ggc3RyaW5nIHRvIGZpbmRcclxuICogQHJldHVybnMgTGluZSBudW1iZXIgKDEtYmFzZWQpIHdoZXJlIHRoZSBtYXRjaCBvY2N1cnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQ6IHN0cmluZywgaW1hZ2VNYXRjaDogc3RyaW5nKTogbnVtYmVyIHtcclxuXHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcclxuXHRcdGlmIChsaW5lICYmIGxpbmUuaW5jbHVkZXMoaW1hZ2VNYXRjaCkpIHtcclxuXHRcdFx0cmV0dXJuIGkgKyAxO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gMTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgY29udGV4dCBhcm91bmQgYSBzcGVjaWZpYyBsaW5lIG51bWJlclxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBjb250ZW50IHRvIGV4dHJhY3QgY29udGV4dCBmcm9tXHJcbiAqIEBwYXJhbSBsaW5lTnVtYmVyIC0gVGhlIGxpbmUgbnVtYmVyIHRvIGdldCBjb250ZXh0IGFyb3VuZFxyXG4gKiBAcGFyYW0gY29udGV4dExpbmVzIC0gTnVtYmVyIG9mIGxpbmVzIGJlZm9yZSBhbmQgYWZ0ZXIgdG8gaW5jbHVkZVxyXG4gKiBAcmV0dXJucyBDb250ZXh0IHN0cmluZyB3aXRoIHN1cnJvdW5kaW5nIGxpbmVzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudDogc3RyaW5nLCBsaW5lTnVtYmVyOiBudW1iZXIsIGNvbnRleHRMaW5lczogbnVtYmVyID0gMik6IHN0cmluZyB7XHJcblx0Y29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuXHRjb25zdCBzdGFydCA9IE1hdGgubWF4KDAsIGxpbmVOdW1iZXIgLSAxIC0gY29udGV4dExpbmVzKTtcclxuXHRjb25zdCBlbmQgPSBNYXRoLm1pbihsaW5lcy5sZW5ndGgsIGxpbmVOdW1iZXIgLSAxICsgY29udGV4dExpbmVzICsgMSk7XHJcblx0cmV0dXJuIGxpbmVzLnNsaWNlKHN0YXJ0LCBlbmQpLmpvaW4oJ1xcbicpO1xyXG59XHJcbiIsICIvKipcclxuICogQWx0IHRleHQgdmFsaWRhdGlvbiBmb3IgbWVkaWEgY29udGVudFxyXG4gKiBDaGVja3MgZm9yIG1pc3NpbmcgYWx0IHRleHQgaW4gbWFya2Rvd24sIHdpa2lsaW5rLCBhbmQgSFRNTCBtZWRpYSBlbGVtZW50cyAoaW1hZ2VzLCB2aWRlb3MsIGVtYmVkcywgZXRjLilcclxuICovXHJcblxyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBTRU9DaGVja1Jlc3VsdCB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgeyByZW1vdmVDb2RlQmxvY2tzIH0gZnJvbSBcIi4vdXRpbHMvY29udGVudC1wYXJzZXJcIjtcclxuaW1wb3J0IHsgZmluZExpbmVOdW1iZXJGb3JJbWFnZSwgZ2V0Q29udGV4dEFyb3VuZExpbmUgfSBmcm9tIFwiLi91dGlscy9wb3NpdGlvbi11dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBmb3IgbWlzc2luZyBhbHQgdGV4dCBpbiBtZWRpYSBjb250ZW50XHJcbiAqIFZhbGlkYXRlcyBtYXJrZG93biBtZWRpYSwgd2lraWxpbmsgbWVkaWEsIGFuZCBIVE1MIG1lZGlhIHRhZ3MgKGltYWdlcywgdmlkZW9zLCBlbWJlZHMsIGV0Yy4pXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQWx0VGV4dChjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja0FsdFRleHQpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG5cdH1cclxuXHRcclxuXHQvLyBSZW1vdmUgY29kZSBibG9ja3MgdG8gYXZvaWQgZmFsc2UgcG9zaXRpdmVzXHJcblx0Y29uc3QgY2xlYW5Db250ZW50ID0gcmVtb3ZlQ29kZUJsb2Nrcyhjb250ZW50KTtcclxuXHRcclxuXHQvLyBDaGVjayBtYXJrZG93biBtZWRpYSAhW2FsdF0oc3JjKVxyXG5cdGNvbnN0IG1hcmtkb3duSW1hZ2VzID0gY2xlYW5Db250ZW50Lm1hdGNoKC8hXFxbKFteXFxdXSopXFxdXFwoW14pXStcXCkvZyk7XHJcblx0aWYgKG1hcmtkb3duSW1hZ2VzKSB7XHJcblx0XHRjb25zdCBtaXNzaW5nQWx0VGV4dCA9IG1hcmtkb3duSW1hZ2VzLmZpbHRlcihtYXRjaCA9PiB7XHJcblx0XHRcdGNvbnN0IGFsdFRleHQgPSBtYXRjaC5tYXRjaCgvIVxcWyhbXlxcXV0qKVxcXS8pPy5bMV07XHJcblx0XHRcdHJldHVybiAhYWx0VGV4dCB8fCBhbHRUZXh0LnRyaW0oKSA9PT0gJyc7XHJcblx0XHR9KTtcclxuXHRcdGlmIChtaXNzaW5nQWx0VGV4dC5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIENyZWF0ZSBpbmRpdmlkdWFsIHJlc3VsdHMgZm9yIGVhY2ggbWlzc2luZyBhbHQgdGV4dCBtZWRpYSBlbGVtZW50XHJcblx0XHRcdG1pc3NpbmdBbHRUZXh0LmZvckVhY2goKG1hdGNoLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHBhdGhNYXRjaCA9IG1hdGNoLm1hdGNoKC8hXFxbW15cXF1dKlxcXVxcKChbXildKylcXCkvKTtcclxuXHRcdFx0XHRjb25zdCBpbWFnZVBhdGggPSBwYXRoTWF0Y2ggPyBwYXRoTWF0Y2hbMV0gOiBtYXRjaDtcclxuXHRcdFx0XHRjb25zdCBsaW5lTnVtYmVyID0gZmluZExpbmVOdW1iZXJGb3JJbWFnZShjb250ZW50LCBtYXRjaCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRtZXNzYWdlOiBgTWVkaWEgbWlzc2luZyBhbHQgdGV4dDogJHtpbWFnZVBhdGh9YCxcclxuXHRcdFx0XHRcdHN1Z2dlc3Rpb246IFwiQWRkIGRlc2NyaXB0aXZlIGFsdCB0ZXh0IGZvciBhY2Nlc3NpYmlsaXR5XCIsXHJcblx0XHRcdFx0XHRzZXZlcml0eTogJ2Vycm9yJyxcclxuXHRcdFx0XHRcdHBvc2l0aW9uOiB7XHJcblx0XHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRcdHNlYXJjaFRleHQ6IG1hdGNoLFxyXG5cdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gQ2hlY2sgd2lraWxpbmsgbWVkaWEgIVtbbWVkaWEucG5nXV1dIGFuZCAhW1ttZWRpYS5wbmd8YWx0IHRleHRdXVxyXG5cdGNvbnN0IHdpa2lsaW5rSW1hZ2VzID0gY2xlYW5Db250ZW50Lm1hdGNoKC8hXFxbXFxbKFteXFxdXSspXFxdXFxdL2cpO1xyXG5cdGlmICh3aWtpbGlua0ltYWdlcykge1xyXG5cdFx0Y29uc3QgbWlzc2luZ0FsdFRleHQgPSB3aWtpbGlua0ltYWdlcy5maWx0ZXIobWF0Y2ggPT4gIW1hdGNoLmluY2x1ZGVzKCd8JykpO1xyXG5cdFx0aWYgKG1pc3NpbmdBbHRUZXh0Lmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Ly8gQ3JlYXRlIGluZGl2aWR1YWwgcmVzdWx0cyBmb3IgZWFjaCBtaXNzaW5nIGFsdCB0ZXh0IHdpa2lsaW5rIG1lZGlhIGVsZW1lbnRcclxuXHRcdFx0bWlzc2luZ0FsdFRleHQuZm9yRWFjaCgobWF0Y2gsIGluZGV4KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgcGF0aE1hdGNoID0gbWF0Y2gubWF0Y2goLyFcXFtcXFsoW15cXF1dKylcXF1cXF0vKTtcclxuXHRcdFx0XHRjb25zdCBpbWFnZVBhdGggPSBwYXRoTWF0Y2ggPyBwYXRoTWF0Y2hbMV0gOiBtYXRjaDtcclxuXHRcdFx0XHRjb25zdCBsaW5lTnVtYmVyID0gZmluZExpbmVOdW1iZXJGb3JJbWFnZShjb250ZW50LCBtYXRjaCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRtZXNzYWdlOiBgV2lraWxpbmsgbWVkaWEgbWlzc2luZyBhbHQgdGV4dDogJHtpbWFnZVBhdGh9YCxcclxuXHRcdFx0XHRcdHN1Z2dlc3Rpb246IFwiQWRkIGFsdCB0ZXh0IHVzaW5nICFbW21lZGlhLnBuZ3xhbHQgdGV4dF1dIHN5bnRheCBvciBjb25zaWRlciB1c2luZyBzdGFuZGFyZCBtYXJrZG93biBtZWRpYSBzeW50YXhcIixcclxuXHRcdFx0XHRcdHNldmVyaXR5OiAnZXJyb3InLFxyXG5cdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0c2VhcmNoVGV4dDogbWF0Y2gsXHJcblx0XHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBDaGVjayBIVE1MIG1lZGlhIDxpbWcgYWx0PVwidGV4dFwiPlxyXG5cdGNvbnN0IGh0bWxJbWFnZXMgPSBjbGVhbkNvbnRlbnQubWF0Y2goLzxpbWdbXj5dKj4vZyk7XHJcblx0aWYgKGh0bWxJbWFnZXMpIHtcclxuXHRcdGNvbnN0IG1pc3NpbmdBbHQgPSBodG1sSW1hZ2VzLmZpbHRlcihpbWcgPT4ge1xyXG5cdFx0XHQvLyBDaGVjayBpZiBhbHQgYXR0cmlidXRlIGlzIG1pc3Npbmcgb3IgZW1wdHlcclxuXHRcdFx0Y29uc3QgYWx0TWF0Y2ggPSBpbWcubWF0Y2goL2FsdFxccyo9XFxzKltcIiddKFteXCInXSopW1wiJ10vKTtcclxuXHRcdFx0cmV0dXJuICFhbHRNYXRjaCB8fCAhYWx0TWF0Y2hbMV0gfHwgYWx0TWF0Y2hbMV0udHJpbSgpID09PSAnJztcclxuXHRcdH0pO1xyXG5cdFx0aWYgKG1pc3NpbmdBbHQubGVuZ3RoID4gMCkge1xyXG5cdFx0XHQvLyBDcmVhdGUgaW5kaXZpZHVhbCByZXN1bHRzIGZvciBlYWNoIG1pc3NpbmcgYWx0IGF0dHJpYnV0ZVxyXG5cdFx0XHRtaXNzaW5nQWx0LmZvckVhY2goKGltZywgaW5kZXgpID0+IHtcclxuXHRcdFx0XHRjb25zdCBzcmNNYXRjaCA9IGltZy5tYXRjaCgvc3JjXFxzKj1cXHMqW1wiJ10oW15cIiddKilbXCInXS8pO1xyXG5cdFx0XHRcdGNvbnN0IGltYWdlUGF0aCA9IHNyY01hdGNoID8gc3JjTWF0Y2hbMV0gOiAnSFRNTCBpbWcgdGFnJztcclxuXHRcdFx0XHRjb25zdCBsaW5lTnVtYmVyID0gZmluZExpbmVOdW1iZXJGb3JJbWFnZShjb250ZW50LCBpbWcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0bWVzc2FnZTogYEhUTUwgbWVkaWEgbWlzc2luZyBhbHQgYXR0cmlidXRlOiAke2ltYWdlUGF0aH1gLFxyXG5cdFx0XHRcdFx0c3VnZ2VzdGlvbjogXCJBZGQgYWx0IGF0dHJpYnV0ZSB0byBIVE1MIG1lZGlhIHRhZ1wiLFxyXG5cdFx0XHRcdFx0c2V2ZXJpdHk6ICdlcnJvcicsXHJcblx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBpbWcsXHJcblx0XHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgbWVkaWEgZWxlbWVudHMgYXQgYWxsXHJcblx0XHRjb25zdCBoYXNNZWRpYSA9IG1hcmtkb3duSW1hZ2VzICYmIG1hcmtkb3duSW1hZ2VzLmxlbmd0aCA+IDAgfHwgaHRtbEltYWdlcyAmJiBodG1sSW1hZ2VzLmxlbmd0aCA+IDAgfHwgd2lraWxpbmtJbWFnZXMgJiYgd2lraWxpbmtJbWFnZXMubGVuZ3RoID4gMDtcclxuXHRcdGlmIChoYXNNZWRpYSkge1xyXG5cdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0XHRtZXNzYWdlOiBcIkFsbCBtZWRpYSBlbGVtZW50cyBoYXZlIGFsdCB0ZXh0XCIsXHJcblx0XHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IFwiTm8gbWVkaWEgZWxlbWVudHMgaW4gdGhpcyBwb3N0XCIsXHJcblx0XHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIExpbmsgdmFsaWRhdGlvbiBjaGVja3NcclxuICogQ2hlY2tzIGZvciBuYWtlZCBsaW5rcywgYnJva2VuIGxpbmtzLCBhbmQgZXh0ZXJuYWwgbGluayBpc3N1ZXNcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IFNFT1NldHRpbmdzIH0gZnJvbSBcIi4uL3NldHRpbmdzXCI7XHJcbmltcG9ydCB7IFNFT0NoZWNrUmVzdWx0IH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcbmltcG9ydCB7IHJlbW92ZUh0bWxBdHRyaWJ1dGVzIH0gZnJvbSBcIi4vdXRpbHMvY29udGVudC1wYXJzZXJcIjtcclxuaW1wb3J0IHsgZmluZExpbmVOdW1iZXJGb3JJbWFnZSwgZ2V0Q29udGV4dEFyb3VuZExpbmUgfSBmcm9tIFwiLi91dGlscy9wb3NpdGlvbi11dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBmb3IgbmFrZWQgbGlua3MgKFVSTHMgd2l0aG91dCBtYXJrZG93biBsaW5rIHN5bnRheClcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tOYWtlZExpbmtzKGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja05ha2VkTGlua3MpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG5cdH1cclxuXHJcblx0Ly8gUmVtb3ZlIGNvZGUgYmxvY2tzIGFuZCBIVE1MIGNvbnRlbnQgdG8gYXZvaWQgZmFsc2UgcG9zaXRpdmVzXHJcblx0Y29uc3QgY2xlYW5Db250ZW50ID0gcmVtb3ZlSHRtbEF0dHJpYnV0ZXMoY29udGVudCk7XHJcblxyXG5cdC8vIEZpbmQgbmFrZWQgbGlua3MgKFVSTHMgd2l0aG91dCBtYXJrZG93biBsaW5rIHN5bnRheClcclxuXHQvLyBVc2UgbmVnYXRpdmUgbG9va2JlaGluZCB0byBhdm9pZCBtYXRjaGluZyBVUkxzIHdpdGhpbiBvdGhlciBVUkxzXHJcblx0Y29uc3QgbmFrZWRMaW5rcyA9IGNsZWFuQ29udGVudC5tYXRjaCgvKD88IVxcXVxcKCkoPzwhaHR0cHM/OlxcL1xcL1teXFxzKV0qXFwvKWh0dHBzPzpcXC9cXC9bXlxccyldKy9nKTtcclxuXHRpZiAobmFrZWRMaW5rcykge1xyXG5cdFx0bmFrZWRMaW5rcy5mb3JFYWNoKChsaW5rLCBpbmRleCkgPT4ge1xyXG5cdFx0XHQvLyBTa2lwIGFyY2hpdmFsIFVSTHMgYXMgdGhleSBhcmUgbWVhbnQgdG8gYmUgZGlzcGxheWVkIGFzLWlzXHJcblx0XHRcdGlmIChsaW5rLmluY2x1ZGVzKCd3ZWIuYXJjaGl2ZS5vcmcvd2ViLycpIHx8XHJcblx0XHRcdFx0bGluay5pbmNsdWRlcygnYXJjaGl2ZS50b2RheS8nKSB8fFxyXG5cdFx0XHRcdGxpbmsuaW5jbHVkZXMoJ2FyY2hpdmUuaXMvJykgfHxcclxuXHRcdFx0XHRsaW5rLmluY2x1ZGVzKCd3ZWIuYXJjaGl2ZS5vcmcvc2F2ZS8nKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y29uc3QgbGluZU51bWJlciA9IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudCwgbGluayk7XHJcblxyXG5cdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0bWVzc2FnZTogYE5ha2VkIGxpbmsgZm91bmQ6ICR7bGlua31gLFxyXG5cdFx0XHRcdHN1Z2dlc3Rpb246IFwiQ29udmVydCB0byBtYXJrZG93biBsaW5rIGZvcm1hdDogW2xpbmsgdGV4dF0odXJsKVwiLFxyXG5cdFx0XHRcdHNldmVyaXR5OiAnd2FybmluZycsXHJcblx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRzZWFyY2hUZXh0OiBsaW5rLFxyXG5cdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBuYWtlZCBsaW5rcyBmb3VuZFwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgZm9yIGJyb2tlbiBpbnRlcm5hbCBsaW5rc1xyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHBhcmFtIGFwcCAtIE9ic2lkaWFuIGFwcCBpbnN0YW5jZSAob3B0aW9uYWwpXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tCcm9rZW5MaW5rcyhjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MsIGFwcD86IEFwcCk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja0Jyb2tlbkxpbmtzKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblxyXG5cdC8vIEZpbmQgd2lraWxpbmtzIFtbbGlua11dIGFuZCBbW2xpbmt8ZGlzcGxheSB0ZXh0XV1cclxuXHQvLyBGaXJzdCBmaW5kIGFsbCB3aWtpbGlua3MgaW4gdGhlIG9yaWdpbmFsIGNvbnRlbnRcclxuXHRjb25zdCBhbGxXaWtpbGlua3MgPSBjb250ZW50Lm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vZyk7XHJcblx0aWYgKGFsbFdpa2lsaW5rcykge1xyXG5cdFx0Y29uc3QgYnJva2VuTGlua3MgPSBbXTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IHdpa2lsaW5rIG9mIGFsbFdpa2lsaW5rcykge1xyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGxpbmsgaXMgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdFx0XHRjb25zdCBsaW5rU3RhcnQgPSBjb250ZW50LmluZGV4T2Yod2lraWxpbmspO1xyXG5cdFx0XHRpZiAobGlua1N0YXJ0ID09PSAtMSkgY29udGludWU7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgbGluayBpcyBpbnNpZGUgYSBjb2RlIGJsb2NrIGJ5IGxvb2tpbmcgYXQgY29udGVudCBiZWZvcmUgaXRcclxuXHRcdFx0Y29uc3QgY29udGVudEJlZm9yZUxpbmsgPSBjb250ZW50LnN1YnN0cmluZygwLCBsaW5rU3RhcnQpO1xyXG5cdFx0XHRjb25zdCBjb2RlQmxvY2tNYXRjaGVzID0gY29udGVudEJlZm9yZUxpbmsubWF0Y2goL2BgYFtcXHNcXFNdKj9gYGB8fn5+W1xcc1xcU10qP35+fi9nKTtcclxuXHJcblx0XHRcdC8vIENvdW50IHVuY2xvc2VkIGNvZGUgYmxvY2tzXHJcblx0XHRcdGNvbnN0IG9wZW5Db2RlQmxvY2tzID0gKGNvbnRlbnRCZWZvcmVMaW5rLm1hdGNoKC9gYGAvZykgfHwgW10pLmxlbmd0aCAtIChjb2RlQmxvY2tNYXRjaGVzIHx8IFtdKS5sZW5ndGg7XHJcblx0XHRcdGNvbnN0IG9wZW5UaWxkZUJsb2NrcyA9IChjb250ZW50QmVmb3JlTGluay5tYXRjaCgvfn5+L2cpIHx8IFtdKS5sZW5ndGggLSAoY29kZUJsb2NrTWF0Y2hlcyB8fCBbXSkubGVuZ3RoO1xyXG5cclxuXHRcdFx0Ly8gU2tpcCBpZiB3ZSdyZSBpbnNpZGUgYSBjb2RlIGJsb2NrXHJcblx0XHRcdGlmIChvcGVuQ29kZUJsb2NrcyA+IDAgfHwgb3BlblRpbGRlQmxvY2tzID4gMCkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnN0IGxpbmtNYXRjaCA9IHdpa2lsaW5rLm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vKTtcclxuXHRcdFx0aWYgKCFsaW5rTWF0Y2ggfHwgIWxpbmtNYXRjaFsxXSkgY29udGludWU7XHJcblxyXG5cdFx0XHRjb25zdCBsaW5rVGV4dCA9IGxpbmtNYXRjaFsxXTtcclxuXHJcblx0XHRcdC8vIFBhcnNlIHdpa2lsaW5rOiBoYW5kbGUgYm90aCBbW3BhdGh8ZGlzcGxheV1dIGFuZCBbW3BhdGgjYW5jaG9yfGRpc3BsYXldXSBmb3JtYXRzXHJcblx0XHRcdGxldCBsaW5rUGF0aDogc3RyaW5nO1xyXG5cdFx0XHRsZXQgZGlzcGxheVRleHQ6IHN0cmluZztcclxuXHRcdFx0bGV0IGFuY2hvcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGVyZSdzIGEgZGlzcGxheSB0ZXh0IHNlcGFyYXRvclxyXG5cdFx0XHRpZiAobGlua1RleHQuaW5jbHVkZXMoJ3wnKSkge1xyXG5cdFx0XHRcdGNvbnN0IHBhcnRzID0gbGlua1RleHQuc3BsaXQoJ3wnKTtcclxuXHRcdFx0XHRjb25zdCBsaW5rUGFydCA9IHBhcnRzWzBdIHx8ICcnO1xyXG5cdFx0XHRcdGRpc3BsYXlUZXh0ID0gcGFydHNbMV0gfHwgbGlua1BhcnQ7XHJcblxyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGxpbmsgcGFydCBoYXMgYW4gYW5jaG9yXHJcblx0XHRcdFx0aWYgKGxpbmtQYXJ0LmluY2x1ZGVzKCcjJykpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGFuY2hvclBhcnRzID0gbGlua1BhcnQuc3BsaXQoJyMnKTtcclxuXHRcdFx0XHRcdGxpbmtQYXRoID0gYW5jaG9yUGFydHNbMF0gfHwgJyc7XHJcblx0XHRcdFx0XHRhbmNob3IgPSBhbmNob3JQYXJ0c1sxXSB8fCBudWxsO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRsaW5rUGF0aCA9IGxpbmtQYXJ0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBObyBkaXNwbGF5IHRleHQsIGNoZWNrIGlmIHRoZXJlJ3MgYW4gYW5jaG9yXHJcblx0XHRcdFx0aWYgKGxpbmtUZXh0LmluY2x1ZGVzKCcjJykpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGFuY2hvclBhcnRzID0gbGlua1RleHQuc3BsaXQoJyMnKTtcclxuXHRcdFx0XHRcdGxpbmtQYXRoID0gYW5jaG9yUGFydHNbMF0gfHwgJyc7XHJcblx0XHRcdFx0XHRhbmNob3IgPSBhbmNob3JQYXJ0c1sxXSB8fCBudWxsO1xyXG5cdFx0XHRcdFx0ZGlzcGxheVRleHQgPSBsaW5rUGF0aDsgLy8gVXNlIHBhdGggYXMgZGlzcGxheSB0ZXh0XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGxpbmtQYXRoID0gbGlua1RleHQ7XHJcblx0XHRcdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtUZXh0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIGxpbmtlZCBmaWxlIGV4aXN0cyB1c2luZyBPYnNpZGlhbidzIGxpbmsgcmVzb2x1dGlvblxyXG5cdFx0XHRpZiAoYXBwKSB7XHJcblx0XHRcdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgYnVpbHQtaW4gbGluayByZXNvbHV0aW9uIHRvIGNoZWNrIGlmIHRoZSBsaW5rIHdvcmtzXHJcblx0XHRcdFx0Y29uc3QgcmVzb2x2ZWRMaW5rID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua1BhdGgsIGZpbGUucGF0aCk7XHJcblxyXG5cdFx0XHRcdGlmICghcmVzb2x2ZWRMaW5rKSB7XHJcblx0XHRcdFx0XHRicm9rZW5MaW5rcy5wdXNoKHtcclxuXHRcdFx0XHRcdFx0bGluazogd2lraWxpbmssXHJcblx0XHRcdFx0XHRcdHBhdGg6IGxpbmtQYXRoLFxyXG5cdFx0XHRcdFx0XHRkaXNwbGF5VGV4dDogZGlzcGxheVRleHQsXHJcblx0XHRcdFx0XHRcdGFuY2hvcjogYW5jaG9yXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoYnJva2VuTGlua3MubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRicm9rZW5MaW5rcy5mb3JFYWNoKCh7IGxpbmssIHBhdGgsIGRpc3BsYXlUZXh0LCBhbmNob3IgfSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQsIGxpbmspO1xyXG5cclxuXHRcdFx0XHQvLyBDcmVhdGUgYSBtb3JlIGhlbHBmdWwgc3VnZ2VzdGlvbiBtZXNzYWdlXHJcblx0XHRcdFx0bGV0IHN1Z2dlc3Rpb24gPSBgQ2hlY2sgaWYgdGhlIGZpbGUgXCIke3BhdGh9Lm1kXCIgZXhpc3RzIG9yIHVwZGF0ZSB0aGUgbGlua2A7XHJcblx0XHRcdFx0aWYgKGFuY2hvcikge1xyXG5cdFx0XHRcdFx0c3VnZ2VzdGlvbiArPSBgIChhbmNob3I6ICMke2FuY2hvcn0pYDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0bWVzc2FnZTogYEJyb2tlbiBpbnRlcm5hbCBsaW5rOiAke2Rpc3BsYXlUZXh0fWAsXHJcblx0XHRcdFx0XHRzdWdnZXN0aW9uOiBzdWdnZXN0aW9uLFxyXG5cdFx0XHRcdFx0c2V2ZXJpdHk6ICdlcnJvcicsXHJcblx0XHRcdFx0XHRwb3NpdGlvbjoge1xyXG5cdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBsaW5rLFxyXG5cdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEZpbmQgbWFya2Rvd24gbGlua3MgW3RleHRdKHVybCkgLSBjaGVjayBmb3IgcmVsYXRpdmUvaW50ZXJuYWwgbGlua3MgKGV4Y2x1ZGUgaW1hZ2VzKVxyXG5cdC8vIEZpcnN0IGZpbmQgYWxsIG1hcmtkb3duIGxpbmtzIGluIHRoZSBvcmlnaW5hbCBjb250ZW50XHJcblx0Y29uc3QgYWxsTWFya2Rvd25MaW5rcyA9IGNvbnRlbnQubWF0Y2goL1xcWyhbXlxcXV0rKVxcXVxcKChbXildKylcXCkvZyk7XHJcblx0aWYgKGFsbE1hcmtkb3duTGlua3MpIHtcclxuXHRcdGZvciAoY29uc3QgbWFya2Rvd25MaW5rIG9mIGFsbE1hcmtkb3duTGlua3MpIHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBsaW5rIGlzIGluc2lkZSBhIGNvZGUgYmxvY2tcclxuXHRcdFx0Y29uc3QgbGlua1N0YXJ0ID0gY29udGVudC5pbmRleE9mKG1hcmtkb3duTGluayk7XHJcblx0XHRcdGlmIChsaW5rU3RhcnQgPT09IC0xKSBjb250aW51ZTtcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHRoZSBsaW5rIGlzIGluc2lkZSBhIGNvZGUgYmxvY2sgYnkgbG9va2luZyBhdCBjb250ZW50IGJlZm9yZSBpdFxyXG5cdFx0XHRjb25zdCBjb250ZW50QmVmb3JlTGluayA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIGxpbmtTdGFydCk7XHJcblx0XHRcdGNvbnN0IGNvZGVCbG9ja01hdGNoZXMgPSBjb250ZW50QmVmb3JlTGluay5tYXRjaCgvYGBgW1xcc1xcU10qP2BgYHx+fn5bXFxzXFxTXSo/fn5+L2cpO1xyXG5cclxuXHRcdFx0Ly8gQ291bnQgdW5jbG9zZWQgY29kZSBibG9ja3NcclxuXHRcdFx0Y29uc3Qgb3BlbkNvZGVCbG9ja3MgPSAoY29udGVudEJlZm9yZUxpbmsubWF0Y2goL2BgYC9nKSB8fCBbXSkubGVuZ3RoIC0gKGNvZGVCbG9ja01hdGNoZXMgfHwgW10pLmxlbmd0aDtcclxuXHRcdFx0Y29uc3Qgb3BlblRpbGRlQmxvY2tzID0gKGNvbnRlbnRCZWZvcmVMaW5rLm1hdGNoKC9+fn4vZykgfHwgW10pLmxlbmd0aCAtIChjb2RlQmxvY2tNYXRjaGVzIHx8IFtdKS5sZW5ndGg7XHJcblxyXG5cdFx0XHQvLyBTa2lwIGlmIHdlJ3JlIGluc2lkZSBhIGNvZGUgYmxvY2tcclxuXHRcdFx0aWYgKG9wZW5Db2RlQmxvY2tzID4gMCB8fCBvcGVuVGlsZGVCbG9ja3MgPiAwKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGxpbmtNYXRjaCA9IG1hcmtkb3duTGluay5tYXRjaCgvXFxbKFteXFxdXSspXFxdXFwoKFteKV0rKVxcKS8pO1xyXG5cdFx0XHRpZiAoIWxpbmtNYXRjaCB8fCAhbGlua01hdGNoWzFdIHx8ICFsaW5rTWF0Y2hbMl0pIGNvbnRpbnVlO1xyXG5cclxuXHRcdFx0Y29uc3QgbGlua1RleHQgPSBsaW5rTWF0Y2hbMV07XHJcblx0XHRcdGNvbnN0IGxpbmtVcmwgPSBsaW5rTWF0Y2hbMl07XHJcblxyXG5cdFx0XHQvLyBTa2lwIGltYWdlIGxpbmtzIGFuZCBsaW5rZWQgaW1hZ2VzIC0gdGhleSBzaG91bGQgbm90IGJlIGNoZWNrZWQgYXMgYnJva2VuIGxpbmtzXHJcblx0XHRcdGlmIChtYXJrZG93bkxpbmsuc3RhcnRzV2l0aCgnIVsnKSB8fCBsaW5rVGV4dC5zdGFydHNXaXRoKCchWycpKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYSByZWxhdGl2ZS9pbnRlcm5hbCBsaW5rIChub3QgZXh0ZXJuYWwpXHJcblx0XHRcdGlmICghbGlua1VybC5zdGFydHNXaXRoKCdodHRwOi8vJykgJiYgIWxpbmtVcmwuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSAmJiAhbGlua1VybC5zdGFydHNXaXRoKCdtYWlsdG86JykgJiYgIWxpbmtVcmwuc3RhcnRzV2l0aCgnIycpKSB7XHJcblx0XHRcdFx0Ly8gVGhpcyBpcyBhIHJlbGF0aXZlL2ludGVybmFsIGxpbmtcclxuXHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgZmxleGlibGUgcmVsYXRpdmUgcGF0aCBjaGVjayBpcyBlbmFibGVkIChwdWJsaXNoIG1vZGUpXHJcblx0XHRcdFx0aWYgKHNldHRpbmdzLnB1Ymxpc2hNb2RlICYmIGxpbmtVcmwuc3RhcnRzV2l0aCgnLycpKSB7XHJcblx0XHRcdFx0XHQvLyBJbiBwdWJsaXNoIG1vZGUsIGFic29sdXRlIHBhdGhzIGxpa2UgL2Fib3V0LyBhcmUgY29uc2lkZXJlZCB2YWxpZCBmb3Igc3RhdGljIHNpdGUgZ2VuZXJhdG9yc1xyXG5cdFx0XHRcdFx0Ly8gU2tpcCB0aGVzZSBsaW5rcyAtIHRoZXkgc2hvdWxkIGJlIGhhbmRsZWQgYnkgdGhlIHBvdGVudGlhbGx5IGJyb2tlbiBsaW5rcyBjaGVja1xyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoYXBwKSB7XHJcblx0XHRcdFx0XHQvLyBTdHJpcCBhbmNob3IgZnJvbSBsaW5rIFVSTCBiZWZvcmUgcmVzb2x1dGlvbiAoc2FtZSBhcyB3aWtpbGlua3MpXHJcblx0XHRcdFx0XHRsZXQgbGlua1BhdGggPSBsaW5rVXJsO1xyXG5cdFx0XHRcdFx0bGV0IGFuY2hvcjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcblxyXG5cdFx0XHRcdFx0aWYgKGxpbmtQYXRoLmluY2x1ZGVzKCcjJykpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgYW5jaG9yUGFydHMgPSBsaW5rUGF0aC5zcGxpdCgnIycpO1xyXG5cdFx0XHRcdFx0XHRsaW5rUGF0aCA9IGFuY2hvclBhcnRzWzBdIHx8ICcnO1xyXG5cdFx0XHRcdFx0XHRhbmNob3IgPSBhbmNob3JQYXJ0c1sxXSB8fCBudWxsO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIFVzZSBPYnNpZGlhbidzIGxpbmsgcmVzb2x1dGlvbiB0byBjaGVjayBpZiB0aGUgbGluayB3b3Jrc1xyXG5cdFx0XHRcdFx0Y29uc3QgcmVzb2x2ZWRMaW5rID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua1BhdGgsIGZpbGUucGF0aCk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCFyZXNvbHZlZExpbmspIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbGluZU51bWJlciA9IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudCwgbWFya2Rvd25MaW5rKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIENyZWF0ZSBhIG1vcmUgaGVscGZ1bCBzdWdnZXN0aW9uIG1lc3NhZ2UgKHNhbWUgZm9ybWF0IGFzIHdpa2lsaW5rcylcclxuXHRcdFx0XHRcdFx0bGV0IHN1Z2dlc3RlZFBhdGggPSBsaW5rUGF0aC5lbmRzV2l0aCgnLm1kJykgPyBsaW5rUGF0aCA6IGxpbmtQYXRoICsgJy5tZCc7XHJcblx0XHRcdFx0XHRcdGxldCBzdWdnZXN0aW9uID0gYENoZWNrIGlmIHRoZSBmaWxlIFwiJHtzdWdnZXN0ZWRQYXRofVwiIGV4aXN0cyBvciB1cGRhdGUgdGhlIGxpbmtgO1xyXG5cdFx0XHRcdFx0XHRpZiAoYW5jaG9yKSB7XHJcblx0XHRcdFx0XHRcdFx0c3VnZ2VzdGlvbiArPSBgIChhbmNob3I6ICMke2FuY2hvcn0pYDtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRcdG1lc3NhZ2U6IGBCcm9rZW4gaW50ZXJuYWwgbGluazogJHtsaW5rVGV4dH1gLFxyXG5cdFx0XHRcdFx0XHRcdHN1Z2dlc3Rpb246IHN1Z2dlc3Rpb24sXHJcblx0XHRcdFx0XHRcdFx0c2V2ZXJpdHk6ICdlcnJvcicsXHJcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBtYXJrZG93bkxpbmssXHJcblx0XHRcdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBicm9rZW4gaW50ZXJuYWwgbGlua3MgZm91bmRcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGZvciBwb3RlbnRpYWxseSBicm9rZW4gbGlua3MgKGxpbmtzIHRoYXQgbWlnaHQgYmUgYnJva2VuKVxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHBhcmFtIGFwcCAtIE9ic2lkaWFuIGFwcCBpbnN0YW5jZSAob3B0aW9uYWwpXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzKGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncywgYXBwPzogQXBwKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cclxuXHQvLyBPbmx5IHJ1biB0aGlzIGNoZWNrIGluIHB1Ymxpc2ggbW9kZSAoZmxleGlibGUgcmVsYXRpdmUgbGlua3MpLCBhbmQgd2hlbiBlbmFibGVkXHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MgfHwgIXNldHRpbmdzLnB1Ymxpc2hNb2RlKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblxyXG5cdC8vIEZpcnN0LCBnZXQgdGhlIGxpc3Qgb2YgZGVmaW5pdGVseSBicm9rZW4gbGlua3MgdG8gYXZvaWQgZHVwbGljYXRlc1xyXG5cdGNvbnN0IGJyb2tlbkxpbmtzUmVzdWx0cyA9IGF3YWl0IGNoZWNrQnJva2VuTGlua3MoY29udGVudCwgZmlsZSwgc2V0dGluZ3MsIGFwcCk7XHJcblx0Y29uc3QgZGVmaW5pdGVseUJyb2tlbkxpbmtzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblxyXG5cdGJyb2tlbkxpbmtzUmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XHJcblx0XHRpZiAoIXJlc3VsdC5wYXNzZWQgJiYgcmVzdWx0LnBvc2l0aW9uPy5zZWFyY2hUZXh0KSB7XHJcblx0XHRcdGRlZmluaXRlbHlCcm9rZW5MaW5rcy5hZGQocmVzdWx0LnBvc2l0aW9uLnNlYXJjaFRleHQpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQvLyBGaW5kIG1hcmtkb3duIGxpbmtzIHRoYXQgbWlnaHQgYmUgZmxleGlibGUgcmVsYXRpdmUgbGlua3MgKGV4Y2x1ZGUgaW1hZ2VzIGFuZCBsaW5rZWQgaW1hZ2VzKVxyXG5cdC8vIFVzZSBhIG1hbnVhbCBhcHByb2FjaCB0byBwcm9wZXJseSBoYW5kbGUgbmVzdGVkIGJyYWNrZXRzXHJcblx0bGV0IHBvcyA9IDA7XHJcblx0d2hpbGUgKHBvcyA8IGNvbnRlbnQubGVuZ3RoKSB7XHJcblx0XHQvLyBGaW5kIHRoZSBuZXh0IG9wZW5pbmcgYnJhY2tldFxyXG5cdFx0Y29uc3Qgb3BlbkJyYWNrZXQgPSBjb250ZW50LmluZGV4T2YoJ1snLCBwb3MpO1xyXG5cdFx0aWYgKG9wZW5CcmFja2V0ID09PSAtMSkgYnJlYWs7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyBpbnNpZGUgYSBjb2RlIGJsb2NrXHJcblx0XHRjb25zdCBjb250ZW50QmVmb3JlQnJhY2tldCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIG9wZW5CcmFja2V0KTtcclxuXHRcdGNvbnN0IGNvZGVCbG9ja01hdGNoZXMgPSBjb250ZW50QmVmb3JlQnJhY2tldC5tYXRjaCgvYGBgW1xcc1xcU10qP2BgYHx+fn5bXFxzXFxTXSo/fn5+L2cpO1xyXG5cdFx0Y29uc3Qgb3BlbkNvZGVCbG9ja3MgPSAoY29udGVudEJlZm9yZUJyYWNrZXQubWF0Y2goL2BgYC9nKSB8fCBbXSkubGVuZ3RoIC0gKGNvZGVCbG9ja01hdGNoZXMgfHwgW10pLmxlbmd0aDtcclxuXHRcdGNvbnN0IG9wZW5UaWxkZUJsb2NrcyA9IChjb250ZW50QmVmb3JlQnJhY2tldC5tYXRjaCgvfn5+L2cpIHx8IFtdKS5sZW5ndGggLSAoY29kZUJsb2NrTWF0Y2hlcyB8fCBbXSkubGVuZ3RoO1xyXG5cclxuXHRcdC8vIFNraXAgaWYgd2UncmUgaW5zaWRlIGEgY29kZSBibG9ja1xyXG5cdFx0aWYgKG9wZW5Db2RlQmxvY2tzID4gMCB8fCBvcGVuVGlsZGVCbG9ja3MgPiAwKSB7XHJcblx0XHRcdHBvcyA9IG9wZW5CcmFja2V0ICsgMTtcclxuXHRcdFx0Y29udGludWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRmluZCB0aGUgbWF0Y2hpbmcgY2xvc2luZyBicmFja2V0XHJcblx0XHRsZXQgYnJhY2tldENvdW50ID0gMTtcclxuXHRcdGxldCBjbG9zZUJyYWNrZXQgPSBvcGVuQnJhY2tldCArIDE7XHJcblx0XHR3aGlsZSAoY2xvc2VCcmFja2V0IDwgY29udGVudC5sZW5ndGggJiYgYnJhY2tldENvdW50ID4gMCkge1xyXG5cdFx0XHRpZiAoY29udGVudFtjbG9zZUJyYWNrZXRdID09PSAnWycpIHtcclxuXHRcdFx0XHRicmFja2V0Q291bnQrKztcclxuXHRcdFx0fSBlbHNlIGlmIChjb250ZW50W2Nsb3NlQnJhY2tldF0gPT09ICddJykge1xyXG5cdFx0XHRcdGJyYWNrZXRDb3VudC0tO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNsb3NlQnJhY2tldCsrO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChicmFja2V0Q291bnQgPiAwKSB7XHJcblx0XHRcdC8vIE5vIG1hdGNoaW5nIGNsb3NpbmcgYnJhY2tldCBmb3VuZFxyXG5cdFx0XHRwb3MgPSBvcGVuQnJhY2tldCArIDE7XHJcblx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBVUkwgcGFydCBhZnRlciB0aGUgY2xvc2luZyBicmFja2V0XHJcblx0XHRpZiAoY2xvc2VCcmFja2V0IDwgY29udGVudC5sZW5ndGggJiYgY29udGVudFtjbG9zZUJyYWNrZXRdID09PSAnKCcpIHtcclxuXHRcdFx0Ly8gRmluZCB0aGUgbWF0Y2hpbmcgY2xvc2luZyBwYXJlbnRoZXNpc1xyXG5cdFx0XHRsZXQgcGFyZW5Db3VudCA9IDE7XHJcblx0XHRcdGxldCBjbG9zZVBhcmVuID0gY2xvc2VCcmFja2V0ICsgMTtcclxuXHRcdFx0d2hpbGUgKGNsb3NlUGFyZW4gPCBjb250ZW50Lmxlbmd0aCAmJiBwYXJlbkNvdW50ID4gMCkge1xyXG5cdFx0XHRcdGlmIChjb250ZW50W2Nsb3NlUGFyZW5dID09PSAnKCcpIHtcclxuXHRcdFx0XHRcdHBhcmVuQ291bnQrKztcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGNvbnRlbnRbY2xvc2VQYXJlbl0gPT09ICcpJykge1xyXG5cdFx0XHRcdFx0cGFyZW5Db3VudC0tO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjbG9zZVBhcmVuKys7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChwYXJlbkNvdW50ID09PSAwKSB7XHJcblx0XHRcdFx0Ly8gV2UgZm91bmQgYSBjb21wbGV0ZSBtYXJrZG93biBsaW5rXHJcblx0XHRcdFx0Y29uc3QgbGlua1RleHQgPSBjb250ZW50LnN1YnN0cmluZyhvcGVuQnJhY2tldCArIDEsIGNsb3NlQnJhY2tldCAtIDEpO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtVcmwgPSBjb250ZW50LnN1YnN0cmluZyhjbG9zZUJyYWNrZXQgKyAxLCBjbG9zZVBhcmVuIC0gMSk7XHJcblx0XHRcdFx0Y29uc3QgZnVsbExpbmsgPSBjb250ZW50LnN1YnN0cmluZyhvcGVuQnJhY2tldCwgY2xvc2VQYXJlbik7XHJcblxyXG5cdFx0XHRcdC8vIFNraXAgaWYgdGhpcyBpcyBhIGxpbmtlZCBpbWFnZSAobGluayB0ZXh0IHN0YXJ0cyB3aXRoICFbKVxyXG5cdFx0XHRcdC8vIExpbmtlZCBpbWFnZXMgc2hvdWxkIGJlIGhhbmRsZWQgYnkgZXh0ZXJuYWwgbGluayBjaGVja3MsIG5vdCBwb3RlbnRpYWxseSBicm9rZW4gbGluayBjaGVja3NcclxuXHRcdFx0XHRpZiAobGlua1RleHQuc3RhcnRzV2l0aCgnIVsnKSkge1xyXG5cdFx0XHRcdFx0cG9zID0gY2xvc2VQYXJlbjtcclxuXHRcdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgaXQncyBhIGZsZXhpYmxlIHJlbGF0aXZlIGxpbmsgKHB1Ymxpc2ggbW9kZSlcclxuXHRcdFx0XHQvLyBPbmx5IGNoZWNrIGZvciByZWxhdGl2ZSBwYXRocywgbm90IGV4dGVybmFsIFVSTHNcclxuXHRcdFx0XHRpZiAoc2V0dGluZ3MucHVibGlzaE1vZGUgJiYgbGlua1VybC5zdGFydHNXaXRoKCcvJykgJiYgIWxpbmtVcmwuc3RhcnRzV2l0aCgnaHR0cDovLycpICYmICFsaW5rVXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQsIGZ1bGxMaW5rKTtcclxuXHRcdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0bWVzc2FnZTogYFJlbGF0aXZlIHBhdGggbGluazogJHtsaW5rVGV4dH1gLFxyXG5cdFx0XHRcdFx0XHRzdWdnZXN0aW9uOiBcIlRoaXMgbGluayBtYXkgYmUgdmFsaWQgZm9yIHN0YXRpYyBzaXRlIGdlbmVyYXRvcnMgYnV0IG1heSBub3Qgd29yayBpbiBPYnNpZGlhblwiLFxyXG5cdFx0XHRcdFx0XHRzZXZlcml0eTogJ25vdGljZScsXHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiB7XHJcblx0XHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBmdWxsTGluayxcclxuXHRcdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHBvcyA9IGNsb3NlUGFyZW47XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cG9zID0gY2xvc2VCcmFja2V0O1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwb3MgPSBjbG9zZUJyYWNrZXQ7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBGaW5kIHdpa2lsaW5rcyB0aGF0IG1pZ2h0IGJlIGJyb2tlblxyXG5cdC8vIEZpcnN0IGZpbmQgYWxsIHdpa2lsaW5rcyBpbiB0aGUgb3JpZ2luYWwgY29udGVudFxyXG5cdGNvbnN0IGFsbFdpa2lsaW5rcyA9IGNvbnRlbnQubWF0Y2goL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS9nKTtcclxuXHRpZiAoYWxsV2lraWxpbmtzKSB7XHJcblx0XHRjb25zdCBwb3RlbnRpYWxseUJyb2tlbiA9IFtdO1xyXG5cclxuXHRcdGZvciAoY29uc3Qgd2lraWxpbmsgb2YgYWxsV2lraWxpbmtzKSB7XHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgbGluayBpcyBpbnNpZGUgYSBjb2RlIGJsb2NrXHJcblx0XHRcdGNvbnN0IGxpbmtTdGFydCA9IGNvbnRlbnQuaW5kZXhPZih3aWtpbGluayk7XHJcblx0XHRcdGlmIChsaW5rU3RhcnQgPT09IC0xKSBjb250aW51ZTtcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHRoZSBsaW5rIGlzIGluc2lkZSBhIGNvZGUgYmxvY2sgYnkgbG9va2luZyBhdCBjb250ZW50IGJlZm9yZSBpdFxyXG5cdFx0XHRjb25zdCBjb250ZW50QmVmb3JlTGluayA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIGxpbmtTdGFydCk7XHJcblx0XHRcdGNvbnN0IGNvZGVCbG9ja01hdGNoZXMgPSBjb250ZW50QmVmb3JlTGluay5tYXRjaCgvYGBgW1xcc1xcU10qP2BgYHx+fn5bXFxzXFxTXSo/fn5+L2cpO1xyXG5cclxuXHRcdFx0Ly8gQ291bnQgdW5jbG9zZWQgY29kZSBibG9ja3NcclxuXHRcdFx0Y29uc3Qgb3BlbkNvZGVCbG9ja3MgPSAoY29udGVudEJlZm9yZUxpbmsubWF0Y2goL2BgYC9nKSB8fCBbXSkubGVuZ3RoIC0gKGNvZGVCbG9ja01hdGNoZXMgfHwgW10pLmxlbmd0aDtcclxuXHRcdFx0Y29uc3Qgb3BlblRpbGRlQmxvY2tzID0gKGNvbnRlbnRCZWZvcmVMaW5rLm1hdGNoKC9+fn4vZykgfHwgW10pLmxlbmd0aCAtIChjb2RlQmxvY2tNYXRjaGVzIHx8IFtdKS5sZW5ndGg7XHJcblxyXG5cdFx0XHQvLyBTa2lwIGlmIHdlJ3JlIGluc2lkZSBhIGNvZGUgYmxvY2tcclxuXHRcdFx0aWYgKG9wZW5Db2RlQmxvY2tzID4gMCB8fCBvcGVuVGlsZGVCbG9ja3MgPiAwKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGxpbmtNYXRjaCA9IHdpa2lsaW5rLm1hdGNoKC9cXFtcXFsoW15cXF1dKylcXF1cXF0vKTtcclxuXHRcdFx0aWYgKCFsaW5rTWF0Y2ggfHwgIWxpbmtNYXRjaFsxXSkgY29udGludWU7XHJcblxyXG5cdFx0XHQvLyBTa2lwIGlmIHRoaXMgbGluayBpcyBhbHJlYWR5IGZsYWdnZWQgYXMgZGVmaW5pdGVseSBicm9rZW5cclxuXHRcdFx0aWYgKGRlZmluaXRlbHlCcm9rZW5MaW5rcy5oYXMod2lraWxpbmspKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IGxpbmtUZXh0ID0gbGlua01hdGNoWzFdO1xyXG5cclxuXHRcdFx0Ly8gUGFyc2Ugd2lraWxpbms6IGhhbmRsZSBib3RoIFtbcGF0aHxkaXNwbGF5XV0gYW5kIFtbcGF0aCNhbmNob3J8ZGlzcGxheV1dIGZvcm1hdHNcclxuXHRcdFx0bGV0IGxpbmtQYXRoOiBzdHJpbmc7XHJcblx0XHRcdGxldCBkaXNwbGF5VGV4dDogc3RyaW5nO1xyXG5cdFx0XHRsZXQgYW5jaG9yOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBkaXNwbGF5IHRleHQgc2VwYXJhdG9yXHJcblx0XHRcdGlmIChsaW5rVGV4dC5pbmNsdWRlcygnfCcpKSB7XHJcblx0XHRcdFx0Y29uc3QgcGFydHMgPSBsaW5rVGV4dC5zcGxpdCgnfCcpO1xyXG5cdFx0XHRcdGNvbnN0IGxpbmtQYXJ0ID0gcGFydHNbMF0gfHwgJyc7XHJcblx0XHRcdFx0ZGlzcGxheVRleHQgPSBwYXJ0c1sxXSB8fCBsaW5rUGFydDtcclxuXHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgbGluayBwYXJ0IGhhcyBhbiBhbmNob3JcclxuXHRcdFx0XHRpZiAobGlua1BhcnQuaW5jbHVkZXMoJyMnKSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgYW5jaG9yUGFydHMgPSBsaW5rUGFydC5zcGxpdCgnIycpO1xyXG5cdFx0XHRcdFx0bGlua1BhdGggPSBhbmNob3JQYXJ0c1swXSB8fCAnJztcclxuXHRcdFx0XHRcdGFuY2hvciA9IGFuY2hvclBhcnRzWzFdIHx8IG51bGw7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGxpbmtQYXRoID0gbGlua1BhcnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIE5vIGRpc3BsYXkgdGV4dCwgY2hlY2sgaWYgdGhlcmUncyBhbiBhbmNob3JcclxuXHRcdFx0XHRpZiAobGlua1RleHQuaW5jbHVkZXMoJyMnKSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgYW5jaG9yUGFydHMgPSBsaW5rVGV4dC5zcGxpdCgnIycpO1xyXG5cdFx0XHRcdFx0bGlua1BhdGggPSBhbmNob3JQYXJ0c1swXSB8fCAnJztcclxuXHRcdFx0XHRcdGFuY2hvciA9IGFuY2hvclBhcnRzWzFdIHx8IG51bGw7XHJcblx0XHRcdFx0XHRkaXNwbGF5VGV4dCA9IGxpbmtQYXRoOyAvLyBVc2UgcGF0aCBhcyBkaXNwbGF5IHRleHRcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bGlua1BhdGggPSBsaW5rVGV4dDtcclxuXHRcdFx0XHRcdGRpc3BsYXlUZXh0ID0gbGlua1RleHQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDaGVjayBmb3IgY29tbW9uIGlzc3VlcyB0aGF0IG1pZ2h0IGluZGljYXRlIGJyb2tlbiBsaW5rc1xyXG5cdFx0XHRpZiAoYXBwICYmIGxpbmtQYXRoKSB7XHJcblx0XHRcdFx0Ly8gVXNlIE9ic2lkaWFuJ3MgbGluayByZXNvbHV0aW9uIHRvIGNoZWNrIGlmIHRoZSBsaW5rIHdvcmtzXHJcblx0XHRcdFx0Y29uc3QgcmVzb2x2ZWRMaW5rID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua1BhdGgsIGZpbGUucGF0aCk7XHJcblxyXG5cdFx0XHRcdGlmICghcmVzb2x2ZWRMaW5rKSB7XHJcblx0XHRcdFx0XHQvLyBGaWxlIGRvZXNuJ3QgZXhpc3QsIGNoZWNrIGlmIHRoZXJlJ3MgYSBzaW1pbGFyIGZpbGUgKGNhc2Ugc2Vuc2l0aXZpdHksIHNwYWNlcywgZXRjLilcclxuXHRcdFx0XHRcdGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuXHRcdFx0XHRcdGNvbnN0IHNpbWlsYXJGaWxlcyA9IGFsbEZpbGVzLmZpbHRlcigoZjogVEZpbGUpID0+XHJcblx0XHRcdFx0XHRcdGYucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxpbmtQYXRoLnRvTG93ZXJDYXNlKCkpIHx8XHJcblx0XHRcdFx0XHRcdGYuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsaW5rUGF0aC50b0xvd2VyQ2FzZSgpKVxyXG5cdFx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0XHRpZiAoc2ltaWxhckZpbGVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdFx0cG90ZW50aWFsbHlCcm9rZW4ucHVzaCh7XHJcblx0XHRcdFx0XHRcdFx0bGluazogd2lraWxpbmssXHJcblx0XHRcdFx0XHRcdFx0cGF0aDogbGlua1BhdGgsXHJcblx0XHRcdFx0XHRcdFx0ZGlzcGxheVRleHQ6IGRpc3BsYXlUZXh0LFxyXG5cdFx0XHRcdFx0XHRcdGFuY2hvcjogYW5jaG9yLFxyXG5cdFx0XHRcdFx0XHRcdHN1Z2dlc3Rpb25zOiBzaW1pbGFyRmlsZXMubWFwKChmOiBURmlsZSkgPT4gZi5wYXRoKVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAocG90ZW50aWFsbHlCcm9rZW4ubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRwb3RlbnRpYWxseUJyb2tlbi5mb3JFYWNoKCh7IGxpbmssIHBhdGgsIGRpc3BsYXlUZXh0LCBzdWdnZXN0aW9ucyB9KSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbGluZU51bWJlciA9IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UoY29udGVudCwgbGluayk7XHJcblxyXG5cdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0bWVzc2FnZTogYFBvdGVudGlhbGx5IGJyb2tlbiBsaW5rOiAke2Rpc3BsYXlUZXh0fWAsXHJcblx0XHRcdFx0XHRzdWdnZXN0aW9uOiBgQ29uc2lkZXIgdGhlc2Ugc2ltaWxhciBmaWxlczogJHtzdWdnZXN0aW9ucy5zbGljZSgwLCAzKS5qb2luKCcsICcpfWAsXHJcblx0XHRcdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnLFxyXG5cdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0c2VhcmNoVGV4dDogbGluayxcclxuXHRcdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBwb3RlbnRpYWxseSBicm9rZW4gbGlua3MgZm91bmRcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGZvciBwb3RlbnRpYWxseSBicm9rZW4gZW1iZWRzXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUG90ZW50aWFsbHlCcm9rZW5FbWJlZHMoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Ly8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBlbWJlZCBjaGVjayBsb2dpYyBpZiBuZWVkZWRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxufVxyXG4iLCAiLyoqXG4gKiBFeHRlcm5hbCBsaW5rIHZhbGlkYXRpb24gY2hlY2tzXG4gKiBDaGVja3MgZm9yIGV4dGVybmFsIGxpbmtzIGFuZCBicm9rZW4gZXh0ZXJuYWwgbGlua3Mgd2l0aCBuZXR3b3JrIHJlcXVlc3RzXG4gKi9cblxuaW1wb3J0IHsgVEZpbGUsIHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFNFT1NldHRpbmdzIH0gZnJvbSBcIi4uL3NldHRpbmdzXCI7XG5pbXBvcnQgeyBTRU9DaGVja1Jlc3VsdCB9IGZyb20gXCIuLi90eXBlc1wiO1xuaW1wb3J0IHsgZmluZExpbmVOdW1iZXJGb3JJbWFnZSwgZ2V0Q29udGV4dEFyb3VuZExpbmUgfSBmcm9tIFwiLi91dGlscy9wb3NpdGlvbi11dGlsc1wiO1xuaW1wb3J0IHsgcmVtb3ZlQ29kZUJsb2NrcyB9IGZyb20gXCIuL3V0aWxzL2NvbnRlbnQtcGFyc2VyXCI7XG5cbi8qKlxuICogVmFsaWRhdGVzIGlmIGEgVVJMIGlzIHByb3Blcmx5IGZvcm1hdHRlZCBhbmQgbm90IGVtYmVkZGVkIGluIEhUTUwgZW50aXRpZXNcbiAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIHRvIHZhbGlkYXRlXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBVUkwgaXMgdmFsaWQgYW5kIHNob3VsZCBiZSBjaGVja2VkXG4gKi9cbmZ1bmN0aW9uIGlzVmFsaWRVcmwodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcblx0Ly8gQ2hlY2sgaWYgVVJMIGNvbnRhaW5zIEhUTUwgZW50aXRpZXMgb3IgbWFsZm9ybWVkIGNoYXJhY3RlcnNcblx0aWYgKHVybC5pbmNsdWRlcygnJmd0OycpIHx8IHVybC5pbmNsdWRlcygnJmx0OycpIHx8IHVybC5pbmNsdWRlcygnJmFtcDsnKSB8fFxuXHRcdHVybC5pbmNsdWRlcygnJnF1b3Q7JykgfHwgdXJsLmluY2x1ZGVzKCcmYXBvczsnKSB8fCB1cmwuaW5jbHVkZXMoJyZuYnNwOycpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgVVJMIGNvbnRhaW5zIEhUTUwgdGFncyBvciBtYWxmb3JtZWQgSFRNTFxuXHRpZiAodXJsLmluY2x1ZGVzKCc8JykgfHwgdXJsLmluY2x1ZGVzKCc+JykgfHwgdXJsLmluY2x1ZGVzKCdcIicpIHx8IHVybC5pbmNsdWRlcyhcIidcIikpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBDaGVjayBpZiBVUkwgZW5kcyB3aXRoIEhUTUwtbGlrZSBmcmFnbWVudHNcblx0aWYgKHVybC5lbmRzV2l0aCgnJmd0OycpIHx8IHVybC5lbmRzV2l0aCgnJmx0OycpIHx8IHVybC5lbmRzV2l0aCgnJmFtcDsnKSB8fFxuXHRcdHVybC5lbmRzV2l0aCgnJnF1b3Q7JykgfHwgdXJsLmVuZHNXaXRoKCcmYXBvczsnKSB8fCB1cmwuZW5kc1dpdGgoJyZuYnNwOycpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgVVJMIGNvbnRhaW5zIHN1c3BpY2lvdXMgcGF0dGVybnMgdGhhdCBpbmRpY2F0ZSBIVE1MIGZyYWdtZW50c1xuXHRpZiAodXJsLmluY2x1ZGVzKCcvYSZndDsnKSB8fCB1cmwuaW5jbHVkZXMoJy9wJmd0OycpIHx8IHVybC5pbmNsdWRlcygnL2RpdiZndDsnKSB8fFxuXHRcdHVybC5pbmNsdWRlcygnL3NwYW4mZ3Q7JykgfHwgdXJsLmluY2x1ZGVzKCcvaW1nJmd0OycpIHx8IHVybC5pbmNsdWRlcygnL3NjcmlwdCZndDsnKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vIEJhc2ljIFVSTCBmb3JtYXQgdmFsaWRhdGlvblxuXHR0cnkge1xuXHRcdGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKTtcblx0XHQvLyBFbnN1cmUgaXQncyBodHRwIG9yIGh0dHBzXG5cdFx0aWYgKHVybE9iai5wcm90b2NvbCAhPT0gJ2h0dHA6JyAmJiB1cmxPYmoucHJvdG9jb2wgIT09ICdodHRwczonKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdC8vIEVuc3VyZSBob3N0bmFtZSBpcyBub3QgZW1wdHlcblx0XHRpZiAoIXVybE9iai5ob3N0bmFtZSB8fCB1cmxPYmouaG9zdG5hbWUubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdC8vIEVuc3VyZSBob3N0bmFtZSBkb2Vzbid0IGNvbnRhaW4gc3VzcGljaW91cyBjaGFyYWN0ZXJzXG5cdFx0aWYgKHVybE9iai5ob3N0bmFtZS5pbmNsdWRlcygnPCcpIHx8IHVybE9iai5ob3N0bmFtZS5pbmNsdWRlcygnPicpIHx8XG5cdFx0XHR1cmxPYmouaG9zdG5hbWUuaW5jbHVkZXMoJ1wiJykgfHwgdXJsT2JqLmhvc3RuYW1lLmluY2x1ZGVzKFwiJ1wiKSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbi8qKlxuICogRXh0cmFjdHMgYW5kIHZhbGlkYXRlcyBleHRlcm5hbCBsaW5rcyBmcm9tIGNvbnRlbnRcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbnRlbnQgdG8gZXh0cmFjdCBsaW5rcyBmcm9tXG4gKiBAcmV0dXJucyBBcnJheSBvZiB2YWxpZCBleHRlcm5hbCBVUkxzXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RWYWxpZEV4dGVybmFsTGlua3MoY29udGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuXHQvLyBVc2UgdGhlIGNvbnRlbnQgcGFyc2VyIHRvIHJlbW92ZSBjb2RlIGJsb2NrcywgSFRNTCwgYW5kIG90aGVyIG5vbi1jb250ZW50XG5cdGNvbnN0IGNsZWFuQ29udGVudCA9IHJlbW92ZUNvZGVCbG9ja3MoY29udGVudCk7XG5cblx0Y29uc3QgZXh0ZXJuYWxMaW5rczogc3RyaW5nW10gPSBbXTtcblxuXHQvLyBGaW5kIG1hcmtkb3duIGxpbmtzIHdpdGggaHR0cC9odHRwcyBVUkxzIHVzaW5nIG1hbnVhbCBwYXJzaW5nIHRvIGhhbmRsZSBuZXN0ZWQgYnJhY2tldHNcblx0bGV0IHBvcyA9IDA7XG5cdHdoaWxlIChwb3MgPCBjbGVhbkNvbnRlbnQubGVuZ3RoKSB7XG5cdFx0Ly8gRmluZCB0aGUgbmV4dCBvcGVuaW5nIGJyYWNrZXRcblx0XHRjb25zdCBvcGVuQnJhY2tldCA9IGNsZWFuQ29udGVudC5pbmRleE9mKCdbJywgcG9zKTtcblx0XHRpZiAob3BlbkJyYWNrZXQgPT09IC0xKSBicmVhaztcblxuXHRcdC8vIEZpbmQgdGhlIG1hdGNoaW5nIGNsb3NpbmcgYnJhY2tldFxuXHRcdGxldCBicmFja2V0Q291bnQgPSAxO1xuXHRcdGxldCBjbG9zZUJyYWNrZXQgPSBvcGVuQnJhY2tldCArIDE7XG5cdFx0d2hpbGUgKGNsb3NlQnJhY2tldCA8IGNsZWFuQ29udGVudC5sZW5ndGggJiYgYnJhY2tldENvdW50ID4gMCkge1xuXHRcdFx0aWYgKGNsZWFuQ29udGVudFtjbG9zZUJyYWNrZXRdID09PSAnWycpIHtcblx0XHRcdFx0YnJhY2tldENvdW50Kys7XG5cdFx0XHR9IGVsc2UgaWYgKGNsZWFuQ29udGVudFtjbG9zZUJyYWNrZXRdID09PSAnXScpIHtcblx0XHRcdFx0YnJhY2tldENvdW50LS07XG5cdFx0XHR9XG5cdFx0XHRjbG9zZUJyYWNrZXQrKztcblx0XHR9XG5cblx0XHRpZiAoYnJhY2tldENvdW50ID4gMCkge1xuXHRcdFx0Ly8gTm8gbWF0Y2hpbmcgY2xvc2luZyBicmFja2V0IGZvdW5kXG5cdFx0XHRwb3MgPSBvcGVuQnJhY2tldCArIDE7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiB0aGVyZSdzIGEgVVJMIHBhcnQgYWZ0ZXIgdGhlIGNsb3NpbmcgYnJhY2tldFxuXHRcdGlmIChjbG9zZUJyYWNrZXQgPCBjbGVhbkNvbnRlbnQubGVuZ3RoICYmIGNsZWFuQ29udGVudFtjbG9zZUJyYWNrZXRdID09PSAnKCcpIHtcblx0XHRcdC8vIEZpbmQgdGhlIG1hdGNoaW5nIGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdGxldCBwYXJlbkNvdW50ID0gMTtcblx0XHRcdGxldCBjbG9zZVBhcmVuID0gY2xvc2VCcmFja2V0ICsgMTtcblx0XHRcdHdoaWxlIChjbG9zZVBhcmVuIDwgY2xlYW5Db250ZW50Lmxlbmd0aCAmJiBwYXJlbkNvdW50ID4gMCkge1xuXHRcdFx0XHRpZiAoY2xlYW5Db250ZW50W2Nsb3NlUGFyZW5dID09PSAnKCcpIHtcblx0XHRcdFx0XHRwYXJlbkNvdW50Kys7XG5cdFx0XHRcdH0gZWxzZSBpZiAoY2xlYW5Db250ZW50W2Nsb3NlUGFyZW5dID09PSAnKScpIHtcblx0XHRcdFx0XHRwYXJlbkNvdW50LS07XG5cdFx0XHRcdH1cblx0XHRcdFx0Y2xvc2VQYXJlbisrO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAocGFyZW5Db3VudCA9PT0gMCkge1xuXHRcdFx0XHQvLyBXZSBmb3VuZCBhIGNvbXBsZXRlIG1hcmtkb3duIGxpbmtcblx0XHRcdFx0Y29uc3QgbGlua1VybCA9IGNsZWFuQ29udGVudC5zdWJzdHJpbmcoY2xvc2VCcmFja2V0ICsgMSwgY2xvc2VQYXJlbiAtIDEpO1xuXG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYW4gZXh0ZXJuYWwgVVJMXG5cdFx0XHRcdGlmIChsaW5rVXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSB8fCBsaW5rVXJsLnN0YXJ0c1dpdGgoJ2h0dHBzOi8vJykpIHtcblx0XHRcdFx0XHRpZiAoaXNWYWxpZFVybChsaW5rVXJsKSkge1xuXHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rcy5wdXNoKGxpbmtVcmwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHBvcyA9IGNsb3NlUGFyZW47XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwb3MgPSBjbG9zZUJyYWNrZXQ7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBvcyA9IGNsb3NlQnJhY2tldDtcblx0XHR9XG5cdH1cblxuXHQvLyBGaW5kIG5ha2VkIFVSTHMgd2l0aCBpbXByb3ZlZCByZWdleCBhbmQgdmFsaWRhdGlvblxuXHRjb25zdCBuYWtlZFVybHMgPSBjbGVhbkNvbnRlbnQubWF0Y2goL2h0dHBzPzpcXC9cXC9bXlxccylcXF1dKy9nKTtcblx0aWYgKG5ha2VkVXJscykge1xuXHRcdC8vIEdldCBhbGwgbWFya2Rvd24gbGluayBVUkxzIHRvIGV4Y2x1ZGUgdGhlbSBmcm9tIG5ha2VkIFVSTHNcblx0XHRjb25zdCBtYXJrZG93bkxpbmtVcmxzID0gbmV3IFNldDxzdHJpbmc+KGV4dGVybmFsTGlua3MpO1xuXG5cdFx0bmFrZWRVcmxzLmZvckVhY2godXJsID0+IHtcblx0XHRcdC8vIFNraXAgaWYgVVJMIGlzIGFscmVhZHkgaW4gYSBtYXJrZG93biBsaW5rXG5cdFx0XHRpZiAobWFya2Rvd25MaW5rVXJscy5oYXModXJsKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNraXAgYXJjaGl2YWwgVVJMcyBhcyB0aGV5IGFyZSBtZWFudCB0byBiZSBkaXNwbGF5ZWQgYXMtaXNcblx0XHRcdGlmICh1cmwuaW5jbHVkZXMoJ3dlYi5hcmNoaXZlLm9yZy93ZWIvJykgfHxcblx0XHRcdFx0dXJsLmluY2x1ZGVzKCdhcmNoaXZlLnRvZGF5LycpIHx8XG5cdFx0XHRcdHVybC5pbmNsdWRlcygnYXJjaGl2ZS5pcy8nKSB8fFxuXHRcdFx0XHR1cmwuaW5jbHVkZXMoJ3dlYi5hcmNoaXZlLm9yZy9zYXZlLycpKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVmFsaWRhdGUgdGhlIFVSTCBiZWZvcmUgYWRkaW5nIGl0XG5cdFx0XHRpZiAoaXNWYWxpZFVybCh1cmwpKSB7XG5cdFx0XHRcdGV4dGVybmFsTGlua3MucHVzaCh1cmwpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0cmV0dXJuIFsuLi5uZXcgU2V0KGV4dGVybmFsTGlua3MpXTtcbn1cblxuLyoqXG4gKiBDaGVja3MgZm9yIGV4dGVybmFsIGxpbmtzIGFuZCByZXR1cm5zIHRoZW0gYXMgbm90aWNlc1xuICogVGhpcyBpcyB0aGUgbm90aWNlLWJhc2VkIGV4dGVybmFsIGxpbmtzIGxpc3RcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0cyAobm90aWNlcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRXh0ZXJuYWxMaW5rcyhjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xuXG5cdGlmICghc2V0dGluZ3MuY2hlY2tFeHRlcm5hbExpbmtzKSB7XG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XG5cdH1cblxuXHQvLyBVc2UgdGhlIGltcHJvdmVkIGxpbmsgZXh0cmFjdGlvblxuXHRjb25zdCB1bmlxdWVMaW5rcyA9IGV4dHJhY3RWYWxpZEV4dGVybmFsTGlua3MoY29udGVudCk7XG5cblx0aWYgKHVuaXF1ZUxpbmtzLmxlbmd0aCA+IDApIHtcblx0XHQvLyBMaXN0IGVhY2ggZXh0ZXJuYWwgbGluayBhcyBhIG5vdGljZVxuXHRcdHVuaXF1ZUxpbmtzLmZvckVhY2goKHVybCwgaW5kZXgpID0+IHtcblx0XHRcdGNvbnN0IGxpbmVOdW1iZXIgPSBmaW5kTGluZU51bWJlckZvckltYWdlKGNvbnRlbnQsIHVybCk7XG5cdFx0XHRyZXN1bHRzLnB1c2goe1xuXHRcdFx0XHRwYXNzZWQ6IHRydWUsXG5cdFx0XHRcdG1lc3NhZ2U6IGBFeHRlcm5hbCBsaW5rOiAke3VybH1gLFxuXHRcdFx0XHRzdWdnZXN0aW9uOiBcIlRvIGZpbmQgaWYgYW55IG9mIHRoZXNlIGFyZSBicm9rZW4sIHVzZSB0aGUgJ0NoZWNrIGV4dGVybmFsIGxpbmtzIGZvciA0MDRzJyBidXR0b24gdG8gdHJpZ2dlciBpdC5cIixcblx0XHRcdFx0c2V2ZXJpdHk6ICdub3RpY2UnLFxuXHRcdFx0XHRwb3NpdGlvbjoge1xuXHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXG5cdFx0XHRcdFx0c2VhcmNoVGV4dDogdXJsLFxuXHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdHMucHVzaCh7XG5cdFx0XHRwYXNzZWQ6IHRydWUsXG5cdFx0XHRtZXNzYWdlOiBcIk5vIGV4dGVybmFsIGxpbmtzIGZvdW5kXCIsXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXG5cdFx0fSk7XG5cdH1cblxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xufVxuXG4vLyBFeHRlcm5hbCBsaW5rIGNhY2hlIHNldHRpbmdzXG5jb25zdCBFWFRFUk5BTF9MSU5LX0NBQ0hFX1RUTCA9IDM2MDAwMDA7IC8vIDEgaG91ciBpbiBtc1xuY29uc3QgZXh0ZXJuYWxMaW5rQ2FjaGUgPSBuZXcgTWFwPHN0cmluZywgeyByZXN1bHQ6IFNFT0NoZWNrUmVzdWx0IHwgbnVsbCwgdGltZXN0YW1wOiBudW1iZXIgfT4oKTtcblxuLy8gUmF0ZSBsaW1pdGluZyBzZXR0aW5nc1xuY29uc3QgTUFYX0NPTkNVUlJFTlRfUkVRVUVTVFMgPSA1O1xuY29uc3QgUkVRVUVTVF9ERUxBWV9NUyA9IDIwMDtcblxuY2xhc3MgUmF0ZUxpbWl0ZXIge1xuXHRwcml2YXRlIHF1ZXVlOiBBcnJheTx7IGZuOiAoKSA9PiBQcm9taXNlPGFueT4sIHJlc29sdmU6ICh2YWw6IGFueSkgPT4gdm9pZCwgcmVqZWN0OiAoZXJyOiBhbnkpID0+IHZvaWQgfT4gPSBbXTtcblx0cHJpdmF0ZSBhY3RpdmVSZXF1ZXN0cyA9IDA7XG5cdHByaXZhdGUgbGFzdFJlcXVlc3RUaW1lID0gMDtcblxuXHRhc3luYyBzY2hlZHVsZTxUPihmbjogKCkgPT4gUHJvbWlzZTxUPik6IFByb21pc2U8VD4ge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHR0aGlzLnF1ZXVlLnB1c2goeyBmbiwgcmVzb2x2ZSwgcmVqZWN0IH0pO1xuXHRcdFx0dGhpcy5wcm9jZXNzUXVldWUoKTtcblx0XHR9KTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcHJvY2Vzc1F1ZXVlKCkge1xuXHRcdGlmICh0aGlzLmFjdGl2ZVJlcXVlc3RzID49IE1BWF9DT05DVVJSRU5UX1JFUVVFU1RTIHx8IHRoaXMucXVldWUubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblx0XHRjb25zdCB0aW1lU2luY2VMYXN0UmVxdWVzdCA9IG5vdyAtIHRoaXMubGFzdFJlcXVlc3RUaW1lO1xuXG5cdFx0aWYgKHRpbWVTaW5jZUxhc3RSZXF1ZXN0IDwgUkVRVUVTVF9ERUxBWV9NUykge1xuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB0aGlzLnByb2Nlc3NRdWV1ZSgpLCBSRVFVRVNUX0RFTEFZX01TIC0gdGltZVNpbmNlTGFzdFJlcXVlc3QpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnN0IHsgZm4sIHJlc29sdmUsIHJlamVjdCB9ID0gdGhpcy5xdWV1ZS5zaGlmdCgpITtcblx0XHR0aGlzLmFjdGl2ZVJlcXVlc3RzKys7XG5cdFx0dGhpcy5sYXN0UmVxdWVzdFRpbWUgPSBEYXRlLm5vdygpO1xuXG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKCk7XG5cdFx0XHRyZXNvbHZlKHJlc3VsdCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHJlamVjdChlcnJvcik7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHRoaXMuYWN0aXZlUmVxdWVzdHMtLTtcblx0XHRcdC8vIFNtYWxsIGRlbGF5IGJlZm9yZSBwcm9jZXNzaW5nIG5leHQgdG8gZW5zdXJlIHNwYWNpbmdcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4gdGhpcy5wcm9jZXNzUXVldWUoKSwgUkVRVUVTVF9ERUxBWV9NUyk7XG5cdFx0fVxuXHR9XG59XG5cbmNvbnN0IGxpbWl0ZXIgPSBuZXcgUmF0ZUxpbWl0ZXIoKTtcblxuLyoqXG4gKiBDaGVja3MgZm9yIGJyb2tlbiBleHRlcm5hbCBsaW5rcyB3aXRoIG5ldHdvcmsgcmVxdWVzdHNcbiAqIFRoaXMgcGVyZm9ybXMgYWN0dWFsIDQwNCBjaGVja2luZyB3aXRoIHRpbWVvdXQgaGFuZGxpbmdcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0cyAoZXJyb3JzIGZvciBicm9rZW4gbGlua3MpXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0V4dGVybmFsQnJva2VuTGlua3MoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzLCBhYm9ydENvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXIpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xuXG5cdGlmICghc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rVmF1bHRDaGVjaykge1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuXHR9XG5cblx0Ly8gVXNlIHRoZSBpbXByb3ZlZCBsaW5rIGV4dHJhY3Rpb25cblx0Y29uc3QgdW5pcXVlTGlua3MgPSBleHRyYWN0VmFsaWRFeHRlcm5hbExpbmtzKGNvbnRlbnQpO1xuXG5cdGlmICh1bmlxdWVMaW5rcy5sZW5ndGggPT09IDApIHtcblx0XHRyZXN1bHRzLnB1c2goe1xuXHRcdFx0cGFzc2VkOiB0cnVlLFxuXHRcdFx0bWVzc2FnZTogXCJObyBleHRlcm5hbCBsaW5rcyBmb3VuZFwiLFxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xuXHRcdH0pO1xuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG5cdH1cblxuXHQvLyBDaGVjayBlYWNoIGV4dGVybmFsIGxpbmtcblx0Y29uc3QgY2hlY2tUYXNrcyA9IHVuaXF1ZUxpbmtzLm1hcChhc3luYyAodXJsKSA9PiB7XG5cdFx0Ly8gQ2hlY2sgZm9yIGdsb2JhbCBjYW5jZWxsYXRpb25cblx0XHRpZiAoYWJvcnRDb250cm9sbGVyPy5zaWduYWwuYWJvcnRlZCkge1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgY2FjaGUgZmlyc3Rcblx0XHRjb25zdCBjYWNoZWQgPSBleHRlcm5hbExpbmtDYWNoZS5nZXQodXJsKTtcblx0XHRpZiAoY2FjaGVkICYmIChEYXRlLm5vdygpIC0gY2FjaGVkLnRpbWVzdGFtcCA8IEVYVEVSTkFMX0xJTktfQ0FDSEVfVFRMKSkge1xuXHRcdFx0cmV0dXJuIGNhY2hlZC5yZXN1bHQ7XG5cdFx0fVxuXG5cdFx0Ly8gVXNlIHJhdGUgbGltaXRlciBmb3IgdGhlIGFjdHVhbCByZXF1ZXN0XG5cdFx0cmV0dXJuIGF3YWl0IGxpbWl0ZXIuc2NoZWR1bGUoYXN5bmMgKCkgPT4ge1xuXHRcdFx0aWYgKGFib3J0Q29udHJvbGxlcj8uc2lnbmFsLmFib3J0ZWQpIHJldHVybiBudWxsO1xuXG5cdFx0XHRsZXQgbGlua0lzQnJva2VuID0gZmFsc2U7XG5cdFx0XHRsZXQgZXJyb3JNZXNzYWdlID0gJyc7XG5cdFx0XHRsZXQgc3VnZ2VzdGlvbiA9ICcnO1xuXHRcdFx0bGV0IHNldmVyaXR5OiAnZXJyb3InIHwgJ3dhcm5pbmcnID0gJ2Vycm9yJztcblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcblx0XHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0XHRoZWFkZXJzOiB7XG5cdFx0XHRcdFx0XHQnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgT2JzaWRpYW4tU0VPLVBsdWdpbi8xLjApJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGhyb3c6IGZhbHNlIC8vIEhhbmRsZSBzdGF0dXMgY29kZXMgbWFudWFsbHlcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XG5cdFx0XHRcdFx0bGlua0lzQnJva2VuID0gdHJ1ZTtcblx0XHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBgRXh0ZXJuYWwgbGluayBhY2Nlc3MgcmVzdHJpY3RlZCAoNDAzKTogJHt1cmx9YDtcblx0XHRcdFx0XHRzdWdnZXN0aW9uID0gJ1RoaXMgbGluayByZXR1cm5lZCBhIDQwMyBGb3JiaWRkZW4gZXJyb3IuIFRoaXMgbWF5IGluZGljYXRlIGJvdCBwcm90ZWN0aW9uIHJhdGhlciB0aGFuIGEgYnJva2VuIGxpbmsuJztcblx0XHRcdFx0XHRzZXZlcml0eSA9ICd3YXJuaW5nJztcblx0XHRcdFx0fSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNDAwKSB7XG5cdFx0XHRcdFx0bGlua0lzQnJva2VuID0gdHJ1ZTtcblx0XHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBgRXh0ZXJuYWwgbGluayBlcnJvciAoJHtyZXNwb25zZS5zdGF0dXN9KTogJHt1cmx9YDtcblx0XHRcdFx0XHRzdWdnZXN0aW9uID0gYFRoaXMgbGluayByZXR1cm5lZCBhICR7cmVzcG9uc2Uuc3RhdHVzfSBlcnJvci5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRsaW5rSXNCcm9rZW4gPSB0cnVlO1xuXHRcdFx0XHRlcnJvck1lc3NhZ2UgPSBgRXh0ZXJuYWwgbGluayB1bnJlYWNoYWJsZTogJHt1cmx9YDtcblx0XHRcdFx0c3VnZ2VzdGlvbiA9ICdDaGVjayBpZiB0aGUgVVJMIGlzIGNvcnJlY3Qgb3IgaWYgdGhlIHNlcnZlciBpcyBkb3duLic7XG5cdFx0XHRcdHNldmVyaXR5ID0gJ3dhcm5pbmcnO1xuXHRcdFx0fVxuXG5cdFx0XHRsZXQgcmVzdWx0OiBTRU9DaGVja1Jlc3VsdCB8IG51bGwgPSBudWxsO1xuXHRcdFx0aWYgKGxpbmtJc0Jyb2tlbikge1xuXHRcdFx0XHRjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuXHRcdFx0XHRsZXQgbGluZU51bWJlciA9IDE7XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV07XG5cdFx0XHRcdFx0aWYgKGxpbmUgJiYgbGluZS5pbmNsdWRlcyh1cmwpKSB7XG5cdFx0XHRcdFx0XHRsaW5lTnVtYmVyID0gaSArIDE7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgPSB7XG5cdFx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcblx0XHRcdFx0XHRtZXNzYWdlOiBlcnJvck1lc3NhZ2UsXG5cdFx0XHRcdFx0c3VnZ2VzdGlvbjogc3VnZ2VzdGlvbixcblx0XHRcdFx0XHRzZXZlcml0eTogc2V2ZXJpdHksXG5cdFx0XHRcdFx0cG9zaXRpb246IHtcblx0XHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXG5cdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiB1cmwsXG5cdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FjaGUgdGhlIHJlc3VsdCAoZXZlbiBpZiBudWxsL3Bhc3NlZClcblx0XHRcdGV4dGVybmFsTGlua0NhY2hlLnNldCh1cmwsIHsgcmVzdWx0LCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH0pO1xuXHR9KTtcblxuXHRjb25zdCB0YXNrUmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGNoZWNrVGFza3MpO1xuXHR0YXNrUmVzdWx0cy5mb3JFYWNoKHIgPT4ge1xuXHRcdGlmIChyKSByZXN1bHRzLnB1c2gocik7XG5cdH0pO1xuXG5cdC8vIElmIG5vIGVycm9ycyB3ZXJlIGZvdW5kLCBhZGQgc3VjY2VzcyBtZXNzYWdlXG5cdGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCAmJiB1bmlxdWVMaW5rcy5sZW5ndGggPiAwKSB7XG5cdFx0cmVzdWx0cy5wdXNoKHtcblx0XHRcdHBhc3NlZDogdHJ1ZSxcblx0XHRcdG1lc3NhZ2U6IGBGb3VuZCAke3VuaXF1ZUxpbmtzLmxlbmd0aH0gZXh0ZXJuYWwgbGluayhzKSwgYWxsIGFwcGVhciB0byByZXNvbHZlIGFuZCBhcmUgd29ya2luZ2AsXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAodW5pcXVlTGlua3MubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IGJyb2tlbkNvdW50ID0gcmVzdWx0cy5maWx0ZXIociA9PiAhci5wYXNzZWQpLmxlbmd0aDtcblx0XHRjb25zdCB3b3JraW5nTGlua3MgPSB1bmlxdWVMaW5rcy5sZW5ndGggLSBicm9rZW5Db3VudDtcblx0XHRpZiAod29ya2luZ0xpbmtzID4gMCkge1xuXHRcdFx0cmVzdWx0cy5wdXNoKHtcblx0XHRcdFx0cGFzc2VkOiB0cnVlLFxuXHRcdFx0XHRtZXNzYWdlOiBgJHt3b3JraW5nTGlua3N9IG9mICR7dW5pcXVlTGlua3MubGVuZ3RofSBleHRlcm5hbCBsaW5rKHMpIGFyZSB3b3JraW5nYCxcblx0XHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59XG5cblxuLyoqXG4gKiBDaGVja3MgZm9yIGV4dGVybmFsIGxpbmtzIG9ubHkgKHNpbXBsaWZpZWQgdmVyc2lvbilcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tFeHRlcm5hbExpbmtzT25seShjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcblx0Ly8gVGhpcyBpcyBhIHNpbXBsaWZpZWQgdmVyc2lvbiB0aGF0IGp1c3QgbGlzdHMgZXh0ZXJuYWwgbGlua3Ncblx0cmV0dXJuIGNoZWNrRXh0ZXJuYWxMaW5rcyhjb250ZW50LCBmaWxlLCBzZXR0aW5ncyk7XG59IiwgIi8qKlxyXG4gKiBSZWFkaW5nIGxldmVsIGFuYWx5c2lzIHV0aWxpdGllc1xyXG4gKiBQcm92aWRlcyBmdW5jdGlvbnMgdG8gY2FsY3VsYXRlIHJlYWRpbmcgbGV2ZWwgYW5kIHN5bGxhYmxlIGNvdW50aW5nXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIENvdW50cyBzeWxsYWJsZXMgaW4gYSB3b3JkIHVzaW5nIGEgc2ltcGxlIGhldXJpc3RpY1xyXG4gKiBAcGFyYW0gd29yZCAtIFRoZSB3b3JkIHRvIGNvdW50IHN5bGxhYmxlcyBmb3JcclxuICogQHJldHVybnMgTnVtYmVyIG9mIHN5bGxhYmxlcyBpbiB0aGUgd29yZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNvdW50U3lsbGFibGVzKHdvcmQ6IHN0cmluZyk6IG51bWJlciB7XHJcblx0Ly8gUmVtb3ZlIHB1bmN0dWF0aW9uIGFuZCBjb252ZXJ0IHRvIGxvd2VyY2FzZVxyXG5cdGNvbnN0IGNsZWFuV29yZCA9IHdvcmQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bXmEtel0vZywgJycpO1xyXG5cdFxyXG5cdC8vIEhhbmRsZSBlbXB0eSB3b3Jkc1xyXG5cdGlmIChjbGVhbldvcmQubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcclxuXHRcclxuXHQvLyBDb3VudCB2b3dlbCBncm91cHNcclxuXHRsZXQgc3lsbGFibGVzID0gMDtcclxuXHRsZXQgcHJldmlvdXNXYXNWb3dlbCA9IGZhbHNlO1xyXG5cdFxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgY2xlYW5Xb3JkLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRjb25zdCBjaGFyID0gY2xlYW5Xb3JkW2ldO1xyXG5cdFx0aWYgKGNoYXIpIHtcclxuXHRcdFx0Y29uc3QgaXNWb3dlbCA9IC9bYWVpb3V5XS8udGVzdChjaGFyKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChpc1Zvd2VsICYmICFwcmV2aW91c1dhc1Zvd2VsKSB7XHJcblx0XHRcdFx0c3lsbGFibGVzKys7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHByZXZpb3VzV2FzVm93ZWwgPSBpc1Zvd2VsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBIYW5kbGUgc2lsZW50ICdlJyBhdCB0aGUgZW5kXHJcblx0aWYgKGNsZWFuV29yZC5lbmRzV2l0aCgnZScpICYmIHN5bGxhYmxlcyA+IDEpIHtcclxuXHRcdHN5bGxhYmxlcy0tO1xyXG5cdH1cclxuXHRcclxuXHQvLyBFdmVyeSB3b3JkIGhhcyBhdCBsZWFzdCBvbmUgc3lsbGFibGVcclxuXHRyZXR1cm4gTWF0aC5tYXgoMSwgc3lsbGFibGVzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgYSBodW1hbi1yZWFkYWJsZSBkZXNjcmlwdGlvbiBvZiB0aGUgcmVhZGluZyBsZXZlbFxyXG4gKiBAcGFyYW0gbGV2ZWwgLSBUaGUgRmxlc2NoLUtpbmNhaWQgcmVhZGluZyBsZXZlbFxyXG4gKiBAcmV0dXJucyBEZXNjcmlwdGlvbiBvZiB0aGUgcmVhZGluZyBsZXZlbFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFJlYWRpbmdMZXZlbERlc2NyaXB0aW9uKGxldmVsOiBudW1iZXIpOiBzdHJpbmcge1xyXG5cdGlmIChsZXZlbCA8PSA2KSByZXR1cm4gXCJWZXJ5IGVhc3kgdG8gcmVhZFwiO1xyXG5cdGlmIChsZXZlbCA8PSA5KSByZXR1cm4gXCJFYXN5IHRvIHJlYWRcIjtcclxuXHRpZiAobGV2ZWwgPD0gMTIpIHJldHVybiBcIk1vZGVyYXRlbHkgZWFzeSB0byByZWFkXCI7XHJcblx0aWYgKGxldmVsIDw9IDE1KSByZXR1cm4gXCJNb2RlcmF0ZWx5IGRpZmZpY3VsdCB0byByZWFkXCI7XHJcblx0aWYgKGxldmVsIDw9IDE4KSByZXR1cm4gXCJEaWZmaWN1bHQgdG8gcmVhZFwiO1xyXG5cdHJldHVybiBcIlZlcnkgZGlmZmljdWx0IHRvIHJlYWRcIjtcclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbnRlbnQgdmFsaWRhdGlvbiBjaGVja3NcclxuICogQ2hlY2tzIGZvciBjb250ZW50IGxlbmd0aCwgcmVhZGluZyBsZXZlbCwgYW5kIGR1cGxpY2F0ZSBjb250ZW50XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgU0VPQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgcmVtb3ZlQ29kZUJsb2NrcyB9IGZyb20gXCIuL3V0aWxzL2NvbnRlbnQtcGFyc2VyXCI7XHJcbmltcG9ydCB7IGNvdW50U3lsbGFibGVzLCBnZXRSZWFkaW5nTGV2ZWxEZXNjcmlwdGlvbiB9IGZyb20gXCIuL3V0aWxzL3JlYWRpbmctbGV2ZWxcIjtcclxuaW1wb3J0IHsgVmF1bHREdXBsaWNhdGVEZXRlY3RvciB9IGZyb20gXCIuL2R1cGxpY2F0ZS1kZXRlY3Rpb25cIjtcclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgY29udGVudCBsZW5ndGggYWdhaW5zdCBtaW5pbXVtIHJlcXVpcmVtZW50c1xyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0NvbnRlbnRMZW5ndGgoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cclxuXHRpZiAoIXNldHRpbmdzLmNoZWNrQ29udGVudExlbmd0aCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cclxuXHQvLyBSZW1vdmUgb25seSBmcm9udG1hdHRlciBhbmQgY29kZSBibG9ja3MgLSBjb3VudCBldmVyeXRoaW5nIGEgcmVhZGVyIHdvdWxkIHNlZVxyXG5cdGxldCBib2R5Q29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXi0tLVxcbltcXHNcXFNdKj9cXG4tLS1cXG4vLCAnJyk7IC8vIFJlbW92ZSBmcm9udG1hdHRlclxyXG5cdGJvZHlDb250ZW50ID0gYm9keUNvbnRlbnQucmVwbGFjZSgvYGBgW1xcc1xcU10qP2BgYC9nLCAnJyk7IC8vIFJlbW92ZSBjb2RlIGJsb2Nrc1xyXG5cdGJvZHlDb250ZW50ID0gYm9keUNvbnRlbnQucmVwbGFjZSgvfn5+W1xcc1xcU10qP35+fi9nLCAnJyk7IC8vIFJlbW92ZSBjb2RlIGJsb2NrcyB3aXRoIH5+flxyXG5cdC8vIEtlZXAgZXZlcnl0aGluZyBlbHNlIC0gd2lraWxpbmtzLCBpbWFnZXMsIEhUTUwsIGhlYWRpbmdzLCBsaXN0cyAtIGFsbCBhcmUgcmVhZGFibGUgY29udGVudFxyXG5cclxuXHRjb25zdCB3b3JkQ291bnQgPSBib2R5Q29udGVudC5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCkubGVuZ3RoO1xyXG5cclxuXHRpZiAod29yZENvdW50IDwgc2V0dGluZ3MubWluQ29udGVudExlbmd0aCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogYENvbnRlbnQgdG9vIHNob3J0OiAke3dvcmRDb3VudH0gd29yZHNgLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBgQWltIGZvciBhdCBsZWFzdCAke3NldHRpbmdzLm1pbkNvbnRlbnRMZW5ndGh9IHdvcmRzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogYEdvb2QgY29udGVudCBsZW5ndGg6ICR7d29yZENvdW50fSB3b3Jkc2AsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyByZWFkaW5nIGxldmVsIG9mIHRoZSBjb250ZW50XHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUmVhZGluZ0xldmVsKGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja1JlYWRpbmdMZXZlbCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cclxuXHQvLyBSZW1vdmUgY29kZSBibG9ja3MgYW5kIGZyb250bWF0dGVyIGZvciByZWFkaW5nIGxldmVsIGFuYWx5c2lzXHJcblx0Y29uc3QgY2xlYW5Db250ZW50ID0gcmVtb3ZlQ29kZUJsb2Nrcyhjb250ZW50KTtcclxuXHJcblx0Ly8gU3BsaXQgaW50byBzZW50ZW5jZXMgYW5kIHdvcmRzXHJcblx0Y29uc3Qgc2VudGVuY2VzID0gY2xlYW5Db250ZW50LnNwbGl0KC9bLiE/XSsvKS5maWx0ZXIocyA9PiBzLnRyaW0oKS5sZW5ndGggPiAwKTtcclxuXHRjb25zdCB3b3JkcyA9IGNsZWFuQ29udGVudC5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcblxyXG5cdGlmIChzZW50ZW5jZXMubGVuZ3RoID09PSAwIHx8IHdvcmRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIHJlYWRhYmxlIGNvbnRlbnQgZm91bmQgZm9yIHJlYWRpbmcgbGV2ZWwgYW5hbHlzaXNcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Ly8gQ2FsY3VsYXRlIEZsZXNjaC1LaW5jYWlkIHJlYWRpbmcgbGV2ZWxcclxuXHRjb25zdCB0b3RhbFN5bGxhYmxlcyA9IHdvcmRzLnJlZHVjZSgoc3VtLCB3b3JkKSA9PiBzdW0gKyBjb3VudFN5bGxhYmxlcyh3b3JkKSwgMCk7XHJcblx0Y29uc3QgYXZnV29yZHNQZXJTZW50ZW5jZSA9IHdvcmRzLmxlbmd0aCAvIHNlbnRlbmNlcy5sZW5ndGg7XHJcblx0Y29uc3QgYXZnU3lsbGFibGVzUGVyV29yZCA9IHRvdGFsU3lsbGFibGVzIC8gd29yZHMubGVuZ3RoO1xyXG5cclxuXHRjb25zdCByZWFkaW5nTGV2ZWwgPSAwLjM5ICogYXZnV29yZHNQZXJTZW50ZW5jZSArIDExLjggKiBhdmdTeWxsYWJsZXNQZXJXb3JkIC0gMTUuNTk7XHJcblxyXG5cdGNvbnN0IGRlc2NyaXB0aW9uID0gZ2V0UmVhZGluZ0xldmVsRGVzY3JpcHRpb24ocmVhZGluZ0xldmVsKTtcclxuXHJcblx0aWYgKHJlYWRpbmdMZXZlbCA+IDEyKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgUmVhZGluZyBsZXZlbCB0b28gaGlnaDogJHtyZWFkaW5nTGV2ZWwudG9GaXhlZCgxKX0gKCR7ZGVzY3JpcHRpb259KWAsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiQ29uc2lkZXIgc2ltcGxpZnlpbmcgc2VudGVuY2Ugc3RydWN0dXJlIGFuZCB1c2luZyBzaG9ydGVyIHdvcmRzXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBHb29kIHJlYWRpbmcgbGV2ZWw6ICR7cmVhZGluZ0xldmVsLnRvRml4ZWQoMSl9ICgke2Rlc2NyaXB0aW9ufSlgLFxyXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgZm9yIGR1cGxpY2F0ZSBjb250ZW50XHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRHVwbGljYXRlQ29udGVudChjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblxyXG5cdGlmICghc2V0dGluZ3MuY2hlY2tEdXBsaWNhdGVDb250ZW50KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblxyXG5cdC8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIHZlcnNpb24gLSBpbiBhIHJlYWwgaW1wbGVtZW50YXRpb24sIHlvdSdkIGNvbXBhcmUgYWdhaW5zdCBvdGhlciBmaWxlc1xyXG5cdC8vIEZvciBub3csIHdlJ2xsIGp1c3QgY2hlY2sgZm9yIG9idmlvdXMgZHVwbGljYXRpb24gd2l0aGluIHRoZSBzYW1lIGZpbGVcclxuXHJcblx0Ly8gUmVtb3ZlIGNvZGUgYmxvY2tzIGFuZCBmcm9udG1hdHRlclxyXG5cdGNvbnN0IGNsZWFuQ29udGVudCA9IHJlbW92ZUNvZGVCbG9ja3MoY29udGVudCk7XHJcblxyXG5cdC8vIFNwbGl0IGludG8gcGFyYWdyYXBoc1xyXG5cdGNvbnN0IHBhcmFncmFwaHMgPSBjbGVhbkNvbnRlbnQuc3BsaXQoL1xcblxccypcXG4vKS5maWx0ZXIocCA9PiBwLnRyaW0oKS5sZW5ndGggPiAyMCk7XHJcblxyXG5cdC8vIENoZWNrIGZvciByZXBlYXRlZCBwYXJhZ3JhcGhzXHJcblx0Y29uc3QgZHVwbGljYXRlUGFyYWdyYXBocyA9IFtdO1xyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYWdyYXBocy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Zm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgcGFyYWdyYXBocy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRjb25zdCBwYXJhZ3JhcGgxID0gcGFyYWdyYXBoc1tpXTtcclxuXHRcdFx0Y29uc3QgcGFyYWdyYXBoMiA9IHBhcmFncmFwaHNbal07XHJcblx0XHRcdGlmIChwYXJhZ3JhcGgxICYmIHBhcmFncmFwaDIpIHtcclxuXHRcdFx0XHRjb25zdCBzaW1pbGFyaXR5ID0gY2FsY3VsYXRlU2ltaWxhcml0eShwYXJhZ3JhcGgxLCBwYXJhZ3JhcGgyKTtcclxuXHRcdFx0XHRpZiAoc2ltaWxhcml0eSA+IHNldHRpbmdzLmR1cGxpY2F0ZVRocmVzaG9sZCkge1xyXG5cdFx0XHRcdFx0ZHVwbGljYXRlUGFyYWdyYXBocy5wdXNoKHtcclxuXHRcdFx0XHRcdFx0cGFyYWdyYXBoMTogaSArIDEsXHJcblx0XHRcdFx0XHRcdHBhcmFncmFwaDI6IGogKyAxLFxyXG5cdFx0XHRcdFx0XHRzaW1pbGFyaXR5OiBzaW1pbGFyaXR5XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmIChkdXBsaWNhdGVQYXJhZ3JhcGhzLmxlbmd0aCA+IDApIHtcclxuXHRcdGR1cGxpY2F0ZVBhcmFncmFwaHMuZm9yRWFjaCgoeyBwYXJhZ3JhcGgxLCBwYXJhZ3JhcGgyLCBzaW1pbGFyaXR5IH0pID0+IHtcclxuXHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IGBEdXBsaWNhdGUgY29udGVudCBkZXRlY3RlZCBiZXR3ZWVuIHBhcmFncmFwaHMgJHtwYXJhZ3JhcGgxfSBhbmQgJHtwYXJhZ3JhcGgyfWAsXHJcblx0XHRcdFx0c3VnZ2VzdGlvbjogYFNpbWlsYXJpdHk6ICR7c2ltaWxhcml0eS50b0ZpeGVkKDEpfSUgLSBjb25zaWRlciByZXdyaXRpbmcgb25lIG9mIHRoZXNlIHBhcmFncmFwaHNgLFxyXG5cdFx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIGR1cGxpY2F0ZSBjb250ZW50IGRldGVjdGVkXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENhbGN1bGF0ZXMgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byB0ZXh0IHN0cmluZ3NcclxuICogQHBhcmFtIHRleHQxIC0gRmlyc3QgdGV4dCBzdHJpbmdcclxuICogQHBhcmFtIHRleHQyIC0gU2Vjb25kIHRleHQgc3RyaW5nXHJcbiAqIEByZXR1cm5zIFNpbWlsYXJpdHkgcGVyY2VudGFnZSAoMC0xMDApXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVTaW1pbGFyaXR5KHRleHQxOiBzdHJpbmcsIHRleHQyOiBzdHJpbmcpOiBudW1iZXIge1xyXG5cdGNvbnN0IHdvcmRzMSA9IHRleHQxLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKTtcclxuXHRjb25zdCB3b3JkczIgPSB0ZXh0Mi50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXHMrLyk7XHJcblxyXG5cdGNvbnN0IHNldDEgPSBuZXcgU2V0KHdvcmRzMSk7XHJcblx0Y29uc3Qgc2V0MiA9IG5ldyBTZXQod29yZHMyKTtcclxuXHJcblx0Y29uc3QgaW50ZXJzZWN0aW9uID0gbmV3IFNldChbLi4uc2V0MV0uZmlsdGVyKHggPT4gc2V0Mi5oYXMoeCkpKTtcclxuXHRjb25zdCB1bmlvbiA9IG5ldyBTZXQoWy4uLnNldDEsIC4uLnNldDJdKTtcclxuXHJcblx0cmV0dXJuIChpbnRlcnNlY3Rpb24uc2l6ZSAvIHVuaW9uLnNpemUpICogMTAwO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgZm9yIGR1cGxpY2F0ZSB0aXRsZXMgYWNyb3NzIHRoZSB2YXVsdFxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHBhcmFtIHZhdWx0RGV0ZWN0b3IgLSBWYXVsdCBkdXBsaWNhdGUgZGV0ZWN0b3IgaW5zdGFuY2VcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0R1cGxpY2F0ZVRpdGxlcyhcclxuXHRjb250ZW50OiBzdHJpbmcsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0c2V0dGluZ3M6IFNFT1NldHRpbmdzLFxyXG5cdHZhdWx0RGV0ZWN0b3I6IFZhdWx0RHVwbGljYXRlRGV0ZWN0b3JcclxuKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0cmV0dXJuIGF3YWl0IHZhdWx0RGV0ZWN0b3IuY2hlY2tEdXBsaWNhdGVUaXRsZXMoZmlsZSwgc2V0dGluZ3MpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgZm9yIGR1cGxpY2F0ZSBkZXNjcmlwdGlvbnMgYWNyb3NzIHRoZSB2YXVsdFxyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHBhcmFtIHZhdWx0RGV0ZWN0b3IgLSBWYXVsdCBkdXBsaWNhdGUgZGV0ZWN0b3IgaW5zdGFuY2VcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjaGVja0R1cGxpY2F0ZURlc2NyaXB0aW9ucyhcclxuXHRjb250ZW50OiBzdHJpbmcsXHJcblx0ZmlsZTogVEZpbGUsXHJcblx0c2V0dGluZ3M6IFNFT1NldHRpbmdzLFxyXG5cdHZhdWx0RGV0ZWN0b3I6IFZhdWx0RHVwbGljYXRlRGV0ZWN0b3JcclxuKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0cmV0dXJuIGF3YWl0IHZhdWx0RGV0ZWN0b3IuY2hlY2tEdXBsaWNhdGVEZXNjcmlwdGlvbnMoZmlsZSwgc2V0dGluZ3MpO1xyXG59XHJcblxyXG4vKipcclxuICogRW5oYW5jZWQgZHVwbGljYXRlIGNvbnRlbnQgZGV0ZWN0aW9uIHVzaW5nIHZhdWx0LXdpZGUgYW5hbHlzaXNcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEBwYXJhbSB2YXVsdERldGVjdG9yIC0gVmF1bHQgZHVwbGljYXRlIGRldGVjdG9yIGluc3RhbmNlXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hlY2tWYXVsdER1cGxpY2F0ZUNvbnRlbnQoXHJcblx0Y29udGVudDogc3RyaW5nLFxyXG5cdGZpbGU6IFRGaWxlLFxyXG5cdHNldHRpbmdzOiBTRU9TZXR0aW5ncyxcclxuXHR2YXVsdERldGVjdG9yOiBWYXVsdER1cGxpY2F0ZURldGVjdG9yXHJcbik6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdHJldHVybiBhd2FpdCB2YXVsdERldGVjdG9yLmNoZWNrRHVwbGljYXRlQ29udGVudChmaWxlLCBzZXR0aW5ncyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgZm9yIGdlbmVyYWwgbm90aWNlc1xyXG4gKiBAcGFyYW0gY29udGVudCAtIFRoZSBtYXJrZG93biBjb250ZW50IHRvIGNoZWNrXHJcbiAqIEBwYXJhbSBmaWxlIC0gVGhlIGZpbGUgYmVpbmcgY2hlY2tlZFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgU0VPIGNoZWNrIHJlc3VsdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja05vdGljZXMoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Ly8gVE9ETzogSW1wbGVtZW50IGFjdHVhbCBub3RpY2UgY2hlY2tzIGlmIG5lZWRlZFxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG59XHJcbiIsICIvKipcclxuICogTWV0YSBkYXRhIHZhbGlkYXRpb24gY2hlY2tzXHJcbiAqIENoZWNrcyBmb3IgdGl0bGUgbGVuZ3RoLCBtZXRhIGRlc2NyaXB0aW9ucywgYW5kIGtleXdvcmQgZGVuc2l0eVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IFNFT1NldHRpbmdzIH0gZnJvbSBcIi4uL3NldHRpbmdzXCI7XHJcbmltcG9ydCB7IFNFT0NoZWNrUmVzdWx0IH0gZnJvbSBcIi4uL3R5cGVzXCI7XHJcbmltcG9ydCB7IHJlbW92ZUNvZGVCbG9ja3MgfSBmcm9tIFwiLi91dGlscy9jb250ZW50LXBhcnNlclwiO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBtZXRhIGRlc2NyaXB0aW9uIGxlbmd0aCBhbmQgcHJlc2VuY2VcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tNZXRhRGVzY3JpcHRpb24oY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cclxuXHRpZiAoIXNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gcHJvcGVydGllcyBmb3VuZFwiLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFkZCBwcm9wZXJ0aWVzIHdpdGggZGVzY3JpcHRpb24gcHJvcGVydHlcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdGlmICghZnJvbnRtYXR0ZXIpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gcHJvcGVydGllcyBjb250ZW50IGZvdW5kXCIsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiQWRkIHByb3BlcnRpZXMgd2l0aCBkZXNjcmlwdGlvbiBwcm9wZXJ0eVwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cdGNvbnN0IGRlc2NyaXB0aW9uTWF0Y2ggPSBmcm9udG1hdHRlci5tYXRjaChuZXcgUmVnRXhwKGBeJHtzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5fTpcXFxccyooLispJGAsICdtJykpO1xyXG5cclxuXHRpZiAoIWRlc2NyaXB0aW9uTWF0Y2ggfHwgIWRlc2NyaXB0aW9uTWF0Y2hbMV0pIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IGBObyAke3NldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHl9IGZvdW5kIGluIHByb3BlcnRpZXNgLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBgQWRkICR7c2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eX0gdG8gcHJvcGVydGllc2AsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdGxldCBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uTWF0Y2hbMV0udHJpbSgpO1xyXG5cclxuXHQvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnRcclxuXHRpZiAoKGRlc2NyaXB0aW9uLnN0YXJ0c1dpdGgoJ1wiJykgJiYgZGVzY3JpcHRpb24uZW5kc1dpdGgoJ1wiJykpIHx8XHJcblx0XHQoZGVzY3JpcHRpb24uc3RhcnRzV2l0aChcIidcIikgJiYgZGVzY3JpcHRpb24uZW5kc1dpdGgoXCInXCIpKSkge1xyXG5cdFx0ZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5zbGljZSgxLCAtMSk7XHJcblx0fVxyXG5cdGNvbnN0IGxlbmd0aCA9IGRlc2NyaXB0aW9uLmxlbmd0aDtcclxuXHJcblx0aWYgKGxlbmd0aCA8IDEyMCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogYERlc2NyaXB0aW9uIHRvbyBzaG9ydDogJHtsZW5ndGh9IGNoYXJhY3RlcnNgLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFpbSBmb3IgMTIwLTE2MCBjaGFyYWN0ZXJzXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSBpZiAobGVuZ3RoID4gMTYwKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgRGVzY3JpcHRpb24gdG9vIGxvbmc6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzYCxcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJBaW0gZm9yIDEyMC0xNjAgY2hhcmFjdGVyc1wiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgR29vZCBkZXNjcmlwdGlvbiBsZW5ndGg6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIHRpdGxlIGxlbmd0aCBhbmQgcHJlc2VuY2VcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tUaXRsZUxlbmd0aChjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblxyXG5cdGlmICghc2V0dGluZ3MuY2hlY2tUaXRsZUxlbmd0aCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cclxuXHRsZXQgdGl0bGUgPSAnJztcclxuXHJcblx0Ly8gQ2hlY2sgZnJvbnRtYXR0ZXIgZmlyc3RcclxuXHRpZiAoc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSkge1xyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRcdGlmIChmcm9udG1hdHRlck1hdGNoICYmIGZyb250bWF0dGVyTWF0Y2hbMV0pIHtcclxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdFx0XHRjb25zdCB0aXRsZU1hdGNoID0gZnJvbnRtYXR0ZXIubWF0Y2gobmV3IFJlZ0V4cChgXiR7c2V0dGluZ3MudGl0bGVQcm9wZXJ0eX06XFxcXHMqKC4rKSRgLCAnbScpKTtcclxuXHRcdFx0aWYgKHRpdGxlTWF0Y2ggJiYgdGl0bGVNYXRjaFsxXSkge1xyXG5cdFx0XHRcdHRpdGxlID0gdGl0bGVNYXRjaFsxXS50cmltKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEZhbGxiYWNrIHRvIGZpbGVuYW1lIGlmIGVuYWJsZWRcclxuXHRpZiAoIXRpdGxlICYmIHNldHRpbmdzLnVzZUZpbGVuYW1lQXNUaXRsZSkge1xyXG5cdFx0dGl0bGUgPSBmaWxlLmJhc2VuYW1lO1xyXG5cdH1cclxuXHJcblx0Ly8gRmFsbGJhY2sgdG8gZmlyc3QgSDEgaGVhZGluZ1xyXG5cdGlmICghdGl0bGUpIHtcclxuXHRcdGNvbnN0IGgxTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eI1xccysoLispJC9tKTtcclxuXHRcdGlmIChoMU1hdGNoICYmIGgxTWF0Y2hbMV0pIHtcclxuXHRcdFx0dGl0bGUgPSBoMU1hdGNoWzFdLnRyaW0oKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIE9ubHkgY2hlY2sgdGl0bGUgbGVuZ3RoIGlmIHdlIGhhdmUgYSB0aXRsZSBmcm9tIGZyb250bWF0dGVyIG9yIGZpbGVuYW1lXHJcblx0Ly8gRG9uJ3Qgc2hvdyB0aGUgY2hlY2sgYXQgYWxsIGlmIG5vIHRpdGxlIGlzIGNvbmZpZ3VyZWRcclxuXHRpZiAoIXRpdGxlKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpOyAvLyBSZXR1cm4gZW1wdHkgcmVzdWx0cyAtIGRvbid0IHNob3cgdGhlIGNoZWNrXHJcblx0fVxyXG5cclxuXHQvLyBBcHBseSBwcmVmaXgvc3VmZml4IGlmIGNvbmZpZ3VyZWQgKGFkZHMgc3BhY2UgZm9yIGNoYXJhY3RlciBjb3VudClcclxuXHRjb25zdCBmdWxsVGl0bGUgPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeCA/IGAke3RpdGxlfSAke3NldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4fWAgOiB0aXRsZTtcclxuXHRjb25zdCBsZW5ndGggPSBmdWxsVGl0bGUubGVuZ3RoO1xyXG5cclxuXHRpZiAobGVuZ3RoIDwgMzApIHtcclxuXHRcdGNvbnN0IG1lc3NhZ2UgPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeFxyXG5cdFx0XHQ/IGBUaXRsZSB0b28gc2hvcnQ6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzICgke3RpdGxlfSArIFwiICR7c2V0dGluZ3MudGl0bGVQcmVmaXhTdWZmaXh9XCIpYFxyXG5cdFx0XHQ6IGBUaXRsZSB0b28gc2hvcnQ6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzYDtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2UsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiQWltIGZvciAzMC02MCBjaGFyYWN0ZXJzXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSBpZiAobGVuZ3RoID4gNjApIHtcclxuXHRcdGNvbnN0IG1lc3NhZ2UgPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeFxyXG5cdFx0XHQ/IGBUaXRsZSB0b28gbG9uZzogJHtsZW5ndGh9IGNoYXJhY3RlcnMgKCR7dGl0bGV9ICsgXCIgJHtzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeH1cIilgXHJcblx0XHRcdDogYFRpdGxlIHRvbyBsb25nOiAke2xlbmd0aH0gY2hhcmFjdGVyc2A7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFpbSBmb3IgMzAtNjAgY2hhcmFjdGVyc1wiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Y29uc3QgbWVzc2FnZSA9IHNldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4XHJcblx0XHRcdD8gYEdvb2QgdGl0bGUgbGVuZ3RoOiAke2xlbmd0aH0gY2hhcmFjdGVycyAoJHt0aXRsZX0gKyBcIiAke3NldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4fVwiKWBcclxuXHRcdFx0OiBgR29vZCB0aXRsZSBsZW5ndGg6ICR7bGVuZ3RofSBjaGFyYWN0ZXJzYDtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZSxcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGtleXdvcmQgZGVuc2l0eSBpbiBjb250ZW50XHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrS2V5d29yZERlbnNpdHkoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cclxuXHRpZiAoIXNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcblx0fVxyXG5cclxuXHQvLyBHZXQga2V5d29yZCBmcm9tIGZyb250bWF0dGVyXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gcHJvcGVydGllcyBmb3VuZFwiLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFkZCBwcm9wZXJ0aWVzIHdpdGgga2V5d29yZCBwcm9wZXJ0eVwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHRjb25zdCBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyTWF0Y2hbMV07XHJcblx0aWYgKCFmcm9udG1hdHRlcikge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBwcm9wZXJ0aWVzIGNvbnRlbnQgZm91bmRcIixcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJBZGQgcHJvcGVydGllcyB3aXRoIGtleXdvcmQgcHJvcGVydHlcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHQvLyBQYXJzZSBsaW5lIGJ5IGxpbmUgaW5zdGVhZCBvZiB1c2luZyByZWdleFxyXG5cdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cdGxldCBrZXl3b3JkID0gJyc7XHJcblx0bGV0IGZvdW5kS2V5d29yZExpbmUgPSBmYWxzZTtcclxuXHJcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRpZiAobGluZS5zdGFydHNXaXRoKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSArICc6JykpIHtcclxuXHRcdFx0Zm91bmRLZXl3b3JkTGluZSA9IHRydWU7XHJcblx0XHRcdGtleXdvcmQgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICghZm91bmRLZXl3b3JkTGluZSkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gJHtzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHl9IGRlZmluZWQgaW4gcHJvcGVydGllc2AsXHJcblx0XHRcdHNldmVyaXR5OiAnbm90aWNlJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Ly8gVmFsaWRhdGUgdGhhdCB0aGUga2V5d29yZCBpcyBtZWFuaW5nZnVsIChub3QganVzdCBhIGJvb2xlYW4gb3IgZW1wdHkpXHJcblx0aWYgKCFrZXl3b3JkIHx8IGtleXdvcmQgPT09ICdmYWxzZScgfHwga2V5d29yZCA9PT0gJ3RydWUnIHx8IGtleXdvcmQgPT09ICdudWxsJyB8fCBrZXl3b3JkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gdmFsaWQga2V5d29yZCBkZWZpbmVkIGluIHByb3BlcnRpZXNgLFxyXG5cdFx0XHRzZXZlcml0eTogJ25vdGljZSdcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8vIFJlbW92ZSBjb2RlIGJsb2NrcyBhbmQgZnJvbnRtYXR0ZXIgZm9yIGtleXdvcmQgYW5hbHlzaXNcclxuXHRsZXQgY2xlYW5Db250ZW50ID0gcmVtb3ZlQ29kZUJsb2Nrcyhjb250ZW50KTtcclxuXHJcblx0Ly8gQWRkIHRpdGxlIHRvIGNvbnRlbnQgZm9yIGtleXdvcmQgZGVuc2l0eSBjYWxjdWxhdGlvbiBpZiBpdCBleGlzdHNcclxuXHRjb25zdCB0aXRsZUZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcblx0aWYgKHRpdGxlRnJvbnRtYXR0ZXJNYXRjaCAmJiB0aXRsZUZyb250bWF0dGVyTWF0Y2hbMV0gJiYgc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSkge1xyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aXRsZUZyb250bWF0dGVyTWF0Y2hbMV07XHJcblx0XHRjb25zdCBsaW5lcyA9IGZyb250bWF0dGVyLnNwbGl0KCdcXG4nKTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuXHRcdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy50aXRsZVByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRcdGxldCB0aXRsZSA9IGxpbmUuc3Vic3RyaW5nKHNldHRpbmdzLnRpdGxlUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHRcdC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdFx0XHRcdGlmICgodGl0bGUuc3RhcnRzV2l0aCgnXCInKSAmJiB0aXRsZS5lbmRzV2l0aCgnXCInKSkgfHxcclxuXHRcdFx0XHRcdCh0aXRsZS5zdGFydHNXaXRoKFwiJ1wiKSAmJiB0aXRsZS5lbmRzV2l0aChcIidcIikpKSB7XHJcblx0XHRcdFx0XHR0aXRsZSA9IHRpdGxlLnNsaWNlKDEsIC0xKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gUmVtb3ZlIHRpdGxlIHByZWZpeC9zdWZmaXggaWYgc3BlY2lmaWVkIChmb3Iga2V5d29yZCBkZW5zaXR5LCB3ZSB3YW50IHRoZSByYXcgdGl0bGUpXHJcblx0XHRcdFx0Ly8gTm90ZTogV2UgZG9uJ3QgcmVtb3ZlIHByZWZpeC9zdWZmaXggaGVyZSBiZWNhdXNlIGtleXdvcmQgZGVuc2l0eSBzaG91bGQgY291bnQgdGhlIGFjdHVhbCB0aXRsZVxyXG5cdFx0XHRcdC8vIEFkZCB0aXRsZSB0byBjb250ZW50IGZvciBrZXl3b3JkIGFuYWx5c2lzXHJcblx0XHRcdFx0Y2xlYW5Db250ZW50ID0gdGl0bGUgKyAnICcgKyBjbGVhbkNvbnRlbnQ7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIENvdW50IGtleXdvcmQgb2NjdXJyZW5jZXMgKGNhc2UtaW5zZW5zaXRpdmUsIGZsZXhpYmxlIG1hdGNoaW5nKVxyXG5cdGNvbnN0IGtleXdvcmRMb3dlciA9IGtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuXHRjb25zdCBjbGVhbkNvbnRlbnRMb3dlciA9IGNsZWFuQ29udGVudC50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHQvLyBTcGxpdCBrZXl3b3JkIGludG8gd29yZHMgZm9yIG1vcmUgZmxleGlibGUgbWF0Y2hpbmdcclxuXHRjb25zdCBrZXl3b3JkV29yZHMgPSBrZXl3b3JkTG93ZXIuc3BsaXQoL1xccysvKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDApO1xyXG5cclxuXHQvLyBDb3VudCBvY2N1cnJlbmNlcyBieSBjaGVja2luZyBpZiBhbGwga2V5d29yZCB3b3JkcyBhcHBlYXIgdG9nZXRoZXJcclxuXHQvLyBUaGlzIGhhbmRsZXMgdmFyaWF0aW9ucyBsaWtlIFwic2luZ2xlLXNvdXJjZS1vZi10cnV0aFwiIHZzIFwic2luZ2xlIHNvdXJjZSBvZiB0cnV0aFwiXHJcblx0bGV0IGtleXdvcmRDb3VudCA9IDA7XHJcblx0Y29uc3QgY29udGVudFdvcmRzID0gY2xlYW5Db250ZW50TG93ZXIuc3BsaXQoL1xccysvKTtcclxuXHJcblx0Zm9yIChsZXQgaSA9IDA7IGkgPD0gY29udGVudFdvcmRzLmxlbmd0aCAtIGtleXdvcmRXb3Jkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Y29uc3QgcGhyYXNlID0gY29udGVudFdvcmRzLnNsaWNlKGksIGkgKyBrZXl3b3JkV29yZHMubGVuZ3RoKS5qb2luKCcgJyk7XHJcblx0XHQvLyBDaGVjayBpZiBhbGwga2V5d29yZCB3b3JkcyBhcHBlYXIgaW4gdGhpcyBwaHJhc2UgKGluIGFueSBvcmRlcilcclxuXHRcdGNvbnN0IGFsbFdvcmRzRm91bmQgPSBrZXl3b3JkV29yZHMuZXZlcnkod29yZCA9PiBwaHJhc2UuaW5jbHVkZXMod29yZCkpO1xyXG5cdFx0aWYgKGFsbFdvcmRzRm91bmQpIHtcclxuXHRcdFx0a2V5d29yZENvdW50Kys7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBDb3VudCB0b3RhbCB3b3Jkc1xyXG5cdGNvbnN0IHdvcmRzID0gY2xlYW5Db250ZW50LnNwbGl0KC9cXHMrLykuZmlsdGVyKHdvcmQgPT4gd29yZC5sZW5ndGggPiAwKTtcclxuXHRjb25zdCB0b3RhbFdvcmRzID0gd29yZHMubGVuZ3RoO1xyXG5cclxuXHRpZiAodG90YWxXb3JkcyA9PT0gMCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0bWVzc2FnZTogXCJObyBjb250ZW50IGZvdW5kIGZvciBrZXl3b3JkIGFuYWx5c2lzXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IGRlbnNpdHkgPSAoa2V5d29yZENvdW50IC8gdG90YWxXb3JkcykgKiAxMDA7XHJcblxyXG5cdGlmIChkZW5zaXR5IDwgc2V0dGluZ3Mua2V5d29yZERlbnNpdHlNaW4pIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IGBLZXl3b3JkIGRlbnNpdHkgdG9vIGxvdzogJHtkZW5zaXR5LnRvRml4ZWQoMSl9JWAsXHJcblx0XHRcdHN1Z2dlc3Rpb246IGBBaW0gZm9yIGF0IGxlYXN0ICR7c2V0dGluZ3Mua2V5d29yZERlbnNpdHlNaW59JSBkZW5zaXR5YCxcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIGlmIChkZW5zaXR5ID4gc2V0dGluZ3Mua2V5d29yZERlbnNpdHlNYXgpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IGBLZXl3b3JkIGRlbnNpdHkgdG9vIGhpZ2g6ICR7ZGVuc2l0eS50b0ZpeGVkKDEpfSVgLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBgQWltIGZvciBubyBtb3JlIHRoYW4gJHtzZXR0aW5ncy5rZXl3b3JkRGVuc2l0eU1heH0lIGRlbnNpdHlgLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgR29vZCBrZXl3b3JkIGRlbnNpdHk6ICR7ZGVuc2l0eS50b0ZpeGVkKDEpfSVgLFxyXG5cdFx0XHRzZXZlcml0eTogJ2luZm8nXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYga2V5d29yZCBhcHBlYXJzIGluIHRpdGxlXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrcyBpZiB0YXJnZXQga2V5d29yZCBhcHBlYXJzIGluIG1ldGEgZGVzY3JpcHRpb25cclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tLZXl3b3JkSW5EZXNjcmlwdGlvbihjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblxyXG5cdGlmICghc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5IHx8ICFzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcblx0aWYgKCFmcm9udG1hdHRlck1hdGNoKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdGlmICghZnJvbnRtYXR0ZXIpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHQvLyBQYXJzZSBsaW5lIGJ5IGxpbmUgaW5zdGVhZCBvZiB1c2luZyByZWdleFxyXG5cdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cdGxldCBrZXl3b3JkID0gJyc7XHJcblx0bGV0IGZvdW5kS2V5d29yZExpbmUgPSBmYWxzZTtcclxuXHJcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRpZiAobGluZS5zdGFydHNXaXRoKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSArICc6JykpIHtcclxuXHRcdFx0Zm91bmRLZXl3b3JkTGluZSA9IHRydWU7XHJcblx0XHRcdGtleXdvcmQgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICghZm91bmRLZXl3b3JkTGluZSB8fCAha2V5d29yZCB8fCBrZXl3b3JkID09PSAnZmFsc2UnIHx8IGtleXdvcmQgPT09ICd0cnVlJyB8fCBrZXl3b3JkID09PSAnbnVsbCcgfHwga2V5d29yZCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuXHRcdC8vIE5vIHZhbGlkIGtleXdvcmQsIHNraXAgdGhpcyBjaGVja1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8vIEdldCBkZXNjcmlwdGlvbiBmcm9tIGZyb250bWF0dGVyXHJcblx0bGV0IGRlc2NyaXB0aW9uID0gJyc7XHJcblx0bGV0IGZvdW5kRGVzY3JpcHRpb25MaW5lID0gZmFsc2U7XHJcblxyXG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG5cdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRmb3VuZERlc2NyaXB0aW9uTGluZSA9IHRydWU7XHJcblx0XHRcdGRlc2NyaXB0aW9uID0gbGluZS5zdWJzdHJpbmcoc2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eS5sZW5ndGggKyAxKS50cmltKCk7XHJcblx0XHRcdC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdFx0XHRpZiAoKGRlc2NyaXB0aW9uLnN0YXJ0c1dpdGgoJ1wiJykgJiYgZGVzY3JpcHRpb24uZW5kc1dpdGgoJ1wiJykpIHx8XHJcblx0XHRcdFx0KGRlc2NyaXB0aW9uLnN0YXJ0c1dpdGgoXCInXCIpICYmIGRlc2NyaXB0aW9uLmVuZHNXaXRoKFwiJ1wiKSkpIHtcclxuXHRcdFx0XHRkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnNsaWNlKDEsIC0xKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICghZm91bmREZXNjcmlwdGlvbkxpbmUpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gZGVzY3JpcHRpb24gZm91bmRcIixcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJBZGQgYSBtZXRhIGRlc2NyaXB0aW9uIHRvIHlvdXIgcHJvcGVydGllc1wiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHQvLyBDaGVjayBpZiBrZXl3b3JkIGFwcGVhcnMgaW4gZGVzY3JpcHRpb24gKGNhc2UtaW5zZW5zaXRpdmUsIGZsZXhpYmxlIG1hdGNoaW5nKVxyXG5cdGNvbnN0IGtleXdvcmRMb3dlciA9IGtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuXHRjb25zdCBkZXNjcmlwdGlvbkxvd2VyID0gZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKTtcclxuXHJcblx0Ly8gRmlyc3QgY2hlY2sgaWYgdGhlIGZ1bGwga2V5d29yZCBwaHJhc2UgYXBwZWFycyAoZXhhY3QgcGhyYXNlIG1hdGNoKVxyXG5cdGNvbnN0IGZ1bGxQaHJhc2VGb3VuZCA9IGRlc2NyaXB0aW9uTG93ZXIuaW5jbHVkZXMoa2V5d29yZExvd2VyKTtcclxuXHJcblx0Ly8gQWxzbyBjaGVjayBpZiBhbGwga2V5d29yZCB3b3JkcyBhcHBlYXIgaW5kaXZpZHVhbGx5IChmbGV4aWJsZSBtYXRjaGluZylcclxuXHRjb25zdCBrZXl3b3JkV29yZHMgPSBrZXl3b3JkTG93ZXIuc3BsaXQoL1xccysvKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDApO1xyXG5cdGNvbnN0IGFsbFdvcmRzRm91bmQgPSBrZXl3b3JkV29yZHMuZXZlcnkod29yZCA9PiBkZXNjcmlwdGlvbkxvd2VyLmluY2x1ZGVzKHdvcmQpKTtcclxuXHJcblx0Ly8gUGFzcyBpZiBlaXRoZXIgdGhlIGZ1bGwgcGhyYXNlIGlzIGZvdW5kIE9SIGFsbCB3b3JkcyBhcmUgZm91bmRcclxuXHRjb25zdCBrZXl3b3JkRm91bmQgPSBmdWxsUGhyYXNlRm91bmQgfHwgYWxsV29yZHNGb3VuZDtcclxuXHJcblx0aWYgKGtleXdvcmRGb3VuZCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgS2V5d29yZCBmb3VuZCBpbiBkZXNjcmlwdGlvbmAsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgS2V5d29yZCBub3QgZm91bmQgaW4gZGVzY3JpcHRpb25gLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkluY2x1ZGUgeW91ciB0YXJnZXQga2V5d29yZCBpbiB0aGUgZGVzY3JpcHRpb25cIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2tzIGlmIG1ldGEgdGl0bGUgYW5kIEgxIGFyZSB1bmlxdWUgKG5vdCBpZGVudGljYWwpXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrVGl0bGVIMVVuaXF1ZW5lc3MoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cclxuXHRpZiAoIXNldHRpbmdzLnRpdGxlUHJvcGVydHkpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xyXG5cdGlmICghZnJvbnRtYXR0ZXJNYXRjaCkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdGNvbnN0IGZyb250bWF0dGVyID0gZnJvbnRtYXR0ZXJNYXRjaFsxXTtcclxuXHRpZiAoIWZyb250bWF0dGVyKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IHRpdGxlIGZyb20gZnJvbnRtYXR0ZXJcclxuXHRsZXQgbWV0YVRpdGxlID0gJyc7XHJcblx0Y29uc3QgbGluZXMgPSBmcm9udG1hdHRlci5zcGxpdCgnXFxuJyk7XHJcblxyXG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG5cdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy50aXRsZVByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRtZXRhVGl0bGUgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy50aXRsZVByb3BlcnR5Lmxlbmd0aCArIDEpLnRyaW0oKTtcclxuXHRcdFx0Ly8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XHJcblx0XHRcdGlmICgobWV0YVRpdGxlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgbWV0YVRpdGxlLmVuZHNXaXRoKCdcIicpKSB8fFxyXG5cdFx0XHRcdChtZXRhVGl0bGUuc3RhcnRzV2l0aChcIidcIikgJiYgbWV0YVRpdGxlLmVuZHNXaXRoKFwiJ1wiKSkpIHtcclxuXHRcdFx0XHRtZXRhVGl0bGUgPSBtZXRhVGl0bGUuc2xpY2UoMSwgLTEpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKCFtZXRhVGl0bGUpIHtcclxuXHRcdC8vIE5vIHRpdGxlIGZvdW5kIGluIGZyb250bWF0dGVyIC0gdGhpcyBjaGVjayByZXF1aXJlcyBhIHRpdGxlIHRvIGJlIG1lYW5pbmdmdWxcclxuXHRcdC8vIFNraXAgc2lsZW50bHkgYXMgdGhpcyBpcyBleHBlY3RlZCBiZWhhdmlvciB3aGVuIG5vIHRpdGxlIGlzIHNldFxyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8vIEdldCBIMSBoZWFkaW5nXHJcblx0bGV0IGgxSGVhZGluZyA9ICcnO1xyXG5cclxuXHQvLyBJZiBcIlRpdGxlIHByb3BlcnR5IGlzIEgxXCIgaXMgZW5hYmxlZCwgdXNlIHRoZSB0aXRsZSBhcyBIMVxyXG5cdGlmIChzZXR0aW5ncy5za2lwSDFDaGVjaykge1xyXG5cdFx0Ly8gSWYgdGhlcmUncyBhIHByZWZpeC9zdWZmaXggY29uZmlndXJlZCwgdGhleSB3aWxsIGFsd2F5cyBiZSBkaWZmZXJlbnRcclxuXHRcdGlmIChzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeCAmJiBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeC50cmltKCkpIHtcclxuXHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdFx0bWVzc2FnZTogXCJNZXRhIHRpdGxlIGFuZCBIMSBhcmUgdW5pcXVlIChwcmVmaXgvc3VmZml4IGNvbmZpZ3VyZWQpXCIsXHJcblx0XHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBUaGUgSDEgaXMgdGhlIHRpdGxlIHdpdGhvdXQgcHJlZml4L3N1ZmZpeFxyXG5cdFx0aDFIZWFkaW5nID0gbWV0YVRpdGxlO1xyXG5cdFx0Ly8gUmVtb3ZlIHByZWZpeC9zdWZmaXggaWYgc3BlY2lmaWVkIHRvIGdldCB0aGUgYWN0dWFsIEgxIGNvbnRlbnRcclxuXHRcdGlmIChzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeCkge1xyXG5cdFx0XHRjb25zdCBwcmVmaXhTdWZmaXggPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeDtcclxuXHRcdFx0Ly8gUmVtb3ZlIHByZWZpeFxyXG5cdFx0XHRpZiAoaDFIZWFkaW5nLnN0YXJ0c1dpdGgocHJlZml4U3VmZml4KSkge1xyXG5cdFx0XHRcdGgxSGVhZGluZyA9IGgxSGVhZGluZy5zdWJzdHJpbmcocHJlZml4U3VmZml4Lmxlbmd0aCkudHJpbSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFJlbW92ZSBzdWZmaXhcclxuXHRcdFx0aWYgKGgxSGVhZGluZy5lbmRzV2l0aChwcmVmaXhTdWZmaXgpKSB7XHJcblx0XHRcdFx0aDFIZWFkaW5nID0gaDFIZWFkaW5nLnN1YnN0cmluZygwLCBoMUhlYWRpbmcubGVuZ3RoIC0gcHJlZml4U3VmZml4Lmxlbmd0aCkudHJpbSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvLyBOb3cgbWV0YVRpdGxlIGhhcyBwcmVmaXgvc3VmZml4LCBoMUhlYWRpbmcgZG9lc24ndCAtIHRoZXkgc2hvdWxkIGJlIGRpZmZlcmVudFxyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBMb29rIGZvciBhY3R1YWwgSDEgaW4gY29udGVudFxyXG5cdFx0Y29uc3QgY29udGVudExpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcblx0XHRmb3IgKGNvbnN0IGxpbmUgb2YgY29udGVudExpbmVzKSB7XHJcblx0XHRcdGlmICghbGluZSkgY29udGludWU7XHJcblx0XHRcdGNvbnN0IGgxTWF0Y2ggPSBsaW5lLm1hdGNoKC9eI1xccysoLispJC8pO1xyXG5cdFx0XHRpZiAoaDFNYXRjaCAmJiBoMU1hdGNoWzFdKSB7XHJcblx0XHRcdFx0aDFIZWFkaW5nID0gaDFNYXRjaFsxXS50cmltKCk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICghaDFIZWFkaW5nKSB7XHJcblx0XHQvLyBObyBIMSBmb3VuZCAtIHRoaXMgc2hvdWxkIGJlIGZsYWdnZWQgYXMgYSB3YXJuaW5nXHJcblx0XHQvLyBUaGUgaGVhZGluZyBvcmRlciBjaGVjayBzaG91bGQgYWxyZWFkeSBjYXRjaCBtaXNzaW5nIEgxLCBidXQgdGhpcyBwcm92aWRlcyBjb250ZXh0XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIEgxIGhlYWRpbmcgZm91bmQgdG8gY29tcGFyZSB3aXRoIG1ldGEgdGl0bGVcIixcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJBZGQgYW4gSDEgaGVhZGluZyB0byB5b3VyIGNvbnRlbnQsIG9yIGVuYWJsZSAnVGl0bGUgcHJvcGVydHkgaXMgSDEnIGlmIHlvdXIgc3RhdGljIHNpdGUgZ2VuZXJhdG9yIGNyZWF0ZXMgSDFzIGZyb20gdGhlIHRpdGxlXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnd2FybmluZydcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8vIENvbXBhcmUgbWV0YSB0aXRsZSBhbmQgSDFcclxuXHRjb25zdCBtZXRhVGl0bGVMb3dlciA9IG1ldGFUaXRsZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuXHRjb25zdCBoMUxvd2VyID0gaDFIZWFkaW5nLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG5cclxuXHRpZiAobWV0YVRpdGxlTG93ZXIgPT09IGgxTG93ZXIpIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTWV0YSB0aXRsZSBhbmQgSDEgYXJlIGlkZW50aWNhbFwiLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIk1vZGlmeSBvbmUgdG8gYmUgdW5pcXVlLCBvciBzcGVjaWZ5IGEgc3VmZml4L3ByZWZpeCBpbiBwbHVnaW4gc2V0dGluZ3NcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogXCJNZXRhIHRpdGxlIGFuZCBIMSBhcmUgdW5pcXVlXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiB0YXJnZXQga2V5d29yZCBhcHBlYXJzIGluIGFueSBoZWFkaW5nIChIMS1INilcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tLZXl3b3JkSW5IZWFkaW5ncyhjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblxyXG5cdGlmICghc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRpZiAoIWZyb250bWF0dGVyTWF0Y2gpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHRjb25zdCBmcm9udG1hdHRlciA9IGZyb250bWF0dGVyTWF0Y2hbMV07XHJcblx0aWYgKCFmcm9udG1hdHRlcikge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8vIFBhcnNlIGxpbmUgYnkgbGluZSBpbnN0ZWFkIG9mIHVzaW5nIHJlZ2V4XHJcblx0Y29uc3QgbGluZXMgPSBmcm9udG1hdHRlci5zcGxpdCgnXFxuJyk7XHJcblx0bGV0IGtleXdvcmQgPSAnJztcclxuXHRsZXQgZm91bmRLZXl3b3JkTGluZSA9IGZhbHNlO1xyXG5cclxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuXHRcdGlmIChsaW5lLnN0YXJ0c1dpdGgoc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRmb3VuZEtleXdvcmRMaW5lID0gdHJ1ZTtcclxuXHRcdFx0a2V5d29yZCA9IGxpbmUuc3Vic3RyaW5nKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eS5sZW5ndGggKyAxKS50cmltKCk7XHJcblx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKCFmb3VuZEtleXdvcmRMaW5lKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBObyAke3NldHRpbmdzLmtleXdvcmRQcm9wZXJ0eX0gZGVmaW5lZCBpbiBwcm9wZXJ0aWVzYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdub3RpY2UnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHRpZiAoIWtleXdvcmQgfHwga2V5d29yZCA9PT0gJ2ZhbHNlJyB8fCBrZXl3b3JkID09PSAndHJ1ZScgfHwga2V5d29yZCA9PT0gJ251bGwnIHx8IGtleXdvcmQgPT09ICd1bmRlZmluZWQnKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBObyB2YWxpZCBrZXl3b3JkIGRlZmluZWQgaW4gcHJvcGVydGllc2AsXHJcblx0XHRcdHNldmVyaXR5OiAnbm90aWNlJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Ly8gRXh0cmFjdCBIMSBoZWFkaW5ncyBvbmx5IChtb3N0IGltcG9ydGFudCBmb3IgU0VPKVxyXG5cdGNvbnN0IGgxSGVhZGluZ3M6IHsgdGV4dDogc3RyaW5nIH1bXSA9IFtdO1xyXG5cclxuXHQvLyBJZiBcIlRpdGxlIHByb3BlcnR5IGlzIEgxXCIgaXMgZW5hYmxlZCwgYWRkIHRoZSB0aXRsZSBhcyBhIHZpcnR1YWwgSDFcclxuXHRpZiAoc2V0dGluZ3Muc2tpcEgxQ2hlY2sgJiYgc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSkge1xyXG5cdFx0Y29uc3QgdGl0bGVGcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS8pO1xyXG5cdFx0aWYgKHRpdGxlRnJvbnRtYXR0ZXJNYXRjaCAmJiB0aXRsZUZyb250bWF0dGVyTWF0Y2hbMV0pIHtcclxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aXRsZUZyb250bWF0dGVyTWF0Y2hbMV07XHJcblx0XHRcdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cclxuXHRcdFx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRcdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy50aXRsZVByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRcdFx0bGV0IHRpdGxlID0gbGluZS5zdWJzdHJpbmcoc2V0dGluZ3MudGl0bGVQcm9wZXJ0eS5sZW5ndGggKyAxKS50cmltKCk7XHJcblx0XHRcdFx0XHQvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnRcclxuXHRcdFx0XHRcdGlmICgodGl0bGUuc3RhcnRzV2l0aCgnXCInKSAmJiB0aXRsZS5lbmRzV2l0aCgnXCInKSkgfHxcclxuXHRcdFx0XHRcdFx0KHRpdGxlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHRpdGxlLmVuZHNXaXRoKFwiJ1wiKSkpIHtcclxuXHRcdFx0XHRcdFx0dGl0bGUgPSB0aXRsZS5zbGljZSgxLCAtMSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBSZW1vdmUgdGl0bGUgcHJlZml4L3N1ZmZpeCBpZiBzcGVjaWZpZWRcclxuXHRcdFx0XHRcdGlmIChzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeCkge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBwcmVmaXhTdWZmaXggPSBzZXR0aW5ncy50aXRsZVByZWZpeFN1ZmZpeDtcclxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHByZWZpeFxyXG5cdFx0XHRcdFx0XHRpZiAodGl0bGUuc3RhcnRzV2l0aChwcmVmaXhTdWZmaXgpKSB7XHJcblx0XHRcdFx0XHRcdFx0dGl0bGUgPSB0aXRsZS5zdWJzdHJpbmcocHJlZml4U3VmZml4Lmxlbmd0aCkudHJpbSgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdC8vIFJlbW92ZSBzdWZmaXhcclxuXHRcdFx0XHRcdFx0aWYgKHRpdGxlLmVuZHNXaXRoKHByZWZpeFN1ZmZpeCkpIHtcclxuXHRcdFx0XHRcdFx0XHR0aXRsZSA9IHRpdGxlLnN1YnN0cmluZygwLCB0aXRsZS5sZW5ndGggLSBwcmVmaXhTdWZmaXgubGVuZ3RoKS50cmltKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIEFkZCBhcyB2aXJ0dWFsIEgxXHJcblx0XHRcdFx0XHRoMUhlYWRpbmdzLnB1c2goeyB0ZXh0OiB0aXRsZSB9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gRmluZCBhY3R1YWwgSDEgaGVhZGluZ3MgaW4gY29udGVudFxyXG5cdGNvbnN0IGNvbnRlbnRMaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cclxuXHRmb3IgKGNvbnN0IGxpbmUgb2YgY29udGVudExpbmVzKSB7XHJcblx0XHRpZiAoIWxpbmUpIGNvbnRpbnVlO1xyXG5cdFx0Y29uc3QgaDFNYXRjaCA9IGxpbmUubWF0Y2goL14jXFxzKyguKykkLyk7XHJcblx0XHRpZiAoaDFNYXRjaCAmJiBoMU1hdGNoWzFdKSB7XHJcblx0XHRcdGgxSGVhZGluZ3MucHVzaCh7IHRleHQ6IGgxTWF0Y2hbMV0udHJpbSgpIH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKGgxSGVhZGluZ3MubGVuZ3RoID09PSAwKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIEgxIGhlYWRpbmcgZm91bmQgaW4gY29udGVudFwiLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkFkZCBhbiBIMSBoZWFkaW5nIHRvIHN0cnVjdHVyZSB5b3VyIGNvbnRlbnQgYW5kIGluY2x1ZGUgeW91ciB0YXJnZXQga2V5d29yZFwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHQvLyBDaGVjayBpZiBrZXl3b3JkIGFwcGVhcnMgaW4gYW55IEgxIGhlYWRpbmcgKGZsZXhpYmxlIG1hdGNoaW5nKVxyXG5cdGNvbnN0IGtleXdvcmRMb3dlciA9IGtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuXHRjb25zdCBrZXl3b3JkV29yZHMgPSBrZXl3b3JkTG93ZXIuc3BsaXQoL1xccysvKS5maWx0ZXIod29yZCA9PiB3b3JkLmxlbmd0aCA+IDApO1xyXG5cclxuXHRsZXQga2V5d29yZEZvdW5kSW5IMSA9IGZhbHNlO1xyXG5cclxuXHRmb3IgKGNvbnN0IGgxIG9mIGgxSGVhZGluZ3MpIHtcclxuXHRcdGNvbnN0IGgxTG93ZXIgPSBoMS50ZXh0LnRvTG93ZXJDYXNlKCk7XHJcblxyXG5cdFx0Ly8gRmlyc3QgY2hlY2sgaWYgdGhlIGZ1bGwga2V5d29yZCBwaHJhc2UgYXBwZWFycyAoZXhhY3QgcGhyYXNlIG1hdGNoKVxyXG5cdFx0Y29uc3QgZnVsbFBocmFzZUZvdW5kID0gaDFMb3dlci5pbmNsdWRlcyhrZXl3b3JkTG93ZXIpO1xyXG5cclxuXHRcdC8vIEFsc28gY2hlY2sgaWYgYWxsIGtleXdvcmQgd29yZHMgYXBwZWFyIGluZGl2aWR1YWxseSAoZmxleGlibGUgbWF0Y2hpbmcpXHJcblx0XHRjb25zdCBhbGxXb3Jkc0ZvdW5kID0ga2V5d29yZFdvcmRzLmV2ZXJ5KHdvcmQgPT4gaDFMb3dlci5pbmNsdWRlcyh3b3JkKSk7XHJcblxyXG5cdFx0Ly8gUGFzcyBpZiBlaXRoZXIgdGhlIGZ1bGwgcGhyYXNlIGlzIGZvdW5kIE9SIGFsbCB3b3JkcyBhcmUgZm91bmRcclxuXHRcdGlmIChmdWxsUGhyYXNlRm91bmQgfHwgYWxsV29yZHNGb3VuZCkge1xyXG5cdFx0XHRrZXl3b3JkRm91bmRJbkgxID0gdHJ1ZTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpZiAoa2V5d29yZEZvdW5kSW5IMSkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgS2V5d29yZCBmb3VuZCBpbiBIMWAsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgS2V5d29yZCBub3QgZm91bmQgaW4gSDFgLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkluY2x1ZGUgeW91ciB0YXJnZXQga2V5d29yZCBpbiB0aGUgSDEgaGVhZGluZyBmb3IgYmV0dGVyIFNFT1wiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0tleXdvcmRJblRpdGxlKGNvbnRlbnQ6IHN0cmluZywgZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHJcblx0aWYgKCFzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkgfHwgIXNldHRpbmdzLnRpdGxlUHJvcGVydHkpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IGtleXdvcmQgZnJvbSBmcm9udG1hdHRlclxyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcblx0aWYgKCFmcm9udG1hdHRlck1hdGNoKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdGlmICghZnJvbnRtYXR0ZXIpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHQvLyBQYXJzZSBsaW5lIGJ5IGxpbmUgaW5zdGVhZCBvZiB1c2luZyByZWdleFxyXG5cdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cdGxldCBrZXl3b3JkID0gJyc7XHJcblx0bGV0IGZvdW5kS2V5d29yZExpbmUgPSBmYWxzZTtcclxuXHRsZXQgdGl0bGUgPSAnJztcclxuXHRsZXQgZm91bmRUaXRsZUxpbmUgPSBmYWxzZTtcclxuXHJcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRpZiAobGluZS5zdGFydHNXaXRoKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSArICc6JykpIHtcclxuXHRcdFx0Zm91bmRLZXl3b3JkTGluZSA9IHRydWU7XHJcblx0XHRcdGtleXdvcmQgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG5cdFx0aWYgKGxpbmUuc3RhcnRzV2l0aChzZXR0aW5ncy50aXRsZVByb3BlcnR5ICsgJzonKSkge1xyXG5cdFx0XHRmb3VuZFRpdGxlTGluZSA9IHRydWU7XHJcblx0XHRcdHRpdGxlID0gbGluZS5zdWJzdHJpbmcoc2V0dGluZ3MudGl0bGVQcm9wZXJ0eS5sZW5ndGggKyAxKS50cmltKCk7XHJcblx0XHRcdC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdFx0XHRpZiAoKHRpdGxlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdGl0bGUuZW5kc1dpdGgoJ1wiJykpIHx8XHJcblx0XHRcdFx0KHRpdGxlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHRpdGxlLmVuZHNXaXRoKFwiJ1wiKSkpIHtcclxuXHRcdFx0XHR0aXRsZSA9IHRpdGxlLnNsaWNlKDEsIC0xKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICghZm91bmRLZXl3b3JkTGluZSkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gJHtzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHl9IGRlZmluZWQgaW4gcHJvcGVydGllc2AsXHJcblx0XHRcdHNldmVyaXR5OiAnbm90aWNlJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0aWYgKCFrZXl3b3JkIHx8IGtleXdvcmQgPT09ICdmYWxzZScgfHwga2V5d29yZCA9PT0gJ3RydWUnIHx8IGtleXdvcmQgPT09ICdudWxsJyB8fCBrZXl3b3JkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gdmFsaWQga2V5d29yZCBkZWZpbmVkIGluIHByb3BlcnRpZXNgLFxyXG5cdFx0XHRzZXZlcml0eTogJ25vdGljZSdcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8vIFNraXAgY2hlY2sgaWYgbm8gdGl0bGUgZm91bmRcclxuXHRpZiAoIWZvdW5kVGl0bGVMaW5lIHx8ICF0aXRsZSkge1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8vIENoZWNrIGlmIGtleXdvcmQgYXBwZWFycyBpbiB0aXRsZSAoY2FzZS1pbnNlbnNpdGl2ZSwgZ2VuZXJvdXMgbWF0Y2hpbmcpXHJcblx0Y29uc3QgdGl0bGVMb3dlciA9IHRpdGxlLnRvTG93ZXJDYXNlKCk7XHJcblx0Y29uc3Qga2V5d29yZExvd2VyID0ga2V5d29yZC50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHQvLyBGaXJzdCBjaGVjayBpZiB0aGUgZnVsbCBrZXl3b3JkIHBocmFzZSBhcHBlYXJzIChleGFjdCBwaHJhc2UgbWF0Y2gpXHJcblx0Y29uc3QgZnVsbFBocmFzZUZvdW5kID0gdGl0bGVMb3dlci5pbmNsdWRlcyhrZXl3b3JkTG93ZXIpO1xyXG5cclxuXHQvLyBBbHNvIGNoZWNrIGlmIGFsbCBrZXl3b3JkIHdvcmRzIGFwcGVhciBpbmRpdmlkdWFsbHkgKGZsZXhpYmxlIG1hdGNoaW5nKVxyXG5cdGNvbnN0IGtleXdvcmRXb3JkcyA9IGtleXdvcmRMb3dlci5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcblx0Y29uc3QgYWxsV29yZHNGb3VuZCA9IGtleXdvcmRXb3Jkcy5ldmVyeSh3b3JkID0+IHRpdGxlTG93ZXIuaW5jbHVkZXMod29yZCkpO1xyXG5cclxuXHQvLyBQYXNzIGlmIGVpdGhlciB0aGUgZnVsbCBwaHJhc2UgaXMgZm91bmQgT1IgYWxsIHdvcmRzIGFyZSBmb3VuZFxyXG5cdGNvbnN0IGtleXdvcmRGb3VuZCA9IGZ1bGxQaHJhc2VGb3VuZCB8fCBhbGxXb3Jkc0ZvdW5kO1xyXG5cclxuXHRpZiAoa2V5d29yZEZvdW5kKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IGBLZXl3b3JkIGZvdW5kIGluIHRpdGxlYCxcclxuXHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdG1lc3NhZ2U6IGBLZXl3b3JkIG5vdCBmb3VuZCBpbiB0aXRsZWAsXHJcblx0XHRcdHN1Z2dlc3Rpb246IFwiSW5jbHVkZSB5b3VyIHRhcmdldCBrZXl3b3JkIGluIHRoZSB0aXRsZVwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgdGFyZ2V0IGtleXdvcmQgYXBwZWFycyBpbiB0aGUgZmlsZSBzbHVnXHJcbiAqIEBwYXJhbSBjb250ZW50IC0gVGhlIG1hcmtkb3duIGNvbnRlbnQgdG8gY2hlY2tcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSBiZWluZyBjaGVja2VkXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBTRU8gY2hlY2sgcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrS2V5d29yZEluU2x1Zyhjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblxyXG5cdGlmICghc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5KSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Ly8gR2V0IGtleXdvcmQgZnJvbSBmcm9udG1hdHRlclxyXG5cdGNvbnN0IGZyb250bWF0dGVyTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcblx0aWYgKCFmcm9udG1hdHRlck1hdGNoKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cdGlmICghZnJvbnRtYXR0ZXIpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHQvLyBQYXJzZSBsaW5lIGJ5IGxpbmUgaW5zdGVhZCBvZiB1c2luZyByZWdleFxyXG5cdGNvbnN0IGxpbmVzID0gZnJvbnRtYXR0ZXIuc3BsaXQoJ1xcbicpO1xyXG5cdGxldCBrZXl3b3JkID0gJyc7XHJcblx0bGV0IGZvdW5kS2V5d29yZExpbmUgPSBmYWxzZTtcclxuXHJcblx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRpZiAobGluZS5zdGFydHNXaXRoKHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSArICc6JykpIHtcclxuXHRcdFx0Zm91bmRLZXl3b3JkTGluZSA9IHRydWU7XHJcblx0XHRcdGtleXdvcmQgPSBsaW5lLnN1YnN0cmluZyhzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHkubGVuZ3RoICsgMSkudHJpbSgpO1xyXG5cdFx0XHRicmVhaztcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICghZm91bmRLZXl3b3JkTGluZSkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gJHtzZXR0aW5ncy5rZXl3b3JkUHJvcGVydHl9IGRlZmluZWQgaW4gcHJvcGVydGllc2AsXHJcblx0XHRcdHNldmVyaXR5OiAnbm90aWNlJ1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG5cdH1cclxuXHJcblx0Ly8gVmFsaWRhdGUgdGhhdCB0aGUga2V5d29yZCBpcyBtZWFuaW5nZnVsIChub3QganVzdCBhIGJvb2xlYW4gb3IgZW1wdHkpXHJcblx0aWYgKCFrZXl3b3JkIHx8IGtleXdvcmQgPT09ICdmYWxzZScgfHwga2V5d29yZCA9PT0gJ3RydWUnIHx8IGtleXdvcmQgPT09ICdudWxsJyB8fCBrZXl3b3JkID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgTm8gdmFsaWQga2V5d29yZCBkZWZpbmVkIGluIHByb3BlcnRpZXNgLFxyXG5cdFx0XHRzZXZlcml0eTogJ25vdGljZSdcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHRzKTtcclxuXHR9XHJcblxyXG5cdC8vIEdldCB0aGUgZmlsZSBzbHVnIChmaWxlbmFtZSB3aXRob3V0IGV4dGVuc2lvbilcclxuXHRjb25zdCBzbHVnID0gZmlsZS5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdGNvbnN0IGtleXdvcmRMb3dlciA9IGtleXdvcmQudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0Ly8gQ2hlY2sgaWYga2V5d29yZCBhcHBlYXJzIGluIHNsdWcgKGNhc2UtaW5zZW5zaXRpdmUsIGdlbmVyb3VzIG1hdGNoaW5nKVxyXG5cdGNvbnN0IGtleXdvcmRXb3JkcyA9IGtleXdvcmRMb3dlci5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcblx0Y29uc3QgYWxsV29yZHNGb3VuZCA9IGtleXdvcmRXb3Jkcy5ldmVyeSh3b3JkID0+IHNsdWcuaW5jbHVkZXMod29yZCkpO1xyXG5cclxuXHRpZiAoYWxsV29yZHNGb3VuZCkge1xyXG5cdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRtZXNzYWdlOiBgVGFyZ2V0IGtleXdvcmQgXCIke2tleXdvcmR9XCIgZm91bmQgaW4gc2x1Z2AsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBgVGFyZ2V0IGtleXdvcmQgXCIke2tleXdvcmR9XCIgbm90IGZvdW5kIGluIHNsdWdgLFxyXG5cdFx0XHRzdWdnZXN0aW9uOiBcIkluY2x1ZGUgeW91ciB0YXJnZXQga2V5d29yZCBpbiB0aGUgZmlsZW5hbWVcIixcclxuXHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJ1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcbiIsICIvKipcclxuICogSGVhZGluZyBzdHJ1Y3R1cmUgdmFsaWRhdGlvbiBjaGVja3NcclxuICogQ2hlY2tzIGZvciBwcm9wZXIgaGVhZGluZyBoaWVyYXJjaHkgYW5kIEgxIHVzYWdlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgU0VPQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgZ2V0Q29udGV4dEFyb3VuZExpbmUgfSBmcm9tIFwiLi91dGlscy9wb3NpdGlvbi11dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBoZWFkaW5nIG9yZGVyIGFuZCBoaWVyYXJjaHlcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tIZWFkaW5nT3JkZXIoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFxyXG5cdGlmICghc2V0dGluZ3MuY2hlY2tIZWFkaW5nT3JkZXIpIHtcclxuXHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xyXG5cdH1cclxuXHRcclxuXHQvLyBXb3JrIHdpdGggb3JpZ2luYWwgY29udGVudCBmb3IgYWNjdXJhdGUgbGluZSBudW1iZXJzXHJcblx0Y29uc3Qgb3JpZ2luYWxMaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cdGxldCBsYXN0SGVhZGluZ0xldmVsID0gbnVsbDtcclxuXHRsZXQgaGFzSGVhZGluZyA9IGZhbHNlO1xyXG5cdGxldCBoYXNIMSA9IGZhbHNlO1xyXG5cdGxldCBpbkNvZGVCbG9jayA9IGZhbHNlO1xyXG5cdFxyXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgb3JpZ2luYWxMaW5lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0Y29uc3QgbGluZSA9IG9yaWdpbmFsTGluZXNbaV07XHJcblx0XHRpZiAoIWxpbmUpIGNvbnRpbnVlO1xyXG5cdFx0XHJcblx0XHQvLyBUcmFjayBjb2RlIGJsb2NrIHN0YXRlXHJcblx0XHRjb25zdCBjb2RlQmxvY2tNYXRjaCA9IGxpbmUubWF0Y2goL15gYGAoXFx3Kyk/Lyk7XHJcblx0XHRpZiAoY29kZUJsb2NrTWF0Y2gpIHtcclxuXHRcdFx0aWYgKGluQ29kZUJsb2NrKSB7XHJcblx0XHRcdFx0Ly8gRW5kIG9mIGNvZGUgYmxvY2tcclxuXHRcdFx0XHRpbkNvZGVCbG9jayA9IGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIFN0YXJ0IG9mIGNvZGUgYmxvY2tcclxuXHRcdFx0XHRpbkNvZGVCbG9jayA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0Y29udGludWU7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFNraXAgaGVhZGluZ3MgaW5zaWRlIGNvZGUgYmxvY2tzXHJcblx0XHRpZiAoaW5Db2RlQmxvY2spIHtcclxuXHRcdFx0Y29udGludWU7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IGhlYWRpbmdNYXRjaCA9IGxpbmUubWF0Y2goL14oI3sxLDZ9KVxccysoLispLyk7XHJcblx0XHRcclxuXHRcdGlmIChoZWFkaW5nTWF0Y2ggJiYgaGVhZGluZ01hdGNoWzFdICYmIGhlYWRpbmdNYXRjaFsyXSkge1xyXG5cdFx0XHRoYXNIZWFkaW5nID0gdHJ1ZTtcclxuXHRcdFx0Y29uc3QgY3VycmVudExldmVsID0gaGVhZGluZ01hdGNoWzFdLmxlbmd0aDtcclxuXHRcdFx0Y29uc3QgaGVhZGluZ1RleHQgPSBoZWFkaW5nTWF0Y2hbMl0udHJpbSgpO1xyXG5cdFx0XHRjb25zdCBsaW5lTnVtYmVyID0gaSArIDE7IC8vIDEtYmFzZWQgbGluZSBudW1iZXIgZnJvbSBvcmlnaW5hbCBjb250ZW50XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcmFjayBpZiB3ZSBoYXZlIGFuIEgxXHJcblx0XHRcdGlmIChjdXJyZW50TGV2ZWwgPT09IDEpIHtcclxuXHRcdFx0XHRoYXNIMSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGhlYWRpbmcsIGRvbid0IGNoZWNrIGZvciB2aW9sYXRpb25zIHlldFxyXG5cdFx0XHRpZiAobGFzdEhlYWRpbmdMZXZlbCA9PT0gbnVsbCkge1xyXG5cdFx0XHRcdGxhc3RIZWFkaW5nTGV2ZWwgPSBjdXJyZW50TGV2ZWw7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIENoZWNrIGlmIGN1cnJlbnQgbGV2ZWwgc2tpcHMgbGV2ZWxzIGFmdGVyIHRoZSBsYXN0IGhlYWRpbmdcclxuXHRcdFx0aWYgKGN1cnJlbnRMZXZlbCA+IGxhc3RIZWFkaW5nTGV2ZWwgKyAxKSB7XHJcblx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRtZXNzYWdlOiBgXCIke2hlYWRpbmdUZXh0fVwiIChIJHtjdXJyZW50TGV2ZWx9KSBza2lwcyBoZWFkaW5nIGxldmVsKHMpIGFmdGVyIEgke2xhc3RIZWFkaW5nTGV2ZWx9YCxcclxuXHRcdFx0XHRcdHN1Z2dlc3Rpb246IFwiVXNlIGhlYWRpbmcgbGV2ZWxzIGluIG9yZGVyIChIMSBcdTIxOTIgSDIgXHUyMTkyIEgzLCBldGMuKVwiLFxyXG5cdFx0XHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJyxcclxuXHRcdFx0XHRcdHBvc2l0aW9uOiB7XHJcblx0XHRcdFx0XHRcdGxpbmU6IGxpbmVOdW1iZXIsXHJcblx0XHRcdFx0XHRcdHNlYXJjaFRleHQ6IGxpbmUsXHJcblx0XHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIElmIEgxIGFwcGVhcnMgYWZ0ZXIgb3RoZXIgaGVhZGluZyBsZXZlbHMsIGZsYWcgaXRcclxuXHRcdFx0aWYgKGN1cnJlbnRMZXZlbCA9PT0gMSAmJiBsYXN0SGVhZGluZ0xldmVsID4gMSkge1xyXG5cdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0bWVzc2FnZTogYFwiJHtoZWFkaW5nVGV4dH1cIiAoSDEpIGFwcGVhcnMgYWZ0ZXIgSCR7bGFzdEhlYWRpbmdMZXZlbH1gLFxyXG5cdFx0XHRcdFx0c3VnZ2VzdGlvbjogXCJIMSBzaG91bGQgYmUgdGhlIGZpcnN0IGhlYWRpbmcgb3Igbm90IHVzZWQgYXQgYWxsXCIsXHJcblx0XHRcdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnLFxyXG5cdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0c2VhcmNoVGV4dDogbGluZSxcclxuXHRcdFx0XHRcdFx0Y29udGV4dDogZ2V0Q29udGV4dEFyb3VuZExpbmUoY29udGVudCwgbGluZU51bWJlcilcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0bGFzdEhlYWRpbmdMZXZlbCA9IGN1cnJlbnRMZXZlbDtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gQ2hlY2sgZm9yIG1pc3NpbmcgSDEgaWYgc2tpcEgxQ2hlY2sgaXMgZmFsc2UgLSBhZGQgdGhpcyBGSVJTVCBpZiBpdCBleGlzdHNcclxuXHRpZiAoaGFzSGVhZGluZyAmJiAhc2V0dGluZ3Muc2tpcEgxQ2hlY2sgJiYgIWhhc0gxKSB7XHJcblx0XHRyZXN1bHRzLnVuc2hpZnQoe1xyXG5cdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRtZXNzYWdlOiBcIk5vIEgxIGhlYWRpbmcgZm91bmRcIixcclxuXHRcdFx0c3VnZ2VzdGlvbjogXCJBZGQgYW4gSDEgaGVhZGluZyBhdCB0aGUgYmVnaW5uaW5nIG9mIHlvdXIgY29udGVudFwiLFxyXG5cdFx0XHRzZXZlcml0eTogJ3dhcm5pbmcnXHJcblx0XHRcdC8vIE5vIHBvc2l0aW9uIGluZm8gc2luY2UgdGhlcmUncyBubyBIMSB0byBqdW1wIHRvXHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0aWYgKCFoYXNIZWFkaW5nKSB7XHJcblx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdG1lc3NhZ2U6IFwiTm8gaGVhZGluZyBzdHJ1Y3R1cmUgaXNzdWVzIGZvdW5kXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSBpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogXCJIZWFkaW5nIHN0cnVjdHVyZSBpcyBjb3JyZWN0XCIsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcbiIsICIvKipcclxuICogSW1hZ2UgdmFsaWRhdGlvbiBjaGVja3NcclxuICogQ2hlY2tzIGZvciBpbWFnZSBuYW1pbmcgY29udmVudGlvbnMgYW5kIGZpbGUgbmFtaW5nIGJlc3QgcHJhY3RpY2VzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgU0VPQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgcmVtb3ZlQ29kZUJsb2NrcyB9IGZyb20gXCIuL3V0aWxzL2NvbnRlbnQtcGFyc2VyXCI7XHJcbmltcG9ydCB7IGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UsIGdldENvbnRleHRBcm91bmRMaW5lIH0gZnJvbSBcIi4vdXRpbHMvcG9zaXRpb24tdXRpbHNcIjtcclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaW1hZ2UgZmlsZSBuYW1pbmcgY29udmVudGlvbnNcclxuICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgbWFya2Rvd24gY29udGVudCB0byBjaGVja1xyXG4gKiBAcGFyYW0gZmlsZSAtIFRoZSBmaWxlIGJlaW5nIGNoZWNrZWRcclxuICogQHBhcmFtIHNldHRpbmdzIC0gUGx1Z2luIHNldHRpbmdzXHJcbiAqIEByZXR1cm5zIEFycmF5IG9mIFNFTyBjaGVjayByZXN1bHRzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJbWFnZU5hbWluZyhjb250ZW50OiBzdHJpbmcsIGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHJcblx0aWYgKCFzZXR0aW5ncy5jaGVja0ltYWdlTmFtaW5nKSB7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtdKTtcclxuXHR9XHJcblx0XHJcblx0Ly8gUmVtb3ZlIGNvZGUgYmxvY2tzIHRvIGF2b2lkIGZhbHNlIHBvc2l0aXZlc1xyXG5cdGNvbnN0IGNsZWFuQ29udGVudCA9IHJlbW92ZUNvZGVCbG9ja3MoY29udGVudCk7XHJcblx0XHJcblx0Ly8gRmluZCBpbWFnZSByZWZlcmVuY2VzXHJcblx0Y29uc3QgaW1hZ2VNYXRjaGVzID0gY2xlYW5Db250ZW50Lm1hdGNoKC8hXFxbW15cXF1dKlxcXVxcKChbXildKylcXCkvZyk7XHJcblx0aWYgKGltYWdlTWF0Y2hlcykge1xyXG5cdFx0aW1hZ2VNYXRjaGVzLmZvckVhY2goKG1hdGNoLCBpbmRleCkgPT4ge1xyXG5cdFx0XHRjb25zdCBpbWFnZVBhdGggPSBtYXRjaC5tYXRjaCgvIVxcW1teXFxdXSpcXF1cXCgoW14pXSspXFwpLyk/LlsxXTtcclxuXHRcdFx0aWYgKGltYWdlUGF0aCkge1xyXG5cdFx0XHRcdGNvbnN0IGZpbGVOYW1lID0gaW1hZ2VQYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRmluZCB0aGUgbGluZSBudW1iZXIgZm9yIHRoaXMgaW1hZ2VcclxuXHRcdFx0XHRjb25zdCBsaW5lTnVtYmVyID0gZmluZExpbmVOdW1iZXJGb3JJbWFnZShjb250ZW50LCBtYXRjaCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ2hlY2sgZm9yIHByb2JsZW1hdGljIHBhdHRlcm5zXHJcblx0XHRcdFx0aWYgKGZpbGVOYW1lLmluY2x1ZGVzKCcgJykgfHwgZmlsZU5hbWUuaW5jbHVkZXMoJyUyMCcpKSB7XHJcblx0XHRcdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiBgSW1hZ2UgJHtpbmRleCArIDF9IGhhcyBzcGFjZXMgaW4gZmlsZSBuYW1lOiAke2ZpbGVOYW1lfWAsXHJcblx0XHRcdFx0XHRcdHN1Z2dlc3Rpb246IFwiVXNlIGtlYmFiLWNhc2Ugb3IgdW5kZXJzY29yZXMgaW5zdGVhZCBvZiBzcGFjZXNcIixcclxuXHRcdFx0XHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJyxcclxuXHRcdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRcdHNlYXJjaFRleHQ6IG1hdGNoLFxyXG5cdFx0XHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoZmlsZU5hbWUubWF0Y2goL15bYS1mMC05XXs4LH0kLykgfHwgXHJcblx0XHRcdFx0XHRcdCAgIGZpbGVOYW1lLm1hdGNoKC9eW2EtZjAtOV17OCx9X1tBLVowLTldK1xcLi8pIHx8XHJcblx0XHRcdFx0XHRcdCAgIGZpbGVOYW1lLm1hdGNoKC9eW2EtZjAtOV17OCx9X01ENVxcLi8pIHx8XHJcblx0XHRcdFx0XHRcdCAgIGZpbGVOYW1lLm1hdGNoKC9eW2EtZjAtOV17MjAsfVxcLi8pKSB7XHJcblx0XHRcdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdFx0XHRwYXNzZWQ6IGZhbHNlLFxyXG5cdFx0XHRcdFx0XHRtZXNzYWdlOiBgSW1hZ2UgJHtpbmRleCArIDF9IGhhcyByYW5kb20gZmlsZSBuYW1lOiAke2ZpbGVOYW1lfWAsXHJcblx0XHRcdFx0XHRcdHN1Z2dlc3Rpb246IFwiVXNlIGRlc2NyaXB0aXZlIGZpbGUgbmFtZXNcIixcclxuXHRcdFx0XHRcdFx0c2V2ZXJpdHk6ICd3YXJuaW5nJyxcclxuXHRcdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0XHRsaW5lOiBsaW5lTnVtYmVyLFxyXG5cdFx0XHRcdFx0XHRcdHNlYXJjaFRleHQ6IG1hdGNoLFxyXG5cdFx0XHRcdFx0XHRcdGNvbnRleHQ6IGdldENvbnRleHRBcm91bmRMaW5lKGNvbnRlbnQsIGxpbmVOdW1iZXIpXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoZmlsZU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncGFzdGVkJykgfHwgXHJcblx0XHRcdFx0XHRcdCAgIGZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3VudGl0bGVkJykgfHxcclxuXHRcdFx0XHRcdFx0ICAgZmlsZU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncGhvdG8nKSB8fFxyXG5cdFx0XHRcdFx0XHQgICAvLyBPbmx5IGZsYWcgZ2VuZXJpYyBzY3JlZW5zaG90cyAobm8gZGVzY3JpcHRpdmUgY29udGVudClcclxuXHRcdFx0XHRcdFx0ICAgZmlsZU5hbWUubWF0Y2goL15zY3JlZW5zaG90XFxkKlxcLihwbmd8anBnfGpwZWd8Z2lmfHdlYnApJC9pKSB8fFxyXG5cdFx0XHRcdFx0XHQgICAvLyBGbGFnIHNjcmVlbnNob3RzIHdpdGggb25seSByYW5kb20gY2hhcmFjdGVyc1xyXG5cdFx0XHRcdFx0XHQgICAoZmlsZU5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc2NyZWVuc2hvdCcpICYmIFxyXG5cdFx0XHRcdFx0XHQgICAgZmlsZU5hbWUubWF0Y2goL15zY3JlZW5zaG90W2EtZjAtOV17Nix9XFwuKHBuZ3xqcGd8anBlZ3xnaWZ8d2VicCkkL2kpKSkge1xyXG5cdFx0XHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRcdFx0bWVzc2FnZTogYEltYWdlICR7aW5kZXggKyAxfSBoYXMgYSBwb3RlbnRpYWxseSBnZW5lcmljIGZpbGUgbmFtZTogJHtmaWxlTmFtZX1gLFxyXG5cdFx0XHRcdFx0XHRzdWdnZXN0aW9uOiBcIlVzZSBkZXNjcmlwdGl2ZSBmaWxlIG5hbWVzXCIsXHJcblx0XHRcdFx0XHRcdHNldmVyaXR5OiAnd2FybmluZycsXHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiB7XHJcblx0XHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBtYXRjaCxcclxuXHRcdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGZpbGVOYW1lLmxlbmd0aCA8IDUgfHwgZmlsZU5hbWUubGVuZ3RoID4gNTApIHtcclxuXHRcdFx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0XHRcdG1lc3NhZ2U6IGBJbWFnZSAke2luZGV4ICsgMX0gZXhjZWVkcyBzdWdnZXN0ZWQgZmlsZSBuYW1lIGxlbmd0aDogJHtmaWxlTmFtZX1gLFxyXG5cdFx0XHRcdFx0XHRzdWdnZXN0aW9uOiBcIlVzZSBkZXNjcmlwdGl2ZSBmaWxlIG5hbWVzIGJldHdlZW4gNS01MCBjaGFyYWN0ZXJzXCIsXHJcblx0XHRcdFx0XHRcdHNldmVyaXR5OiAnd2FybmluZycsXHJcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiB7XHJcblx0XHRcdFx0XHRcdFx0bGluZTogbGluZU51bWJlcixcclxuXHRcdFx0XHRcdFx0XHRzZWFyY2hUZXh0OiBtYXRjaCxcclxuXHRcdFx0XHRcdFx0XHRjb250ZXh0OiBnZXRDb250ZXh0QXJvdW5kTGluZShjb250ZW50LCBsaW5lTnVtYmVyKVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuXHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0bWVzc2FnZTogXCJBbGwgaW1hZ2VzIGhhdmUgZ29vZCBmaWxlIG5hbWVzXCIsXHJcblx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdHMpO1xyXG59XHJcbiIsICJpbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi8uLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBTRU9DaGVja1Jlc3VsdCB9IGZyb20gXCIuLi8uLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBnZXREaXNwbGF5UGF0aCB9IGZyb20gXCIuLi8uLi91aS9wYW5lbC11dGlsc1wiO1xyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIGRpc3BsYXkgbmFtZSBmb3IgYSBmaWxlLCBwcmlvcml0aXppbmcgdGhlIHRpdGxlIHByb3BlcnR5IGlmIGNvbmZpZ3VyZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZShmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBzdHJpbmcge1xyXG5cdGlmIChzZXR0aW5ncy51c2VOb3RlVGl0bGVzICYmIHNldHRpbmdzLnRpdGxlUHJvcGVydHkudHJpbSgpKSB7XHJcblx0XHQvLyBUcnkgdG8gZ2V0IHRpdGxlIGZyb20gZnJvbnRtYXR0ZXIgLSBoYW5kbGUgdmFyaW91cyBmb3JtYXRzXHJcblx0XHRsZXQgZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXHI/XFxuKFtcXHNcXFNdKj8pXFxyP1xcbi0tLS8pO1xyXG5cdFx0aWYgKCFmcm9udG1hdHRlck1hdGNoKSB7XHJcblx0XHRcdC8vIFRyeSB3aXRob3V0IGNhcnJpYWdlIHJldHVybnNcclxuXHRcdFx0ZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXG4oW1xcc1xcU10qPylcXG4tLS0vKTtcclxuXHRcdH1cclxuXHRcdGlmICghZnJvbnRtYXR0ZXJNYXRjaCkge1xyXG5cdFx0XHQvLyBUcnkgd2l0aCBqdXN0IGRhc2hlcyBhbmQgYW55IHdoaXRlc3BhY2VcclxuXHRcdFx0ZnJvbnRtYXR0ZXJNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXHMqXFxuKFtcXHNcXFNdKj8pXFxuXFxzKi0tLS8pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChmcm9udG1hdHRlck1hdGNoICYmIGZyb250bWF0dGVyTWF0Y2hbMV0pIHtcclxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSBmcm9udG1hdHRlck1hdGNoWzFdO1xyXG5cclxuXHRcdFx0Ly8gU3BsaXQgYnkgbGluZXMgYW5kIGxvb2sgZm9yIHRoZSBwcm9wZXJ0eVxyXG5cdFx0XHRjb25zdCBsaW5lcyA9IGZyb250bWF0dGVyLnNwbGl0KCdcXG4nKTtcclxuXHJcblx0XHRcdGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG5cdFx0XHRcdGlmICghbGluZSkgY29udGludWU7XHJcblx0XHRcdFx0Y29uc3QgdHJpbW1lZExpbmUgPSBsaW5lLnRyaW0oKTtcclxuXHJcblx0XHRcdFx0aWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSArICc6JykpIHtcclxuXHRcdFx0XHRcdC8vIEV4dHJhY3QgdGhlIHZhbHVlIGFmdGVyIHRoZSBjb2xvblxyXG5cdFx0XHRcdFx0Y29uc3QgY29sb25JbmRleCA9IHRyaW1tZWRMaW5lLmluZGV4T2YoJzonKTtcclxuXHRcdFx0XHRcdGlmIChjb2xvbkluZGV4ICE9PSAtMSkge1xyXG5cdFx0XHRcdFx0XHRsZXQgdGl0bGUgPSB0cmltbWVkTGluZS5zdWJzdHJpbmcoY29sb25JbmRleCArIDEpLnRyaW0oKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxyXG5cdFx0XHRcdFx0XHRpZiAoKHRpdGxlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdGl0bGUuZW5kc1dpdGgoJ1wiJykpIHx8XHJcblx0XHRcdFx0XHRcdFx0KHRpdGxlLnN0YXJ0c1dpdGgoXCInXCIpICYmIHRpdGxlLmVuZHNXaXRoKFwiJ1wiKSkpIHtcclxuXHRcdFx0XHRcdFx0XHR0aXRsZSA9IHRpdGxlLnNsaWNlKDEsIC0xKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0aWYgKHRpdGxlKSB7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRpdGxlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vIEZhbGxiYWNrIHRvIGZpbGUgcGF0aCB3aXRoIHBhcmVudCBmb2xkZXJcclxuXHRyZXR1cm4gZ2V0RGlzcGxheVBhdGgoZmlsZS5wYXRoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIHNsdWcgZnJvbSBhIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTbHVnRnJvbUZpbGUoZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZywgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogc3RyaW5nIHtcclxuXHQvLyBUT0RPOiBNb3ZlIHRoaXMgdG8gdXRpbHNcclxuXHRyZXR1cm4gZmlsZS5iYXNlbmFtZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyB0aGUgc2x1ZyBmb3JtYXRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja1NsdWdGb3JtYXQoY29udGVudDogc3RyaW5nLCBmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0Ly8gVE9ETzogTW92ZSB0aGlzIHRvIG1ldGEtY2hlY2tzLnRzXHJcblx0cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBTRU8gQ2hlY2tzIC0gTWFpbiBFeHBvcnQgRmlsZVxyXG4gKiBUaGlzIGZpbGUgZXhwb3J0cyBhbGwgU0VPIGNoZWNrIGZ1bmN0aW9ucyBmcm9tIHRoZWlyIGZvY3VzZWQgbW9kdWxlc1xyXG4gKi9cclxuXHJcbi8vIEFsdCB0ZXh0IGNoZWNrc1xyXG5leHBvcnQgeyBjaGVja0FsdFRleHQgfSBmcm9tICcuL2FsdC10ZXh0LWNoZWNrJztcclxuXHJcbi8vIExpbmsgY2hlY2tzXHJcbmV4cG9ydCB7XHJcblx0Y2hlY2tOYWtlZExpbmtzLFxyXG5cdGNoZWNrQnJva2VuTGlua3MsXHJcblx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzLFxyXG5cdGNoZWNrUG90ZW50aWFsbHlCcm9rZW5FbWJlZHNcclxufSBmcm9tICcuL2xpbmstY2hlY2tzJztcclxuXHJcbi8vIEV4dGVybmFsIGxpbmsgY2hlY2tzXHJcbmV4cG9ydCB7XHJcblx0Y2hlY2tFeHRlcm5hbExpbmtzLFxyXG5cdGNoZWNrRXh0ZXJuYWxCcm9rZW5MaW5rcyxcclxuXHRjaGVja0V4dGVybmFsTGlua3NPbmx5XHJcbn0gZnJvbSAnLi9leHRlcm5hbC1saW5rLWNoZWNrcyc7XHJcblxyXG4vLyBDb250ZW50IGNoZWNrc1xyXG5leHBvcnQge1xyXG5cdGNoZWNrQ29udGVudExlbmd0aCxcclxuXHRjaGVja1JlYWRpbmdMZXZlbCxcclxuXHRjaGVja0R1cGxpY2F0ZUNvbnRlbnQsXHJcblx0Y2hlY2tOb3RpY2VzLFxyXG5cdGNoZWNrRHVwbGljYXRlVGl0bGVzLFxyXG5cdGNoZWNrRHVwbGljYXRlRGVzY3JpcHRpb25zLFxyXG5cdGNoZWNrVmF1bHREdXBsaWNhdGVDb250ZW50XHJcbn0gZnJvbSAnLi9jb250ZW50LWNoZWNrcyc7XHJcblxyXG4vLyBNZXRhIGNoZWNrc1xyXG5leHBvcnQge1xyXG5cdGNoZWNrTWV0YURlc2NyaXB0aW9uLFxyXG5cdGNoZWNrVGl0bGVMZW5ndGgsXHJcblx0Y2hlY2tUaXRsZUgxVW5pcXVlbmVzcyxcclxuXHRjaGVja0tleXdvcmREZW5zaXR5LFxyXG5cdGNoZWNrS2V5d29yZEluVGl0bGUsXHJcblx0Y2hlY2tLZXl3b3JkSW5EZXNjcmlwdGlvbixcclxuXHRjaGVja0tleXdvcmRJbkhlYWRpbmdzLFxyXG5cdGNoZWNrS2V5d29yZEluU2x1Z1xyXG59IGZyb20gJy4vbWV0YS1jaGVja3MnO1xyXG5cclxuLy8gSGVhZGluZyBjaGVja3NcclxuZXhwb3J0IHsgY2hlY2tIZWFkaW5nT3JkZXIgfSBmcm9tICcuL2hlYWRpbmctY2hlY2tzJztcclxuXHJcbi8vIEltYWdlIGNoZWNrc1xyXG5leHBvcnQgeyBjaGVja0ltYWdlTmFtaW5nIH0gZnJvbSAnLi9pbWFnZS1jaGVja3MnO1xyXG5cclxuLy8gVXRpbGl0eSBmdW5jdGlvbnNcclxuZXhwb3J0IHtcclxuXHRyZW1vdmVDb2RlQmxvY2tzLFxyXG5cdHJlbW92ZUh0bWxBdHRyaWJ1dGVzXHJcbn0gZnJvbSAnLi91dGlscy9jb250ZW50LXBhcnNlcic7XHJcblxyXG5leHBvcnQge1xyXG5cdGZpbmRMaW5lTnVtYmVyRm9ySW1hZ2UsXHJcblx0Z2V0Q29udGV4dEFyb3VuZExpbmVcclxufSBmcm9tICcuL3V0aWxzL3Bvc2l0aW9uLXV0aWxzJztcclxuXHJcbmV4cG9ydCB7XHJcblx0Y291bnRTeWxsYWJsZXMsXHJcblx0Z2V0UmVhZGluZ0xldmVsRGVzY3JpcHRpb25cclxufSBmcm9tICcuL3V0aWxzL3JlYWRpbmctbGV2ZWwnO1xyXG5cclxuZXhwb3J0IHtcclxuXHRnZXREaXNwbGF5TmFtZSxcclxuXHRnZXRTbHVnRnJvbUZpbGUsXHJcblx0Y2hlY2tTbHVnRm9ybWF0XHJcbn0gZnJvbSAnLi91dGlscy9ub3RlLXV0aWxzJztcclxuIiwgIi8qKlxyXG4gKiBWYXVsdC13aWRlIGR1cGxpY2F0ZSBkZXRlY3Rpb24gc3lzdGVtXHJcbiAqIEhhbmRsZXMgZHVwbGljYXRlIHRpdGxlcywgZGVzY3JpcHRpb25zLCBhbmQgY29udGVudCBhY3Jvc3MgdGhlIGVudGlyZSB2YXVsdFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFRGaWxlLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgU0VPQ2hlY2tSZXN1bHQgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuaW1wb3J0IHsgcmVtb3ZlQ29kZUJsb2NrcyB9IGZyb20gXCIuL3V0aWxzL2NvbnRlbnQtcGFyc2VyXCI7XHJcblxyXG4vKipcclxuICogVmF1bHQgZGF0YSBzdHJ1Y3R1cmUgZm9yIHN0b3JpbmcgZmlsZSBtZXRhZGF0YVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBWYXVsdERhdGEge1xyXG5cdC8qKiBNYXAgb2YgZmlsZSBwYXRocyB0byB0aGVpciBtZXRhZGF0YSAqL1xyXG5cdGZpbGVzOiBNYXA8c3RyaW5nLCBGaWxlTWV0YWRhdGE+O1xyXG5cdC8qKiBNYXAgb2YgdGl0bGVzIHRvIGZpbGUgcGF0aHMgdGhhdCB1c2UgdGhlbSAqL1xyXG5cdHRpdGxlTWFwOiBNYXA8c3RyaW5nLCBzdHJpbmdbXT47XHJcblx0LyoqIE1hcCBvZiBkZXNjcmlwdGlvbnMgdG8gZmlsZSBwYXRocyB0aGF0IHVzZSB0aGVtICovXHJcblx0ZGVzY3JpcHRpb25NYXA6IE1hcDxzdHJpbmcsIHN0cmluZ1tdPjtcclxuXHQvKiogVGltZXN0YW1wIHdoZW4gZGF0YSB3YXMgbGFzdCBjb2xsZWN0ZWQgKi9cclxuXHRsYXN0VXBkYXRlZDogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogTWV0YWRhdGEgZm9yIGEgc2luZ2xlIGZpbGVcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZU1ldGFkYXRhIHtcclxuXHQvKiogRmlsZSBwYXRoICovXHJcblx0cGF0aDogc3RyaW5nO1xyXG5cdC8qKiBFeHRyYWN0ZWQgdGl0bGUgKi9cclxuXHR0aXRsZTogc3RyaW5nO1xyXG5cdC8qKiBFeHRyYWN0ZWQgZGVzY3JpcHRpb24gKi9cclxuXHRkZXNjcmlwdGlvbj86IHN0cmluZztcclxuXHQvKiogRmlsZSBjb250ZW50IGZvciBjb250ZW50IGR1cGxpY2F0ZSBkZXRlY3Rpb24gKi9cclxuXHRjb250ZW50OiBzdHJpbmc7XHJcblx0LyoqIFdoZXRoZXIgdGhpcyBmaWxlIHNob3VsZCBiZSBpZ25vcmVkICovXHJcblx0aWdub3JlZDogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhdWx0IGRhdGEgY29sbGVjdGlvbiBhbmQgZHVwbGljYXRlIGRldGVjdGlvbiBtYW5hZ2VyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmF1bHREdXBsaWNhdGVEZXRlY3RvciB7XHJcblx0cHJpdmF0ZSB2YXVsdERhdGE6IFZhdWx0RGF0YSB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBzZXR0aW5nczogU0VPU2V0dGluZ3M7XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpIHtcclxuXHRcdHRoaXMuYXBwID0gYXBwO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ29sbGVjdCB2YXVsdC13aWRlIGRhdGEgZm9yIGR1cGxpY2F0ZSBkZXRlY3Rpb25cclxuXHQgKi9cclxuXHRhc3luYyBjb2xsZWN0VmF1bHREYXRhKCk6IFByb21pc2U8VmF1bHREYXRhPiB7XHJcblx0XHRjb25zdCB2YXVsdERhdGE6IFZhdWx0RGF0YSA9IHtcclxuXHRcdFx0ZmlsZXM6IG5ldyBNYXAoKSxcclxuXHRcdFx0dGl0bGVNYXA6IG5ldyBNYXAoKSxcclxuXHRcdFx0ZGVzY3JpcHRpb25NYXA6IG5ldyBNYXAoKSxcclxuXHRcdFx0bGFzdFVwZGF0ZWQ6IERhdGUubm93KClcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCBtYXJrZG93biBmaWxlc1xyXG5cdFx0Y29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XHJcblx0XHRcclxuXHRcdC8vIEZpbHRlciBmaWxlcyBiYXNlZCBvbiBzZXR0aW5nc1xyXG5cdFx0Y29uc3QgZmlsdGVyZWRGaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IHtcclxuXHRcdFx0Ly8gQ2hlY2sgaWdub3JlIHVuZGVyc2NvcmUgZmlsZXMgc2V0dGluZ1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5pZ25vcmVVbmRlcnNjb3JlRmlsZXMgJiYgZmlsZS5iYXNlbmFtZS5zdGFydHNXaXRoKCdfJykpIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIENoZWNrIHNjYW4gZGlyZWN0b3JpZXMgc2V0dGluZ1xyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zY2FuRGlyZWN0b3JpZXMpIHtcclxuXHRcdFx0XHRjb25zdCBkaXJlY3RvcmllcyA9IHRoaXMuc2V0dGluZ3Muc2NhbkRpcmVjdG9yaWVzLnNwbGl0KCcsJykubWFwKGQgPT4gZC50cmltKCkpO1xyXG5cdFx0XHRcdHJldHVybiBkaXJlY3Rvcmllcy5zb21lKGRpciA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChkaXIpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBQcm9jZXNzIGVhY2ggZmlsZVxyXG5cdFx0Zm9yIChjb25zdCBmaWxlIG9mIGZpbHRlcmVkRmlsZXMpIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcclxuXHRcdFx0XHRjb25zdCBtZXRhZGF0YSA9IHRoaXMuZXh0cmFjdEZpbGVNZXRhZGF0YShmaWxlLCBjb250ZW50KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoIW1ldGFkYXRhLmlnbm9yZWQpIHtcclxuXHRcdFx0XHRcdHZhdWx0RGF0YS5maWxlcy5zZXQoZmlsZS5wYXRoLCBtZXRhZGF0YSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFkZCB0byB0aXRsZSBtYXBcclxuXHRcdFx0XHRcdGNvbnN0IHRpdGxlS2V5ID0gbWV0YWRhdGEudGl0bGUudG9Mb3dlckNhc2UoKS50cmltKCk7XHJcblx0XHRcdFx0XHRpZiAodGl0bGVLZXkpIHtcclxuXHRcdFx0XHRcdFx0aWYgKCF2YXVsdERhdGEudGl0bGVNYXAuaGFzKHRpdGxlS2V5KSkge1xyXG5cdFx0XHRcdFx0XHRcdHZhdWx0RGF0YS50aXRsZU1hcC5zZXQodGl0bGVLZXksIFtdKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR2YXVsdERhdGEudGl0bGVNYXAuZ2V0KHRpdGxlS2V5KSEucHVzaChmaWxlLnBhdGgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBBZGQgdG8gZGVzY3JpcHRpb24gbWFwXHJcblx0XHRcdFx0XHRpZiAobWV0YWRhdGEuZGVzY3JpcHRpb24pIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZGVzY0tleSA9IG1ldGFkYXRhLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRpZiAoZGVzY0tleSkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICghdmF1bHREYXRhLmRlc2NyaXB0aW9uTWFwLmhhcyhkZXNjS2V5KSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dmF1bHREYXRhLmRlc2NyaXB0aW9uTWFwLnNldChkZXNjS2V5LCBbXSk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdHZhdWx0RGF0YS5kZXNjcmlwdGlvbk1hcC5nZXQoZGVzY0tleSkhLnB1c2goZmlsZS5wYXRoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oYEZhaWxlZCB0byBwcm9jZXNzIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMudmF1bHREYXRhID0gdmF1bHREYXRhO1xyXG5cdFx0cmV0dXJuIHZhdWx0RGF0YTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEV4dHJhY3QgbWV0YWRhdGEgZnJvbSBhIGZpbGVcclxuXHQgKi9cclxuXHRwcml2YXRlIGV4dHJhY3RGaWxlTWV0YWRhdGEoZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IEZpbGVNZXRhZGF0YSB7XHJcblx0XHQvLyBFeHRyYWN0IGZyb250bWF0dGVyXHJcblx0XHRjb25zdCBmcm9udG1hdHRlck1hdGNoID0gY29udGVudC5tYXRjaCgvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLVxcbi8pO1xyXG5cdFx0Y29uc3QgZnJvbnRtYXR0ZXI6IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge307XHJcblx0XHRcclxuXHRcdGlmIChmcm9udG1hdHRlck1hdGNoICYmIGZyb250bWF0dGVyTWF0Y2hbMV0pIHtcclxuXHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXJDb250ZW50ID0gZnJvbnRtYXR0ZXJNYXRjaFsxXTtcclxuXHRcdFx0Y29uc3QgbGluZXMgPSBmcm9udG1hdHRlckNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcblx0XHRcdFx0Y29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFxcdyspOlxccyooLiopJC8pO1xyXG5cdFx0XHRcdGlmIChtYXRjaCAmJiBtYXRjaFsxXSAmJiBtYXRjaFsyXSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRjb25zdCBrZXkgPSBtYXRjaFsxXTtcclxuXHRcdFx0XHRcdGxldCB2YWx1ZSA9IG1hdGNoWzJdO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBSZW1vdmUgcXVvdGVzIGlmIHByZXNlbnRcclxuXHRcdFx0XHRcdGlmICgodmFsdWUuc3RhcnRzV2l0aCgnXCInKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXCInKSkgfHwgXHJcblx0XHRcdFx0XHRcdCh2YWx1ZS5zdGFydHNXaXRoKFwiJ1wiKSAmJiB2YWx1ZS5lbmRzV2l0aChcIidcIikpKSB7XHJcblx0XHRcdFx0XHRcdHZhbHVlID0gdmFsdWUuc2xpY2UoMSwgLTEpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRmcm9udG1hdHRlcltrZXldID0gdmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRXh0cmFjdCB0aXRsZVxyXG5cdFx0bGV0IHRpdGxlID0gJyc7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy50aXRsZVByb3BlcnR5ICYmIGZyb250bWF0dGVyW3RoaXMuc2V0dGluZ3MudGl0bGVQcm9wZXJ0eV0pIHtcclxuXHRcdFx0Y29uc3QgdGl0bGVWYWx1ZSA9IGZyb250bWF0dGVyW3RoaXMuc2V0dGluZ3MudGl0bGVQcm9wZXJ0eV07XHJcblx0XHRcdHRpdGxlID0gdHlwZW9mIHRpdGxlVmFsdWUgPT09ICdzdHJpbmcnID8gdGl0bGVWYWx1ZSA6IGZpbGUuYmFzZW5hbWU7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuc2V0dGluZ3MudXNlRmlsZW5hbWVBc1RpdGxlKSB7XHJcblx0XHRcdHRpdGxlID0gZmlsZS5iYXNlbmFtZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRpdGxlID0gZmlsZS5iYXNlbmFtZTsgLy8gRGVmYXVsdCBmYWxsYmFja1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEV4dHJhY3QgZGVzY3JpcHRpb25cclxuXHRcdGxldCBkZXNjcmlwdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSAmJiBmcm9udG1hdHRlclt0aGlzLnNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHldKSB7XHJcblx0XHRcdGNvbnN0IGRlc2NWYWx1ZSA9IGZyb250bWF0dGVyW3RoaXMuc2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eV07XHJcblx0XHRcdGRlc2NyaXB0aW9uID0gdHlwZW9mIGRlc2NWYWx1ZSA9PT0gJ3N0cmluZycgPyBkZXNjVmFsdWUgOiB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0cGF0aDogZmlsZS5wYXRoLFxyXG5cdFx0XHR0aXRsZSxcclxuXHRcdFx0ZGVzY3JpcHRpb24sXHJcblx0XHRcdGNvbnRlbnQsXHJcblx0XHRcdGlnbm9yZWQ6IGZhbHNlXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgZm9yIGR1cGxpY2F0ZSB0aXRsZXNcclxuXHQgKi9cclxuXHRhc3luYyBjaGVja0R1cGxpY2F0ZVRpdGxlcyhmaWxlOiBURmlsZSwgc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogUHJvbWlzZTxTRU9DaGVja1Jlc3VsdFtdPiB7XHJcblx0XHRjb25zdCByZXN1bHRzOiBTRU9DaGVja1Jlc3VsdFtdID0gW107XHJcblx0XHRcclxuXHRcdC8vIE9ubHkgcnVuIGlmIGR1cGxpY2F0ZSBjb250ZW50IGNoZWNraW5nIGlzIGVuYWJsZWQgQU5EIHdlIGhhdmUgdGl0bGUgY29uZmlndXJhdGlvblxyXG5cdFx0aWYgKCFzZXR0aW5ncy5jaGVja0R1cGxpY2F0ZUNvbnRlbnQgfHwgKCFzZXR0aW5ncy50aXRsZVByb3BlcnR5ICYmICFzZXR0aW5ncy51c2VGaWxlbmFtZUFzVGl0bGUpKSB7XHJcblx0XHRcdHJldHVybiByZXN1bHRzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSB2YXVsdCBkYXRhIGlzIGNvbGxlY3RlZFxyXG5cdFx0aWYgKCF0aGlzLnZhdWx0RGF0YSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNvbGxlY3RWYXVsdERhdGEoKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBmaWxlTWV0YWRhdGEgPSB0aGlzLnZhdWx0RGF0YSEuZmlsZXMuZ2V0KGZpbGUucGF0aCk7XHJcblx0XHRpZiAoIWZpbGVNZXRhZGF0YSkge1xyXG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCB0aXRsZUtleSA9IGZpbGVNZXRhZGF0YS50aXRsZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcclxuXHRcdGlmICghdGl0bGVLZXkpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZHVwbGljYXRlRmlsZXMgPSB0aGlzLnZhdWx0RGF0YT8udGl0bGVNYXAuZ2V0KHRpdGxlS2V5KSB8fCBbXTtcclxuXHRcdFxyXG5cdFx0aWYgKGR1cGxpY2F0ZUZpbGVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0Y29uc3Qgb3RoZXJGaWxlcyA9IGR1cGxpY2F0ZUZpbGVzLmZpbHRlcihmID0+IGYgIT09IGZpbGUucGF0aCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBDaGVjayBmb3IgZ2VuZXJpYyB0aXRsZXNcclxuXHRcdFx0Y29uc3QgZ2VuZXJpY1RpdGxlcyA9IFsndW50aXRsZWQnLCAnbmV3IG5vdGUnLCAndW50aXRsZWQgbm90ZScsICduZXcgZmlsZScsICdkb2N1bWVudCddO1xyXG5cdFx0XHRjb25zdCBpc0dlbmVyaWMgPSBnZW5lcmljVGl0bGVzLmluY2x1ZGVzKHRpdGxlS2V5KTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHNldmVyaXR5ID0gaXNHZW5lcmljID8gJ3dhcm5pbmcnIDogJ2Vycm9yJztcclxuXHRcdFx0Y29uc3QgbWVzc2FnZSA9IGlzR2VuZXJpYyBcclxuXHRcdFx0XHQ/IGBHZW5lcmljIHRpdGxlIFwiJHtmaWxlTWV0YWRhdGEudGl0bGV9XCIgdXNlZCBpbiAke2R1cGxpY2F0ZUZpbGVzLmxlbmd0aH0gZmlsZXNgXHJcblx0XHRcdFx0OiBgRHVwbGljYXRlIHRpdGxlIFwiJHtmaWxlTWV0YWRhdGEudGl0bGV9XCIgZm91bmQgaW4gJHtkdXBsaWNhdGVGaWxlcy5sZW5ndGh9IGZpbGVzYDtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHN1Z2dlc3Rpb24gPSBpc0dlbmVyaWNcclxuXHRcdFx0XHQ/ICdDb25zaWRlciB1c2luZyBhIG1vcmUgZGVzY3JpcHRpdmUgdGl0bGUnXHJcblx0XHRcdFx0OiBgVGhpcyB0aXRsZSBpcyBhbHNvIHVzZWQgaW46ICR7b3RoZXJGaWxlcy5tYXAoZiA9PiBgPGEgaHJlZj1cIiNcIiBkYXRhLWZpbGUtcGF0aD1cIiR7Zn1cIiBjbGFzcz1cInNlby1maWxlLWxpbmtcIj4ke3RoaXMuZ2V0RGlzcGxheVBhdGgoZil9PC9hPmApLmpvaW4oJywgJyl9YDtcclxuXHJcblx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRtZXNzYWdlLFxyXG5cdFx0XHRcdHN1Z2dlc3Rpb24sXHJcblx0XHRcdFx0c2V2ZXJpdHksXHJcblx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdGxpbmU6IDEsXHJcblx0XHRcdFx0XHRzZWFyY2hUZXh0OiB0aGlzLnNldHRpbmdzLnRpdGxlUHJvcGVydHkgfHwgJ3RpdGxlJyxcclxuXHRcdFx0XHRcdGNvbnRleHQ6IGB0aXRsZTogXCIke2ZpbGVNZXRhZGF0YS50aXRsZX1cImBcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVzdWx0cy5wdXNoKHtcclxuXHRcdFx0XHRwYXNzZWQ6IHRydWUsXHJcblx0XHRcdFx0bWVzc2FnZTogYFVuaXF1ZSB0aXRsZTogXCIke2ZpbGVNZXRhZGF0YS50aXRsZX1cImAsXHJcblx0XHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzdWx0cztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGZvciBkdXBsaWNhdGUgZGVzY3JpcHRpb25zXHJcblx0ICovXHJcblx0YXN5bmMgY2hlY2tEdXBsaWNhdGVEZXNjcmlwdGlvbnMoZmlsZTogVEZpbGUsIHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IFByb21pc2U8U0VPQ2hlY2tSZXN1bHRbXT4ge1xyXG5cdFx0Y29uc3QgcmVzdWx0czogU0VPQ2hlY2tSZXN1bHRbXSA9IFtdO1xyXG5cdFx0XHJcblx0XHQvLyBPbmx5IHJ1biBpZiBkdXBsaWNhdGUgY29udGVudCBjaGVja2luZyBpcyBlbmFibGVkIEFORCB3ZSBoYXZlIGRlc2NyaXB0aW9uIHByb3BlcnR5IGNvbmZpZ3VyZWRcclxuXHRcdGlmICghc2V0dGluZ3MuY2hlY2tEdXBsaWNhdGVDb250ZW50IHx8ICFzZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5KSB7XHJcblx0XHRcdHJldHVybiByZXN1bHRzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEVuc3VyZSB2YXVsdCBkYXRhIGlzIGNvbGxlY3RlZFxyXG5cdFx0aWYgKCF0aGlzLnZhdWx0RGF0YSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNvbGxlY3RWYXVsdERhdGEoKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBmaWxlTWV0YWRhdGEgPSB0aGlzLnZhdWx0RGF0YSEuZmlsZXMuZ2V0KGZpbGUucGF0aCk7XHJcblx0XHRpZiAoIWZpbGVNZXRhZGF0YSB8fCAhZmlsZU1ldGFkYXRhLmRlc2NyaXB0aW9uKSB7XHJcblx0XHRcdHJldHVybiByZXN1bHRzO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGRlc2NLZXkgPSBmaWxlTWV0YWRhdGEuZGVzY3JpcHRpb24udG9Mb3dlckNhc2UoKS50cmltKCk7XHJcblx0XHRjb25zdCBkdXBsaWNhdGVGaWxlcyA9IHRoaXMudmF1bHREYXRhPy5kZXNjcmlwdGlvbk1hcC5nZXQoZGVzY0tleSkgfHwgW107XHJcblx0XHRcclxuXHRcdGlmIChkdXBsaWNhdGVGaWxlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdGNvbnN0IG90aGVyRmlsZXMgPSBkdXBsaWNhdGVGaWxlcy5maWx0ZXIoZiA9PiBmICE9PSBmaWxlLnBhdGgpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGdlbmVyaWMgZGVzY3JpcHRpb25zXHJcblx0XHRcdGNvbnN0IGdlbmVyaWNEZXNjcmlwdGlvbnMgPSBbJ2Rlc2NyaXB0aW9uJywgJ21ldGEgZGVzY3JpcHRpb24nLCAncGFnZSBkZXNjcmlwdGlvbiddO1xyXG5cdFx0XHRjb25zdCBpc0dlbmVyaWMgPSBnZW5lcmljRGVzY3JpcHRpb25zLmluY2x1ZGVzKGRlc2NLZXkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc2V2ZXJpdHkgPSBpc0dlbmVyaWMgPyAnd2FybmluZycgOiAnZXJyb3InO1xyXG5cdFx0XHRjb25zdCBtZXNzYWdlID0gaXNHZW5lcmljIFxyXG5cdFx0XHRcdD8gYEdlbmVyaWMgZGVzY3JpcHRpb24gXCIke2ZpbGVNZXRhZGF0YS5kZXNjcmlwdGlvbn1cIiB1c2VkIGluICR7ZHVwbGljYXRlRmlsZXMubGVuZ3RofSBmaWxlc2BcclxuXHRcdFx0XHQ6IGBEdXBsaWNhdGUgZGVzY3JpcHRpb24gXCIke2ZpbGVNZXRhZGF0YS5kZXNjcmlwdGlvbn1cIiBmb3VuZCBpbiAke2R1cGxpY2F0ZUZpbGVzLmxlbmd0aH0gZmlsZXNgO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc3VnZ2VzdGlvbiA9IGlzR2VuZXJpY1xyXG5cdFx0XHRcdD8gJ0NvbnNpZGVyIHVzaW5nIGEgbW9yZSBkZXNjcmlwdGl2ZSBtZXRhIGRlc2NyaXB0aW9uJ1xyXG5cdFx0XHRcdDogYFRoaXMgZGVzY3JpcHRpb24gaXMgYWxzbyB1c2VkIGluOiAke290aGVyRmlsZXMubWFwKGYgPT4gYDxhIGhyZWY9XCIjXCIgZGF0YS1maWxlLXBhdGg9XCIke2Z9XCIgY2xhc3M9XCJzZW8tZmlsZS1saW5rXCI+JHt0aGlzLmdldERpc3BsYXlQYXRoKGYpfTwvYT5gKS5qb2luKCcsICcpfWA7XHJcblxyXG5cdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdHBhc3NlZDogZmFsc2UsXHJcblx0XHRcdFx0bWVzc2FnZSxcclxuXHRcdFx0XHRzdWdnZXN0aW9uLFxyXG5cdFx0XHRcdHNldmVyaXR5LFxyXG5cdFx0XHRcdHBvc2l0aW9uOiB7XHJcblx0XHRcdFx0XHRsaW5lOiAxLFxyXG5cdFx0XHRcdFx0c2VhcmNoVGV4dDogdGhpcy5zZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5IHx8ICdkZXNjcmlwdGlvbicsXHJcblx0XHRcdFx0XHRjb250ZXh0OiBgZGVzY3JpcHRpb246IFwiJHtmaWxlTWV0YWRhdGEuZGVzY3JpcHRpb259XCJgXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlc3VsdHMucHVzaCh7XHJcblx0XHRcdFx0cGFzc2VkOiB0cnVlLFxyXG5cdFx0XHRcdG1lc3NhZ2U6IGBVbmlxdWUgZGVzY3JpcHRpb246IFwiJHtmaWxlTWV0YWRhdGEuZGVzY3JpcHRpb259XCJgLFxyXG5cdFx0XHRcdHNldmVyaXR5OiAnaW5mbydcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdHM7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBmb3IgZHVwbGljYXRlIGNvbnRlbnQgdXNpbmcgSmFjY2FyZCBzaW1pbGFyaXR5XHJcblx0ICovXHJcblx0YXN5bmMgY2hlY2tEdXBsaWNhdGVDb250ZW50KGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBQcm9taXNlPFNFT0NoZWNrUmVzdWx0W10+IHtcclxuXHRcdGNvbnN0IHJlc3VsdHM6IFNFT0NoZWNrUmVzdWx0W10gPSBbXTtcclxuXHRcdFxyXG5cdFx0aWYgKCFzZXR0aW5ncy5jaGVja0R1cGxpY2F0ZUNvbnRlbnQpIHtcclxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRW5zdXJlIHZhdWx0IGRhdGEgaXMgY29sbGVjdGVkXHJcblx0XHRpZiAoIXRoaXMudmF1bHREYXRhKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMuY29sbGVjdFZhdWx0RGF0YSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGZpbGVNZXRhZGF0YSA9IHRoaXMudmF1bHREYXRhPy5maWxlcy5nZXQoZmlsZS5wYXRoKTtcclxuXHRcdGlmICghZmlsZU1ldGFkYXRhKSB7XHJcblx0XHRcdHJldHVybiByZXN1bHRzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFNwbGl0IGNvbnRlbnQgaW50byBwYXJhZ3JhcGhzXHJcblx0XHRjb25zdCBwYXJhZ3JhcGhzID0gdGhpcy5zcGxpdEludG9QYXJhZ3JhcGhzKGZpbGVNZXRhZGF0YS5jb250ZW50KTtcclxuXHRcdGNvbnN0IGR1cGxpY2F0ZXM6IEFycmF5PHtcclxuXHRcdFx0cGFyYWdyYXBoOiBudW1iZXI7XHJcblx0XHRcdHNpbWlsYXJGaWxlczogQXJyYXk8eyBmaWxlOiBzdHJpbmc7IHNpbWlsYXJpdHk6IG51bWJlciB9PjtcclxuXHRcdH0+ID0gW107XHJcblxyXG5cdFx0Ly8gQ29tcGFyZSBlYWNoIHBhcmFncmFwaCBhZ2FpbnN0IGFsbCBvdGhlciBmaWxlc1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYXJhZ3JhcGhzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNvbnN0IHBhcmFncmFwaCA9IHBhcmFncmFwaHNbaV07XHJcblx0XHRcdGlmICghcGFyYWdyYXBoIHx8IHBhcmFncmFwaC5sZW5ndGggPCA1MCkgY29udGludWU7IC8vIFNraXAgc2hvcnQgcGFyYWdyYXBoc1xyXG5cclxuXHRcdFx0Y29uc3Qgc2ltaWxhckZpbGVzOiBBcnJheTx7IGZpbGU6IHN0cmluZzsgc2ltaWxhcml0eTogbnVtYmVyIH0+ID0gW107XHJcblxyXG5cdFx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBvdGhlciBmaWxlc1xyXG5cdFx0XHRmb3IgKGNvbnN0IFtvdGhlckZpbGVQYXRoLCBvdGhlck1ldGFkYXRhXSBvZiB0aGlzLnZhdWx0RGF0YT8uZmlsZXMgfHwgW10pIHtcclxuXHRcdFx0XHRpZiAob3RoZXJGaWxlUGF0aCA9PT0gZmlsZS5wYXRoKSBjb250aW51ZTtcclxuXHJcblx0XHRcdFx0Y29uc3Qgb3RoZXJQYXJhZ3JhcGhzID0gdGhpcy5zcGxpdEludG9QYXJhZ3JhcGhzKG90aGVyTWV0YWRhdGEuY29udGVudCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Zm9yIChjb25zdCBvdGhlclBhcmFncmFwaCBvZiBvdGhlclBhcmFncmFwaHMpIHtcclxuXHRcdFx0XHRcdGlmICghb3RoZXJQYXJhZ3JhcGggfHwgb3RoZXJQYXJhZ3JhcGgubGVuZ3RoIDwgNTApIGNvbnRpbnVlO1xyXG5cclxuXHRcdFx0XHRcdGNvbnN0IHNpbWlsYXJpdHkgPSB0aGlzLmNhbGN1bGF0ZUphY2NhcmRTaW1pbGFyaXR5KHBhcmFncmFwaCwgb3RoZXJQYXJhZ3JhcGgpO1xyXG5cdFx0XHRcdFx0aWYgKHNpbWlsYXJpdHkgPj0gc2V0dGluZ3MuZHVwbGljYXRlVGhyZXNob2xkKSB7XHJcblx0XHRcdFx0XHRcdHNpbWlsYXJGaWxlcy5wdXNoKHtcclxuXHRcdFx0XHRcdFx0XHRmaWxlOiBvdGhlckZpbGVQYXRoLFxyXG5cdFx0XHRcdFx0XHRcdHNpbWlsYXJpdHlcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoc2ltaWxhckZpbGVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRkdXBsaWNhdGVzLnB1c2goe1xyXG5cdFx0XHRcdFx0cGFyYWdyYXBoOiBpICsgMSxcclxuXHRcdFx0XHRcdHNpbWlsYXJGaWxlc1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gR2VuZXJhdGUgcmVzdWx0c1xyXG5cdFx0aWYgKGR1cGxpY2F0ZXMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRkdXBsaWNhdGVzLmZvckVhY2goKHsgcGFyYWdyYXBoLCBzaW1pbGFyRmlsZXMgfSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IG1heFNpbWlsYXJpdHkgPSBNYXRoLm1heCguLi5zaW1pbGFyRmlsZXMubWFwKHMgPT4gcy5zaW1pbGFyaXR5KSk7XHJcblx0XHRcdFx0Y29uc3QgZmlsZUxpc3QgPSBzaW1pbGFyRmlsZXNcclxuXHRcdFx0XHRcdC5zb3J0KChhLCBiKSA9PiBiLnNpbWlsYXJpdHkgLSBhLnNpbWlsYXJpdHkpXHJcblx0XHRcdFx0XHQuc2xpY2UoMCwgMykgLy8gU2hvdyB0b3AgMyBtYXRjaGVzXHJcblx0XHRcdFx0XHQubWFwKHMgPT4gYDxhIGhyZWY9XCIjXCIgZGF0YS1maWxlLXBhdGg9XCIke3MuZmlsZX1cIiBjbGFzcz1cInNlby1maWxlLWxpbmtcIj4ke3RoaXMuZ2V0RGlzcGxheVBhdGgocy5maWxlKX08L2E+ICgke3Muc2ltaWxhcml0eS50b0ZpeGVkKDEpfSUpYClcclxuXHRcdFx0XHRcdC5qb2luKCcsICcpO1xyXG5cclxuXHRcdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdFx0cGFzc2VkOiBmYWxzZSxcclxuXHRcdFx0XHRcdG1lc3NhZ2U6IGBEdXBsaWNhdGUgY29udGVudCBkZXRlY3RlZCBpbiBwYXJhZ3JhcGggJHtwYXJhZ3JhcGh9YCxcclxuXHRcdFx0XHRcdHN1Z2dlc3Rpb246IGBTaW1pbGFyaXR5OiAke21heFNpbWlsYXJpdHkudG9GaXhlZCgxKX0lIHdpdGg6ICR7ZmlsZUxpc3R9YCxcclxuXHRcdFx0XHRcdHNldmVyaXR5OiAnZXJyb3InLFxyXG5cdFx0XHRcdFx0cG9zaXRpb246IHtcclxuXHRcdFx0XHRcdFx0bGluZTogdGhpcy5maW5kUGFyYWdyYXBoTGluZShmaWxlTWV0YWRhdGEuY29udGVudCwgcGFyYWdyYXBoIC0gMSksXHJcblx0XHRcdFx0XHRcdHNlYXJjaFRleHQ6IHBhcmFncmFwaHNbcGFyYWdyYXBoIC0gMV0/LnN1YnN0cmluZygwLCA1MCkgKyAnLi4uJyxcclxuXHRcdFx0XHRcdFx0Y29udGV4dDogYFBhcmFncmFwaCAke3BhcmFncmFwaH0gY29udGVudGBcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXN1bHRzLnB1c2goe1xyXG5cdFx0XHRcdHBhc3NlZDogdHJ1ZSxcclxuXHRcdFx0XHRtZXNzYWdlOiBcIk5vIGR1cGxpY2F0ZSBjb250ZW50IGRldGVjdGVkXCIsXHJcblx0XHRcdFx0c2V2ZXJpdHk6ICdpbmZvJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmVzdWx0cztcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNwbGl0IGNvbnRlbnQgaW50byBwYXJhZ3JhcGhzLCBmaWx0ZXJpbmcgb3V0IG5vbi1jb250ZW50IGVsZW1lbnRzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBzcGxpdEludG9QYXJhZ3JhcGhzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuXHRcdC8vIFVzZSB0aGUgY29udGVudCBwYXJzZXIgdG8gcmVtb3ZlIGNvZGUgYmxvY2tzLCBIVE1MLCBhbmQgb3RoZXIgbm9uLWNvbnRlbnRcclxuXHRcdGxldCBjbGVhbkNvbnRlbnQgPSByZW1vdmVDb2RlQmxvY2tzKGNvbnRlbnQpO1xyXG5cdFx0XHJcblx0XHQvLyBBZGRpdGlvbmFsIGZpbHRlcmluZyBmb3Igc3RydWN0dXJhbCBlbGVtZW50c1xyXG5cdFx0Y2xlYW5Db250ZW50ID0gY2xlYW5Db250ZW50XHJcblx0XHRcdC5yZXBsYWNlKC9eI3sxLDZ9XFxzKy9nbSwgJycpIC8vIFJlbW92ZSBoZWFkaW5nIG1hcmtlcnNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqWy0qK11cXHMrL2dtLCAnJykgLy8gUmVtb3ZlIGxpc3QgbWFya2Vyc1xyXG5cdFx0XHQucmVwbGFjZSgvXlxccypcXGQrXFwuXFxzKy9nbSwgJycpIC8vIFJlbW92ZSBudW1iZXJlZCBsaXN0IG1hcmtlcnNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqPlxccyovZ20sICcnKSAvLyBSZW1vdmUgYmxvY2txdW90ZSBtYXJrZXJzXHJcblx0XHRcdC5yZXBsYWNlKC9eXFxzKlxcfC4qXFx8LiokL2dtLCAnJykgLy8gUmVtb3ZlIHRhYmxlIHJvd3NcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqXFx8LiokL2dtLCAnJykgLy8gUmVtb3ZlIHRhYmxlIHNlcGFyYXRvcnNcclxuXHRcdFx0LnJlcGxhY2UoL1xcW1xcWy4qP1xcXVxcXS9nLCAnJykgLy8gUmVtb3ZlIE9ic2lkaWFuIGludGVybmFsIGxpbmtzXHJcblx0XHRcdC5yZXBsYWNlKC8hXFxbXFxbLio/XFxdXFxdL2csICcnKSAvLyBSZW1vdmUgT2JzaWRpYW4gaW1hZ2UgbGlua3NcclxuXHRcdFx0LnJlcGxhY2UoL1xcWy4qP1xcXVxcKC4qP1xcKS9nLCAnJykgLy8gUmVtb3ZlIG1hcmtkb3duIGxpbmtzXHJcblx0XHRcdC5yZXBsYWNlKC8hXFxbLio/XFxdXFwoLio/XFwpL2csICcnKSAvLyBSZW1vdmUgbWFya2Rvd24gaW1hZ2VzXHJcblx0XHRcdC5yZXBsYWNlKC9eXFxzKi0tLVxccyokL2dtLCAnJykgLy8gUmVtb3ZlIGhvcml6b250YWwgcnVsZXNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqXFwrXFwrXFwrXFxzKiQvZ20sICcnKSAvLyBSZW1vdmUgT2JzaWRpYW4gc3BvaWxlcnNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqPT1cXHMqJC9nbSwgJycpIC8vIFJlbW92ZSBPYnNpZGlhbiBoaWdobGlnaHRzXHJcblx0XHRcdC5yZXBsYWNlKC9eXFxzKiEhXFxzKiQvZ20sICcnKSAvLyBSZW1vdmUgT2JzaWRpYW4gY2FsbG91dHNcclxuXHRcdFx0LnJlcGxhY2UoL15cXHMqPlxccypcXFshLio/XFxdXFxzKiQvZ20sICcnKSAvLyBSZW1vdmUgT2JzaWRpYW4gY2FsbG91dCBoZWFkZXJzXHJcblx0XHRcdC5yZXBsYWNlKC9eXFxzKj5cXHMqJC9nbSwgJycpIC8vIFJlbW92ZSBlbXB0eSBibG9ja3F1b3Rlc1xyXG5cdFx0XHQucmVwbGFjZSgvXlxccyokL2dtLCAnJykgLy8gUmVtb3ZlIGVtcHR5IGxpbmVzXHJcblx0XHRcdC50cmltKCk7XHJcblx0XHRcclxuXHRcdC8vIFNwbGl0IGludG8gcGFyYWdyYXBocyBhbmQgZmlsdGVyIG91dCBub24tY29udGVudFxyXG5cdFx0cmV0dXJuIGNsZWFuQ29udGVudFxyXG5cdFx0XHQuc3BsaXQoL1xcblxccypcXG4vKVxyXG5cdFx0XHQubWFwKHAgPT4gcC50cmltKCkpXHJcblx0XHRcdC5maWx0ZXIocCA9PiB7XHJcblx0XHRcdFx0Ly8gRmlsdGVyIG91dCBwYXJhZ3JhcGhzIHRoYXQgYXJlIHRvbyBzaG9ydCBvciBjb250YWluIG9ubHkgc3RydWN0dXJhbCBlbGVtZW50c1xyXG5cdFx0XHRcdGlmIChwLmxlbmd0aCA8IDMwKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRmlsdGVyIG91dCBwYXJhZ3JhcGhzIHRoYXQgYXJlIG1vc3RseSBIVE1MLWxpa2UgY29udGVudFxyXG5cdFx0XHRcdGNvbnN0IGh0bWxMaWtlUmF0aW8gPSAocC5tYXRjaCgvPFtePl0qPi9nKSB8fCBbXSkuam9pbignJykubGVuZ3RoIC8gcC5sZW5ndGg7XHJcblx0XHRcdFx0aWYgKGh0bWxMaWtlUmF0aW8gPiAwLjMpIHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBGaWx0ZXIgb3V0IHBhcmFncmFwaHMgdGhhdCBhcmUgbW9zdGx5IHNwZWNpYWwgY2hhcmFjdGVycyBvciBmb3JtYXR0aW5nXHJcblx0XHRcdFx0Y29uc3Qgc3BlY2lhbENoYXJSYXRpbyA9IChwLm1hdGNoKC9bXlxcd1xccy4sIT87OidcIigpLV0vZykgfHwgW10pLmxlbmd0aCAvIHAubGVuZ3RoO1xyXG5cdFx0XHRcdGlmIChzcGVjaWFsQ2hhclJhdGlvID4gMC41KSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gRmlsdGVyIG91dCBwYXJhZ3JhcGhzIHRoYXQgYXJlIG1vc3RseSBudW1iZXJzIG9yIHN5bWJvbHNcclxuXHRcdFx0XHRjb25zdCB3b3JkUmF0aW8gPSAocC5tYXRjaCgvXFxiXFx3K1xcYi9nKSB8fCBbXSkubGVuZ3RoIC8gcC5zcGxpdCgvXFxzKy8pLmxlbmd0aDtcclxuXHRcdFx0XHRpZiAod29yZFJhdGlvIDwgMC4zKSByZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2FsY3VsYXRlIEphY2NhcmQgc2ltaWxhcml0eSBiZXR3ZWVuIHR3byB0ZXh0c1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgY2FsY3VsYXRlSmFjY2FyZFNpbWlsYXJpdHkodGV4dDE6IHN0cmluZywgdGV4dDI6IHN0cmluZyk6IG51bWJlciB7XHJcblx0XHQvLyBOb3JtYWxpemUgdGV4dCBieSByZW1vdmluZyBleHRyYSB3aGl0ZXNwYWNlIGFuZCBjb252ZXJ0aW5nIHRvIGxvd2VyY2FzZVxyXG5cdFx0Y29uc3Qgbm9ybWFsaXplID0gKHRleHQ6IHN0cmluZykgPT4gdGV4dC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XHJcblx0XHRcclxuXHRcdGNvbnN0IG5vcm1hbGl6ZWQxID0gbm9ybWFsaXplKHRleHQxKTtcclxuXHRcdGNvbnN0IG5vcm1hbGl6ZWQyID0gbm9ybWFsaXplKHRleHQyKTtcclxuXHRcdFxyXG5cdFx0Ly8gRXh0cmFjdCB3b3JkcywgZmlsdGVyaW5nIG91dCB2ZXJ5IHNob3J0IHdvcmRzIGFuZCBjb21tb24gc3RvcCB3b3Jkc1xyXG5cdFx0Y29uc3Qgc3RvcFdvcmRzID0gbmV3IFNldChbJ3RoZScsICdhbmQnLCAnb3InLCAnYnV0JywgJ2luJywgJ29uJywgJ2F0JywgJ3RvJywgJ2ZvcicsICdvZicsICd3aXRoJywgJ2J5JywgJ2EnLCAnYW4nLCAnaXMnLCAnYXJlJywgJ3dhcycsICd3ZXJlJywgJ2JlJywgJ2JlZW4nLCAnaGF2ZScsICdoYXMnLCAnaGFkJywgJ2RvJywgJ2RvZXMnLCAnZGlkJywgJ3dpbGwnLCAnd291bGQnLCAnY291bGQnLCAnc2hvdWxkJywgJ21heScsICdtaWdodCcsICdjYW4nLCAndGhpcycsICd0aGF0JywgJ3RoZXNlJywgJ3Rob3NlJywgJ2knLCAneW91JywgJ2hlJywgJ3NoZScsICdpdCcsICd3ZScsICd0aGV5JywgJ21lJywgJ2hpbScsICdoZXInLCAndXMnLCAndGhlbSddKTtcclxuXHRcdFxyXG5cdFx0Y29uc3Qgd29yZHMxID0gbmV3IFNldChcclxuXHRcdFx0bm9ybWFsaXplZDFcclxuXHRcdFx0XHQuc3BsaXQoL1xccysvKVxyXG5cdFx0XHRcdC5maWx0ZXIodyA9PiB3Lmxlbmd0aCA+IDIgJiYgIXN0b3BXb3Jkcy5oYXModykpXHJcblx0XHRcdFx0Lm1hcCh3ID0+IHcucmVwbGFjZSgvW15cXHddL2csICcnKSkgLy8gUmVtb3ZlIHB1bmN0dWF0aW9uXHJcblx0XHRcdFx0LmZpbHRlcih3ID0+IHcubGVuZ3RoID4gMClcclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGNvbnN0IHdvcmRzMiA9IG5ldyBTZXQoXHJcblx0XHRcdG5vcm1hbGl6ZWQyXHJcblx0XHRcdFx0LnNwbGl0KC9cXHMrLylcclxuXHRcdFx0XHQuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAyICYmICFzdG9wV29yZHMuaGFzKHcpKVxyXG5cdFx0XHRcdC5tYXAodyA9PiB3LnJlcGxhY2UoL1teXFx3XS9nLCAnJykpIC8vIFJlbW92ZSBwdW5jdHVhdGlvblxyXG5cdFx0XHRcdC5maWx0ZXIodyA9PiB3Lmxlbmd0aCA+IDApXHJcblx0XHQpO1xyXG5cdFx0XHJcblx0XHQvLyBJZiBlaXRoZXIgc2V0IGlzIGVtcHR5LCByZXR1cm4gMCBzaW1pbGFyaXR5XHJcblx0XHRpZiAod29yZHMxLnNpemUgPT09IDAgfHwgd29yZHMyLnNpemUgPT09IDApIHtcclxuXHRcdFx0cmV0dXJuIDA7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNvbnN0IGludGVyc2VjdGlvbiA9IG5ldyBTZXQoWy4uLndvcmRzMV0uZmlsdGVyKHggPT4gd29yZHMyLmhhcyh4KSkpO1xyXG5cdFx0Y29uc3QgdW5pb24gPSBuZXcgU2V0KFsuLi53b3JkczEsIC4uLndvcmRzMl0pO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gKGludGVyc2VjdGlvbi5zaXplIC8gdW5pb24uc2l6ZSkgKiAxMDA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIHRoZSBsaW5lIG51bWJlciBvZiBhIHBhcmFncmFwaCBpbiB0aGUgY29udGVudFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZmluZFBhcmFncmFwaExpbmUoY29udGVudDogc3RyaW5nLCBwYXJhZ3JhcGhJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRcdGNvbnN0IHBhcmFncmFwaHMgPSB0aGlzLnNwbGl0SW50b1BhcmFncmFwaHMoY29udGVudCk7XHJcblx0XHRpZiAocGFyYWdyYXBoSW5kZXggPj0gcGFyYWdyYXBocy5sZW5ndGgpIHJldHVybiAxO1xyXG5cdFx0XHJcblx0XHRjb25zdCB0YXJnZXRQYXJhZ3JhcGggPSBwYXJhZ3JhcGhzW3BhcmFncmFwaEluZGV4XTtcclxuXHRcdGlmICghdGFyZ2V0UGFyYWdyYXBoKSByZXR1cm4gMTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuXHRcdFxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjb25zdCBsaW5lID0gbGluZXNbaV07XHJcblx0XHRcdGlmIChsaW5lICYmIGxpbmUuaW5jbHVkZXModGFyZ2V0UGFyYWdyYXBoLnN1YnN0cmluZygwLCA1MCkpKSB7XHJcblx0XHRcdFx0cmV0dXJuIGkgKyAxO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiAxO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IGRpc3BsYXkgcGF0aCBmb3IgYSBmaWxlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBnZXREaXNwbGF5UGF0aChmaWxlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuXHRcdC8vIElmIHdlIGhhdmUgdmF1bHQgZGF0YSBhbmQgdXNlTm90ZVRpdGxlcyBpcyBlbmFibGVkLCB0cnkgdG8gZ2V0IHRoZSB0aXRsZVxyXG5cdFx0aWYgKHRoaXMudmF1bHREYXRhICYmIHRoaXMuc2V0dGluZ3MudXNlTm90ZVRpdGxlcykge1xyXG5cdFx0XHRjb25zdCBmaWxlTWV0YWRhdGEgPSB0aGlzLnZhdWx0RGF0YS5maWxlcy5nZXQoZmlsZVBhdGgpO1xyXG5cdFx0XHRpZiAoZmlsZU1ldGFkYXRhICYmIGZpbGVNZXRhZGF0YS50aXRsZSkge1xyXG5cdFx0XHRcdHJldHVybiBmaWxlTWV0YWRhdGEudGl0bGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRmFsbGJhY2sgdG8gZmlsZW5hbWVcclxuXHRcdGNvbnN0IHBhcnRzID0gZmlsZVBhdGguc3BsaXQoJy8nKTtcclxuXHRcdHJldHVybiBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXSB8fCBmaWxlUGF0aDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENsZWFyIGNhY2hlZCB2YXVsdCBkYXRhXHJcblx0ICovXHJcblx0Y2xlYXJDYWNoZSgpOiB2b2lkIHtcclxuXHRcdHRoaXMudmF1bHREYXRhID0gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBjdXJyZW50IHZhdWx0IGRhdGFcclxuXHQgKi9cclxuXHRnZXRWYXVsdERhdGEoKTogVmF1bHREYXRhIHwgbnVsbCB7XHJcblx0XHRyZXR1cm4gdGhpcy52YXVsdERhdGE7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgU0VPUGx1Z2luIGZyb20gXCIuL21haW5cIjtcbmltcG9ydCB7IFNFT1Jlc3VsdHMgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuXG4vLyBTaW1wbGUgY2FjaGUgZm9yIFNFTyByZXN1bHRzXG5pbnRlcmZhY2UgQ2FjaGVFbnRyeSB7XG5cdHJlc3VsdDogU0VPUmVzdWx0cztcblx0dGltZXN0YW1wOiBudW1iZXI7XG5cdGZpbGVIYXNoOiBzdHJpbmc7XG5cdHNldHRpbmdzSGFzaDogc3RyaW5nO1xufVxuXG5jb25zdCBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBDYWNoZUVudHJ5PigpO1xuY29uc3QgQ0FDSEVfRVhQSVJZX01TID0gMjQgKiA2MCAqIDYwICogMTAwMDsgLy8gMjQgaG91cnNcbmltcG9ydCB7XG5cdGNoZWNrQWx0VGV4dCxcblx0Y2hlY2tOYWtlZExpbmtzLFxuXHRjaGVja0hlYWRpbmdPcmRlcixcblx0Y2hlY2tLZXl3b3JkRGVuc2l0eSxcblx0Y2hlY2tCcm9rZW5MaW5rcyxcblx0Y2hlY2tFeHRlcm5hbExpbmtzLFxuXHRjaGVja0V4dGVybmFsQnJva2VuTGlua3MsXG5cdGNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rcyxcblx0Y2hlY2tNZXRhRGVzY3JpcHRpb24sXG5cdGNoZWNrVGl0bGVMZW5ndGgsXG5cdGNoZWNrVGl0bGVIMVVuaXF1ZW5lc3MsXG5cdGNoZWNrQ29udGVudExlbmd0aCxcblx0Y2hlY2tJbWFnZU5hbWluZyxcblx0Y2hlY2tEdXBsaWNhdGVDb250ZW50LFxuXHRjaGVja1JlYWRpbmdMZXZlbCxcblx0Y2hlY2tOb3RpY2VzLFxuXHRjaGVja0tleXdvcmRJblRpdGxlLFxuXHRjaGVja0tleXdvcmRJbkRlc2NyaXB0aW9uLFxuXHRjaGVja0tleXdvcmRJbkhlYWRpbmdzLFxuXHRjaGVja0tleXdvcmRJblNsdWcsXG5cdGNoZWNrU2x1Z0Zvcm1hdCxcblx0Z2V0RGlzcGxheU5hbWVcbn0gZnJvbSBcIi4vY2hlY2tzXCI7XG5pbXBvcnQge1xuXHRjaGVja0R1cGxpY2F0ZVRpdGxlcyxcblx0Y2hlY2tEdXBsaWNhdGVEZXNjcmlwdGlvbnMsXG5cdGNoZWNrVmF1bHREdXBsaWNhdGVDb250ZW50XG59IGZyb20gXCIuL2NoZWNrcy9jb250ZW50LWNoZWNrc1wiO1xuaW1wb3J0IHsgVmF1bHREdXBsaWNhdGVEZXRlY3RvciB9IGZyb20gXCIuL2NoZWNrcy9kdXBsaWNhdGUtZGV0ZWN0aW9uXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5TRU9DaGVjayhwbHVnaW46IFNFT1BsdWdpbiwgZmlsZXM6IFRGaWxlW10sIGFib3J0Q29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcik6IFByb21pc2U8U0VPUmVzdWx0c1tdPiB7XG5cdGNvbnN0IHJlc3VsdHM6IFNFT1Jlc3VsdHNbXSA9IFtdO1xuXG5cdC8vIENyZWF0ZSB2YXVsdCBkZXRlY3RvciBmb3IgZHVwbGljYXRlIGRldGVjdGlvblxuXHRjb25zdCB2YXVsdERldGVjdG9yID0gbmV3IFZhdWx0RHVwbGljYXRlRGV0ZWN0b3IocGx1Z2luLmFwcCwgcGx1Z2luLnNldHRpbmdzKTtcblxuXHQvLyBDb2xsZWN0IHZhdWx0IGRhdGEgaWYgZHVwbGljYXRlIGRldGVjdGlvbiBpcyBlbmFibGVkXG5cdGlmIChwbHVnaW4uc2V0dGluZ3MuY2hlY2tEdXBsaWNhdGVDb250ZW50KSB7XG5cdFx0YXdhaXQgdmF1bHREZXRlY3Rvci5jb2xsZWN0VmF1bHREYXRhKCk7XG5cdH1cblxuXHRmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcblx0XHQvLyBDaGVjayBmb3IgY2FuY2VsbGF0aW9uIGJlZm9yZSBwcm9jZXNzaW5nIGVhY2ggZmlsZVxuXHRcdGlmIChhYm9ydENvbnRyb2xsZXI/LnNpZ25hbC5hYm9ydGVkKSB7XG5cdFx0XHR0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKCdPcGVyYXRpb24gd2FzIGFib3J0ZWQnLCAnQWJvcnRFcnJvcicpO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBDaGVjayBjYWNoZSBmaXJzdFxuXHRcdFx0Y29uc3QgY2FjaGVkUmVzdWx0ID0gZ2V0Q2FjaGVkUmVzdWx0KGZpbGUsIHBsdWdpbik7XG5cdFx0XHRpZiAoY2FjaGVkUmVzdWx0KSB7XG5cdFx0XHRcdHJlc3VsdHMucHVzaChjYWNoZWRSZXN1bHQpO1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUnVuIGZyZXNoIGNoZWNrXG5cdFx0XHRjb25zdCBjb250ZW50ID0gYXdhaXQgcGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tGaWxlKHBsdWdpbiwgZmlsZSwgY29udGVudCwgdmF1bHREZXRlY3RvciwgYWJvcnRDb250cm9sbGVyKTtcblxuXHRcdFx0Ly8gQ2FjaGUgdGhlIHJlc3VsdFxuXHRcdFx0dm9pZCBjYWNoZVJlc3VsdChmaWxlLCByZXN1bHQsIHBsdWdpbik7XG5cdFx0XHRyZXN1bHRzLnB1c2gocmVzdWx0KTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG5cdFx0XHRcdHRocm93IGVycm9yOyAvLyBSZS10aHJvdyBBYm9ydEVycm9yIHRvIHByb3BhZ2F0ZSBjYW5jZWxsYXRpb25cblx0XHRcdH1cblx0XHRcdGNvbnNvbGUuZXJyb3IoYEVycm9yIGNoZWNraW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcblx0XHR9XG5cdH1cblxuXHQvLyBEb24ndCBzaG93IG5vdGlmaWNhdGlvbiBoZXJlIC0gbGV0IHRoZSBjYWxsaW5nIGNvZGUgaGFuZGxlIGl0XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjaGVja0ZpbGUocGx1Z2luOiBTRU9QbHVnaW4sIGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcsIHZhdWx0RGV0ZWN0b3I6IFZhdWx0RHVwbGljYXRlRGV0ZWN0b3IsIGFib3J0Q29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcik6IFByb21pc2U8U0VPUmVzdWx0cz4ge1xuXHRjb25zdCBjaGVja3MgPSB7XG5cdFx0dGl0bGVMZW5ndGg6IGF3YWl0IGNoZWNrVGl0bGVMZW5ndGgoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRtZXRhRGVzY3JpcHRpb246IGF3YWl0IGNoZWNrTWV0YURlc2NyaXB0aW9uKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncyksXG5cdFx0dGl0bGVIMVVuaXF1ZW5lc3M6IGF3YWl0IGNoZWNrVGl0bGVIMVVuaXF1ZW5lc3MoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRrZXl3b3JkSW5UaXRsZTogYXdhaXQgY2hlY2tLZXl3b3JkSW5UaXRsZShjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MpLFxuXHRcdGtleXdvcmRJbkRlc2NyaXB0aW9uOiBhd2FpdCBjaGVja0tleXdvcmRJbkRlc2NyaXB0aW9uKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncyksXG5cdFx0a2V5d29yZEluSGVhZGluZ3M6IGF3YWl0IGNoZWNrS2V5d29yZEluSGVhZGluZ3MoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRrZXl3b3JkSW5TbHVnOiBhd2FpdCBjaGVja0tleXdvcmRJblNsdWcoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRzbHVnRm9ybWF0OiBhd2FpdCBjaGVja1NsdWdGb3JtYXQoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRrZXl3b3JkRGVuc2l0eTogYXdhaXQgY2hlY2tLZXl3b3JkRGVuc2l0eShjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MpLFxuXHRcdGhlYWRpbmdPcmRlcjogYXdhaXQgY2hlY2tIZWFkaW5nT3JkZXIoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRjb250ZW50TGVuZ3RoOiBhd2FpdCBjaGVja0NvbnRlbnRMZW5ndGgoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRkdXBsaWNhdGVUaXRsZXM6IGF3YWl0IGNoZWNrRHVwbGljYXRlVGl0bGVzKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncywgdmF1bHREZXRlY3RvciksXG5cdFx0ZHVwbGljYXRlRGVzY3JpcHRpb25zOiBhd2FpdCBjaGVja0R1cGxpY2F0ZURlc2NyaXB0aW9ucyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MsIHZhdWx0RGV0ZWN0b3IpLFxuXHRcdGR1cGxpY2F0ZUNvbnRlbnQ6IHBsdWdpbi5zZXR0aW5ncy5jaGVja0R1cGxpY2F0ZUNvbnRlbnRcblx0XHRcdD8gYXdhaXQgY2hlY2tWYXVsdER1cGxpY2F0ZUNvbnRlbnQoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzLCB2YXVsdERldGVjdG9yKVxuXHRcdFx0OiBhd2FpdCBjaGVja0R1cGxpY2F0ZUNvbnRlbnQoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRhbHRUZXh0OiBhd2FpdCBjaGVja0FsdFRleHQoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSxcblx0XHRpbWFnZUZpbGVOYW1lczogYXdhaXQgY2hlY2tJbWFnZU5hbWluZyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MpLFxuXHRcdG5ha2VkTGlua3M6IGF3YWl0IGNoZWNrTmFrZWRMaW5rcyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MpLFxuXHRcdGJyb2tlbkxpbmtzOiBhd2FpdCBjaGVja0Jyb2tlbkxpbmtzKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncywgcGx1Z2luLmFwcCksXG5cdFx0cG90ZW50aWFsbHlCcm9rZW5MaW5rczogYXdhaXQgY2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncywgcGx1Z2luLmFwcCksXG5cdFx0cG90ZW50aWFsbHlCcm9rZW5FbWJlZHM6IGF3YWl0IGNoZWNrTm90aWNlcyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MpLFxuXHRcdGV4dGVybmFsQnJva2VuTGlua3M6IHBsdWdpbi5zZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtWYXVsdENoZWNrXG5cdFx0XHQ/IGF3YWl0IGNoZWNrRXh0ZXJuYWxCcm9rZW5MaW5rcyhjb250ZW50LCBmaWxlLCBwbHVnaW4uc2V0dGluZ3MsIGFib3J0Q29udHJvbGxlcilcblx0XHRcdDogKHBsdWdpbi5zZXR0aW5ncy5jaGVja0V4dGVybmFsTGlua3MgPyBhd2FpdCBjaGVja0V4dGVybmFsTGlua3MoY29udGVudCwgZmlsZSwgcGx1Z2luLnNldHRpbmdzKSA6IFtdKSxcblx0XHRyZWFkaW5nTGV2ZWw6IGF3YWl0IGNoZWNrUmVhZGluZ0xldmVsKGNvbnRlbnQsIGZpbGUsIHBsdWdpbi5zZXR0aW5ncylcblx0fTtcblxuXHQvLyBDYWxjdWxhdGUgb3ZlcmFsbCBzY29yZSBhbmQgY291bnRzXG5cdGNvbnN0IGFsbFJlc3VsdHMgPSBPYmplY3QudmFsdWVzKGNoZWNrcykuZmxhdCgpO1xuXHRjb25zdCBpc3N1ZXNDb3VudCA9IGFsbFJlc3VsdHMuZmlsdGVyKHIgPT4gci5zZXZlcml0eSA9PT0gJ2Vycm9yJykubGVuZ3RoO1xuXHRjb25zdCB3YXJuaW5nc0NvdW50ID0gYWxsUmVzdWx0cy5maWx0ZXIociA9PiByLnNldmVyaXR5ID09PSAnd2FybmluZycpLmxlbmd0aDtcblx0Y29uc3Qgbm90aWNlc0NvdW50ID0gYWxsUmVzdWx0cy5maWx0ZXIociA9PiByLnNldmVyaXR5ID09PSAnbm90aWNlJykubGVuZ3RoO1xuXG5cdC8vIENhbGN1bGF0ZSB3ZWlnaHRlZCBTRU8gc2NvcmluZyBzeXN0ZW0gKDAtMTAwKVxuXHRsZXQgb3ZlcmFsbFNjb3JlID0gMDtcblxuXHQvLyAxLiBUaXRsZSBvcHRpbWl6YXRpb24gKDE1IHBvaW50cylcblx0Y29uc3QgdGl0bGVSZXN1bHRzID0gWy4uLmNoZWNrcy50aXRsZUxlbmd0aCwgLi4uY2hlY2tzLnRpdGxlSDFVbmlxdWVuZXNzXTtcblx0aWYgKHRpdGxlUmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdFx0Y29uc3QgcGFzc2VkQ291bnQgPSB0aXRsZVJlc3VsdHMuZmlsdGVyKHIgPT4gci5wYXNzZWQpLmxlbmd0aDtcblx0XHRvdmVyYWxsU2NvcmUgKz0gKHBhc3NlZENvdW50IC8gdGl0bGVSZXN1bHRzLmxlbmd0aCkgKiAxNTtcblx0fSBlbHNlIHtcblx0XHRvdmVyYWxsU2NvcmUgKz0gMTU7IC8vIEFzc3VtZSBwYXNzIGlmIG5vIGNoZWNrc1xuXHR9XG5cblx0Ly8gMi4gTWV0YSBkZXNjcmlwdGlvbiAoMTUgcG9pbnRzKVxuXHRjb25zdCBtZXRhUmVzdWx0cyA9IGNoZWNrcy5tZXRhRGVzY3JpcHRpb247XG5cdGlmIChtZXRhUmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdFx0Y29uc3QgcGFzc2VkQ291bnQgPSBtZXRhUmVzdWx0cy5maWx0ZXIociA9PiByLnBhc3NlZCkubGVuZ3RoO1xuXHRcdG92ZXJhbGxTY29yZSArPSAocGFzc2VkQ291bnQgLyBtZXRhUmVzdWx0cy5sZW5ndGgpICogMTU7XG5cdH0gZWxzZSB7XG5cdFx0b3ZlcmFsbFNjb3JlICs9IDE1O1xuXHR9XG5cblx0Ly8gMy4gSGVhZGluZyBoaWVyYXJjaHkgKDE1IHBvaW50cylcblx0Y29uc3QgaGVhZGluZ1Jlc3VsdHMgPSBjaGVja3MuaGVhZGluZ09yZGVyO1xuXHRpZiAoaGVhZGluZ1Jlc3VsdHMubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IHBhc3NlZENvdW50ID0gaGVhZGluZ1Jlc3VsdHMuZmlsdGVyKHIgPT4gci5wYXNzZWQpLmxlbmd0aDtcblx0XHRvdmVyYWxsU2NvcmUgKz0gKHBhc3NlZENvdW50IC8gaGVhZGluZ1Jlc3VsdHMubGVuZ3RoKSAqIDE1O1xuXHR9IGVsc2Uge1xuXHRcdG92ZXJhbGxTY29yZSArPSAxNTtcblx0fVxuXG5cdC8vIDQuIENvbnRlbnQgcXVhbGl0eSAoMjAgcG9pbnRzKVxuXHRjb25zdCBjb250ZW50UmVzdWx0cyA9IFsuLi5jaGVja3MuY29udGVudExlbmd0aCwgLi4uY2hlY2tzLnJlYWRpbmdMZXZlbF07XG5cdGlmIChjb250ZW50UmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdFx0Y29uc3QgcGFzc2VkQ291bnQgPSBjb250ZW50UmVzdWx0cy5maWx0ZXIociA9PiByLnBhc3NlZCkubGVuZ3RoO1xuXHRcdG92ZXJhbGxTY29yZSArPSAocGFzc2VkQ291bnQgLyBjb250ZW50UmVzdWx0cy5sZW5ndGgpICogMjA7XG5cdH0gZWxzZSB7XG5cdFx0b3ZlcmFsbFNjb3JlICs9IDIwO1xuXHR9XG5cblx0Ly8gNS4gSW1hZ2UgYWx0IHRleHQgKDEwIHBvaW50cylcblx0Y29uc3QgYWx0VGV4dFJlc3VsdHMgPSBjaGVja3MuYWx0VGV4dDtcblx0aWYgKGFsdFRleHRSZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0XHRjb25zdCBwYXNzZWRDb3VudCA9IGFsdFRleHRSZXN1bHRzLmZpbHRlcihyID0+IHIucGFzc2VkKS5sZW5ndGg7XG5cdFx0b3ZlcmFsbFNjb3JlICs9IChwYXNzZWRDb3VudCAvIGFsdFRleHRSZXN1bHRzLmxlbmd0aCkgKiAxMDtcblx0fSBlbHNlIHtcblx0XHRvdmVyYWxsU2NvcmUgKz0gMTA7XG5cdH1cblxuXHQvLyA2LiBMaW5rIGhlYWx0aCAoMTUgcG9pbnRzKVxuXHRjb25zdCBsaW5rUmVzdWx0cyA9IFsuLi5jaGVja3MuYnJva2VuTGlua3MsIC4uLmNoZWNrcy5uYWtlZExpbmtzXTtcblx0aWYgKGxpbmtSZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0XHRjb25zdCBwYXNzZWRDb3VudCA9IGxpbmtSZXN1bHRzLmZpbHRlcihyID0+IHIucGFzc2VkKS5sZW5ndGg7XG5cdFx0b3ZlcmFsbFNjb3JlICs9IChwYXNzZWRDb3VudCAvIGxpbmtSZXN1bHRzLmxlbmd0aCkgKiAxNTtcblx0fSBlbHNlIHtcblx0XHRvdmVyYWxsU2NvcmUgKz0gMTU7XG5cdH1cblxuXHQvLyA3LiBLZXl3b3JkIHVzYWdlICgxMCBwb2ludHMpXG5cdGNvbnN0IGtleXdvcmRSZXN1bHRzID0gW1xuXHRcdC4uLmNoZWNrcy5rZXl3b3JkRGVuc2l0eSxcblx0XHQuLi5jaGVja3Mua2V5d29yZEluVGl0bGUsXG5cdFx0Li4uY2hlY2tzLmtleXdvcmRJbkRlc2NyaXB0aW9uLFxuXHRcdC4uLmNoZWNrcy5rZXl3b3JkSW5IZWFkaW5ncyxcblx0XHQuLi5jaGVja3Mua2V5d29yZEluU2x1Z1xuXHRdO1xuXHRpZiAoa2V5d29yZFJlc3VsdHMubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IHBhc3NlZENvdW50ID0ga2V5d29yZFJlc3VsdHMuZmlsdGVyKHIgPT4gci5wYXNzZWQpLmxlbmd0aDtcblx0XHRvdmVyYWxsU2NvcmUgKz0gKHBhc3NlZENvdW50IC8ga2V5d29yZFJlc3VsdHMubGVuZ3RoKSAqIDEwO1xuXHR9IGVsc2Uge1xuXHRcdG92ZXJhbGxTY29yZSArPSAxMDtcblx0fVxuXG5cdG92ZXJhbGxTY29yZSA9IE1hdGgucm91bmQoTWF0aC5tYXgoMCwgTWF0aC5taW4oMTAwLCBvdmVyYWxsU2NvcmUpKSk7XG5cblx0cmV0dXJuIHtcblx0XHRmaWxlOiBmaWxlLnBhdGgsXG5cdFx0ZGlzcGxheU5hbWU6IGdldERpc3BsYXlOYW1lKGZpbGUsIGNvbnRlbnQsIHBsdWdpbi5zZXR0aW5ncyksXG5cdFx0Y2hlY2tzLFxuXHRcdG92ZXJhbGxTY29yZSxcblx0XHRpc3N1ZXNDb3VudCxcblx0XHR3YXJuaW5nc0NvdW50LFxuXHRcdG5vdGljZXNDb3VudFxuXHR9O1xufVxuXG4vLyBDYWNoZSBoZWxwZXIgZnVuY3Rpb25zXG5hc3luYyBmdW5jdGlvbiBnZW5lcmF0ZUZpbGVIYXNoKGZpbGU6IFRGaWxlLCBhcHA6IEFwcCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdHRyeSB7XG5cdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdGNvbnN0IHN0YXQgPSBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5zdGF0KGZpbGUucGF0aCk7XG5cdFx0Ly8gU2ltcGxlIGhhc2ggY29tYmluaW5nIGNvbnRlbnQgbGVuZ3RoIGFuZCBtb2RpZmljYXRpb24gdGltZVxuXHRcdHJldHVybiBgJHtjb250ZW50Lmxlbmd0aH0tJHtzdGF0Py5tdGltZSB8fCBEYXRlLm5vdygpfWA7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBgJHtEYXRlLm5vdygpfWA7IC8vIEZhbGxiYWNrIHRvIHRpbWVzdGFtcFxuXHR9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlU2V0dGluZ3NIYXNoKHNldHRpbmdzOiBTRU9TZXR0aW5ncyk6IHN0cmluZyB7XG5cdC8vIENyZWF0ZSBhIGhhc2ggb2YgdGhlIHNldHRpbmdzIHRoYXQgYWZmZWN0IFNFTyBjaGVja3Ncblx0Ly8gVGhpcyBpbmNsdWRlcyBhbGwgc2V0dGluZ3MgdGhhdCBjb3VsZCBjaGFuZ2UgdGhlIHJlc3VsdHNcblx0Y29uc3QgcmVsZXZhbnRTZXR0aW5ncyA9IHtcblx0XHRrZXl3b3JkUHJvcGVydHk6IHNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSB8fCAnJyxcblx0XHRrZXl3b3JkRGVuc2l0eU1pbjogc2V0dGluZ3Mua2V5d29yZERlbnNpdHlNaW4sXG5cdFx0a2V5d29yZERlbnNpdHlNYXg6IHNldHRpbmdzLmtleXdvcmREZW5zaXR5TWF4LFxuXHRcdGRlc2NyaXB0aW9uUHJvcGVydHk6IHNldHRpbmdzLmRlc2NyaXB0aW9uUHJvcGVydHkgfHwgJycsXG5cdFx0dGl0bGVQcm9wZXJ0eTogc2V0dGluZ3MudGl0bGVQcm9wZXJ0eSB8fCAnJyxcblx0XHR1c2VGaWxlbmFtZUFzVGl0bGU6IHNldHRpbmdzLnVzZUZpbGVuYW1lQXNUaXRsZSxcblx0XHRjaGVja0NvbnRlbnRMZW5ndGg6IHNldHRpbmdzLmNoZWNrQ29udGVudExlbmd0aCxcblx0XHRtaW5Db250ZW50TGVuZ3RoOiBzZXR0aW5ncy5taW5Db250ZW50TGVuZ3RoLFxuXHRcdHNjYW5EaXJlY3Rvcmllczogc2V0dGluZ3Muc2NhbkRpcmVjdG9yaWVzIHx8ICcnLFxuXHRcdGVuYWJsZU1EWFN1cHBvcnQ6IHNldHRpbmdzLmVuYWJsZU1EWFN1cHBvcnQsXG5cdFx0Ly8gRXh0ZXJuYWwgbGluayBjaGVja2luZyBzZXR0aW5nc1xuXHRcdGNoZWNrRXh0ZXJuYWxMaW5rczogc2V0dGluZ3MuY2hlY2tFeHRlcm5hbExpbmtzLFxuXHRcdGVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2s6IHNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2ssXG5cdFx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzOiBzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MsXG5cdFx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkczogc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcyxcblx0XHQvLyBPdGhlciBTRU8gY2hlY2sgc2V0dGluZ3Ncblx0XHRjaGVja0FsdFRleHQ6IHNldHRpbmdzLmNoZWNrQWx0VGV4dCxcblx0XHRjaGVja0Jyb2tlbkxpbmtzOiBzZXR0aW5ncy5jaGVja0Jyb2tlbkxpbmtzLFxuXHRcdGNoZWNrTmFrZWRMaW5rczogc2V0dGluZ3MuY2hlY2tOYWtlZExpbmtzLFxuXHRcdGNoZWNrSGVhZGluZ09yZGVyOiBzZXR0aW5ncy5jaGVja0hlYWRpbmdPcmRlcixcblx0XHRjaGVja1RpdGxlTGVuZ3RoOiBzZXR0aW5ncy5jaGVja1RpdGxlTGVuZ3RoLFxuXHRcdGNoZWNrSW1hZ2VOYW1pbmc6IHNldHRpbmdzLmNoZWNrSW1hZ2VOYW1pbmcsXG5cdFx0Y2hlY2tEdXBsaWNhdGVDb250ZW50OiBzZXR0aW5ncy5jaGVja0R1cGxpY2F0ZUNvbnRlbnQsXG5cdFx0Y2hlY2tSZWFkaW5nTGV2ZWw6IHNldHRpbmdzLmNoZWNrUmVhZGluZ0xldmVsLFxuXHRcdC8vIFRocmVzaG9sZHMgdGhhdCBhZmZlY3QgcmVzdWx0c1xuXHRcdGR1cGxpY2F0ZVRocmVzaG9sZDogc2V0dGluZ3MuZHVwbGljYXRlVGhyZXNob2xkLFxuXHRcdC8vIEFkZCBvdGhlciBzZXR0aW5ncyB0aGF0IGFmZmVjdCBTRU8gcmVzdWx0c1xuXHR9O1xuXG5cdC8vIFNpbXBsZSBoYXNoIG9mIHRoZSBzZXR0aW5ncyBvYmplY3Rcblx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHJlbGV2YW50U2V0dGluZ3MpO1xufVxuXG5mdW5jdGlvbiBnZXRDYWNoZWRSZXN1bHQoZmlsZTogVEZpbGUsIHBsdWdpbjogU0VPUGx1Z2luKTogU0VPUmVzdWx0cyB8IG51bGwge1xuXHRjb25zdCBlbnRyeSA9IGNhY2hlLmdldChmaWxlLnBhdGgpO1xuXHRpZiAoIWVudHJ5KSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuXHRjb25zdCBpc0V4cGlyZWQgPSAobm93IC0gZW50cnkudGltZXN0YW1wKSA+IENBQ0hFX0VYUElSWV9NUztcblxuXHQvLyBDaGVjayBpZiBzZXR0aW5ncyBoYXZlIGNoYW5nZWRcblx0Y29uc3QgY3VycmVudFNldHRpbmdzSGFzaCA9IGdlbmVyYXRlU2V0dGluZ3NIYXNoKHBsdWdpbi5zZXR0aW5ncyk7XG5cdGNvbnN0IHNldHRpbmdzQ2hhbmdlZCA9IGVudHJ5LnNldHRpbmdzSGFzaCAhPT0gY3VycmVudFNldHRpbmdzSGFzaDtcblxuXHRpZiAoaXNFeHBpcmVkIHx8IHNldHRpbmdzQ2hhbmdlZCkge1xuXHRcdC8vIFJlbW92ZSBleHBpcmVkIG9yIGludmFsaWRhdGVkIGVudHJ5XG5cdFx0Y2FjaGUuZGVsZXRlKGZpbGUucGF0aCk7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHRyZXR1cm4gZW50cnkucmVzdWx0O1xufVxuXG5hc3luYyBmdW5jdGlvbiBjYWNoZVJlc3VsdChmaWxlOiBURmlsZSwgcmVzdWx0OiBTRU9SZXN1bHRzLCBwbHVnaW46IFNFT1BsdWdpbik6IFByb21pc2U8dm9pZD4ge1xuXHRjb25zdCBmaWxlSGFzaCA9IGF3YWl0IGdlbmVyYXRlRmlsZUhhc2goZmlsZSwgcGx1Z2luLmFwcCk7XG5cdGNvbnN0IHNldHRpbmdzSGFzaCA9IGdlbmVyYXRlU2V0dGluZ3NIYXNoKHBsdWdpbi5zZXR0aW5ncyk7XG5cdGNhY2hlLnNldChmaWxlLnBhdGgsIHtcblx0XHRyZXN1bHQsXG5cdFx0dGltZXN0YW1wOiBEYXRlLm5vdygpLFxuXHRcdGZpbGVIYXNoLFxuXHRcdHNldHRpbmdzSGFzaFxuXHR9KTtcbn1cblxuLy8gRXhwb3J0IGNhY2hlIG1hbmFnZW1lbnQgZnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJDYWNoZSgpOiB2b2lkIHtcblx0Y2FjaGUuY2xlYXIoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENhY2hlU3RhdHMoKTogeyBzaXplOiBudW1iZXIgfSB7XG5cdHJldHVybiB7IHNpemU6IGNhY2hlLnNpemUgfTtcbn1cblxuLy8gQ2xlYXIgY2FjaGUgZm9yIGEgc3BlY2lmaWMgZmlsZSAodXNlZnVsIHdoZW4gc2V0dGluZ3MgY2hhbmdlKVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQ2FjaGVGb3JGaWxlKGZpbGVQYXRoOiBzdHJpbmcpOiB2b2lkIHtcblx0Y2FjaGUuZGVsZXRlKGZpbGVQYXRoKTtcbn1cblxuLy8gQ2xlYXIgY2FjaGUgZm9yIGFsbCBmaWxlcyAodXNlZnVsIHdoZW4gZ2xvYmFsIHNldHRpbmdzIGNoYW5nZSlcbmV4cG9ydCBmdW5jdGlvbiBjbGVhckFsbENhY2hlKCk6IHZvaWQge1xuXHRjYWNoZS5jbGVhcigpO1xufVxuIiwgImltcG9ydCB7IFBsdWdpbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgU0VPU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwiLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgcmVnaXN0ZXJDb21tYW5kcyB9IGZyb20gXCIuL2NvbW1hbmRzXCI7XG5pbXBvcnQgeyBTRU9TZXR0aW5nVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3MtdGFiXCI7XG5pbXBvcnQgeyBTRU9TaWRlUGFuZWwgfSBmcm9tIFwiLi91aS9zaWRlLXBhbmVsXCI7XG5pbXBvcnQgeyBTRU9DdXJyZW50UGFuZWxWaWV3VHlwZSwgU0VPR2xvYmFsUGFuZWxWaWV3VHlwZSB9IGZyb20gXCIuL3VpL3BhbmVsLWNvbnN0YW50c1wiO1xuaW1wb3J0IHsgUGFuZWxNYW5hZ2VyIH0gZnJvbSBcIi4vdWkvcGFuZWwtbWFuYWdlclwiO1xuaW1wb3J0IHsgaGFuZGxlRXJyb3IsIHdpdGhFcnJvckhhbmRsaW5nLCB2YWxpZGF0ZVJlcXVpcmVkUGFyYW1zIH0gZnJvbSBcIi4vdXRpbHMvZXJyb3ItaGFuZGxlclwiO1xuaW1wb3J0IHsgc2VvQ2FjaGUsIGNsZWFyQWxsQ2FjaGUgfSBmcm9tIFwiLi91dGlscy9jYWNoZS1tYW5hZ2VyXCI7XG5pbXBvcnQgeyBQYW5lbEFjdGlvbnMgfSBmcm9tIFwiLi91aS9wYW5lbC1hY3Rpb25zXCI7XG5cbi8qKlxuICogTWFpbiBTRU8gUGx1Z2luIGNsYXNzIGZvciBPYnNpZGlhblxuICogUHJvdmlkZXMgU0VPIGF1ZGl0aW5nIGNhcGFiaWxpdGllcyBmb3IgbWFya2Rvd24gbm90ZXNcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU0VPUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3MhOiBTRU9TZXR0aW5ncztcblx0cHJpdmF0ZSBwYW5lbE1hbmFnZXI6IFBhbmVsTWFuYWdlciB8IG51bGwgPSBudWxsO1xuXHRwdWJsaWMgc2lkZVBhbmVsOiBTRU9TaWRlUGFuZWwgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSByaWJib25JY29uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBQbHVnaW4gaW5pdGlhbGl6YXRpb24gLSBjYWxsZWQgd2hlbiB0aGUgcGx1Z2luIGlzIGxvYWRlZFxuXHQgKiBTZXRzIHVwIG1hbmFnZXJzLCByZWdpc3RlcnMgdmlld3MsIGFuZCBjb21tYW5kc1xuXHQgKi9cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0XHQvLyBWYWxpZGF0ZSByZXF1aXJlZCBwYXJhbWV0ZXJzXG5cdFx0XHR2YWxpZGF0ZVJlcXVpcmVkUGFyYW1zKFxuXHRcdFx0XHR7IGFwcDogdGhpcy5hcHAsIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzIH0sXG5cdFx0XHRcdCdwbHVnaW4gaW5pdGlhbGl6YXRpb24nXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBJbml0aWFsaXplIG1hbmFnZXJzIHdpdGggZXJyb3IgaGFuZGxpbmdcblx0XHRcdHRoaXMucGFuZWxNYW5hZ2VyID0gYXdhaXQgd2l0aEVycm9ySGFuZGxpbmcoXG5cdFx0XHRcdCgpID0+IFByb21pc2UucmVzb2x2ZShuZXcgUGFuZWxNYW5hZ2VyKHRoaXMuYXBwLCB0aGlzKSksXG5cdFx0XHRcdCdwYW5lbCBtYW5hZ2VyIGluaXRpYWxpemF0aW9uJyxcblx0XHRcdFx0bnVsbFxuXHRcdFx0KTtcblxuXG5cdFx0XHQvLyBFbnN1cmUgaWNvbnMgbG9hZCBwcm9wZXJseSB1c2luZyBPYnNpZGlhbidzIEFQSVxuXHRcdFx0dGhpcy5mb3JjZUljb25SZWZyZXNoKCk7XG5cblx0XHRcdC8vIFJlZ2lzdGVyIHRoZSBzaWRlIHBhbmVsIHZpZXdzIHdpdGggZXJyb3IgaGFuZGxpbmdcblx0XHRcdGF3YWl0IHdpdGhFcnJvckhhbmRsaW5nKFxuXHRcdFx0XHQoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5yZWdpc3RlclZpZXcoU0VPQ3VycmVudFBhbmVsVmlld1R5cGUsIChsZWFmKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYW5lbCA9IG5ldyBTRU9TaWRlUGFuZWwodGhpcywgJ2N1cnJlbnQnLCBsZWFmKTtcblx0XHRcdFx0XHRcdHRoaXMuc2lkZVBhbmVsID0gcGFuZWw7IC8vIFN0b3JlIHJlZmVyZW5jZSBmb3Igc2V0dGluZ3MgdXBkYXRlc1xuXHRcdFx0XHRcdFx0cmV0dXJuIHBhbmVsO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHRoaXMucmVnaXN0ZXJWaWV3KFNFT0dsb2JhbFBhbmVsVmlld1R5cGUsIChsZWFmKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBwYW5lbCA9IG5ldyBTRU9TaWRlUGFuZWwodGhpcywgJ2dsb2JhbCcsIGxlYWYpO1xuXHRcdFx0XHRcdFx0dGhpcy5zaWRlUGFuZWwgPSBwYW5lbDsgLy8gU3RvcmUgcmVmZXJlbmNlIGZvciBzZXR0aW5ncyB1cGRhdGVzXG5cdFx0XHRcdFx0XHRyZXR1cm4gcGFuZWw7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdzaWRlIHBhbmVsIHJlZ2lzdHJhdGlvbicsXG5cdFx0XHRcdHVuZGVmaW5lZFxuXHRcdFx0KTtcblxuXHRcdFx0Ly8gUmVnaXN0ZXIgY29tbWFuZHMgd2l0aCBlcnJvciBoYW5kbGluZ1xuXHRcdFx0YXdhaXQgd2l0aEVycm9ySGFuZGxpbmcoXG5cdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRyZWdpc3RlckNvbW1hbmRzKHRoaXMpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQnY29tbWFuZCByZWdpc3RyYXRpb24nLFxuXHRcdFx0XHR1bmRlZmluZWRcblx0XHRcdCk7XG5cblx0XHRcdC8vIEFkZCBzZXR0aW5ncyB0YWIgd2l0aCBlcnJvciBoYW5kbGluZ1xuXHRcdFx0YXdhaXQgd2l0aEVycm9ySGFuZGxpbmcoXG5cdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNFT1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0J3NldHRpbmdzIHRhYiByZWdpc3RyYXRpb24nLFxuXHRcdFx0XHR1bmRlZmluZWRcblx0XHRcdCk7XG5cblxuXHRcdFx0Ly8gQWRkIHJpYmJvbiBpY29uIGZvciBlYXN5IGFjY2VzcyAoZGVmYXVsdCB0byBnbG9iYWwpIHdpdGggZXJyb3IgaGFuZGxpbmdcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dSaWJib25JY29uKSB7XG5cdFx0XHRcdGF3YWl0IHdpdGhFcnJvckhhbmRsaW5nKFxuXHRcdFx0XHRcdCgpID0+IHtcblx0XHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIlNFT1wiIGlzIGEgcHJvcGVyIG5vdW4gKGFjcm9ueW0pIGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcblx0XHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdFx0XHRcdHRoaXMucmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbignc2VhcmNoLWNoZWNrJywgJ09wZW4gU0VPIGF1ZGl0IHBhbmVsJywgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHBhbmVsIGFscmVhZHkgZXhpc3RzXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZXhpc3RpbmdQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tZ2xvYmFsLXBhbmVsJyk7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgaXNGaXJzdFJ1biA9IGV4aXN0aW5nUGFuZWxzLmxlbmd0aCA9PT0gMDtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHR0aGlzLm9wZW5HbG9iYWxQYW5lbCgpO1xuXHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgdHJpZ2dlciBtYW51YWwgcmVmcmVzaCBpZiBwYW5lbCBhbHJlYWR5IGV4aXN0ZWQgKG5vdCBmaXJzdCBydW4pXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCFpc0ZpcnN0UnVuKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2b2lkIHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGdsb2JhbFBhbmVscyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ3Nlby1nbG9iYWwtcGFuZWwnKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChnbG9iYWxQYW5lbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYW5lbCA9IGdsb2JhbFBhbmVsc1swXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHBhbmVsPy52aWV3KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FzdCB0byBTRU9TaWRlUGFuZWwgYW5kIHRyaWdnZXIgcmVmcmVzaFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNlb1BhbmVsID0gcGFuZWwudmlldyBhcyB1bmtub3duIGFzIHsgYWN0aW9uczogUGFuZWxBY3Rpb25zOyByZW5kZXIoKTogdm9pZCB9O1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRyaWdnZXIgdGhlIHJlZnJlc2ggbG9naWMgKHNhbWUgYXMgY2xpY2tpbmcgdGhlIHJlZnJlc2ggYnV0dG9uKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF3YWl0IHNlb1BhbmVsLmFjdGlvbnMucmVmcmVzaEdsb2JhbFJlc3VsdHMoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIHBhbmVsIGRpc3BsYXkgd2l0aCBuZXcgcmVzdWx0c1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlb1BhbmVsLnJlbmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAncmliYm9uIGljb24gcGFuZWwgcmVmcmVzaCcsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH0sIDUwMCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdC8vIElmIGZpcnN0IHJ1biwgbGV0IHRoZSBwYW5lbCdzIG9uT3BlbigpIGhhbmRsZSB0aGUgaW5pdGlhbCBzY2FuIGF1dG9tYXRpY2FsbHlcblx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ3JpYmJvbiBpY29uIGNsaWNrIGhhbmRsZXInLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQncmliYm9uIGljb24gcmVnaXN0cmF0aW9uJyxcblx0XHRcdFx0XHR1bmRlZmluZWRcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsICdwbHVnaW4gaW5pdGlhbGl6YXRpb24nLCB0cnVlKTtcblx0XHR9XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gQ2xlYW4gdXAgY2FjaGUgbWFuYWdlcnNcblx0XHRcdHNlb0NhY2hlLmRlc3Ryb3koKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsICdwbHVnaW4gdW5sb2FkJywgZmFsc2UpO1xuXHRcdH1cblx0XHRcblx0XHQvLyBOb3RlOiBPYnNpZGlhbiBhdXRvbWF0aWNhbGx5IGNsZWFucyB1cDpcblx0XHQvLyAtIFJlZ2lzdGVyZWQgdmlld3MgKHJlZ2lzdGVyVmlldylcblx0XHQvLyAtIFJlZ2lzdGVyZWQgY29tbWFuZHMgKGFkZENvbW1hbmQpIFxuXHRcdC8vIC0gU2V0dGluZ3MgdGFicyAoYWRkU2V0dGluZ1RhYilcblx0XHQvLyAtIFJpYmJvbiBpY29ucyAoYWRkUmliYm9uSWNvbilcblx0XHQvLyAtIFJlZ2lzdGVyZWQgZXZlbnRzIChyZWdpc3RlckV2ZW50KVxuXHR9XG5cblx0LyoqXG5cdCAqIExvYWQgcGx1Z2luIHNldHRpbmdzIGZyb20gT2JzaWRpYW4ncyBkYXRhIHN0b3JlXG5cdCAqIE1lcmdlcyBzYXZlZCBzZXR0aW5ncyB3aXRoIGRlZmF1bHQgdmFsdWVzXG5cdCAqL1xuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGxvYWRlZERhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgYXMgUGFydGlhbDxTRU9TZXR0aW5ncz47XG5cdFx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgbG9hZGVkRGF0YSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAnbG9hZGluZyBzZXR0aW5ncycsIHRydWUpO1xuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gZGVmYXVsdCBzZXR0aW5nc1xuXHRcdFx0dGhpcy5zZXR0aW5ncyA9IHsgLi4uREVGQVVMVF9TRVRUSU5HUyB9O1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTYXZlIHBsdWdpbiBzZXR0aW5ncyB0byBPYnNpZGlhbidzIGRhdGEgc3RvcmVcblx0ICogQ2xlYXJzIGNhY2hlIHRvIGVuc3VyZSBmcmVzaCByZXN1bHRzIGFmdGVyIHNldHRpbmdzIGNoYW5nZXNcblx0ICovXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0XHRcdC8vIENsZWFyIGNhY2hlIHdoZW4gc2V0dGluZ3MgY2hhbmdlIHRvIGVuc3VyZSBmcmVzaCByZXN1bHRzXG5cdFx0XHRjbGVhckFsbENhY2hlKCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAnc2F2aW5nIHNldHRpbmdzJywgdHJ1ZSk7XG5cdFx0fVxuXHR9XG5cblx0cHVibGljIGFkZFN0YXR1c0JhcigpIHtcblx0XHQvLyBTdGF0dXMgYmFyIHJlbW92ZWQgLSBub3QgdXNlZnVsXG5cdH1cblxuXHRwdWJsaWMgcmVtb3ZlU3RhdHVzQmFyKCkge1xuXHRcdC8vIFN0YXR1cyBiYXIgcmVtb3ZlZFxuXHR9XG5cblx0LyoqXG5cdCAqIE9wZW5zIHRoZSBjdXJyZW50IG5vdGUgU0VPIGF1ZGl0IHBhbmVsXG5cdCAqIFNob3dzIFNFTyBhbmFseXNpcyBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgbm90ZVxuXHQgKi9cblx0b3BlbkN1cnJlbnRQYW5lbCgpIHtcblx0XHR0cnkge1xuXHRcdFx0aWYgKHRoaXMucGFuZWxNYW5hZ2VyKSB7XG5cdFx0XHRcdHRoaXMucGFuZWxNYW5hZ2VyLm9wZW5DdXJyZW50UGFuZWwoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignUGFuZWwgbWFuYWdlciBub3QgaW5pdGlhbGl6ZWQnKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsICdvcGVuaW5nIGN1cnJlbnQgcGFuZWwnLCB0cnVlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogT3BlbnMgdGhlIGdsb2JhbCB2YXVsdCBTRU8gYXVkaXQgcGFuZWxcblx0ICogU2hvd3MgU0VPIGFuYWx5c2lzIGZvciBhbGwgbm90ZXMgaW4gdGhlIHZhdWx0XG5cdCAqL1xuXHRvcGVuR2xvYmFsUGFuZWwoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLnBhbmVsTWFuYWdlcikge1xuXHRcdFx0XHR0aGlzLnBhbmVsTWFuYWdlci5vcGVuR2xvYmFsUGFuZWwoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignUGFuZWwgbWFuYWdlciBub3QgaW5pdGlhbGl6ZWQnKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0aGFuZGxlRXJyb3IoZXJyb3IsICdvcGVuaW5nIGdsb2JhbCBwYW5lbCcsIHRydWUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBSdW5zIGJ1bGsgU0VPIGNoZWNrIGFjcm9zcyBhbGwgY29uZmlndXJlZCBmaWxlc1xuXHQgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBidWxrIGNoZWNrIGlzIGNvbXBsZXRlXG5cdCAqL1xuXHRhc3luYyBydW5CdWxrQ2hlY2soKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHsgcnVuU0VPQ2hlY2sgfSA9IGF3YWl0IGltcG9ydChcIi4vc2VvLWNoZWNrZXJcIik7XG5cdFx0XHRjb25zdCBmaWxlcyA9IGF3YWl0IHRoaXMuZ2V0RmlsZXNUb0NoZWNrKCk7XG5cdFx0XHRpZiAoZmlsZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHJldHVybiBbXTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IHJ1blNFT0NoZWNrKHRoaXMsIGZpbGVzKTtcblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ3J1bm5pbmcgYnVsayBjaGVjaycsIHRydWUpO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBsaXN0IG9mIGZpbGVzIHRvIGNoZWNrIGJhc2VkIG9uIGN1cnJlbnQgc2V0dGluZ3Ncblx0ICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gYXJyYXkgb2YgVEZpbGUgb2JqZWN0cyB0byBjaGVja1xuXHQgKi9cblx0YXN5bmMgZ2V0RmlsZXNUb0NoZWNrKCkge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAodGhpcy5wYW5lbE1hbmFnZXIpIHtcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMucGFuZWxNYW5hZ2VyLmdldEZpbGVzVG9DaGVjaygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdQYW5lbCBtYW5hZ2VyIG5vdCBpbml0aWFsaXplZCcpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ2dldHRpbmcgZmlsZXMgdG8gY2hlY2snLCB0cnVlKTtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdH1cblxuXG5cblx0Ly8gUHJvcGVyIGljb24gcmVmcmVzaCB1c2luZyBPYnNpZGlhbidzIG9uTGF5b3V0UmVhZHkgQVBJXG5cdHByaXZhdGUgZm9yY2VJY29uUmVmcmVzaCgpIHtcblx0XHQvLyBVc2UgT2JzaWRpYW4ncyBwcm9wZXIgQVBJIHRvIGVuc3VyZSBpY29ucyBsb2FkIGNvcnJlY3RseVxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdC8vIEZvcmNlIHJlZnJlc2ggb2YgYW55IGV4aXN0aW5nIHBhbmVsc1xuXHRcdFx0Y29uc3QgZXhpc3RpbmdDdXJyZW50UGFuZWxzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShTRU9DdXJyZW50UGFuZWxWaWV3VHlwZSk7XG5cdFx0XHRjb25zdCBleGlzdGluZ0dsb2JhbFBhbmVscyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoU0VPR2xvYmFsUGFuZWxWaWV3VHlwZSk7XG5cdFx0XHRcblx0XHRcdFsuLi5leGlzdGluZ0N1cnJlbnRQYW5lbHMsIC4uLmV4aXN0aW5nR2xvYmFsUGFuZWxzXS5mb3JFYWNoKGxlYWYgPT4ge1xuXHRcdFx0XHRpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgU0VPU2lkZVBhbmVsKSB7XG5cdFx0XHRcdFx0bGVhZi52aWV3LnJlbmRlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUb2dnbGVzIHRoZSByaWJib24gaWNvbiB2aXNpYmlsaXR5XG5cdCAqIEFkZHMgb3IgcmVtb3ZlcyB0aGUgcmliYm9uIGljb24gYmFzZWQgb24gdGhlIHNldHRpbmdcblx0ICovXG5cdHRvZ2dsZVJpYmJvbkljb24oKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnNob3dSaWJib25JY29uKSB7XG5cdFx0XHRcdC8vIEFkZCByaWJib24gaWNvbiBpZiBpdCBkb2Vzbid0IGV4aXN0XG5cdFx0XHRpZiAoIXRoaXMucmliYm9uSWNvbikge1xuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJTRU9cIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdFx0dGhpcy5yaWJib25JY29uID0gdGhpcy5hZGRSaWJib25JY29uKCdzZWFyY2gtY2hlY2snLCAnT3BlbiBTRU8gYXVkaXQgcGFuZWwnLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHQvLyBDaGVjayBpZiBwYW5lbCBhbHJlYWR5IGV4aXN0c1xuXHRcdFx0XHRcdFx0XHRjb25zdCBleGlzdGluZ1BhbmVscyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ3Nlby1nbG9iYWwtcGFuZWwnKTtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXNGaXJzdFJ1biA9IGV4aXN0aW5nUGFuZWxzLmxlbmd0aCA9PT0gMDtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdHRoaXMub3Blbkdsb2JhbFBhbmVsKCk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBPbmx5IHRyaWdnZXIgbWFudWFsIHJlZnJlc2ggaWYgcGFuZWwgYWxyZWFkeSBleGlzdGVkIChub3QgZmlyc3QgcnVuKVxuXHRcdFx0XHRcdFx0XHRpZiAoIWlzRmlyc3RSdW4pIHtcblx0XHRcdFx0XHRcdFx0XHR2b2lkIHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGdsb2JhbFBhbmVscyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ3Nlby1nbG9iYWwtcGFuZWwnKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZ2xvYmFsUGFuZWxzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhbmVsID0gZ2xvYmFsUGFuZWxzWzBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKHBhbmVsPy52aWV3KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENhc3QgdG8gU0VPU2lkZVBhbmVsIGFuZCB0cmlnZ2VyIHJlZnJlc2hcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2VvUGFuZWwgPSBwYW5lbC52aWV3IGFzIHVua25vd24gYXMgeyBhY3Rpb25zOiBQYW5lbEFjdGlvbnM7IHJlbmRlcigpOiB2b2lkIH07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFRyaWdnZXIgdGhlIHJlZnJlc2ggbG9naWMgKHNhbWUgYXMgY2xpY2tpbmcgdGhlIHJlZnJlc2ggYnV0dG9uKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCBzZW9QYW5lbC5hY3Rpb25zLnJlZnJlc2hHbG9iYWxSZXN1bHRzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgcGFuZWwgZGlzcGxheSB3aXRoIG5ldyByZXN1bHRzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHNlb1BhbmVsLnJlbmRlcigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgJ3JpYmJvbiBpY29uIHBhbmVsIHJlZnJlc2gnLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdFx0XHR9LCA1MDApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdC8vIElmIGZpcnN0IHJ1biwgbGV0IHRoZSBwYW5lbCdzIG9uT3BlbigpIGhhbmRsZSB0aGUgaW5pdGlhbCBzY2FuIGF1dG9tYXRpY2FsbHlcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAncmliYm9uIGljb24gY2xpY2sgaGFuZGxlcicsIHRydWUpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBSZW1vdmUgcmliYm9uIGljb24gaWYgaXQgZXhpc3RzXG5cdFx0XHRcdGlmICh0aGlzLnJpYmJvbkljb24pIHtcblx0XHRcdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgYmVmb3JlIHJlbW92YWxcblx0XHRcdFx0XHRjb25zdCBpY29uVG9SZW1vdmUgPSB0aGlzLnJpYmJvbkljb247XG5cdFx0XHRcdFx0dGhpcy5yaWJib25JY29uID0gbnVsbDtcblx0XHRcdFx0XHQvLyBSZW1vdmUgZnJvbSBET00gY29tcGxldGVseSAtIHRoaXMgYWxzbyByZW1vdmVzIGl0IGZyb20gdGhlIGNvbnRleHQgbWVudVxuXHRcdFx0XHRcdGljb25Ub1JlbW92ZS5yZW1vdmUoKTtcblx0XHRcdFx0XHQvLyBGb3JjZSBtdWx0aXBsZSByZWZyZXNoIHRyaWdnZXJzIHRvIGVuc3VyZSBjb250ZXh0IG1lbnUgaXMgdXBkYXRlZFxuXHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdsYXlvdXQtY2hhbmdlJyk7XG5cdFx0XHRcdFx0Ly8gQWxzbyB0cnkgdG8gZmluZCBhbmQgcmVtb3ZlIGFueSBvcnBoYW5lZCBjb250ZXh0IG1lbnUgaXRlbXNcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdC8vIEZpbmQgYW55IGNvbnRleHQgbWVudSBpdGVtcyB0aGF0IG1pZ2h0IHJlZmVyZW5jZSB0aGlzIGljb25cblx0XHRcdFx0XHRcdGNvbnN0IGNvbnRleHRNZW51cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51Jyk7XG5cdFx0XHRcdFx0XHRjb250ZXh0TWVudXMuZm9yRWFjaChtZW51ID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaXRlbXMgPSBtZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZW51LWl0ZW0nKTtcblx0XHRcdFx0XHRcdFx0aXRlbXMuZm9yRWFjaChpdGVtID0+IHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCB0ZXh0ID0gaXRlbS50ZXh0Q29udGVudD8udHJpbSgpO1xuXHRcdFx0XHRcdFx0XHRcdGlmICh0ZXh0ID09PSAnT3BlbiBTRU8gYXVkaXQgcGFuZWwnKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpdGVtLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9LCAxMDApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCAndG9nZ2xpbmcgcmliYm9uIGljb24nLCB0cnVlKTtcblx0XHR9XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBTRU9SZXN1bHRzIH0gZnJvbSBcIi4vdHlwZXNcIjtcclxuXHJcbi8qKlxyXG4gKiBTRU8gUGx1Z2luIFNldHRpbmdzIEludGVyZmFjZVxyXG4gKiBEZWZpbmVzIGFsbCBjb25maWd1cmFibGUgb3B0aW9ucyBmb3IgdGhlIFNFTyBwbHVnaW5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU0VPU2V0dGluZ3Mge1xyXG5cdC8vIERpcmVjdG9yeSBzZXR0aW5nc1xyXG5cdC8qKiBDb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiBkaXJlY3RvcmllcyB0byBzY2FuIGZvciBTRU8gYW5hbHlzaXMgKi9cclxuXHRzY2FuRGlyZWN0b3JpZXM6IHN0cmluZztcclxuXHQvKiogSWdub3JlIGZpbGVzIHRoYXQgYmVnaW4gd2l0aCBhbiB1bmRlcnNjb3JlICovXHJcblx0aWdub3JlVW5kZXJzY29yZUZpbGVzOiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgTURYIGZpbGUgc3VwcG9ydCAoaW4gYWRkaXRpb24gdG8gTUQgZmlsZXMpICovXHJcblx0ZW5hYmxlTURYU3VwcG9ydDogYm9vbGVhbjtcclxuXHRcclxuXHQvLyBQcm9wZXJ0eSBuYW1lc1xyXG5cdC8qKiBGcm9udG1hdHRlciBwcm9wZXJ0eSBuYW1lIGZvciBrZXl3b3JkcyAqL1xyXG5cdGtleXdvcmRQcm9wZXJ0eTogc3RyaW5nO1xyXG5cdC8qKiBGcm9udG1hdHRlciBwcm9wZXJ0eSBuYW1lIGZvciBtZXRhIGRlc2NyaXB0aW9uICovXHJcblx0ZGVzY3JpcHRpb25Qcm9wZXJ0eTogc3RyaW5nO1xyXG5cdC8qKiBGcm9udG1hdHRlciBwcm9wZXJ0eSBuYW1lIGZvciBwYWdlIHRpdGxlICovXHJcblx0dGl0bGVQcm9wZXJ0eTogc3RyaW5nO1xyXG5cdC8qKiBXaGV0aGVyIHRvIHVzZSBmaWxlbmFtZSBhcyB0aXRsZSB3aGVuIG5vIHRpdGxlIHByb3BlcnR5IGlzIHNldCAqL1xyXG5cdHVzZUZpbGVuYW1lQXNUaXRsZTogYm9vbGVhbjtcclxuXHQvKiogRnJvbnRtYXR0ZXIgcHJvcGVydHkgbmFtZSBmb3IgVVJMIHNsdWcgKi9cclxuXHRzbHVnUHJvcGVydHk6IHN0cmluZztcclxuXHQvKiogV2hldGhlciB0byB1c2UgZmlsZW5hbWUgYXMgc2x1ZyB3aGVuIG5vIHNsdWcgcHJvcGVydHkgaXMgc2V0ICovXHJcblx0dXNlRmlsZW5hbWVBc1NsdWc6IGJvb2xlYW47XHJcblx0LyoqIEZpbGVuYW1lIHBhdHRlcm4gZm9yIHBhcmVudCBmb2xkZXIgc2x1ZyBnZW5lcmF0aW9uICovXHJcblx0cGFyZW50Rm9sZGVyU2x1Z0ZpbGVuYW1lOiBzdHJpbmc7XHJcblx0LyoqIE9wdGlvbmFsIHByZWZpeCBvciBzdWZmaXggdG8gYXBwZW5kIHRvIG1ldGEgdGl0bGUgZm9yIGNoYXJhY3RlciBjb3VudCBjYWxjdWxhdGlvbnMgKi9cclxuXHR0aXRsZVByZWZpeFN1ZmZpeDogc3RyaW5nO1xyXG5cdFxyXG5cdC8vIENoZWNrIHRvZ2dsZXNcclxuXHQvKiogRW5hYmxlIHRpdGxlIGxlbmd0aCB2YWxpZGF0aW9uICovXHJcblx0Y2hlY2tUaXRsZUxlbmd0aDogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIGhlYWRpbmcgaGllcmFyY2h5IHZhbGlkYXRpb24gKi9cclxuXHRjaGVja0hlYWRpbmdPcmRlcjogYm9vbGVhbjtcclxuXHQvKiogRW5hYmxlIGFsdCB0ZXh0IHZhbGlkYXRpb24gZm9yIG1lZGlhIGNvbnRlbnQgKGltYWdlcywgdmlkZW9zLCBlbWJlZHMsIGV0Yy4pICovXHJcblx0Y2hlY2tBbHRUZXh0OiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgaW1hZ2UgZmlsZW5hbWUgdmFsaWRhdGlvbiAqL1xyXG5cdGNoZWNrSW1hZ2VOYW1pbmc6IGJvb2xlYW47XHJcblx0LyoqIEVuYWJsZSBicm9rZW4gbGluayBkZXRlY3Rpb24gKi9cclxuXHRjaGVja0Jyb2tlbkxpbmtzOiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgZXh0ZXJuYWwgbGluayB2YWxpZGF0aW9uICovXHJcblx0Y2hlY2tFeHRlcm5hbExpbmtzOiBib29sZWFuO1xyXG5cdC8qKiBTaG93IGV4dGVybmFsIGxpbmsgYnV0dG9uIGluIHJlc3VsdHMgKi9cclxuXHRlbmFibGVFeHRlcm5hbExpbmtCdXR0b246IGJvb2xlYW47XHJcblx0LyoqIENoZWNrIGV4dGVybmFsIGxpbmtzIGFnYWluc3QgdmF1bHQgZmlsZXMgKi9cclxuXHRlbmFibGVFeHRlcm5hbExpbmtWYXVsdENoZWNrOiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgbmFrZWQgbGluayBkZXRlY3Rpb24gKi9cclxuXHRjaGVja05ha2VkTGlua3M6IGJvb2xlYW47XHJcblx0LyoqIEVuYWJsZSBjb250ZW50IGxlbmd0aCB2YWxpZGF0aW9uICovXHJcblx0Y2hlY2tDb250ZW50TGVuZ3RoOiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgZHVwbGljYXRlIGNvbnRlbnQgZGV0ZWN0aW9uICovXHJcblx0Y2hlY2tEdXBsaWNhdGVDb250ZW50OiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgcmVhZGluZyBsZXZlbCBhbmFseXNpcyAqL1xyXG5cdGNoZWNrUmVhZGluZ0xldmVsOiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgcG90ZW50aWFsbHkgYnJva2VuIGxpbmsgZGV0ZWN0aW9uICovXHJcblx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzOiBib29sZWFuO1xyXG5cdC8qKiBFbmFibGUgcG90ZW50aWFsbHkgYnJva2VuIGVtYmVkIGRldGVjdGlvbiAqL1xyXG5cdGNoZWNrUG90ZW50aWFsbHlCcm9rZW5FbWJlZHM6IGJvb2xlYW47XHJcblx0LyoqIFVzZSBub3RlIHRpdGxlcyBpbiBhbmFseXNpcyAqL1xyXG5cdHVzZU5vdGVUaXRsZXM6IGJvb2xlYW47XHJcblx0LyoqIFNraXAgSDEgaGVhZGluZyB2YWxpZGF0aW9uICovXHJcblx0c2tpcEgxQ2hlY2s6IGJvb2xlYW47XHJcblx0XHJcblx0Ly8gUHVibGlzaGluZyBzZXR0aW5nc1xyXG5cdC8qKiBFbmFibGUgcHVibGlzaGluZyBtb2RlIGZvciBwdWJsaWMtZmFjaW5nIGNvbnRlbnQgKi9cclxuXHRwdWJsaXNoTW9kZTogYm9vbGVhbjtcclxuXHRcclxuXHQvLyBVSSBzZXR0aW5nc1xyXG5cdC8qKiBEZWZhdWx0IHNvcnQgb3JkZXIgZm9yIHJlc3VsdHMgZGlzcGxheSAqL1xyXG5cdGRlZmF1bHRTb3J0OiAnaXNzdWVzLWRlc2MnIHwgJ2lzc3Vlcy1hc2MnIHwgJ3dhcm5pbmdzLWRlc2MnIHwgJ3dhcm5pbmdzLWFzYycgfCAnbm90aWNlcy1kZXNjJyB8ICdub3RpY2VzLWFzYycgfCAnZmlsZW5hbWUtYXNjJyB8ICdmaWxlbmFtZS1kZXNjJztcclxuXHQvKiogV2hldGhlciB0byBzaG93IHRoZSByaWJib24gaWNvbiAqL1xyXG5cdHNob3dSaWJib25JY29uOiBib29sZWFuO1xyXG5cdFxyXG5cdC8vIFRocmVzaG9sZHNcclxuXHQvKiogTWluaW11bSBjb250ZW50IGxlbmd0aCBpbiBjaGFyYWN0ZXJzICovXHJcblx0bWluQ29udGVudExlbmd0aDogbnVtYmVyO1xyXG5cdC8qKiBNaW5pbXVtIGtleXdvcmQgZGVuc2l0eSBwZXJjZW50YWdlICovXHJcblx0a2V5d29yZERlbnNpdHlNaW46IG51bWJlcjtcclxuXHQvKiogTWF4aW11bSBrZXl3b3JkIGRlbnNpdHkgcGVyY2VudGFnZSAqL1xyXG5cdGtleXdvcmREZW5zaXR5TWF4OiBudW1iZXI7XHJcblx0LyoqIER1cGxpY2F0ZSBjb250ZW50IHNpbWlsYXJpdHkgdGhyZXNob2xkIHBlcmNlbnRhZ2UgKi9cclxuXHRkdXBsaWNhdGVUaHJlc2hvbGQ6IG51bWJlcjtcclxuXHRcclxuXHQvLyBDYWNoZWQgc2NhbiByZXN1bHRzXHJcblx0LyoqIENhY2hlZCByZXN1bHRzIGZyb20gZ2xvYmFsIHNjYW4gKi9cclxuXHRjYWNoZWRHbG9iYWxSZXN1bHRzOiBTRU9SZXN1bHRzW107XHJcblx0LyoqIFRpbWVzdGFtcCBvZiBsYXN0IHNjYW4gKi9cclxuXHRsYXN0U2NhblRpbWVzdGFtcDogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogU0VPU2V0dGluZ3MgPSB7XHJcblx0c2NhbkRpcmVjdG9yaWVzOiBcIlwiLFxyXG5cdGlnbm9yZVVuZGVyc2NvcmVGaWxlczogZmFsc2UsXHJcblx0ZW5hYmxlTURYU3VwcG9ydDogZmFsc2UsXHJcblx0a2V5d29yZFByb3BlcnR5OiBcIlwiLFxyXG5cdGRlc2NyaXB0aW9uUHJvcGVydHk6IFwiXCIsXHJcblx0dGl0bGVQcm9wZXJ0eTogXCJcIixcclxuXHR1c2VGaWxlbmFtZUFzVGl0bGU6IGZhbHNlLFxyXG5cdHNsdWdQcm9wZXJ0eTogXCJcIixcclxuXHR1c2VGaWxlbmFtZUFzU2x1ZzogZmFsc2UsXHJcblx0cGFyZW50Rm9sZGVyU2x1Z0ZpbGVuYW1lOiBcIlwiLFxyXG5cdHRpdGxlUHJlZml4U3VmZml4OiBcIlwiLFxyXG5cdGNoZWNrVGl0bGVMZW5ndGg6IHRydWUsXHJcblx0Y2hlY2tIZWFkaW5nT3JkZXI6IHRydWUsXHJcblx0Y2hlY2tBbHRUZXh0OiB0cnVlLFxyXG5cdGNoZWNrSW1hZ2VOYW1pbmc6IHRydWUsXHJcblx0Y2hlY2tCcm9rZW5MaW5rczogdHJ1ZSxcclxuXHRjaGVja0V4dGVybmFsTGlua3M6IHRydWUsXHJcblx0ZW5hYmxlRXh0ZXJuYWxMaW5rQnV0dG9uOiB0cnVlLFxyXG5cdGVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2s6IGZhbHNlLFxyXG5cdGNoZWNrTmFrZWRMaW5rczogdHJ1ZSxcclxuXHRjaGVja0NvbnRlbnRMZW5ndGg6IHRydWUsXHJcblx0Y2hlY2tEdXBsaWNhdGVDb250ZW50OiBmYWxzZSxcclxuXHRjaGVja1JlYWRpbmdMZXZlbDogdHJ1ZSxcclxuXHRjaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3M6IHRydWUsXHJcblx0Y2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkczogdHJ1ZSxcclxuXHR1c2VOb3RlVGl0bGVzOiBmYWxzZSxcclxuXHRza2lwSDFDaGVjazogZmFsc2UsXHJcblx0cHVibGlzaE1vZGU6IGZhbHNlLFxyXG5cdGRlZmF1bHRTb3J0OiAnaXNzdWVzLWRlc2MnLFxyXG5cdHNob3dSaWJib25JY29uOiB0cnVlLFxyXG5cdG1pbkNvbnRlbnRMZW5ndGg6IDMwMCxcclxuXHRrZXl3b3JkRGVuc2l0eU1pbjogMSxcclxuXHRrZXl3b3JkRGVuc2l0eU1heDogMixcclxuXHRkdXBsaWNhdGVUaHJlc2hvbGQ6IDgwLFxyXG5cdGNhY2hlZEdsb2JhbFJlc3VsdHM6IFtdLFxyXG5cdGxhc3RTY2FuVGltZXN0YW1wOiAwXHJcbn07IiwgImltcG9ydCBTRU9QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IFBhbmVsQWN0aW9ucyB9IGZyb20gXCIuLi91aS9wYW5lbC1hY3Rpb25zXCI7XG5cbi8qKlxuICogUmVnaXN0ZXJzIGFsbCBwbHVnaW4gY29tbWFuZHMgd2l0aCBPYnNpZGlhblxuICogQHBhcmFtIHBsdWdpbiAtIFRoZSBTRU8gcGx1Z2luIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmRzKHBsdWdpbjogU0VPUGx1Z2luKSB7XG5cdC8vIE9wZW4gU0VPIEN1cnJlbnQgTm90ZSBwYW5lbCBvbmx5ICh3aXRob3V0IHJ1bm5pbmcgYXVkaXQpXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJvcGVuLWN1cnJlbnRcIixcblx0XHRuYW1lOiBcIk9wZW4gY3VycmVudCBub3RlIGF1ZGl0XCIsXG5cdFx0aWNvbjogXCJzZWFyY2gtY2hlY2tcIixcblx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0cGx1Z2luLm9wZW5DdXJyZW50UGFuZWwoKTtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIE9wZW4gU0VPIEdsb2JhbCBwYW5lbCBvbmx5ICh3aXRob3V0IHJ1bm5pbmcgYXVkaXQpXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJvcGVuLWdsb2JhbFwiLFxuXHRcdG5hbWU6IFwiT3BlbiB2YXVsdCBhdWRpdFwiLFxuXHRcdGljb246IFwic2VhcmNoLWNoZWNrXCIsXG5cdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdHBsdWdpbi5vcGVuR2xvYmFsUGFuZWwoKTtcblx0XHR9XG5cdH0pO1xuXG5cdC8vIFJ1biBTRU8gQ3VycmVudCBOb3RlIGF1ZGl0IChvcGVucyBwYW5lbCBhbmQgcnVucyBhdWRpdClcblx0cGx1Z2luLmFkZENvbW1hbmQoe1xuXHRcdGlkOiBcInJ1bi1jdXJyZW50XCIsXG5cdFx0bmFtZTogXCJSdW4gY3VycmVudCBub3RlIGF1ZGl0XCIsXG5cdFx0aWNvbjogXCJzZWFyY2gtY2hlY2tcIixcblx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0cGx1Z2luLm9wZW5DdXJyZW50UGFuZWwoKTtcblx0XHRcdC8vIFdhaXQgZm9yIHBhbmVsIHRvIG9wZW4sIHRoZW4gdHJpZ2dlciB0aGUgYXVkaXRcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50UGFuZWwgPSBwbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ3Nlby1jdXJyZW50LXBhbmVsJylbMF07XG5cdFx0XHRcdGlmIChjdXJyZW50UGFuZWwgJiYgY3VycmVudFBhbmVsLnZpZXcpIHtcblx0XHRcdFx0XHRjb25zdCBjaGVja0J0biA9IGN1cnJlbnRQYW5lbC52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5zZW8tdG9wLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXHRcdFx0XHRcdGlmIChjaGVja0J0bikge1xuXHRcdFx0XHRcdFx0Y2hlY2tCdG4uY2xpY2soKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sIDIwMCk7XG5cdFx0fVxuXHR9KTtcblxuXHQvLyBSdW4gU0VPIEdsb2JhbCBhdWRpdCAob3BlbnMgcGFuZWwgYW5kIHJ1bnMgYXVkaXQpXG5cdHBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRpZDogXCJydW4tZ2xvYmFsXCIsXG5cdFx0bmFtZTogXCJSdW4gdmF1bHQgYXVkaXRcIixcblx0XHRpY29uOiBcInNlYXJjaC1jaGVja1wiLFxuXHRcdGNhbGxiYWNrOiAoKSA9PiB7XG5cdFx0XHRwbHVnaW4ub3Blbkdsb2JhbFBhbmVsKCk7XG5cdFx0XHRcblx0XHRcdC8vIEFsd2F5cyBjaGVjayBpZiBwYW5lbCBvcGVuZWQgc3VjY2Vzc2Z1bGx5IGFuZCBydW4gdGhlIGF1ZGl0XG5cdFx0XHR2b2lkIHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgZ2xvYmFsUGFuZWxzID0gcGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tZ2xvYmFsLXBhbmVsJyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGdsb2JhbFBhbmVscy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrOiB0cnkgdG8gb3BlbiBhZ2FpblxuXHRcdFx0XHRcdFx0cGx1Z2luLm9wZW5HbG9iYWxQYW5lbCgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcblx0XHRcdFx0XHRjb25zdCBwYW5lbCA9IGdsb2JhbFBhbmVsc1swXTtcblx0XHRcdFx0XHRpZiAocGFuZWw/LnZpZXcpIHtcblx0XHRcdFx0XHRcdGNvbnN0IHNlb1BhbmVsID0gcGFuZWwudmlldyBhcyB1bmtub3duIGFzIHsgYWN0aW9uczogUGFuZWxBY3Rpb25zOyByZW5kZXIoKTogdm9pZCB9O1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBBbHdheXMgdHJpZ2dlciB0aGUgcmVmcmVzaCBsb2dpYyAoc2FtZSBhcyBjbGlja2luZyB0aGUgcmVmcmVzaCBidXR0b24pXG5cdFx0XHRcdFx0XHRhd2FpdCBzZW9QYW5lbC5hY3Rpb25zLnJlZnJlc2hHbG9iYWxSZXN1bHRzKCk7XG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIHBhbmVsIGRpc3BsYXkgd2l0aCBuZXcgcmVzdWx0c1xuXHRcdFx0XHRcdFx0c2VvUGFuZWwucmVuZGVyKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSgpO1xuXHRcdFx0fSwgMzAwKTtcblx0XHR9XG5cdH0pO1xuXG59XG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBTRU9QbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xyXG5pbXBvcnQgeyBjcmVhdGVTZXR0aW5nc0dyb3VwIH0gZnJvbSBcIi4vdXRpbHMvc2V0dGluZ3MtY29tcGF0XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU0VPU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogU0VPUGx1Z2luO1xyXG5cdHB1YmxpYyBpY29uID0gJ2x1Y2lkZS1zZWFyY2gtY2hlY2snO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTRU9QbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIEdsb2JhbCBncm91cFxyXG5cdFx0Y29uc3QgZ2xvYmFsR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnR2xvYmFsJywgJ3NlbycpO1xyXG5cclxuXHRcdGdsb2JhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdTY2FuIGRpcmVjdG9yaWVzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgZGlyZWN0b3J5IG5hbWVzIHRvIHNjYW4uIExlYXZlIGJsYW5rIHRvIHNjYW4gYWxsIGRpcmVjdG9yaWVzLicpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJsaWtlIGJsb2csIHBvc3RzLCBwdWJsaWNcIiBpcyBhIHBsYWNlaG9sZGVyIGV4YW1wbGUsIG5vdCBVSSB0ZXh0XHJcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdsaWtlIGJsb2csIHBvc3RzLCBwdWJsaWMnKTtcclxuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NhbkRpcmVjdG9yaWVzKTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNjYW5EaXJlY3RvcmllcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z2xvYmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBub3RlIHRpdGxlcyBpbnN0ZWFkIG9mIGZpbGUgbmFtZXMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdEaXNwbGF5IG5vdGUgdGl0bGVzIGZyb20gcHJvcGVydGllcyBpbnN0ZWFkIG9mIGZpbGUgbmFtZXMgaW4gdGhlIGlzc3VlcyBsaXN0IGFuZCBjdXJyZW50IG5vdGUgYXVkaXQnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZU5vdGVUaXRsZXMpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZU5vdGVUaXRsZXMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnbG9iYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVGl0bGUgcHJlZml4IC8gc3VmZml4JylcclxuXHRcdFx0XHQuc2V0RGVzYygnU3BlY2lmeSBhbiBvcHRpb25hbCBwcmVmaXggb3Igc3VmZml4IHRoYXQgZ2V0cyBhcHBlbmRlZCB0byB5b3VyIG1ldGEgdGl0bGUgLSB1c2VkIHRvIGZhY3RvciBpbiBjaGFyYWN0ZXIgY291bnQgZm9yIHRoZSB0aXRsZSBsZW5ndGggY2hlY2snKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdBdXRob3IgbmFtZScpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGl0bGVQcmVmaXhTdWZmaXgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRpdGxlUHJlZml4U3VmZml4ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z2xvYmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0lnbm9yZXMgZmlsZXMgd2l0aCBhbiB1bmRlcnNjb3JlIHByZWZpeCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0RvblxcJ3QgcHJvY2VzcyBmaWxlcyB0aGF0IGJlZ2luIHdpdGggYW4gdW5kZXJzY29yZSwgbGlrZSBfZXhhbXBsZS5tZCcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWdub3JlVW5kZXJzY29yZUZpbGVzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pZ25vcmVVbmRlcnNjb3JlRmlsZXMgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRnbG9iYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJNRFhcIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXROYW1lKCdFbmFibGUgTURYIGZpbGUgc3VwcG9ydCcpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiTURYXCIgaXMgYSBwcm9wZXIgbm91biAoYWNyb255bSkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnUHJvY2VzcyBNRFggZmlsZXMgaW4gYWRkaXRpb24gdG8gTWFya2Rvd24gZmlsZXMuIE1EWCBmaWxlcyB1c2UgdGhlIHNhbWUgcHJvcGVydGllcyBmb3JtYXQgYXMgTWFya2Rvd24uJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVNRFhTdXBwb3J0KVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVNRFhTdXBwb3J0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Z2xvYmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1Nob3cgcmliYm9uIGljb24nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdTaG93IG9yIGhpZGUgdGhlIHdpemFyZCBpY29uIGluIHRoZSBsZWZ0IHNpZGViYXIgcmliYm9uJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93UmliYm9uSWNvbilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1JpYmJvbkljb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRvZ2dsZVJpYmJvbkljb24oKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFByb3BlcnR5IG5hbWVzIGdyb3VwXHJcblx0XHRjb25zdCBwcm9wZXJ0eU5hbWVzR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnUHJvcGVydHkgbmFtZXMnLCAnc2VvJyk7XHJcblxyXG5cdFx0cHJvcGVydHlOYW1lc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdLZXl3b3JkIHByb3BlcnR5JylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQ29udGFpbnMgZXhhbXBsZSBwcm9wZXJ0eSBuYW1lcyAodGFyZ2V0S2V5d29yZCwgc2VvLCBrZXl3b3JkKSB3aGljaCBhcmUgdGVjaG5pY2FsIG5vdGF0aW9uXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdQcm9wZXJ0eSBuYW1lIGZvciB0YXJnZXQga2V5d29yZCAodGFyZ2V0S2V5d29yZCwgc2VvLCBrZXl3b3JkLCBldGMuKScpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJ0YXJnZXRLZXl3b3JkXCIgaXMgYSBwbGFjZWhvbGRlciwgbm90IFVJIHRleHRcclxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdHRleHQuc2V0UGxhY2Vob2xkZXIoJ3RhcmdldEtleXdvcmQnKTtcclxuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mua2V5d29yZFByb3BlcnR5KTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmtleXdvcmRQcm9wZXJ0eSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0cHJvcGVydHlOYW1lc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdEZXNjcmlwdGlvbiBwcm9wZXJ0eScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1Byb3BlcnR5IG5hbWUgZm9yIG1ldGEgZGVzY3JpcHRpb24nKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4ge1xyXG5cdFx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiZGVzY3JpcHRpb25cIiBpcyBhIHBsYWNlaG9sZGVyLCBub3QgVUkgdGV4dFxyXG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcignZGVzY3JpcHRpb24nKTtcclxuXHRcdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVzY3JpcHRpb25Qcm9wZXJ0eSk7XHJcblx0XHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZXNjcmlwdGlvblByb3BlcnR5ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRwcm9wZXJ0eU5hbWVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1RpdGxlIHByb3BlcnR5JylcclxuXHRcdFx0XHQuc2V0RGVzYygnUHJvcGVydHkgbmFtZSBmb3IgdGl0bGUgKGxlYXZlIGJsYW5rIHRvIHNraXAgdGl0bGUgY2hlY2tzKScpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJ0aXRsZVwiIGlzIGEgcGxhY2Vob2xkZXIsIG5vdCBVSSB0ZXh0XHJcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCd0aXRsZScpO1xyXG5cdFx0XHRcdFx0dGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50aXRsZVByb3BlcnR5KTtcclxuXHRcdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRpdGxlUHJvcGVydHkgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHByb3BlcnR5TmFtZXNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnVXNlIGZpbGUgbmFtZSBhcyB0aXRsZScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1VzZSBmaWxlIG5hbWUgYXMgdGl0bGUgaW5zdGVhZCBvZiBhIHByb3BlcnR5JylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VGaWxlbmFtZUFzVGl0bGUpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZUZpbGVuYW1lQXNUaXRsZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHByb3BlcnR5TmFtZXNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnU2x1ZyBwcm9wZXJ0eScpXHJcblx0XHRcdFx0LnNldERlc2MoJ1Byb3BlcnR5IG5hbWUgZm9yIHNsdWcgKGxlYXZlIGJsYW5rIHRvIHNraXAgc2x1ZyBjaGVja3MpJylcclxuXHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHtcclxuXHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcInNsdWdcIiBpcyBhIHBsYWNlaG9sZGVyLCBub3QgVUkgdGV4dFxyXG5cdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdFx0dGV4dC5zZXRQbGFjZWhvbGRlcignc2x1ZycpO1xyXG5cdFx0XHRcdFx0dGV4dC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zbHVnUHJvcGVydHkpO1xyXG5cdFx0XHRcdFx0dGV4dC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2x1Z1Byb3BlcnR5ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRwcm9wZXJ0eU5hbWVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ1VzZSBmaWxlL2ZvbGRlciBuYW1lIGFzIHNsdWcnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdVc2UgZmlsZS9mb2xkZXIgbmFtZSBhcyBzbHVnIGluc3RlYWQgb2YgYSBwcm9wZXJ0eScpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRmlsZW5hbWVBc1NsdWcpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZUZpbGVuYW1lQXNTbHVnID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHQvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHRoZSBwYXJlbnQgZm9sZGVyIG9wdGlvblxyXG5cdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNob3cgcGFyZW50IGZvbGRlciBvcHRpb24gb25seSB3aGVuIHVzZUZpbGVuYW1lQXNTbHVnIGlzIGVuYWJsZWRcclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VGaWxlbmFtZUFzU2x1Zykge1xyXG5cdFx0XHRwcm9wZXJ0eU5hbWVzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXROYW1lKCdVc2UgcGFyZW50IGZvbGRlciBuYW1lIGluc3RlYWQgd2hlbiBzcGVjaWZpZWQgZmlsZSBuYW1lIGlzIHVzZWQnKVxyXG5cdFx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFRleHQgaXMgYWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnSWYgYSBtYXJrZG93biBmaWxlIG1hdGNoZXMgdGhpcyBmaWxlIG5hbWUsIHVzZSB0aGUgcGFyZW50IGZvbGRlciBuYW1lIGFzIHRoZSBzbHVnIGluc3RlYWQnKVxyXG5cdFx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcImluZGV4XCIgaXMgYSBwbGFjZWhvbGRlciwgbm90IFVJIHRleHRcclxuXHRcdFx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdFx0XHR0ZXh0LnNldFBsYWNlaG9sZGVyKCdpbmRleCcpO1xyXG5cdFx0XHRcdFx0XHR0ZXh0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBhcmVudEZvbGRlclNsdWdGaWxlbmFtZSk7XHJcblx0XHRcdFx0XHRcdHRleHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucGFyZW50Rm9sZGVyU2x1Z0ZpbGVuYW1lID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEF1ZGl0IG9wdGlvbnMgZ3JvdXBcclxuXHRcdGNvbnN0IGF1ZGl0T3B0aW9uc0dyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0F1ZGl0IG9wdGlvbnMnLCAnc2VvJyk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIG1ldGEgdGl0bGUgbGVuZ3RoJylcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIG1ldGEgdGl0bGUgbGVuZ3RoIGNoZWNraW5nJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1RpdGxlTGVuZ3RoKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1RpdGxlTGVuZ3RoID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIGhlYWRpbmcgb3JkZXInKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgaGVhZGluZyBoaWVyYXJjaHkgY2hlY2tpbmcnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrSGVhZGluZ09yZGVyKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0hlYWRpbmdPcmRlciA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDaGVjayBjb250ZW50IGxlbmd0aCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0VuYWJsZSBjb250ZW50IGxlbmd0aCBjaGVja2luZycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tDb250ZW50TGVuZ3RoKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0NvbnRlbnRMZW5ndGggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEdXBsaWNhdGUgY29udGVudCBjaGVjayB3aXRoIHBlcmZvcm1hbmNlIHdhcm5pbmdcclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDaGVjayBkdXBsaWNhdGUgY29udGVudCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0VuYWJsZSBkdXBsaWNhdGUgY29udGVudCBkZXRlY3Rpb24nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrRHVwbGljYXRlQ29udGVudClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tEdXBsaWNhdGVDb250ZW50ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHQvLyBBZGQgcGVyZm9ybWFuY2Ugd2FybmluZ1xyXG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJXYXJuaW5nOlwiIGlzIGEgc3RhbmRhcmQgd2FybmluZyBwcmVmaXggYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxyXG5cdFx0XHRzZXR0aW5nLmRlc2NFbC5jcmVhdGVFbCgnZGl2Jywge1xyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHR0ZXh0OiAnV2FybmluZzogVGhpcyBmZWF0dXJlIGNhbiBiZSB2ZXJ5IHJlc291cmNlLWludGVuc2l2ZSB3aXRoIGxhcmdlIHZhdWx0cyBhbmQgbWFueSBub3Rlcy4gRGlzYWJsZSBmb3IgZmFzdGVyIGF1ZGl0cy4nLFxyXG5cdFx0XHRcdGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbiBzZW8td2FybmluZy1tZXNzYWdlJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdDaGVjayBhbHQgdGV4dCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0VuYWJsZSBhbHQgdGV4dCBjaGVja2luZyBmb3IgbWVkaWEgY29udGVudCAoaW1hZ2VzLCB2aWRlb3MsIGVtYmVkcywgZXRjLiknKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrQWx0VGV4dClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tBbHRUZXh0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIGltYWdlIGZpbGUgbmFtZXMnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgaW1hZ2UgZmlsZSBuYW1lIGNoZWNraW5nJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0ltYWdlTmFtaW5nKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0ltYWdlTmFtaW5nID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0NoZWNrIGJyb2tlbiBpbnRlcm5hbCBsaW5rcycpXHJcblx0XHRcdFx0LnNldERlc2MoJ0VuYWJsZSBicm9rZW4gaW50ZXJuYWwgbGluayBkZXRlY3Rpb24nKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrQnJva2VuTGlua3MpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrQnJva2VuTGlua3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ2hlY2sgZXh0ZXJuYWwgbGlua3MnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdSZXR1cm4gYSBsaXN0IG9mIGV4dGVybmFsIGxpbmtzJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0V4dGVybmFsTGlua3MpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrRXh0ZXJuYWxMaW5rcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGF1ZGl0T3B0aW9uc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdFbmFibGUgYnJva2VuIGV4dGVybmFsIGxpbmsgY2hlY2sgYnV0dG9uJylcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQ29udGFpbnMgcXVvdGVkIGJ1dHRvbiB0ZXh0IHdoaWNoIGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnU2hvdyBcIkNoZWNrIGV4dGVybmFsIGxpbmtzIGZvciA0MDRzXCIgYnV0dG9uIGluIGN1cnJlbnQgbm90ZSBwYW5lbCcpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rQnV0dG9uKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtCdXR0b24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdC8vIFJlZnJlc2ggdGhlIHNpZGUgcGFuZWwgaWYgaXQgZXhpc3RzXHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zaWRlUGFuZWwpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zaWRlUGFuZWwucmVmcmVzaCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ2hlY2sgbmFrZWQgbGlua3MnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdFbmFibGUgbmFrZWQgVVJMIGRldGVjdGlvbicpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tOYWtlZExpbmtzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja05ha2VkTGlua3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ2hlY2sgcmVhZGluZyBsZXZlbCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ0VuYWJsZSByZWFkaW5nIGxldmVsIGFuYWx5c2lzJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1JlYWRpbmdMZXZlbClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tSZWFkaW5nTGV2ZWwgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ2hlY2sgcG90ZW50aWFsbHkgYnJva2VuIGxpbmtzJylcclxuXHRcdFx0XHQuc2V0RGVzYygnQ2hlY2sgZm9yIHBvdGVudGlhbGx5IGJyb2tlbiBpbnRlcm5hbCBsaW5rcyB0aGF0IG1heSBub3Qgd29yayBvbiB3ZWIgcHVibGlzaGluZycpXHJcblx0XHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQ2hlY2sgcG90ZW50aWFsbHkgYnJva2VuIGVtYmVkcycpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFRleHQgaXMgYWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlOyBcIndpa2lsaW5rLWJhc2VkXCIgaXMgdGVjaG5pY2FsIHRlcm1pbm9sb2d5XHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXREZXNjKCdDaGVjayBmb3IgcG90ZW50aWFsbHkgYnJva2VuIG1hcmtkb3duIG9yIHdpa2lsaW5rLWJhc2VkIGVtYmVkZGVkIG1lZGlhIHRoYXQgbWF5IG5vdCB3b3JrIG9uIHdlYiBwdWJsaXNoaW5nJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuRW1iZWRzKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuRW1iZWRzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0YXVkaXRPcHRpb25zR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0ZsZXhpYmxlIHJlbGF0aXZlIGxpbmsgY2hlY2snKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdVc2VzIGZsZXhpYmxlIHZhbGlkYXRpb24gZm9yIHJlbGF0aXZlIHBhdGhzIGxpa2UgL3BhZ2UgdGhhdCBjYW4gYmUgcmVzb2x2ZWQgYnkgYSBzdGF0aWMgc2l0ZSBnZW5lcmF0b3IsIGJ1dCBtYXkgYmUgY29uc2lkZXJlZCBicm9rZW4gYnkgdHlwaWNhbCBPYnNpZGlhbiB2YWxpZGF0aW9uJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wdWJsaXNoTW9kZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHVibGlzaE1vZGUgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJIMVwiIGlzIHRlY2huaWNhbCBub3RhdGlvbiAoSFRNTCBoZWFkaW5nIGxldmVsKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdC5zZXROYW1lKCdUaXRsZSBwcm9wZXJ0eSBpcyBIMScpXHJcblx0XHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiSDFcIiBpcyB0ZWNobmljYWwgbm90YXRpb24gKEhUTUwgaGVhZGluZyBsZXZlbCkgYW5kIHNob3VsZCBiZSBjYXBpdGFsaXplZFxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHQuc2V0RGVzYygnRW5hYmxlIHdoZW4geW91ciBzdGF0aWMgc2l0ZSBnZW5lcmF0b3IgdXNlcyB0aGUgdGl0bGUgcHJvcGVydHkgdG8gYXV0b21hdGljYWxseSBnZW5lcmF0ZSB0aGUgSDEgaGVhZGluZy4gVGhpcyBwcmV2ZW50cyBIMSB2YWxpZGF0aW9uIGVycm9ycyB3aGlsZSBzdGlsbCBmbGFnZ2luZyBIMXMgdGhhdCBhcHBlYXIgYWZ0ZXIgb3RoZXIgaGVhZGluZyBsZXZlbHMuJylcclxuXHRcdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5za2lwSDFDaGVjaylcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc2tpcEgxQ2hlY2sgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRhdWRpdE9wdGlvbnNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnQXV0b21hdGljYWxseSBpbmNsdWRlIGJyb2tlbiBleHRlcm5hbCBsaW5rIGNoZWNrcyBpbiBhdWRpdHMgKG5vdCByZWNvbW1lbmRlZCknKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdJbmNsdWRlIGJyb2tlbiBleHRlcm5hbCBsaW5rIGNoZWNraW5nIGluIHZhdWx0LXdpZGUgYW5kIGN1cnJlbnQgbm90ZSBhdWRpdHMnKVxyXG5cdFx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2spXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2sgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdC8vIFJlZnJlc2ggdGhlIHNpZGUgcGFuZWwgaWYgaXQgZXhpc3RzXHJcblx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zaWRlUGFuZWwpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zaWRlUGFuZWwucmVmcmVzaCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHRcdC8vIEFkZCB3YXJuaW5nIGZvciB2YXVsdC13aWRlIGV4dGVybmFsIGxpbmsgY2hlY2tpbmdcclxuXHRcdFx0Ly8gRmFsc2UgcG9zaXRpdmU6IFwiV2FybmluZzpcIiBpcyBhIHN0YW5kYXJkIHdhcm5pbmcgcHJlZml4IGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcclxuXHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRWwoJ2RpdicsIHtcclxuXHRcdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXHJcblx0XHRcdFx0dGV4dDogJ1dhcm5pbmc6IFRoaXMgd2lsbCBtYWtlIHZhdWx0IGF1ZGl0cyBleHRyZW1lbHkgc2xvdy4gVXNlIHRoZSBcIkNoZWNrIGV4dGVybmFsIGxpbmtzXCIgYnV0dG9uIGluc3RlYWQgZm9yIGluZGl2aWR1YWwgbm90ZXMuJyxcclxuXHRcdFx0XHRjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24gc2VvLXdhcm5pbmctbWVzc2FnZSdcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUaHJlc2hvbGRzIGdyb3VwXHJcblx0XHRjb25zdCB0aHJlc2hvbGRzR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnVGhyZXNob2xkcycsICdzZW8nKTtcclxuXHJcblx0XHR0aHJlc2hvbGRzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ01pbmltdW0gY29udGVudCBsZW5ndGgnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdNaW5pbXVtIHdvcmQgY291bnQgZm9yIGNvbnRlbnQgbGVuZ3RoIGNoZWNrJylcclxuXHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignMzAwJylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5taW5Db250ZW50TGVuZ3RoLnRvU3RyaW5nKCkpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcclxuXHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubWluQ29udGVudExlbmd0aCA9IG51bTtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhyZXNob2xkc0dyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcclxuXHRcdFx0c2V0dGluZ1xyXG5cdFx0XHRcdC5zZXROYW1lKCdLZXl3b3JkIGRlbnNpdHkgbWluaW11bScpXHJcblx0XHRcdFx0LnNldERlc2MoJ01pbmltdW0ga2V5d29yZCBkZW5zaXR5IHBlcmNlbnRhZ2UnKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCcxJylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5rZXl3b3JkRGVuc2l0eU1pbi50b1N0cmluZygpKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRjb25zdCBudW0gPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuXHRcdFx0XHRcdFx0aWYgKCFpc05hTihudW0pKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mua2V5d29yZERlbnNpdHlNaW4gPSBudW07XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRocmVzaG9sZHNHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XHJcblx0XHRcdHNldHRpbmdcclxuXHRcdFx0XHQuc2V0TmFtZSgnS2V5d29yZCBkZW5zaXR5IG1heGltdW0nKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdNYXhpbXVtIGtleXdvcmQgZGVuc2l0eSBwZXJjZW50YWdlJylcclxuXHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignMicpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mua2V5d29yZERlbnNpdHlNYXgudG9TdHJpbmcoKSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcblx0XHRcdFx0XHRcdGlmICghaXNOYU4obnVtKSkge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmtleXdvcmREZW5zaXR5TWF4ID0gbnVtO1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aHJlc2hvbGRzR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xyXG5cdFx0XHRzZXR0aW5nXHJcblx0XHRcdFx0LnNldE5hbWUoJ0R1cGxpY2F0ZSBjb250ZW50IHRocmVzaG9sZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ1NpbWlsYXJpdHkgcGVyY2VudGFnZSB0aHJlc2hvbGQgZm9yIGR1cGxpY2F0ZSBjb250ZW50IGRldGVjdGlvbicpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJzgwJylcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBsaWNhdGVUaHJlc2hvbGQudG9TdHJpbmcoKSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbnVtID0gcGFyc2VJbnQodmFsdWUpO1xyXG5cdFx0XHRcdFx0XHRpZiAoIWlzTmFOKG51bSkpIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXBsaWNhdGVUaHJlc2hvbGQgPSBudW07XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xyXG4gKiBQcm92aWRlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBTZXR0aW5nR3JvdXAgKHJlcXVpcmVzIEFQSSAxLjExLjArKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRoZWFkaW5nPzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdC8vIHJlcXVpcmVBcGlWZXJzaW9uIGlzIHRoZSBvZmZpY2lhbCBPYnNpZGlhbiBBUEkgbWV0aG9kIGZvciB2ZXJzaW9uIGNoZWNraW5nXHJcblx0aWYgKHJlcXVpcmVBcGlWZXJzaW9uKCcxLjExLjAnKSkge1xyXG5cdFx0Ly8gVXNlIFNldHRpbmdHcm91cCAtIGl0J3MgZ3VhcmFudGVlZCB0byBleGlzdCBpZiByZXF1aXJlQXBpVmVyc2lvbiByZXR1cm5zIHRydWVcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Ly8gZm9yIG9sZGVyIFR5cGVTY3JpcHQgdmVyc2lvbnMsIGJ1dCBleGlzdHMgYXQgcnVudGltZSBpbiBPYnNpZGlhbiAxLjExLjArXHJcblx0XHQvLyBVc2luZyB1bmtub3duIGluc3RlYWQgb2YgYW55IHRvIHNhdGlzZnkgZXNsaW50IHdoaWxlIG1haW50YWluaW5nIHR5cGUgc2FmZXR5XHJcblx0XHRjb25zdCBTZXR0aW5nR3JvdXBDbGFzcyA9IChPYnNpZGlhbk1vZHVsZSBhcyB1bmtub3duIGFzIHsgU2V0dGluZ0dyb3VwPzogbmV3IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpID0+IHtcclxuXHRcdFx0c2V0SGVhZGluZyhoZWFkaW5nOiBzdHJpbmcpOiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcblx0XHR9IH0pLlNldHRpbmdHcm91cDtcclxuXHRcdFxyXG5cdFx0aWYgKFNldHRpbmdHcm91cENsYXNzKSB7XHJcblx0XHRcdGNvbnN0IGdyb3VwID0gaGVhZGluZyBcclxuXHRcdFx0XHQ/IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCkuc2V0SGVhZGluZyhoZWFkaW5nKVxyXG5cdFx0XHRcdDogbmV3IFNldHRpbmdHcm91cENsYXNzKGNvbnRhaW5lckVsKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdFx0Z3JvdXAuYWRkU2V0dGluZyhjYik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBGYWxsYmFjayBwYXRoIChlaXRoZXIgQVBJIDwgMS4xMS4wIG9yIFNldHRpbmdHcm91cCBub3QgZm91bmQpXHJcblx0Ly8gQWRkIHNjb3BpbmcgY2xhc3MgdG8gY29udGFpbmVyRWwgdG8gc2NvcGUgQ1NTIHRvIG9ubHkgdGhpcyBwbHVnaW4ncyBzZXR0aW5nc1xyXG5cdGlmIChtYW5pZmVzdElkKSB7XHJcblx0XHRjb250YWluZXJFbC5hZGRDbGFzcyhgJHttYW5pZmVzdElkfS1zZXR0aW5ncy1jb21wYXRgKTtcclxuXHR9XHJcblx0XHJcblx0e1xyXG5cdFx0Ly8gRmFsbGJhY2s6IENyZWF0ZSBhIGhlYWRpbmcgbWFudWFsbHkgZm9yIG9sZGVyIEFQSSB2ZXJzaW9uc1xyXG5cdFx0Ly8gTm90ZTogV2hpbGUgYmVzdCBwcmFjdGljZSBwcmVmZXJzIFNldHRpbmcuc2V0SGVhZGluZygpLCB0aGUgZmFsbGJhY2sgcGF0aFxyXG5cdFx0Ly8gaXMgZm9yIHZlcnNpb25zIHRoYXQgbWF5IG5vdCBzdXBwb3J0IGl0LCBzbyBtYW51YWwgaGVhZGluZyBpcyBhcHByb3ByaWF0ZSBoZXJlXHJcblx0XHRpZiAoaGVhZGluZykge1xyXG5cdFx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0XHRoZWFkaW5nRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBoZWFkaW5nIH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCkge1xyXG5cdFx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcblx0XHRcdFx0Y2Ioc2V0dGluZyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59XHJcblxyXG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFRGaWxlLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBTRU9QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcclxuaW1wb3J0IHsgU0VPUmVzdWx0cyB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBTRU9DdXJyZW50UGFuZWxWaWV3VHlwZSwgU0VPR2xvYmFsUGFuZWxWaWV3VHlwZSB9IGZyb20gXCIuL3BhbmVsLWNvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBnZXRWYXVsdEZvbGRlcnNJbmZvIH0gZnJvbSBcIi4vcGFuZWwtdXRpbHNcIjtcclxuaW1wb3J0IHsgUGFuZWxBY3Rpb25zIH0gZnJvbSBcIi4vcGFuZWwtYWN0aW9uc1wiO1xyXG5pbXBvcnQgeyBSZXN1bHRzRGlzcGxheSB9IGZyb20gXCIuL3Jlc3VsdHMtZGlzcGxheVwiO1xyXG5pbXBvcnQgeyBQYW5lbFJlbmRlcmVyIH0gZnJvbSBcIi4vcGFuZWwtcmVuZGVyZXJcIjtcclxuaW1wb3J0IHsgaXNTdXBwb3J0ZWRGaWxlIH0gZnJvbSBcIi4uL3V0aWxzL2ZpbGUtdXRpbHNcIjtcclxuXHJcbnR5cGUgU29ydFR5cGUgPSAnaXNzdWVzLWRlc2MnIHwgJ2lzc3Vlcy1hc2MnIHwgJ3dhcm5pbmdzLWRlc2MnIHwgJ3dhcm5pbmdzLWFzYycgfCAnbm90aWNlcy1kZXNjJyB8ICdub3RpY2VzLWFzYycgfCAnZmlsZW5hbWUtYXNjJyB8ICdmaWxlbmFtZS1kZXNjJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTRU9TaWRlUGFuZWwgZXh0ZW5kcyBJdGVtVmlldyB7XHJcblx0cGx1Z2luOiBTRU9QbHVnaW47XHJcblx0Y3VycmVudE5vdGVSZXN1bHRzOiBTRU9SZXN1bHRzIHwgbnVsbCA9IG51bGw7XHJcblx0Z2xvYmFsUmVzdWx0czogU0VPUmVzdWx0c1tdID0gW107XHJcblx0cGFuZWxUeXBlOiAnY3VycmVudCcgfCAnZ2xvYmFsJyA9ICdjdXJyZW50JztcclxuXHRjdXJyZW50U29ydDogU29ydFR5cGU7XHJcblx0aGFzUnVuSW5pdGlhbFNjYW46IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRwcml2YXRlIGlzUmVmcmVzaGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHByaXZhdGUgY3VycmVudEF1ZGl0Q29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XHJcblx0XHJcblx0Ly8gU3RhdGljIHByb3BlcnR5IHRvIHRyYWNrIHRoZSBjdXJyZW50IGF1ZGl0IGNvbnRyb2xsZXIgZ2xvYmFsbHlcclxuXHRwdWJsaWMgc3RhdGljIGdsb2JhbEF1ZGl0Q29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XHJcblx0XHJcblx0cHJpdmF0ZSBhY3Rpb25zOiBQYW5lbEFjdGlvbnM7XHJcblx0cHJpdmF0ZSByZXN1bHRzRGlzcGxheTogUmVzdWx0c0Rpc3BsYXk7XHJcblx0cHJpdmF0ZSByZW5kZXJlcjogUGFuZWxSZW5kZXJlcjtcclxuXHJcblx0Y29uc3RydWN0b3IocGx1Z2luOiBTRU9QbHVnaW4sIHBhbmVsVHlwZTogJ2N1cnJlbnQnIHwgJ2dsb2JhbCcgPSAnY3VycmVudCcsIGxlYWY/OiBXb3Jrc3BhY2VMZWFmKSB7XHJcblx0XHRzdXBlcihsZWFmIHx8IHBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYoKSk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMucGFuZWxUeXBlID0gcGFuZWxUeXBlO1xyXG5cdFx0dGhpcy5jdXJyZW50U29ydCA9IHBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0U29ydDtcclxuXHRcdFxyXG5cdFx0dGhpcy5hY3Rpb25zID0gbmV3IFBhbmVsQWN0aW9ucyh0aGlzLmFwcCwgdGhpcy5wbHVnaW4sIHRoaXMucGFuZWxUeXBlKTtcclxuXHRcdHRoaXMucmVzdWx0c0Rpc3BsYXkgPSBuZXcgUmVzdWx0c0Rpc3BsYXkoXHJcblx0XHRcdHRoaXMuY29udGFpbmVyRWwsXHJcblx0XHRcdGFzeW5jIChmaWxlUGF0aDogc3RyaW5nKSA9PiBhd2FpdCB0aGlzLmFjdGlvbnMub3BlbkZpbGUoZmlsZVBhdGgpLFxyXG5cdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlQW5kQXVkaXQoZmlsZVBhdGgpXHJcblx0XHQpO1xyXG5cdFx0dGhpcy5yZW5kZXJlciA9IG5ldyBQYW5lbFJlbmRlcmVyKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgdGhpcy5hY3Rpb25zKTtcclxuXHRcdFxyXG5cdFx0XHJcblx0XHQvLyBObyBnbG9iYWwgZXZlbnQgZGVsZWdhdGlvbiAtIHdlJ2xsIGhhbmRsZSB0aGlzIGluIHJlbmRlcigpXHJcblx0XHRcclxuXHRcdC8vIExpc3RlbiBmb3IgZmlsZSBjaGFuZ2VzIHRvIHVwZGF0ZSBjdXJyZW50IG5vdGUgcGFuZWxcclxuXHRcdGlmICh0aGlzLnBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnKSB7XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2FjdGl2ZS1sZWFmLWNoYW5nZScsICgpID0+IHtcclxuXHRcdFx0XHQvLyBDYW5jZWwgYW55IG9uZ29pbmcgYXVkaXQgd2hlbiBzd2l0Y2hpbmcgZmlsZXNcclxuXHRcdFx0XHRpZiAoU0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlcikge1xyXG5cdFx0XHRcdFx0U0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlci5hYm9ydCgpO1xyXG5cdFx0XHRcdFx0U0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlciA9IG51bGw7XHJcblx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKCdBdWRpdCBjYW5jZWxsZWQgZHVlIHRvIGZpbGUgc3dpdGNoJyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIERvbid0IHJlLXJlbmRlciBpZiB3ZSdyZSBjdXJyZW50bHkgcmVmcmVzaGluZ1xyXG5cdFx0XHRcdGlmICh0aGlzLmlzUmVmcmVzaGluZykge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBBbHdheXMgdXBkYXRlIHdoZW4gc3dpdGNoaW5nIGZpbGVzIChzaG93cyBjYWNoZWQgcmVzdWx0cyBpZiBhdmFpbGFibGUpXHJcblx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0aWYgKCFhY3RpdmVGaWxlKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgcGFuZWwgd2l0aCBjYWNoZWQgcmVzdWx0cyBmb3IgdGhlIG5ldyBmaWxlIChubyBuZXcgYXVkaXQpXHJcblx0XHRcdFx0aWYgKGFjdGl2ZUZpbGUpIHtcclxuXHRcdFx0XHRcdHRoaXMudXBkYXRlQ3VycmVudE5vdGVSZXN1bHRzKGFjdGl2ZUZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gTm90ZTogUmVtb3ZlZCByZWFsLXRpbWUgYXVkaXQgb24gZmlsZSBtb2RpZmljYXRpb24gdG8gaW1wcm92ZSBwZXJmb3JtYW5jZVxyXG5cdFx0XHQvLyBBdWRpdHMgc2hvdWxkIG9ubHkgYmUgdHJpZ2dlcmVkIGJ5IGV4cGxpY2l0IHVzZXIgYWN0aW9ucyAoYnV0dG9ucywgY29tbWFuZHMpXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMucGFuZWxUeXBlID09PSAnY3VycmVudCcgPyBTRU9DdXJyZW50UGFuZWxWaWV3VHlwZSA6IFNFT0dsb2JhbFBhbmVsVmlld1R5cGU7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGhhbmRsZVJlZnJlc2hDbGljayhidXR0b246IEhUTUxCdXR0b25FbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBQcmV2ZW50IG11bHRpcGxlIGNsaWNrc1xyXG5cdFx0aWYgKGJ1dHRvbi5kaXNhYmxlZCkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIENhbmNlbCBhbnkgZXhpc3RpbmcgYXVkaXRcclxuXHRcdGlmIChTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyKSB7XHJcblx0XHRcdFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIuYWJvcnQoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gQ3JlYXRlIG5ldyBhYm9ydCBjb250cm9sbGVyIGZvciB0aGlzIGF1ZGl0XHJcblx0XHRTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG5cdFx0XHJcblx0XHR0aGlzLmlzUmVmcmVzaGluZyA9IHRydWU7XHJcblx0XHRidXR0b24udGV4dENvbnRlbnQgPSAnUmVmcmVzaGluZy4uLic7XHJcblx0XHRidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmFjdGlvbnMuY2hlY2tDdXJyZW50Tm90ZShTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyLnNpZ25hbCk7XHJcblx0XHRcdGlmIChyZXN1bHQpIHtcclxuXHRcdFx0XHR0aGlzLmN1cnJlbnROb3RlUmVzdWx0cyA9IHJlc3VsdDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBDbGVhciBBTEwgZXhpc3RpbmcgcmVzdWx0cyBtb3JlIGFnZ3Jlc3NpdmVseVxyXG5cdFx0XHRcdGNvbnN0IGV4aXN0aW5nUmVzdWx0cyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLnNlby1yZXN1bHRzLWNvbnRhaW5lciwgLnNlby1maWxlLWlzc3VlLCAuc2VvLWlzc3VlLCAuc2VvLXdhcm5pbmcsIC5zZW8tbm90aWNlLCAuc2VvLWluZm8tbm90ZSwgLnNlby1jaGVjaywgLnNlby1yZXN1bHQsIC5zZW8tc2NvcmUtaGVhZGVyLCAuc2VvLXNjb3JlLXRleHQsIC5zZW8tc2NvcmUtbnVtYmVyLCAuc2VvLXRvZ2dsZS1pY29uLCAuc2VvLWNvbGxhcHNlLWljb24nKTtcclxuXHRcdFx0XHRleGlzdGluZ1Jlc3VsdHMuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IHJlc3VsdHMgY29udGFpbmVyIGFuZCByZW5kZXIgcmVzdWx0c1xyXG5cdFx0XHRcdGNvbnN0IG5ld1Jlc3VsdHNDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1yZXN1bHRzLWNvbnRhaW5lcicgfSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gUmV1c2UgZXhpc3RpbmcgUmVzdWx0c0Rpc3BsYXkgaW5zdGFuY2UgdG8gcHJlc2VydmUgY29sbGFwc2Ugc3RhdGVzXHJcblx0XHRcdFx0dGhpcy5yZXN1bHRzRGlzcGxheS51cGRhdGVDb250YWluZXIobmV3UmVzdWx0c0NvbnRhaW5lcik7XHJcblx0XHRcdFx0dGhpcy5yZXN1bHRzRGlzcGxheS5yZW5kZXJSZXN1bHRzKHJlc3VsdCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gVXBkYXRlIGdsb2JhbCByZXN1bHRzIGlmIHRoZXkgZXhpc3QgKGJ1dCBkb24ndCB0cmlnZ2VyIHJlLXJlbmRlcilcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZUdsb2JhbFJlc3VsdHNJZkV4aXN0cyhyZXN1bHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKCdBdWRpdCB3YXMgY2FuY2VsbGVkJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHJlZnJlc2ggYnV0dG9uOicsIGVycm9yKTtcclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdHRoaXMuaXNSZWZyZXNoaW5nID0gZmFsc2U7XHJcblx0XHRcdGJ1dHRvbi50ZXh0Q29udGVudCA9ICdSZWZyZXNoJztcclxuXHRcdFx0YnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRcdFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIgPSBudWxsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5wYW5lbFR5cGUgPT09ICdjdXJyZW50JyA/IFwiU0VPIGF1ZGl0OiBjdXJyZW50IG5vdGVcIiA6IFwiU0VPIGF1ZGl0OiB2YXVsdFwiO1xyXG5cdH1cclxuXHJcblx0Z2V0SWNvbigpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIFwic2VhcmNoLWNoZWNrXCI7XHJcblx0fVxyXG5cclxuXHRhc3luYyBvbk9wZW4oKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBMb2FkIGNhY2hlZCByZXN1bHRzIGZvciBnbG9iYWwgcGFuZWxcclxuXHRcdFx0aWYgKHRoaXMucGFuZWxUeXBlID09PSAnZ2xvYmFsJyAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHR0aGlzLmdsb2JhbFJlc3VsdHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBFbnN1cmUgaWNvbiBpcyBjb3JyZWN0IGJlZm9yZSByZW5kZXJpbmdcclxuXHRcdFx0dGhpcy5mb3JjZUljb25SZWZyZXNoKCk7XHJcblxyXG5cdFx0XHQvLyBBdXRvLXNjYW4gZm9yIGdsb2JhbCBwYW5lbCBvbiBmaXJzdCBvcGVuIGlmIG5vIGNhY2hlZCByZXN1bHRzXHJcblx0XHRcdGlmICh0aGlzLnBhbmVsVHlwZSA9PT0gJ2dsb2JhbCcgJiYgIXRoaXMuaGFzUnVuSW5pdGlhbFNjYW4gJiYgdGhpcy5nbG9iYWxSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRcdC8vIFNob3cgbG9hZGluZyBzdGF0ZSBmaXJzdFxyXG5cdFx0XHRcdHRoaXMuc2hvd0xvYWRpbmdTdGF0ZSgpO1xyXG5cdFx0XHRcdHRoaXMuaGFzUnVuSW5pdGlhbFNjYW4gPSB0cnVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucnVuSW5pdGlhbFNjYW4oKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBSZW5kZXIgbm9ybWFsbHkgaWYgd2UgaGF2ZSBjYWNoZWQgcmVzdWx0cyBvciBpdCdzIG5vdCBhIGdsb2JhbCBwYW5lbFxyXG5cdFx0XHRcdHRoaXMucmVuZGVyKCk7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9wZW5pbmcgU0VPIHBhbmVsOicsIGVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIG9uQ2xvc2UoKSB7XHJcblx0XHQvLyBDbGVhbnVwIGlmIG5lZWRlZFxyXG5cdH1cclxuXHJcblx0Y2xlYW51cCgpIHtcclxuXHRcdC8vIENsZWFudXAgcmVzb3VyY2VzXHJcblx0fVxyXG5cclxuXHQvLyBSdW4gaW5pdGlhbCBzY2FuIGZvciBnbG9iYWwgcGFuZWxcclxuXHRhc3luYyBydW5Jbml0aWFsU2NhbigpIHtcclxuXHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLmFjdGlvbnMucnVuSW5pdGlhbFNjYW4oKTtcclxuXHRcdGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0dGhpcy5nbG9iYWxSZXN1bHRzID0gcmVzdWx0cztcclxuXHRcdFx0dGhpcy5yZW5kZXIoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIEZvcmNlIGljb24gcmVmcmVzaCB0byBoYW5kbGUgT2JzaWRpYW4ncyBpY29uIGNhY2hpbmcgaXNzdWVzXHJcblx0cHVibGljIGZvcmNlSWNvblJlZnJlc2goKSB7XHJcblx0XHQvLyBJbW1lZGlhdGUgYXBwcm9hY2ggLSB0cnkgdG8gc2V0IGljb24gYmVmb3JlIERPTSBpcyByZW5kZXJlZFxyXG5cdFx0Ly8gVGhpcyBzaG91bGQgcHJldmVudCB0aGUgZmxhc2ggb2Ygd3JvbmcgaWNvblxyXG5cdFx0XHJcblx0XHQvLyBGb3JjZSByZS1yZWdpc3RyYXRpb24gb2YgdGhlIHZpZXcgd2l0aCBjb3JyZWN0IGljb25cclxuXHRcdGlmICh0aGlzLmxlYWYpIHtcclxuXHRcdFx0dm9pZCB0aGlzLmxlYWYuc2V0Vmlld1N0YXRlKHtcclxuXHRcdFx0XHR0eXBlOiB0aGlzLmdldFZpZXdUeXBlKCksXHJcblx0XHRcdFx0c3RhdGU6IHRoaXMubGVhZi52aWV3LmdldFN0YXRlKClcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEFsc28gZG8gdGhlIERPTSBtYW5pcHVsYXRpb24gYXMgYmFja3VwXHJcblx0XHRzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0Ly8gQXBwcm9hY2ggMTogRGlyZWN0IERPTSBtYW5pcHVsYXRpb24gb2YgaWNvbiBlbGVtZW50XHJcblx0XHRcdGNvbnN0IGljb25FbCA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvcignLnZpZXctaGVhZGVyLWljb24nKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKGljb25FbCkge1xyXG5cdFx0XHRcdC8vIENsZWFyIGFuZCByZXNldCB0aGUgaWNvbiB1c2luZyBET00gQVBJXHJcblx0XHRcdFx0d2hpbGUgKGljb25FbC5maXJzdENoaWxkKSB7XHJcblx0XHRcdFx0XHRpY29uRWwucmVtb3ZlQ2hpbGQoaWNvbkVsLmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpY29uRWwuc2V0QXR0cmlidXRlKCdkYXRhLWljb24nLCAnc2VhcmNoLWNoZWNrJyk7XHJcblx0XHRcdFx0Ly8gRm9yY2UgYSByZS1yZW5kZXIgYnkgdGVtcG9yYXJpbHkgY2hhbmdpbmcgdGhlIGF0dHJpYnV0ZVxyXG5cdFx0XHRcdGljb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWNvbicsICcnKTtcclxuXHRcdFx0XHR2b2lkIGljb25FbC5vZmZzZXRIZWlnaHQ7IC8vIEZvcmNlIHJlZmxvd1xyXG5cdFx0XHRcdGljb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWNvbicsICdzZWFyY2gtY2hlY2snKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQXBwcm9hY2ggMjogRm9yY2UgcmUtcmVuZGVyIG9mIHRoZSBlbnRpcmUgaGVhZGVyXHJcblx0XHRcdGNvbnN0IGhlYWRlckVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcudmlldy1oZWFkZXInKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0aWYgKGhlYWRlckVsKSB7XHJcblx0XHRcdFx0aGVhZGVyRWwuYWRkQ2xhc3MoJ3Nlby1oZWFkZXItaGlkZGVuJyk7XHJcblx0XHRcdFx0dm9pZCBoZWFkZXJFbC5vZmZzZXRIZWlnaHQ7IC8vIEZvcmNlIHJlZmxvd1xyXG5cdFx0XHRcdGhlYWRlckVsLnJlbW92ZUNsYXNzKCdzZW8taGVhZGVyLWhpZGRlbicpO1xyXG5cdFx0XHRcdGhlYWRlckVsLmFkZENsYXNzKCdzZW8taGVhZGVyLXZpc2libGUnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQXBwcm9hY2ggMzogVHJpZ2dlciBhIHdvcmtzcGFjZSByZWZyZXNoXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdsYXlvdXQtY2hhbmdlJyk7XHJcblx0XHR9LCA1MCk7IC8vIFJlZHVjZWQgdGltZW91dCBmb3IgZmFzdGVyIGNvcnJlY3Rpb25cclxuXHR9XHJcblxyXG5cdHVwZGF0ZUN1cnJlbnROb3RlUmVzdWx0cyhmaWxlOiBURmlsZSkge1xyXG5cdFx0aWYgKCFmaWxlIHx8ICFmaWxlLnBhdGguZW5kc1dpdGgoJy5tZCcpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHQvLyBDaGVjayBpZiB3ZSBoYXZlIGNhY2hlZCByZXN1bHRzIGZvciB0aGlzIGZpbGVcclxuXHRcdFx0bGV0IGN1cnJlbnRGaWxlUmVzdWx0czogU0VPUmVzdWx0cyB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMpIHtcclxuXHRcdFx0XHQvLyBGaW5kIHJlc3VsdHMgZm9yIHRoZSBjdXJyZW50IGZpbGUgaW4gdGhlIGdsb2JhbCByZXN1bHRzXHJcblx0XHRcdFx0Y3VycmVudEZpbGVSZXN1bHRzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cy5maW5kKFxyXG5cdFx0XHRcdFx0cmVzdWx0ID0+IHJlc3VsdC5maWxlID09PSBmaWxlLnBhdGhcclxuXHRcdFx0XHQpIHx8IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFVwZGF0ZSBjdXJyZW50Tm90ZVJlc3VsdHMgd2l0aCBjYWNoZWQgcmVzdWx0cyBpZiBhdmFpbGFibGVcclxuXHRcdFx0aWYgKGN1cnJlbnRGaWxlUmVzdWx0cykge1xyXG5cdFx0XHRcdHRoaXMuY3VycmVudE5vdGVSZXN1bHRzID0gY3VycmVudEZpbGVSZXN1bHRzO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIENsZWFyIGN1cnJlbnQgbm90ZSByZXN1bHRzIHdoZW4gc3dpdGNoaW5nIGZpbGVzIGlmIG5vIGNhY2hlZCByZXN1bHRzXHJcblx0XHRcdFx0dGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTaG93IHJlc3VsdHMgaWYgd2UgaGF2ZSB0aGVtIChlaXRoZXIgZnJvbSBjdXJyZW50IG5vdGUgYXVkaXQgb3IgZ2xvYmFsIGF1ZGl0KVxyXG5cdFx0XHRjb25zdCByZXN1bHRzVG9TaG93ID0gdGhpcy5jdXJyZW50Tm90ZVJlc3VsdHM7XHJcblx0XHRcdFxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2xlYXIgZXhpc3RpbmcgcmVzdWx0c1xyXG5cdFx0XHRjb25zdCBleGlzdGluZ1Jlc3VsdHMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZW8tcmVzdWx0cy1jb250YWluZXIsIC5zZW8tZmlsZS1pc3N1ZSwgLnNlby1pc3N1ZSwgLnNlby13YXJuaW5nLCAuc2VvLW5vdGljZSwgLnNlby1pbmZvLW5vdGUsIC5zZW8tY2hlY2ssIC5zZW8tcmVzdWx0LCAuc2VvLXNjb3JlLWhlYWRlciwgLnNlby1zY29yZS10ZXh0LCAuc2VvLXNjb3JlLW51bWJlciwgLnNlby10b2dnbGUtaWNvbiwgLnNlby1jb2xsYXBzZS1pY29uJyk7XHJcblx0XHRcdGV4aXN0aW5nUmVzdWx0cy5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZSgpKTtcclxuXHRcdFx0XHJcblx0XHRpZiAocmVzdWx0c1RvU2hvdykge1xyXG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgcmVzdWx0cyBjb250YWluZXIgYW5kIHJlbmRlciByZXN1bHRzXHJcblx0XHRcdGNvbnN0IG5ld1Jlc3VsdHNDb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1yZXN1bHRzLWNvbnRhaW5lcicgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBSZXVzZSB0aGUgZXhpc3RpbmcgcmVzdWx0cyBkaXNwbGF5IGluc3RhbmNlIG9yIGNyZWF0ZSBhIG5ldyBvbmVcclxuXHRcdFx0aWYgKCF0aGlzLnJlc3VsdHNEaXNwbGF5KSB7XHJcblx0XHRcdFx0dGhpcy5yZXN1bHRzRGlzcGxheSA9IG5ldyBSZXN1bHRzRGlzcGxheShcclxuXHRcdFx0XHRcdG5ld1Jlc3VsdHNDb250YWluZXIsXHJcblx0XHRcdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlKGZpbGVQYXRoKSxcclxuXHRcdFx0XHRcdGFzeW5jIChmaWxlUGF0aDogc3RyaW5nKSA9PiBhd2FpdCB0aGlzLmFjdGlvbnMub3BlbkZpbGVBbmRBdWRpdChmaWxlUGF0aClcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgY29udGFpbmVyIGZvciB0aGUgZXhpc3RpbmcgaW5zdGFuY2VcclxuXHRcdFx0XHR0aGlzLnJlc3VsdHNEaXNwbGF5LnVwZGF0ZUNvbnRhaW5lcihuZXdSZXN1bHRzQ29udGFpbmVyKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5yZXN1bHRzRGlzcGxheS5yZW5kZXJSZXN1bHRzKHJlc3VsdHNUb1Nob3cpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gUGFuZWwgaXMgcmVhZHkgZm9yIGludGVyYWN0aW9ucyB3aXRob3V0IHN0ZWFsaW5nIGZvY3VzXHJcblx0XHRcdFxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBObyByZXN1bHRzIGF2YWlsYWJsZSwgc2hvdyBtZXNzYWdlXHJcblx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIlNFT1wiIGlzIGEgcHJvcGVyIG5vdW4gKGFjcm9ueW0pIGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcclxuXHRcdFx0dGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBcclxuXHRcdFx0XHRjbHM6ICdzZW8taW5mby1ub3RlIHNlby1uby1yZXN1bHRzLW1lc3NhZ2UnLFxyXG5cdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHR0ZXh0OiAnTm8gU0VPIHJlc3VsdHMgYXZhaWxhYmxlIGZvciB0aGlzIGZpbGUuIENsaWNrIFwiUmVmcmVzaFwiIHRvIHJ1biBhbiBhdWRpdC4nXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVcGRhdGUgdGhlIGhlYWRlciB3aXRoIHRoZSBuZXcgZmlsZSBuYW1lIChwcmVzZXJ2ZXMgYnV0dG9uIGV2ZW50IGxpc3RlbmVycylcclxuXHRcdFx0dGhpcy51cGRhdGVIZWFkZXJBbmRSZXN1bHRzKCk7XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjdXJyZW50IG5vdGUgcmVzdWx0czonLCBlcnJvcik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGVzIG9ubHkgdGhlIGhlYWRlciBhbmQgcmVzdWx0cyBjb250ZW50IHdpdGhvdXQgcmUtcmVuZGVyaW5nIHRoZSBlbnRpcmUgcGFuZWxcclxuXHQgKiBUaGlzIHByZXNlcnZlcyBidXR0b24gZXZlbnQgbGlzdGVuZXJzIGFuZCBvdGhlciBVSSBzdGF0ZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgdXBkYXRlSGVhZGVyQW5kUmVzdWx0cygpIHtcclxuXHRcdC8vIFVwZGF0ZSB0aGUgaGVhZGVyIHdpdGggdGhlIGN1cnJlbnQgZmlsZSBuYW1lXHJcblx0XHRjb25zdCBoZWFkZXIgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJy5zZW8tcGFuZWwtaGVhZGVyJyk7XHJcblx0XHRpZiAoaGVhZGVyKSB7XHJcblx0XHRcdGNvbnN0IGZpbGVuYW1lRWwgPSBoZWFkZXIucXVlcnlTZWxlY3RvcignLnNlby1maWxlbmFtZScpO1xyXG5cdFx0XHRpZiAoZmlsZW5hbWVFbCkge1xyXG5cdFx0XHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0XHRcdGlmIChhY3RpdmVGaWxlICYmIGlzU3VwcG9ydGVkRmlsZShhY3RpdmVGaWxlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgY29ycmVjdCBkaXNwbGF5IG5hbWUgYmFzZWQgb24gdGhlIGN1cnJlbnQgYWN0aXZlIGZpbGVcclxuXHRcdFx0XHRcdGxldCBkaXNwbGF5TmFtZSA9IGFjdGl2ZUZpbGUucGF0aDtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBjdXJyZW50IG5vdGUgcmVzdWx0cyBmb3IgdGhpcyBzcGVjaWZpYyBmaWxlLCB1c2UgaXRzIGRpc3BsYXkgbmFtZVxyXG5cdFx0XHRcdFx0aWYgKHRoaXMuY3VycmVudE5vdGVSZXN1bHRzICYmIHRoaXMuY3VycmVudE5vdGVSZXN1bHRzLmZpbGUgPT09IGFjdGl2ZUZpbGUucGF0aCkge1xyXG5cdFx0XHRcdFx0XHRkaXNwbGF5TmFtZSA9IHRoaXMuY3VycmVudE5vdGVSZXN1bHRzLmRpc3BsYXlOYW1lIHx8IGFjdGl2ZUZpbGUucGF0aDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgZ2xvYmFsIHJlc3VsdHMgZm9yIHRoaXMgZmlsZSwgdXNlIGl0cyBkaXNwbGF5IG5hbWVcclxuXHRcdFx0XHRcdGVsc2UgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZ2xvYmFsUmVzdWx0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cy5maW5kKFxyXG5cdFx0XHRcdFx0XHRcdHJlc3VsdCA9PiByZXN1bHQuZmlsZSA9PT0gYWN0aXZlRmlsZS5wYXRoXHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdGlmIChnbG9iYWxSZXN1bHQpIHtcclxuXHRcdFx0XHRcdFx0XHRkaXNwbGF5TmFtZSA9IGdsb2JhbFJlc3VsdC5kaXNwbGF5TmFtZSB8fCBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0ZmlsZW5hbWVFbC50ZXh0Q29udGVudCA9IGBUYXJnZXQgbm90ZTogJHtkaXNwbGF5TmFtZX1gO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dXBkYXRlUmVzdWx0cyhyZXN1bHRzOiBTRU9SZXN1bHRzW10pIHtcclxuXHRcdHRoaXMuZ2xvYmFsUmVzdWx0cyA9IHJlc3VsdHM7XHJcblx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdH1cclxuXHJcblx0Ly8gU2hvdyBsb2FkaW5nIHN0YXRlIGZvciBsYXJnZSBzY2Fuc1xyXG5cdHNob3dMb2FkaW5nU3RhdGUoKSB7XHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHRcdGNvbnRhaW5lckVsLmFkZENsYXNzKCdzZW8tcGFuZWwnKTtcclxuXHJcblx0XHQvLyBIZWFkZXJcclxuXHRcdGNvbnN0IGhlYWRlciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1wYW5lbC1oZWFkZXInIH0pO1xyXG5cdFx0aGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy5wYW5lbFR5cGUgPT09ICdjdXJyZW50JyA/ICdTRU8gYXVkaXQ6IGN1cnJlbnQgbm90ZScgOiAnU0VPIGF1ZGl0OiB2YXVsdCcgfSk7XHJcblxyXG5cdFx0Ly8gU2hvdyB2YXVsdCBmb2xkZXJzIGluZm9ybWF0aW9uIGZvciBnbG9iYWwgcGFuZWxcclxuXHRcdGlmICh0aGlzLnBhbmVsVHlwZSA9PT0gJ2dsb2JhbCcpIHtcclxuXHRcdFx0Y29uc3QgZm9sZGVyc0luZm8gPSBnZXRWYXVsdEZvbGRlcnNJbmZvKHRoaXMucGx1Z2luLnNldHRpbmdzLnNjYW5EaXJlY3Rvcmllcyk7XHJcblx0XHRcdGNvbnN0IGZvbGRlcnNFbCA9IGhlYWRlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tZmlsZW5hbWUnIH0pO1xyXG5cdFx0XHRmb2xkZXJzRWwudGV4dENvbnRlbnQgPSBmb2xkZXJzSW5mbztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBMb2FkaW5nIHN0YXRlXHJcblx0XHRjb25zdCBsb2FkaW5nQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWxvYWRpbmctY29udGFpbmVyJyB9KTtcclxuXHRcdGNvbnN0IHNwaW5uZXJFbCA9IGxvYWRpbmdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWxvYWRpbmctc3Bpbm5lcicgfSk7XHJcblx0XHRzZXRJY29uKHNwaW5uZXJFbCwgJ2xvYWRlci1jaXJjbGUnKTtcclxuXHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIlNFT1wiIGlzIGEgcHJvcGVyIG5vdW4gKGFjcm9ueW0pIGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcclxuXHRcdGxvYWRpbmdDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyBcclxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHR0ZXh0OiAnUnVubmluZyBTRU8gYXVkaXQuLi4nLFxyXG5cdFx0XHRjbHM6ICdzZW8tbG9hZGluZy10aXRsZSdcclxuXHRcdH0pO1xyXG5cdFx0bG9hZGluZ0NvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXHJcblx0XHRcdHRleHQ6ICdUaGlzIG1heSB0YWtlIGEgbW9tZW50IGZvciBsYXJnZSB2YXVsdHMuIFBsZWFzZSB3YWl0Li4uJyxcclxuXHRcdFx0Y2xzOiAnc2VvLWxvYWRpbmctbWVzc2FnZSdcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly8gTWV0aG9kIHRvIHJlZnJlc2ggdGhlIHBhbmVsIHdoZW4gc2V0dGluZ3MgY2hhbmdlXHJcblx0cmVmcmVzaCgpIHtcclxuXHRcdHRoaXMucmVuZGVyKCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXIoKSB7XHJcblx0XHQvLyBVc2UgdGhlIG5ldyByZW5kZXJlciBmb3IgY2xlYW5lciBjb2RlIG9yZ2FuaXphdGlvblxyXG5cdFx0dGhpcy5yZW5kZXJlci5yZW5kZXIoXHJcblx0XHRcdHRoaXMuY29udGFpbmVyRWwsXHJcblx0XHRcdHRoaXMucGFuZWxUeXBlLFxyXG5cdFx0XHR0aGlzLmN1cnJlbnROb3RlUmVzdWx0cyxcclxuXHRcdFx0dGhpcy5nbG9iYWxSZXN1bHRzLFxyXG5cdFx0XHRhc3luYyAoYnRuOiBIVE1MQnV0dG9uRWxlbWVudCkgPT4gYXdhaXQgdGhpcy5oYW5kbGVSZWZyZXNoQ2xpY2soYnRuKSxcclxuXHRcdFx0YXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0aW9ucy5jaGVja0V4dGVybmFsTGlua3MoKTtcclxuXHRcdFx0XHRpZiAocmVzdWx0KSB7XHJcblx0XHRcdFx0XHR0aGlzLmN1cnJlbnROb3RlUmVzdWx0cyA9IHJlc3VsdDtcclxuXHRcdFx0XHRcdC8vIFVwZGF0ZSBnbG9iYWwgcmVzdWx0cyBpZiB0aGV5IGV4aXN0XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUdsb2JhbFJlc3VsdHNJZkV4aXN0cyhyZXN1bHQpO1xyXG5cdFx0XHRcdFx0dGhpcy5yZW5kZXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIGN1c3RvbSBldmVudHMgZnJvbSB0aGUgcmVuZGVyZXJcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignc2VvLXJlZnJlc2gtY29tcGxldGUnLCAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcblx0XHRcdGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyByZXN1bHRzOiBTRU9SZXN1bHRzW10gfT47XHJcblx0XHRcdHRoaXMuZ2xvYmFsUmVzdWx0cyA9IGN1c3RvbUV2ZW50LmRldGFpbC5yZXN1bHRzO1xyXG5cdFx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5jb250YWluZXJFbC5hZGRFdmVudExpc3RlbmVyKCdzZW8tc29ydC1jaGFuZ2UnLCAoZXZlbnQ6IEV2ZW50KSA9PiB7XHJcblx0XHRcdGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ8eyBzb3J0VHlwZTogU29ydFR5cGUgfT47XHJcblx0XHRcdHRoaXMuY3VycmVudFNvcnQgPSBjdXN0b21FdmVudC5kZXRhaWwuc29ydFR5cGU7XHJcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0ID0gY3VzdG9tRXZlbnQuZGV0YWlsLnNvcnRUeXBlO1xyXG5cdFx0XHR2b2lkIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBMZWdhY3kgcmVuZGVyIG1ldGhvZCAtIGtlcHQgYXMgZmFsbGJhY2sgZHVyaW5nIG1pZ3JhdGlvblxyXG5cdCAqIFRPRE86IFJlbW92ZSBvbmNlIFBhbmVsUmVuZGVyZXIgaXMgZnVsbHkgdGVzdGVkXHJcblx0ICovXHJcblx0cHJpdmF0ZSByZW5kZXJMZWdhY3koKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cdFx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0XHRjb250YWluZXJFbC5hZGRDbGFzcygnc2VvLXBhbmVsJyk7XHJcblxyXG5cdFx0XHQvLyBIZWFkZXIgd2l0aCBwcm9wZXIgc3BhY2luZ1xyXG5cdFx0XHRjb25zdCBoZWFkZXIgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tcGFuZWwtaGVhZGVyJyB9KTtcclxuXHRcdFx0aGVhZGVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogdGhpcy5wYW5lbFR5cGUgPT09ICdjdXJyZW50JyA/ICdTRU8gYXVkaXQ6IGN1cnJlbnQgbm90ZScgOiAnU0VPIGF1ZGl0OiB2YXVsdCcgfSk7XHJcblxyXG5cdFx0XHQvLyBTaG93IGN1cnJlbnQgbm90ZSBmaWxlIHBhdGggaWYgYXZhaWxhYmxlXHJcblx0XHRcdGlmICh0aGlzLnBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnKSB7XHJcblx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0aWYgKGFjdGl2ZUZpbGUgJiYgaXNTdXBwb3J0ZWRGaWxlKGFjdGl2ZUZpbGUsIHRoaXMucGx1Z2luLnNldHRpbmdzKSkge1xyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZW5hbWVFbCA9IGhlYWRlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tZmlsZW5hbWUnIH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGNvcnJlY3QgZGlzcGxheSBuYW1lIGJhc2VkIG9uIHRoZSBjdXJyZW50IGFjdGl2ZSBmaWxlXHJcblx0XHRcdFx0XHRsZXQgZGlzcGxheU5hbWUgPSBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgY3VycmVudCBub3RlIHJlc3VsdHMgZm9yIHRoaXMgc3BlY2lmaWMgZmlsZSwgdXNlIGl0cyBkaXNwbGF5IG5hbWVcclxuXHRcdFx0XHRcdGlmICh0aGlzLmN1cnJlbnROb3RlUmVzdWx0cyAmJiB0aGlzLmN1cnJlbnROb3RlUmVzdWx0cy5maWxlID09PSBhY3RpdmVGaWxlLnBhdGgpIHtcclxuXHRcdFx0XHRcdFx0ZGlzcGxheU5hbWUgPSB0aGlzLmN1cnJlbnROb3RlUmVzdWx0cy5kaXNwbGF5TmFtZSB8fCBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGdsb2JhbCByZXN1bHRzIGZvciB0aGlzIGZpbGUsIHVzZSBpdHMgZGlzcGxheSBuYW1lXHJcblx0XHRcdFx0XHRlbHNlIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzKSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGdsb2JhbFJlc3VsdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMuZmluZChcclxuXHRcdFx0XHRcdFx0XHRyZXN1bHQgPT4gcmVzdWx0LmZpbGUgPT09IGFjdGl2ZUZpbGUucGF0aFxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRpZiAoZ2xvYmFsUmVzdWx0KSB7XHJcblx0XHRcdFx0XHRcdFx0ZGlzcGxheU5hbWUgPSBnbG9iYWxSZXN1bHQuZGlzcGxheU5hbWUgfHwgYWN0aXZlRmlsZS5wYXRoO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdGZpbGVuYW1lRWwudGV4dENvbnRlbnQgPSBgVGFyZ2V0IG5vdGU6ICR7ZGlzcGxheU5hbWV9YDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gU2hvdyB2YXVsdCBmb2xkZXJzIGluZm9ybWF0aW9uIGZvciBnbG9iYWwgcGFuZWxcclxuXHRcdFx0XHRjb25zdCBmaWxlQ291bnQgPSB0aGlzLmdsb2JhbFJlc3VsdHMubGVuZ3RoO1xyXG5cdFx0XHRcdGNvbnN0IGZvbGRlcnNJbmZvID0gZ2V0VmF1bHRGb2xkZXJzSW5mbyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2FuRGlyZWN0b3JpZXMsIGZpbGVDb3VudCk7XHJcblx0XHRcdFx0Y29uc3QgZm9sZGVyc0VsID0gaGVhZGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1maWxlbmFtZScgfSk7XHJcblx0XHRcdFx0Zm9sZGVyc0VsLnRleHRDb250ZW50ID0gZm9sZGVyc0luZm87XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEFjdGlvbiBidXR0b24gYXQgdGhlIHRvcFxyXG5cdFx0XHRpZiAodGhpcy5wYW5lbFR5cGUgPT09ICdjdXJyZW50Jykge1xyXG5cdFx0XHRcdGNvbnN0IGF1ZGl0Q3VycmVudEJ0biA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG5cdFx0XHRcdFx0dGV4dDogJ1JlZnJlc2gnLFxyXG5cdFx0XHRcdFx0Y2xzOiAnbW9kLWN0YSBzZW8tYnRuIHNlby10b3AtYnRuJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFVzZSBvbmx5IGNsaWNrIGV2ZW50IHRvIGF2b2lkIGRvdWJsZSBleGVjdXRpb25cclxuXHRcdFx0XHRhdWRpdEN1cnJlbnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5oYW5kbGVSZWZyZXNoQ2xpY2soYXVkaXRDdXJyZW50QnRuKTtcclxuXHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdC8vIEV4dGVybmFsIGxpbmtzIGJ1dHRvbiAob25seSBzaG93IGlmIGVuYWJsZWQgaW4gc2V0dGluZ3MgYW5kIHZhdWx0LXdpZGUgaXMgZGlzYWJsZWQpXHJcblx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua0J1dHRvbiAmJiAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rVmF1bHRDaGVjaykge1xyXG5cdFx0XHRcdFx0Y29uc3QgZXh0ZXJuYWxMaW5rc0J0biA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxyXG5cdFx0XHRcdFx0XHR0ZXh0OiAnQ2hlY2sgZXh0ZXJuYWwgbGlua3MgZm9yIDQwNHMnLFxyXG5cdFx0XHRcdFx0XHRjbHM6ICdzZW8tYnRuJ1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRleHRlcm5hbExpbmtzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi50ZXh0Q29udGVudCA9ICdUaGlzIG1heSB0YWtlIHNvbWUgdGltZS4uLic7XHJcblx0XHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5hZGRDbGFzcygnc2VvLWJ0bi1kaXNhYmxlZCcpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmFjdGlvbnMuY2hlY2tFeHRlcm5hbExpbmtzKCk7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAocmVzdWx0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuY3VycmVudE5vdGVSZXN1bHRzID0gcmVzdWx0O1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBVcGRhdGUgZ2xvYmFsIHJlc3VsdHMgaWYgdGhleSBleGlzdFxyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnVwZGF0ZUdsb2JhbFJlc3VsdHNJZkV4aXN0cyhyZXN1bHQpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0gZmluYWxseSB7XHJcblx0XHRcdFx0XHRcdFx0XHRleHRlcm5hbExpbmtzQnRuLmRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0XHRleHRlcm5hbExpbmtzQnRuLnRleHRDb250ZW50ID0gJ0NoZWNrIGV4dGVybmFsIGxpbmtzIGZvciA0MDRzJztcclxuXHRcdFx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4ucmVtb3ZlQ2xhc3MoJ3Nlby1idG4tZGlzYWJsZWQnKTtcclxuXHRcdFx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4uYWRkQ2xhc3MoJ3Nlby1idG4tZW5hYmxlZCcpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ29udGVudCBiYXNlZCBvbiBwYW5lbCB0eXBlXHJcblx0XHRcdGlmICh0aGlzLnBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnKSB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgd2UgaGF2ZSByZXN1bHRzIGZvciB0aGUgY3VycmVudCBmaWxlIGZyb20gZ2xvYmFsIGF1ZGl0XHJcblx0XHRcdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcblx0XHRcdFx0bGV0IGN1cnJlbnRGaWxlUmVzdWx0czogU0VPUmVzdWx0cyB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChhY3RpdmVGaWxlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMpIHtcclxuXHRcdFx0XHRcdC8vIEZpbmQgcmVzdWx0cyBmb3IgdGhlIGN1cnJlbnQgZmlsZSBpbiB0aGUgZ2xvYmFsIHJlc3VsdHNcclxuXHRcdFx0XHRcdGN1cnJlbnRGaWxlUmVzdWx0cyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMuZmluZChcclxuXHRcdFx0XHRcdFx0cmVzdWx0ID0+IHJlc3VsdC5maWxlID09PSBhY3RpdmVGaWxlLnBhdGhcclxuXHRcdFx0XHRcdCkgfHwgbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gU2hvdyByZXN1bHRzIGlmIHdlIGhhdmUgdGhlbSAoZWl0aGVyIGZyb20gY3VycmVudCBub3RlIGF1ZGl0IG9yIGdsb2JhbCBhdWRpdClcclxuXHRcdFx0XHRjb25zdCByZXN1bHRzVG9TaG93ID0gdGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMgfHwgY3VycmVudEZpbGVSZXN1bHRzO1xyXG5cdFx0XHRcdGlmIChyZXN1bHRzVG9TaG93KSB7XHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgYSBuZXcgcmVzdWx0cyBjb250YWluZXIgYW5kIHJlbmRlciByZXN1bHRzXHJcblx0XHRcdFx0XHRjb25zdCBuZXdSZXN1bHRzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tcmVzdWx0cy1jb250YWluZXInIH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgYSBuZXcgcmVzdWx0cyBkaXNwbGF5IGluc3RhbmNlIGZvciB0aGlzIGNvbnRhaW5lclxyXG5cdFx0XHRcdFx0Y29uc3QgdGVtcFJlc3VsdHNEaXNwbGF5ID0gbmV3IFJlc3VsdHNEaXNwbGF5KFxyXG5cdFx0XHRcdFx0XHRuZXdSZXN1bHRzQ29udGFpbmVyLFxyXG5cdFx0XHRcdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlKGZpbGVQYXRoKSxcclxuXHRcdFx0XHRcdFx0YXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpID0+IGF3YWl0IHRoaXMuYWN0aW9ucy5vcGVuRmlsZUFuZEF1ZGl0KGZpbGVQYXRoKVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdHRlbXBSZXN1bHRzRGlzcGxheS5yZW5kZXJSZXN1bHRzKHJlc3VsdHNUb1Nob3cpO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNvbnN0IG5vUmVzdWx0cyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1uby1yZXN1bHRzJyB9KTtcclxuXHRcdFx0XHRcdGNvbnN0IGZpbGVUeXBlVGV4dCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZU1EWFN1cHBvcnQgPyAnbWFya2Rvd24gb3IgTURYIGZpbGUnIDogJ21hcmtkb3duIGZpbGUnO1xyXG5cdFx0XHRcdFx0bm9SZXN1bHRzLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgT3BlbiBhICR7ZmlsZVR5cGVUZXh0fSBhbmQgY2xpY2sgXCJSZWZyZXNoXCIgdG8gYXVkaXQgaXQuYCB9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuZ2xvYmFsUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJlbmRlckdsb2JhbFJlc3VsdHMoY29udGFpbmVyRWwpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjb25zdCBub0dsb2JhbCA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1uby1yZXN1bHRzJyB9KTtcclxuXHRcdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBDb250YWlucyBxdW90ZWQgdGV4dCB3aGljaCBpcyBhbHJlYWR5IGluIHNlbnRlbmNlIGNhc2VcclxuXHRcdFx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0XHRcdG5vR2xvYmFsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnQ2xpY2sgXCJBdWRpdCBhbGwgbm90ZXNcIiB0byBhdWRpdCB5b3VyIGZpbGVzIGluIHlvdXIgY29uZmlndXJlZCBkaXJlY3Rvcmllcy4nIH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbmRlcmluZyBTRU8gcGFuZWw6JywgZXJyb3IpO1xyXG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJTRU9cIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXHJcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0dGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnRXJyb3IgbG9hZGluZyBTRU8gcGFuZWwuIFBsZWFzZSB0cnkgYWdhaW4uJyB9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgc2hvdWxkSW5jbHVkZUZpbGVJbkdsb2JhbFJlc3VsdHMoZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgZmlsZSBzaG91bGQgYmUgZXhjbHVkZWQgYmFzZWQgb24gdW5kZXJzY29yZSBwcmVmaXggc2V0dGluZ1xyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmlnbm9yZVVuZGVyc2NvcmVGaWxlcykge1xyXG5cdFx0XHRjb25zdCBmaWxlTmFtZSA9IGZpbGVQYXRoLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdGNvbnN0IGJhc2VuYW1lID0gZmlsZU5hbWUucmVwbGFjZSgvXFwuW14vLl0rJC8sICcnKTsgLy8gUmVtb3ZlIGV4dGVuc2lvblxyXG5cdFx0XHRpZiAoYmFzZW5hbWUuc3RhcnRzV2l0aCgnXycpKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlOyAvLyBFeGNsdWRlIGZpbGVzIHdpdGggdW5kZXJzY29yZSBwcmVmaXhcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBpZiBmaWxlIHNob3VsZCBiZSBleGNsdWRlZCBiYXNlZCBvbiBkaXJlY3Rvcnkgc2V0dGluZ3NcclxuXHRcdGNvbnN0IHsgc2NhbkRpcmVjdG9yaWVzIH0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGlmIChzY2FuRGlyZWN0b3JpZXMudHJpbSgpKSB7XHJcblx0XHRcdGNvbnN0IGRpcmVjdG9yaWVzID0gc2NhbkRpcmVjdG9yaWVzLnNwbGl0KCcsJykubWFwKGRpciA9PiBkaXIudHJpbSgpKTtcclxuXHRcdFx0Y29uc3QgaXNJbkNvbmZpZ3VyZWREaXJlY3RvcnkgPSBkaXJlY3Rvcmllcy5zb21lKGRpciA9PiBcclxuXHRcdFx0XHRmaWxlUGF0aC5zdGFydHNXaXRoKGRpciArICcvJykgfHwgZmlsZVBhdGggPT09IGRpclxyXG5cdFx0XHQpO1xyXG5cdFx0XHRyZXR1cm4gaXNJbkNvbmZpZ3VyZWREaXJlY3Rvcnk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0cnVlOyAvLyBJbmNsdWRlIGZpbGUgaWYgbm8gcmVzdHJpY3Rpb25zIGFwcGx5XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZUdsb2JhbFJlc3VsdHNJZkV4aXN0cyhjdXJyZW50UmVzdWx0OiBTRU9SZXN1bHRzKTogdm9pZCB7XHJcblx0XHQvLyBPbmx5IHVwZGF0ZSBpZiBnbG9iYWwgcmVzdWx0cyBleGlzdFxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdC8vIENoZWNrIGlmIHRoaXMgZmlsZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gZ2xvYmFsIHJlc3VsdHNcclxuXHRcdFx0aWYgKCF0aGlzLnNob3VsZEluY2x1ZGVGaWxlSW5HbG9iYWxSZXN1bHRzKGN1cnJlbnRSZXN1bHQuZmlsZSkpIHtcclxuXHRcdFx0XHRyZXR1cm47IC8vIERvbid0IHVwZGF0ZSBnbG9iYWwgcmVzdWx0cyBmb3IgZmlsZXMgdGhhdCBzaG91bGQgYmUgZXhjbHVkZWRcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRmluZCB0aGUgZmlsZSBpbiBnbG9iYWwgcmVzdWx0cyBhbmQgdXBkYXRlIGl0XHJcblx0XHRcdGNvbnN0IGdsb2JhbFJlc3VsdHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzO1xyXG5cdFx0XHRjb25zdCBleGlzdGluZ0luZGV4ID0gZ2xvYmFsUmVzdWx0cy5maW5kSW5kZXgociA9PiByLmZpbGUgPT09IGN1cnJlbnRSZXN1bHQuZmlsZSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoZXhpc3RpbmdJbmRleCAhPT0gLTEpIHtcclxuXHRcdFx0XHQvLyBVcGRhdGUgZXhpc3RpbmcgcmVzdWx0XHJcblx0XHRcdFx0Z2xvYmFsUmVzdWx0c1tleGlzdGluZ0luZGV4XSA9IGN1cnJlbnRSZXN1bHQ7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gQWRkIG5ldyByZXN1bHQgaWYgbm90IGZvdW5kIChzaG91bGRuJ3QgaGFwcGVuIG5vcm1hbGx5KVxyXG5cdFx0XHRcdGdsb2JhbFJlc3VsdHMucHVzaChjdXJyZW50UmVzdWx0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gU2F2ZSB1cGRhdGVkIHJlc3VsdHNcclxuXHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFVwZGF0ZSBnbG9iYWwgcGFuZWwgaWYgaXQncyBvcGVuXHJcblx0XHRcdHRoaXMudXBkYXRlR2xvYmFsUGFuZWxJZk9wZW4oKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlRGlzcGxheU5hbWUoKTogdm9pZCB7XHJcblx0XHQvLyBVcGRhdGUgZGlzcGxheSBuYW1lIGFuZCByZXN1bHRzIGZvciB0aGUgbmV3IGZpbGVcclxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0aWYgKGFjdGl2ZUZpbGUgJiYgaXNTdXBwb3J0ZWRGaWxlKGFjdGl2ZUZpbGUsIHRoaXMucGx1Z2luLnNldHRpbmdzKSkge1xyXG5cdFx0XHQvLyBVcGRhdGUgdGhlIGRpc3BsYXkgbmFtZVxyXG5cdFx0XHRjb25zdCBmaWxlbmFtZUVsID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcuc2VvLWZpbGVuYW1lJyk7XHJcblx0XHRcdGlmIChmaWxlbmFtZUVsKSB7XHJcblx0XHRcdFx0Ly8gR2V0IHRoZSBjb3JyZWN0IGRpc3BsYXkgbmFtZSBiYXNlZCBvbiB0aGUgY3VycmVudCBhY3RpdmUgZmlsZVxyXG5cdFx0XHRcdGxldCBkaXNwbGF5TmFtZSA9IGFjdGl2ZUZpbGUucGF0aDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGN1cnJlbnQgbm90ZSByZXN1bHRzIGZvciB0aGlzIHNwZWNpZmljIGZpbGUsIHVzZSBpdHMgZGlzcGxheSBuYW1lXHJcblx0XHRcdFx0aWYgKHRoaXMuY3VycmVudE5vdGVSZXN1bHRzICYmIHRoaXMuY3VycmVudE5vdGVSZXN1bHRzLmZpbGUgPT09IGFjdGl2ZUZpbGUucGF0aCkge1xyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWUgPSB0aGlzLmN1cnJlbnROb3RlUmVzdWx0cy5kaXNwbGF5TmFtZSB8fCBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZ2xvYmFsIHJlc3VsdHMgZm9yIHRoaXMgZmlsZSwgdXNlIGl0cyBkaXNwbGF5IG5hbWVcclxuXHRcdFx0XHRlbHNlIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzKSB7XHJcblx0XHRcdFx0XHRjb25zdCBnbG9iYWxSZXN1bHQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzLmZpbmQoXHJcblx0XHRcdFx0XHRcdHJlc3VsdCA9PiByZXN1bHQuZmlsZSA9PT0gYWN0aXZlRmlsZS5wYXRoXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0aWYgKGdsb2JhbFJlc3VsdCkge1xyXG5cdFx0XHRcdFx0XHRkaXNwbGF5TmFtZSA9IGdsb2JhbFJlc3VsdC5kaXNwbGF5TmFtZSB8fCBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGZpbGVuYW1lRWwudGV4dENvbnRlbnQgPSBgVGFyZ2V0IG5vdGU6ICR7ZGlzcGxheU5hbWV9YDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVXBkYXRlIHRoZSByZXN1bHRzIGRpc3BsYXlcclxuXHRcdFx0dGhpcy51cGRhdGVSZXN1bHRzRm9yQ3VycmVudEZpbGUoKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgdXBkYXRlUmVzdWx0c0ZvckN1cnJlbnRGaWxlKCk6IHZvaWQge1xyXG5cdFx0Ly8gQ2hlY2sgaWYgd2UgaGF2ZSByZXN1bHRzIGZvciB0aGUgY3VycmVudCBmaWxlIGZyb20gZ2xvYmFsIGF1ZGl0XHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGxldCBjdXJyZW50RmlsZVJlc3VsdHM6IFNFT1Jlc3VsdHMgfCBudWxsID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0aWYgKGFjdGl2ZUZpbGUgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cykge1xyXG5cdFx0XHQvLyBGaW5kIHJlc3VsdHMgZm9yIHRoZSBjdXJyZW50IGZpbGUgaW4gdGhlIGdsb2JhbCByZXN1bHRzXHJcblx0XHRcdGN1cnJlbnRGaWxlUmVzdWx0cyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMuZmluZChcclxuXHRcdFx0XHRyZXN1bHQgPT4gcmVzdWx0LmZpbGUgPT09IGFjdGl2ZUZpbGUucGF0aFxyXG5cdFx0XHQpIHx8IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFNob3cgcmVzdWx0cyBpZiB3ZSBoYXZlIHRoZW0gKGVpdGhlciBmcm9tIGN1cnJlbnQgbm90ZSBhdWRpdCBvciBnbG9iYWwgYXVkaXQpXHJcblx0XHRjb25zdCByZXN1bHRzVG9TaG93ID0gdGhpcy5jdXJyZW50Tm90ZVJlc3VsdHMgfHwgY3VycmVudEZpbGVSZXN1bHRzO1xyXG5cdFx0XHJcblx0XHQvLyBDbGVhciBleGlzdGluZyByZXN1bHRzXHJcblx0XHRjb25zdCBleGlzdGluZ1Jlc3VsdHMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZW8tcmVzdWx0cy1jb250YWluZXIsIC5zZW8tZmlsZS1pc3N1ZSwgLnNlby1pc3N1ZSwgLnNlby13YXJuaW5nLCAuc2VvLW5vdGljZSwgLnNlby1pbmZvLW5vdGUsIC5zZW8tY2hlY2ssIC5zZW8tcmVzdWx0LCAuc2VvLXNjb3JlLWhlYWRlciwgLnNlby1zY29yZS10ZXh0LCAuc2VvLXNjb3JlLW51bWJlciwgLnNlby10b2dnbGUtaWNvbiwgLnNlby1jb2xsYXBzZS1pY29uJyk7XHJcblx0XHRleGlzdGluZ1Jlc3VsdHMuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XHJcblx0XHRcclxuXHRcdGlmIChyZXN1bHRzVG9TaG93KSB7XHJcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyByZXN1bHRzIGNvbnRhaW5lciBhbmQgcmVuZGVyIHJlc3VsdHNcclxuXHRcdFx0Y29uc3QgbmV3UmVzdWx0c0NvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXJlc3VsdHMtY29udGFpbmVyJyB9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyByZXN1bHRzIGRpc3BsYXkgaW5zdGFuY2UgZm9yIHRoaXMgY29udGFpbmVyXHJcblx0XHRcdGNvbnN0IHRlbXBSZXN1bHRzRGlzcGxheSA9IG5ldyBSZXN1bHRzRGlzcGxheShcclxuXHRcdFx0XHRuZXdSZXN1bHRzQ29udGFpbmVyLFxyXG5cdFx0XHRcdGFzeW5jIChmaWxlUGF0aDogc3RyaW5nKSA9PiBhd2FpdCB0aGlzLmFjdGlvbnMub3BlbkZpbGUoZmlsZVBhdGgpLFxyXG5cdFx0XHRcdGFzeW5jIChmaWxlUGF0aDogc3RyaW5nKSA9PiBhd2FpdCB0aGlzLmFjdGlvbnMub3BlbkZpbGVBbmRBdWRpdChmaWxlUGF0aClcclxuXHRcdFx0KTtcclxuXHRcdFx0dGVtcFJlc3VsdHNEaXNwbGF5LnJlbmRlclJlc3VsdHMocmVzdWx0c1RvU2hvdyk7XHJcblx0XHRcdFxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gTm8gcmVzdWx0cyBhdmFpbGFibGUsIHNob3cgcHJvbXB0XHJcblx0XHRcdGNvbnN0IG5vUmVzdWx0cyA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLW5vLXJlc3VsdHMnIH0pO1xyXG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogQ29udGFpbnMgcXVvdGVkIHRleHQgd2hpY2ggaXMgYWxyZWFkeSBpbiBzZW50ZW5jZSBjYXNlXHJcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2VcclxuXHRcdFx0bm9SZXN1bHRzLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnT3BlbiBhIG1hcmtkb3duIGZpbGUgYW5kIGNsaWNrIFwiUmVmcmVzaFwiIHRvIGF1ZGl0IGl0LicgfSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIHVwZGF0ZUdsb2JhbFBhbmVsSWZPcGVuKCk6IHZvaWQge1xyXG5cdFx0Ly8gRmluZCBhbmQgdXBkYXRlIHRoZSBnbG9iYWwgcGFuZWwgaWYgaXQncyBvcGVuXHJcblx0XHRjb25zdCBnbG9iYWxQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tZ2xvYmFsLXBhbmVsJyk7XHJcblx0XHRcclxuXHRcdGlmIChnbG9iYWxQYW5lbHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRjb25zdCBnbG9iYWxQYW5lbCA9IGdsb2JhbFBhbmVsc1swXTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChnbG9iYWxQYW5lbD8udmlldyAmJiBnbG9iYWxQYW5lbC52aWV3IGluc3RhbmNlb2YgU0VPU2lkZVBhbmVsKSB7XHJcblx0XHRcdFx0Y29uc3Qgc2VvUGFuZWwgPSBnbG9iYWxQYW5lbC52aWV3O1xyXG5cdFx0XHRcdC8vIFVwZGF0ZSB0aGUgZ2xvYmFsIHJlc3VsdHMgaW4gdGhlIHBhbmVsXHJcblx0XHRcdFx0c2VvUGFuZWwuZ2xvYmFsUmVzdWx0cyA9IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzXTtcclxuXHRcdFx0XHQvLyBSZS1yZW5kZXIgdGhlIHBhbmVsXHJcblx0XHRcdFx0c2VvUGFuZWwucmVuZGVyKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaXZhdGUgcmVuZGVyR2xvYmFsUmVzdWx0cyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcblx0XHQvLyBSZW5kZXIgc3VtbWFyeSBzdGF0c1xyXG5cdFx0dGhpcy5yZXN1bHRzRGlzcGxheS5yZW5kZXJHbG9iYWxSZXN1bHRzKHRoaXMuZ2xvYmFsUmVzdWx0cywgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cclxuXHRcdC8vIEFkZCByZWZyZXNoIGJ1dHRvbiBiZWxvdyBzdGF0c1xyXG5cdFx0Y29uc3QgcmVmcmVzaEJ0biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcclxuXHRcdFx0dGV4dDogJ1JlZnJlc2gnLFxyXG5cdFx0XHRjbHM6ICdtb2QtY3RhIHNlby1idG4gc2VvLXJlZnJlc2gtYnRuJyxcclxuXHRcdFx0YXR0cjogeyAnZGF0YS1yZWZyZXNoLWJ0bic6ICd0cnVlJyB9XHJcblx0XHR9KTtcclxuXHRcdHJlZnJlc2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRyZWZyZXNoQnRuLnRleHRDb250ZW50ID0gJ1JlZnJlc2hpbmcuLi4nO1xyXG5cdFx0XHRcdHJlZnJlc2hCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5hY3Rpb25zLnJlZnJlc2hHbG9iYWxSZXN1bHRzKCk7XHJcblx0XHRcdFx0XHRpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZ2xvYmFsUmVzdWx0cyA9IHJlc3VsdHM7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVuZGVyKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBmaW5hbGx5IHtcclxuXHRcdFx0XHRcdHJlZnJlc2hCdG4udGV4dENvbnRlbnQgPSAnUmVmcmVzaCc7XHJcblx0XHRcdFx0XHRyZWZyZXNoQnRuLmRpc2FibGVkID0gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gUmVuZGVyIGlzc3VlcyBsaXN0IHdpdGggc29ydGluZ1xyXG5cdFx0dGhpcy5yZXN1bHRzRGlzcGxheS5yZW5kZXJJc3N1ZXNMaXN0KFxyXG5cdFx0XHR0aGlzLmdsb2JhbFJlc3VsdHMsXHJcblx0XHRcdHRoaXMuY3VycmVudFNvcnQsXHJcblx0XHRcdChzb3J0VHlwZTogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5jdXJyZW50U29ydCA9IHNvcnRUeXBlIGFzIFNvcnRUeXBlO1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0ID0gc29ydFR5cGUgYXMgU29ydFR5cGU7XHJcblx0XHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgbm90aWNlcyBzaG91bGQgYmUgc2hvd25cclxuXHRcdFx0XHRjb25zdCBzaG93Tm90aWNlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rcyAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuRW1iZWRzO1xyXG5cdFx0XHRcdGNvbnN0IGlzc3Vlc0ZpbGVzID0gdGhpcy5nbG9iYWxSZXN1bHRzLmZpbHRlcihyID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IGhhc0lzc3VlcyA9IHIuaXNzdWVzQ291bnQgPiAwO1xyXG5cdFx0XHRcdFx0Y29uc3QgaGFzV2FybmluZ3MgPSByLndhcm5pbmdzQ291bnQgPiAwO1xyXG5cdFx0XHRcdFx0Y29uc3QgaGFzTm90aWNlcyA9IHNob3dOb3RpY2VzICYmIHIubm90aWNlc0NvdW50ID4gMDtcclxuXHRcdFx0XHRcdHJldHVybiBoYXNJc3N1ZXMgfHwgaGFzV2FybmluZ3MgfHwgaGFzTm90aWNlcztcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHR0aGlzLmFjdGlvbnMuc2hvd1NvcnRNZW51KGV2ZW50LCBpc3N1ZXNGaWxlcywgY29udGFpbmVyLCB0aGlzLmN1cnJlbnRTb3J0LCAoc29ydFR5cGU6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5jdXJyZW50U29ydCA9IHNvcnRUeXBlIGFzIFNvcnRUeXBlO1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFNvcnQgPSBzb3J0VHlwZSBhcyBTb3J0VHlwZTtcclxuXHRcdFx0XHRcdHZvaWQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xyXG5cdFx0KTtcclxuXHR9XHJcbn1cclxuIiwgImV4cG9ydCBjb25zdCBTRU9QYW5lbFZpZXdUeXBlID0gXCJzZW8tcGFuZWxcIjtcclxuZXhwb3J0IGNvbnN0IFNFT0N1cnJlbnRQYW5lbFZpZXdUeXBlID0gXCJzZW8tY3VycmVudC1wYW5lbFwiO1xyXG5leHBvcnQgY29uc3QgU0VPR2xvYmFsUGFuZWxWaWV3VHlwZSA9IFwic2VvLWdsb2JhbC1wYW5lbFwiO1xyXG4iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIHNldEljb24sIE1lbnUsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBTRU9SZXN1bHRzIH0gZnJvbSBcIi4uL3R5cGVzXCI7XG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xuaW1wb3J0IHsgc29ydEZpbGVzIH0gZnJvbSBcIi4vcGFuZWwtdXRpbHNcIjtcbmltcG9ydCB7IFNFT1NpZGVQYW5lbCB9IGZyb20gXCIuL3NpZGUtcGFuZWxcIjtcbmltcG9ydCB7IGlzU3VwcG9ydGVkRmlsZSB9IGZyb20gXCIuLi91dGlscy9maWxlLXV0aWxzXCI7XG5cbmltcG9ydCBTRU9QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcblxuZXhwb3J0IGNsYXNzIFBhbmVsQWN0aW9ucyB7XG5cdGNvbnN0cnVjdG9yKFxuXHRcdHByaXZhdGUgYXBwOiBBcHAsXG5cdFx0cHJpdmF0ZSBwbHVnaW46IFNFT1BsdWdpbixcblx0XHRwcml2YXRlIHBhbmVsVHlwZTogJ2N1cnJlbnQnIHwgJ2dsb2JhbCdcblx0KSB7fVxuXG5cdGFzeW5jIHJ1bkluaXRpYWxTY2FuKCk6IFByb21pc2U8U0VPUmVzdWx0c1tdPiB7XG5cdFx0dHJ5IHtcblx0XHRcdC8vIEdldCBmaWxlcyB0byBjaGVja1xuXHRcdFx0Y29uc3QgZmlsZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5nZXRGaWxlc1RvQ2hlY2soKTtcblx0XHRcdGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHQvLyBTaG93IG5vdGlmaWNhdGlvbiBmb3IgbGFyZ2Ugc2NhbnNcblx0XHRcdGlmIChmaWxlcy5sZW5ndGggPiAyMCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBSdW5uaW5nIFNFTyBhdWRpdCBvbiAke2ZpbGVzLmxlbmd0aH0gZmlsZXMuLi4gVGhpcyBtYXkgdGFrZSBhIG1vbWVudC5gKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gSW1wb3J0IGFuZCBydW4gU0VPIGNoZWNrIGRpcmVjdGx5XG5cdFx0XHRjb25zdCB7IHJ1blNFT0NoZWNrIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9zZW8tY2hlY2tlclwiKTtcblx0XHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBydW5TRU9DaGVjayh0aGlzLnBsdWdpbiwgZmlsZXMpO1xuXHRcdFx0XG5cdFx0XHQvLyBTYXZlIHJlc3VsdHMgdG8gc2V0dGluZ3MgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMgPSByZXN1bHRzO1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdFNjYW5UaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcblx0XHRcdG5ldyBOb3RpY2UoYFNFTyBhdWRpdCBjb21wbGV0ZSB3aXRoICR7cmVzdWx0cy5sZW5ndGh9IGZpbGVzLmApO1xuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJ1bm5pbmcgaW5pdGlhbCBzY2FuOicsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoJ0Vycm9yIGFuYWx5emluZyBmaWxlcy4gQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlscy4nKTtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBjaGVja0N1cnJlbnROb3RlKGFib3J0U2lnbmFsPzogQWJvcnRTaWduYWwpOiBQcm9taXNlPFNFT1Jlc3VsdHMgfCBudWxsPiB7XG5cdFx0Y29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0aWYgKCFhY3RpdmVGaWxlIHx8ICFpc1N1cHBvcnRlZEZpbGUoYWN0aXZlRmlsZSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogVGV4dCBpcyBhbHJlYWR5IGluIHNlbnRlbmNlIGNhc2Vcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdG5ldyBOb3RpY2UoJ1BsZWFzZSBvcGVuIGEgbWFya2Rvd24gb3IgTURYIGZpbGUgZmlyc3QuJyk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Ly8gQ2xlYXIgY2FjaGUgZmlyc3QgdG8gZW5zdXJlIGZyZXNoIHJlc3VsdHNcblx0XHRcdGNvbnN0IHsgY2xlYXJDYWNoZUZvckZpbGUgfSA9IGF3YWl0IGltcG9ydChcIi4uL3Nlby1jaGVja2VyXCIpO1xuXHRcdFx0Y2xlYXJDYWNoZUZvckZpbGUoYWN0aXZlRmlsZS5wYXRoKTtcblx0XHRcdFxuXHRcdFx0Ly8gSW1wb3J0IGFuZCBydW4gU0VPIGNoZWNrIGRpcmVjdGx5XG5cdFx0XHRjb25zdCB7IHJ1blNFT0NoZWNrIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9zZW8tY2hlY2tlclwiKTtcblx0XHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBydW5TRU9DaGVjayh0aGlzLnBsdWdpbiwgW2FjdGl2ZUZpbGVdLCBhYm9ydFNpZ25hbCA/IHsgc2lnbmFsOiBhYm9ydFNpZ25hbCB9IGFzIEFib3J0Q29udHJvbGxlciA6IHVuZGVmaW5lZCk7XG5cdFx0XHRcblx0XHRpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJTRU9cIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXG5cdFx0XHRuZXcgTm90aWNlKCdTRU8gYXVkaXQgY29tcGxldGUuJyk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0c1swXSB8fCBudWxsO1xuXHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCJTRU9cIiBpcyBhIHByb3BlciBub3VuIChhY3JvbnltKSBhbmQgc2hvdWxkIGJlIGNhcGl0YWxpemVkXG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXG5cdFx0XHRuZXcgTm90aWNlKCdTRU8gYXVkaXQgY2FuY2VsbGVkLicpO1xuXHRcdFx0dGhyb3cgZXJyb3I7IC8vIFJlLXRocm93IGFib3J0IGVycm9yc1xuXHRcdH1cblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGN1cnJlbnQgbm90ZTonLCBlcnJvcik7XG5cdFx0XHRuZXcgTm90aWNlKCdFcnJvciBhbmFseXppbmcgY3VycmVudCBub3RlLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgY2hlY2tFeHRlcm5hbExpbmtzKCk6IFByb21pc2U8U0VPUmVzdWx0cyB8IG51bGw+IHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoIWFjdGl2ZUZpbGUgfHwgIWlzU3VwcG9ydGVkRmlsZShhY3RpdmVGaWxlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncykpIHtcblx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBUZXh0IGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZVxuXHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0bmV3IE5vdGljZSgnUGxlYXNlIG9wZW4gYSBtYXJrZG93biBvciBNRFggZmlsZSBmaXJzdC4nKTtcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdHRyeSB7XG5cdFx0XHQvLyBUZW1wb3JhcmlseSBlbmFibGUgZXh0ZXJuYWwgYnJva2VuIGxpbmtzIGNoZWNraW5nIGFuZCBkaXNhYmxlIGV4dGVybmFsIGxpbmtzXG5cdFx0XHRjb25zdCBvcmlnaW5hbFZhdWx0U2V0dGluZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2s7XG5cdFx0XHRjb25zdCBvcmlnaW5hbEV4dGVybmFsU2V0dGluZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrRXh0ZXJuYWxMaW5rcztcblxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rVmF1bHRDaGVjayA9IHRydWU7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0V4dGVybmFsTGlua3MgPSBmYWxzZTsgLy8gRGlzYWJsZSB0aGUgbm90aWNlLWJhc2VkIGNoZWNrXG5cblx0XHRcdC8vIENsZWFyIGNhY2hlIGZpcnN0IHRvIGVuc3VyZSBmcmVzaCByZXN1bHRzXG5cdFx0XHRjb25zdCB7IGNsZWFyQ2FjaGVGb3JGaWxlIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9zZW8tY2hlY2tlclwiKTtcblx0XHRcdGNsZWFyQ2FjaGVGb3JGaWxlKGFjdGl2ZUZpbGUucGF0aCk7XG5cblx0XHRcdC8vIEltcG9ydCBhbmQgcnVuIFNFTyBjaGVjayBkaXJlY3RseSB3aXRoIGV4dGVybmFsIGJyb2tlbiBsaW5rcyBlbmFibGVkXG5cdFx0XHRjb25zdCB7IHJ1blNFT0NoZWNrIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9zZW8tY2hlY2tlclwiKTtcblx0XHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBydW5TRU9DaGVjayh0aGlzLnBsdWdpbiwgW2FjdGl2ZUZpbGVdKTtcblxuXHRcdFx0Ly8gUmVzdG9yZSBvcmlnaW5hbCBzZXR0aW5nc1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rVmF1bHRDaGVjayA9IG9yaWdpbmFsVmF1bHRTZXR0aW5nO1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hlY2tFeHRlcm5hbExpbmtzID0gb3JpZ2luYWxFeHRlcm5hbFNldHRpbmc7XG5cblx0XHRcdGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0bmV3IE5vdGljZSgnRXh0ZXJuYWwgbGlua3MgY2hlY2sgY29tcGxldGUuJyk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzWzBdIHx8IG51bGw7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgZXh0ZXJuYWwgbGlua3M6JywgZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZSgnRXJyb3IgY2hlY2tpbmcgZXh0ZXJuYWwgbGlua3MuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBjaGVja0FsbEV4dGVybmFsTGlua3MoKTogUHJvbWlzZTxTRU9SZXN1bHRzW10+IHtcblx0XHR0cnkge1xuXHRcdFx0Ly8gR2V0IGZpbGVzIHRvIGNoZWNrXG5cdFx0XHRjb25zdCBmaWxlcyA9IGF3YWl0IHRoaXMucGx1Z2luLmdldEZpbGVzVG9DaGVjaygpO1xuXHRcdFx0aWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRjb25zdCBmaWxlVHlwZVRleHQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVNRFhTdXBwb3J0ID8gJ21hcmtkb3duIG9yIE1EWCBmaWxlcycgOiAnbWFya2Rvd24gZmlsZXMnO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBObyAke2ZpbGVUeXBlVGV4dH0gZm91bmQgaW4gY29uZmlndXJlZCBkaXJlY3Rvcmllcy5gKTtcblx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUZW1wb3JhcmlseSBlbmFibGUgZXh0ZXJuYWwgYnJva2VuIGxpbmtzIGNoZWNraW5nIGFuZCBkaXNhYmxlIGV4dGVybmFsIGxpbmtzXG5cdFx0XHRjb25zdCBvcmlnaW5hbFZhdWx0U2V0dGluZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2s7XG5cdFx0XHRjb25zdCBvcmlnaW5hbEV4dGVybmFsU2V0dGluZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrRXh0ZXJuYWxMaW5rcztcblxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRXh0ZXJuYWxMaW5rVmF1bHRDaGVjayA9IHRydWU7XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja0V4dGVybmFsTGlua3MgPSBmYWxzZTsgLy8gRGlzYWJsZSB0aGUgbm90aWNlLWJhc2VkIGNoZWNrXG5cblx0XHRcdC8vIENsZWFyIGNhY2hlIGZpcnN0IHRvIGVuc3VyZSBmcmVzaCByZXN1bHRzXG5cdFx0XHRjb25zdCB7IGNsZWFyQWxsQ2FjaGUgfSA9IGF3YWl0IGltcG9ydChcIi4uL3Nlby1jaGVja2VyXCIpO1xuXHRcdFx0Y2xlYXJBbGxDYWNoZSgpO1xuXG5cdFx0XHQvLyBTaG93IG5vdGlmaWNhdGlvbiBmb3IgbGFyZ2Ugc2NhbnNcblx0XHRcdGlmIChmaWxlcy5sZW5ndGggPiAyMCkge1xuXHRcdFx0XHRuZXcgTm90aWNlKGBDaGVja2luZyBleHRlcm5hbCBsaW5rcyBmb3IgNDA0cyBvbiAke2ZpbGVzLmxlbmd0aH0gZmlsZXMuLi4gVGhpcyBtYXkgdGFrZSBhIG1vbWVudC5gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSW1wb3J0IGFuZCBydW4gU0VPIGNoZWNrIGRpcmVjdGx5IHdpdGggZXh0ZXJuYWwgYnJva2VuIGxpbmtzIGVuYWJsZWRcblx0XHRcdGNvbnN0IHsgcnVuU0VPQ2hlY2sgfSA9IGF3YWl0IGltcG9ydChcIi4uL3Nlby1jaGVja2VyXCIpO1xuXHRcdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IHJ1blNFT0NoZWNrKHRoaXMucGx1Z2luLCBmaWxlcyk7XG5cblx0XHRcdC8vIFJlc3RvcmUgb3JpZ2luYWwgc2V0dGluZ3Ncblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2sgPSBvcmlnaW5hbFZhdWx0U2V0dGluZztcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrRXh0ZXJuYWxMaW5rcyA9IG9yaWdpbmFsRXh0ZXJuYWxTZXR0aW5nO1xuXG5cdFx0XHQvLyBTYXZlIHJlc3VsdHMgdG8gc2V0dGluZ3MgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMgPSByZXN1bHRzO1xuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzdFNjYW5UaW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdG5ldyBOb3RpY2UoYEV4dGVybmFsIGxpbmtzIGNoZWNrIGNvbXBsZXRlIHdpdGggJHtyZXN1bHRzLmxlbmd0aH0gZmlsZXMuYCk7XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3IgY2hlY2tpbmcgYWxsIGV4dGVybmFsIGxpbmtzOicsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoJ0Vycm9yIGNoZWNraW5nIGV4dGVybmFsIGxpbmtzLiBDaGVjayBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xuXHRcdFx0cmV0dXJuIFtdO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIHJlZnJlc2hHbG9iYWxSZXN1bHRzKGFib3J0U2lnbmFsPzogQWJvcnRTaWduYWwpOiBQcm9taXNlPFNFT1Jlc3VsdHNbXT4ge1xuXHRcdGxldCBhdWRpdE5vdGljZTogTm90aWNlIHwgbnVsbCA9IG51bGw7XG5cdFx0XG5cdFx0dHJ5IHtcblx0XHRcdC8vIENsZWFyIGNhY2hlIGZpcnN0IHRvIGVuc3VyZSBmcmVzaCByZXN1bHRzXG5cdFx0XHRjb25zdCB7IGNsZWFyQWxsQ2FjaGUgfSA9IGF3YWl0IGltcG9ydChcIi4uL3Nlby1jaGVja2VyXCIpO1xuXHRcdFx0Y2xlYXJBbGxDYWNoZSgpO1xuXHRcdFx0XG5cdFx0XHQvLyBHZXQgZmlsZXMgdG8gY2hlY2tcblx0XHRjb25zdCBmaWxlcyA9IGF3YWl0IHRoaXMucGx1Z2luLmdldEZpbGVzVG9DaGVjaygpO1xuXHRcdGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcblx0XHRcdGNvbnN0IGZpbGVUeXBlVGV4dCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZU1EWFN1cHBvcnQgPyAnbWFya2Rvd24gb3IgTURYIGZpbGVzJyA6ICdtYXJrZG93biBmaWxlcyc7XG5cdFx0XHRuZXcgTm90aWNlKGBObyAke2ZpbGVUeXBlVGV4dH0gZm91bmQgaW4gY29uZmlndXJlZCBkaXJlY3Rvcmllcy5gKTtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIFNob3cgcGVyc2lzdGVudCBub3RpZmljYXRpb24gZm9yIGxhcmdlIHNjYW5zXG5cdFx0XHRpZiAoZmlsZXMubGVuZ3RoID4gMjApIHtcblx0XHRcdFx0YXVkaXROb3RpY2UgPSBuZXcgTm90aWNlKGBSZWZyZXNoaW5nIFNFTyBhdWRpdCBvbiAke2ZpbGVzLmxlbmd0aH0gZmlsZXMuLi4gVGhpcyBtYXkgdGFrZSBhIG1vbWVudC5gLCAwKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gSW1wb3J0IGFuZCBydW4gU0VPIGNoZWNrIGRpcmVjdGx5XG5cdFx0XHRjb25zdCB7IHJ1blNFT0NoZWNrIH0gPSBhd2FpdCBpbXBvcnQoXCIuLi9zZW8tY2hlY2tlclwiKTtcblx0XHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBydW5TRU9DaGVjayh0aGlzLnBsdWdpbiwgZmlsZXMsIGFib3J0U2lnbmFsID8geyBzaWduYWw6IGFib3J0U2lnbmFsIH0gYXMgQWJvcnRDb250cm9sbGVyIDogdW5kZWZpbmVkKTtcblx0XHRcdFxuXHRcdFx0Ly8gU2F2ZSByZXN1bHRzIHRvIHNldHRpbmdzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzID0gcmVzdWx0cztcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc3RTY2FuVGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XG5cdFx0XHQvLyBEaXNtaXNzIHRoZSBhdWRpdCBub3RpY2UgYW5kIHNob3cgY29tcGxldGlvbiBub3RpY2Vcblx0XHRcdGlmIChhdWRpdE5vdGljZSkge1xuXHRcdFx0XHRhdWRpdE5vdGljZS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0XHRuZXcgTm90aWNlKGBTRU8gYXVkaXQgY29tcGxldGUgd2l0aCAke3Jlc3VsdHMubGVuZ3RofSBmaWxlcy5gKTtcblx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHQvLyBEaXNtaXNzIHRoZSBhdWRpdCBub3RpY2UgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoYXVkaXROb3RpY2UpIHtcblx0XHRcdFx0YXVkaXROb3RpY2UuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnVmF1bHQgYXVkaXQgY2FuY2VsbGVkIGJ5IHVzZXInKTtcblx0XHRcdFx0bmV3IE5vdGljZSgnVmF1bHQgYXVkaXQgY2FuY2VsbGVkLicpO1xuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIGFsbCBub3RlczonLCBlcnJvcik7XG5cdFx0XHRuZXcgTm90aWNlKCdFcnJvciBhbmFseXppbmcgZmlsZXMuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgb3BlbkZpbGUoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRcdGlmIChmaWxlICYmIGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0XHQvLyBUcnkgZGlmZmVyZW50IG1ldGhvZHMgdG8gd29yayBhcm91bmQgcGx1Z2luIGNvbmZsaWN0c1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIE1ldGhvZCAxOiBVc2UgZ2V0TGVhZiBhbmQgb3BlblxuXHRcdFx0XHRcdGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpO1xuXHRcdFx0XHRcdGF3YWl0IGxlYWYub3BlbkZpbGUoZmlsZSk7XG5cdFx0XHRcdH0gY2F0Y2gge1xuXHRcdFx0XHRcdC8vIE1ldGhvZCAyOiBGYWxsYmFjayB0byBvcGVuTGlua1RleHRcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGVQYXRoLCAnJywgdHJ1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEZpbGUgbm90IGZvdW5kIC0gc2hvdyBub3RpZmljYXRpb25cblx0XHRcdFx0bmV3IE5vdGljZShgRmlsZSBub3QgZm91bmQ6ICR7ZmlsZVBhdGh9XFxuVGhpcyBmaWxlIG1heSBoYXZlIGJlZW4gcmVuYW1lZCBvciBkZWxldGVkLmApO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGBFcnJvciBvcGVuaW5nIGZpbGUgJHtmaWxlUGF0aH06YCwgZXJyb3IpO1xuXHRcdFx0bmV3IE5vdGljZShgRXJyb3Igb3BlbmluZyBmaWxlOiAke2ZpbGVQYXRofWApO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIG9wZW5GaWxlQW5kQXVkaXQoZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdC8vIEdldCB0aGUgZmlsZSBvYmplY3Rcblx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcblx0XHRpZiAoIWZpbGUgfHwgIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG5cdFx0XHQvLyBGaWxlIG5vdCBmb3VuZCAtIHNob3cgbm90aWZpY2F0aW9uXG5cdFx0XHRuZXcgTm90aWNlKGBGaWxlIG5vdCBmb3VuZDogJHtmaWxlUGF0aH1cXG5UaGlzIGZpbGUgbWF5IGhhdmUgYmVlbiByZW5hbWVkIG9yIGRlbGV0ZWQuYCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdC8vIE9wZW4gdGhlIGZpbGUgZGlyZWN0bHkgdXNpbmcgd29ya3NwYWNlXG5cdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShmaWxlKTtcblx0XHRcblx0XHQvLyBPcGVuIGN1cnJlbnQgbm90ZSBwYW5lbCBhbmQgd2FpdCBmb3IgaXQgdG8gYmUgZnVsbHkgcmVhZHlcblx0XHR0aGlzLnBsdWdpbi5vcGVuQ3VycmVudFBhbmVsKCk7XG5cdFx0XG5cdFx0Ly8gV2FpdCBmb3IgdGhlIHBhbmVsIHRvIGJlIGZ1bGx5IGluaXRpYWxpemVkIGFuZCBmb2N1c2VkXG5cdFx0YXdhaXQgbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcblx0XHRcdGNvbnN0IGNoZWNrUGFuZWwgPSAoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tY3VycmVudC1wYW5lbCcpO1xuXHRcdFx0XHRpZiAoY3VycmVudFBhbmVscy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0Y29uc3QgY3VycmVudFBhbmVsID0gY3VycmVudFBhbmVsc1swXTtcblx0XHRcdFx0XHRpZiAoY3VycmVudFBhbmVsICYmIGN1cnJlbnRQYW5lbC52aWV3KSB7XG5cdFx0XHRcdFx0XHQvLyBGb2N1cyB0aGUgcGFuZWwgdG8gZW5zdXJlIGl0J3MgcHJvcGVybHkgYWN0aXZlXG5cdFx0XHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihjdXJyZW50UGFuZWwpO1xuXHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIGVuc3VyZSBpdCdzIGluIHRoZSBjb3JyZWN0IHN0YXRlXG5cdFx0XHRcdFx0XHRpZiAoY3VycmVudFBhbmVsLnZpZXcgaW5zdGFuY2VvZiBTRU9TaWRlUGFuZWwpIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFBhbmVsLnZpZXcucmVuZGVyKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRyZXNvbHZlKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIFBhbmVsIG5vdCByZWFkeSB5ZXQsIGNoZWNrIGFnYWluXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGNoZWNrUGFuZWwsIDUwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gUGFuZWwgbm90IGZvdW5kLCBjaGVjayBhZ2FpblxuXHRcdFx0XHRcdHNldFRpbWVvdXQoY2hlY2tQYW5lbCwgNTApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0Y2hlY2tQYW5lbCgpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gTm93IHJ1biB0aGUgYXVkaXQgb24gdGhlIGN1cnJlbnQgbm90ZVxuXHRcdHRyeSB7XG5cdFx0XHQvLyBDcmVhdGUgYWJvcnQgY29udHJvbGxlciBmb3IgdGhpcyBhdWRpdCBpZiBvbmUgZG9lc24ndCBleGlzdFxuXHRcdFx0aWYgKCFTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyKSB7XG5cdFx0XHRcdFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdC8vIERpc2FibGUgcmVmcmVzaCBidXR0b24gaW4gY3VycmVudCBub3RlIHBhbmVsIGlmIGl0IGV4aXN0c1xuXHRcdFx0Ly8gV2FpdCBhIGJpdCBmb3IgdGhlIHBhbmVsIHRvIGJlIGZ1bGx5IHJlbmRlcmVkXG5cdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XG5cdFx0XHRcblx0XHRcdGNvbnN0IGN1cnJlbnRQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tY3VycmVudC1wYW5lbCcpO1xuXHRcdFx0aWYgKGN1cnJlbnRQYW5lbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50UGFuZWwgPSBjdXJyZW50UGFuZWxzWzBdO1xuXHRcdFx0XHRpZiAoY3VycmVudFBhbmVsICYmIGN1cnJlbnRQYW5lbC52aWV3KSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVmcmVzaEJ0biA9IGN1cnJlbnRQYW5lbC52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLXJlZnJlc2gtYnRuXScpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXHRcdFx0XHRcdGlmIChyZWZyZXNoQnRuKSB7XG5cdFx0XHRcdFx0XHRyZWZyZXNoQnRuLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdHJlZnJlc2hCdG4udGV4dENvbnRlbnQgPSAnQXVkaXRpbmcuLi4nO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5jaGVja0N1cnJlbnROb3RlKFNFT1NpZGVQYW5lbC5nbG9iYWxBdWRpdENvbnRyb2xsZXI/LnNpZ25hbCk7XG5cdFx0XHRpZiAocmVzdWx0cykge1xuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIGN1cnJlbnQgbm90ZSByZXN1bHRzIGluIHRoZSBwYW5lbFxuXHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2lkZVBhbmVsICYmIHRoaXMucGx1Z2luLnNpZGVQYW5lbC5wYW5lbFR5cGUgPT09ICdjdXJyZW50Jykge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNpZGVQYW5lbC5jdXJyZW50Tm90ZVJlc3VsdHMgPSByZXN1bHRzO1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNpZGVQYW5lbC5yZW5kZXIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBydW5uaW5nIGF1ZGl0IGFmdGVyIG9wZW5pbmcgZmlsZTonLCBlcnJvcik7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdC8vIFJlLWVuYWJsZSByZWZyZXNoIGJ1dHRvbiBpbiBjdXJyZW50IG5vdGUgcGFuZWxcblx0XHRcdGNvbnN0IGN1cnJlbnRQYW5lbHMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZW8tY3VycmVudC1wYW5lbCcpO1xuXHRcdFx0aWYgKGN1cnJlbnRQYW5lbHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBjdXJyZW50UGFuZWwgPSBjdXJyZW50UGFuZWxzWzBdO1xuXHRcdFx0XHRpZiAoY3VycmVudFBhbmVsICYmIGN1cnJlbnRQYW5lbC52aWV3KSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVmcmVzaEJ0biA9IGN1cnJlbnRQYW5lbC52aWV3LmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbltkYXRhLXJlZnJlc2gtYnRuXScpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuXHRcdFx0XHRcdGlmIChyZWZyZXNoQnRuKSB7XG5cdFx0XHRcdFx0XHRyZWZyZXNoQnRuLmRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRyZWZyZXNoQnRuLnRleHRDb250ZW50ID0gJ1JlZnJlc2gnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHNob3dTb3J0TWVudShldmVudDogTW91c2VFdmVudCwgaXNzdWVzRmlsZXM6IFNFT1Jlc3VsdHNbXSwgaXNzdWVzTGlzdDogSFRNTEVsZW1lbnQsIGN1cnJlbnRTb3J0OiBzdHJpbmcsIG9uU29ydENoYW5nZTogKHNvcnRUeXBlOiBzdHJpbmcpID0+IHZvaWQsIHNldHRpbmdzPzogU0VPU2V0dGluZ3MpOiB2b2lkIHtcblx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblx0XHRcblx0XHQvLyBDaGVjayBpZiBub3RpY2VzIHNob3VsZCBiZSBzaG93biAoYm90aCBwb3RlbnRpYWxseSBicm9rZW4gY2hlY2tzIG11c3QgYmUgZW5hYmxlZClcblx0XHRjb25zdCBzaG93Tm90aWNlcyA9IHNldHRpbmdzID8gXG5cdFx0XHQoc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzICYmIHNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5FbWJlZHMpIDogXG5cdFx0XHR0cnVlO1xuXHRcdFxuXHRcdC8vIElmIGN1cnJlbnQgc29ydCBpcyBub3RpY2VzLXJlbGF0ZWQgYnV0IG5vdGljZXMgYXJlIGRpc2FibGVkLCBmYWxsIGJhY2sgdG8gaXNzdWVzLWRlc2Ncblx0XHQvLyBCdXQgb25seSBmb3IgZGlzcGxheSBwdXJwb3NlcyAtIGRvbid0IG92ZXJyaWRlIHRoZSBhY3R1YWwgY3VycmVudFNvcnRcblx0XHRjb25zdCBkaXNwbGF5U29ydCA9ICghc2hvd05vdGljZXMgJiYgKGN1cnJlbnRTb3J0ID09PSAnbm90aWNlcy1kZXNjJyB8fCBjdXJyZW50U29ydCA9PT0gJ25vdGljZXMtYXNjJykpIFxuXHRcdFx0PyAnaXNzdWVzLWRlc2MnIFxuXHRcdFx0OiBjdXJyZW50U29ydDtcblx0XHRcblx0XHQvLyBJc3N1ZXMgKGhpZ2ggdG8gbG93KSAtIERFRkFVTFRcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0lzc3VlcyAoaGlnaCB0byBsb3cpJylcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdG9uU29ydENoYW5nZSgnaXNzdWVzLWRlc2MnKTtcblx0XHRcdFx0XHR0aGlzLnNvcnRBbmRSZW5kZXJGaWxlcyhpc3N1ZXNGaWxlcywgaXNzdWVzTGlzdCwgJ2lzc3Vlcy1kZXNjJywgc2V0dGluZ3MpO1xuXHRcdFx0XHR9KTtcblx0XHRcdGlmIChkaXNwbGF5U29ydCA9PT0gJ2lzc3Vlcy1kZXNjJykge1xuXHRcdFx0XHRpdGVtLnNldEljb24oJ2NoZWNrJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gSXNzdWVzIChsb3cgdG8gaGlnaClcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0lzc3VlcyAobG93IHRvIGhpZ2gpJylcblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdG9uU29ydENoYW5nZSgnaXNzdWVzLWFzYycpO1xuXHRcdFx0XHRcdHRoaXMuc29ydEFuZFJlbmRlckZpbGVzKGlzc3Vlc0ZpbGVzLCBpc3N1ZXNMaXN0LCAnaXNzdWVzLWFzYycsIHNldHRpbmdzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRpZiAoZGlzcGxheVNvcnQgPT09ICdpc3N1ZXMtYXNjJykge1xuXHRcdFx0XHRpdGVtLnNldEljb24oJ2NoZWNrJyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gRGl2aWRlclxuXHRcdG1lbnUuYWRkU2VwYXJhdG9yKCk7XG5cdFx0XG5cdFx0Ly8gV2FybmluZ3MgKGhpZ2ggdG8gbG93KVxuXHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0aXRlbS5zZXRUaXRsZSgnV2FybmluZ3MgKGhpZ2ggdG8gbG93KScpXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRvblNvcnRDaGFuZ2UoJ3dhcm5pbmdzLWRlc2MnKTtcblx0XHRcdFx0XHR0aGlzLnNvcnRBbmRSZW5kZXJGaWxlcyhpc3N1ZXNGaWxlcywgaXNzdWVzTGlzdCwgJ3dhcm5pbmdzLWRlc2MnLCBzZXR0aW5ncyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0aWYgKGRpc3BsYXlTb3J0ID09PSAnd2FybmluZ3MtZGVzYycpIHtcblx0XHRcdFx0aXRlbS5zZXRJY29uKCdjaGVjaycpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vIFdhcm5pbmdzIChsb3cgdG8gaGlnaClcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdGl0ZW0uc2V0VGl0bGUoJ1dhcm5pbmdzIChsb3cgdG8gaGlnaCknKVxuXHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0b25Tb3J0Q2hhbmdlKCd3YXJuaW5ncy1hc2MnKTtcblx0XHRcdFx0XHR0aGlzLnNvcnRBbmRSZW5kZXJGaWxlcyhpc3N1ZXNGaWxlcywgaXNzdWVzTGlzdCwgJ3dhcm5pbmdzLWFzYycsIHNldHRpbmdzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRpZiAoZGlzcGxheVNvcnQgPT09ICd3YXJuaW5ncy1hc2MnKSB7XG5cdFx0XHRcdGl0ZW0uc2V0SWNvbignY2hlY2snKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBEaXZpZGVyXG5cdFx0bWVudS5hZGRTZXBhcmF0b3IoKTtcblx0XHRcblx0XHQvLyBOb3RpY2VzIHNvcnRpbmcgb3B0aW9ucyAob25seSBzaG93IGlmIG5vdGljZXMgYXJlIGVuYWJsZWQpXG5cdFx0aWYgKHNob3dOb3RpY2VzKSB7XG5cdFx0XHQvLyBOb3RpY2VzIChoaWdoIHRvIGxvdylcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRpdGVtLnNldFRpdGxlKCdOb3RpY2VzIChoaWdoIHRvIGxvdyknKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdG9uU29ydENoYW5nZSgnbm90aWNlcy1kZXNjJyk7XG5cdFx0XHRcdFx0XHR0aGlzLnNvcnRBbmRSZW5kZXJGaWxlcyhpc3N1ZXNGaWxlcywgaXNzdWVzTGlzdCwgJ25vdGljZXMtZGVzYycsIHNldHRpbmdzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGRpc3BsYXlTb3J0ID09PSAnbm90aWNlcy1kZXNjJykge1xuXHRcdFx0XHRcdGl0ZW0uc2V0SWNvbignY2hlY2snKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIE5vdGljZXMgKGxvdyB0byBoaWdoKVxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdGl0ZW0uc2V0VGl0bGUoJ05vdGljZXMgKGxvdyB0byBoaWdoKScpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0b25Tb3J0Q2hhbmdlKCdub3RpY2VzLWFzYycpO1xuXHRcdFx0XHRcdFx0dGhpcy5zb3J0QW5kUmVuZGVyRmlsZXMoaXNzdWVzRmlsZXMsIGlzc3Vlc0xpc3QsICdub3RpY2VzLWFzYycsIHNldHRpbmdzKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0aWYgKGRpc3BsYXlTb3J0ID09PSAnbm90aWNlcy1hc2MnKSB7XG5cdFx0XHRcdFx0aXRlbS5zZXRJY29uKCdjaGVjaycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gRGl2aWRlclxuXHRcdFx0bWVudS5hZGRTZXBhcmF0b3IoKTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gRmlsZSBuYW1lIChBIHRvIFopXG5cdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHQvLyBGYWxzZSBwb3NpdGl2ZTogXCIoQSB0byBaKVwiIGlzIGEgc29ydGluZyBpbmRpY2F0b3IsIG5vdCBVSSB0ZXh0XG5cdFx0XHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgb2JzaWRpYW5tZC91aS9zZW50ZW5jZS1jYXNlXG5cdFx0XHRpdGVtLnNldFRpdGxlKCdGaWxlIG5hbWUgKEEgdG8gWiknKVxuXHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0b25Tb3J0Q2hhbmdlKCdmaWxlbmFtZS1hc2MnKTtcblx0XHRcdFx0XHR0aGlzLnNvcnRBbmRSZW5kZXJGaWxlcyhpc3N1ZXNGaWxlcywgaXNzdWVzTGlzdCwgJ2ZpbGVuYW1lLWFzYycsIHNldHRpbmdzKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRpZiAoZGlzcGxheVNvcnQgPT09ICdmaWxlbmFtZS1hc2MnKSB7XG5cdFx0XHRcdGl0ZW0uc2V0SWNvbignY2hlY2snKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHQvLyBGaWxlIG5hbWUgKFogdG8gQSlcblx0XHRtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcblx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIihaIHRvIEEpXCIgaXMgYSBzb3J0aW5nIGluZGljYXRvciwgbm90IFVJIHRleHRcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdGl0ZW0uc2V0VGl0bGUoJ0ZpbGUgbmFtZSAoWiB0byBBKScpXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRvblNvcnRDaGFuZ2UoJ2ZpbGVuYW1lLWRlc2MnKTtcblx0XHRcdFx0XHR0aGlzLnNvcnRBbmRSZW5kZXJGaWxlcyhpc3N1ZXNGaWxlcywgaXNzdWVzTGlzdCwgJ2ZpbGVuYW1lLWRlc2MnLCBzZXR0aW5ncyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0aWYgKGRpc3BsYXlTb3J0ID09PSAnZmlsZW5hbWUtZGVzYycpIHtcblx0XHRcdFx0aXRlbS5zZXRJY29uKCdjaGVjaycpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdFxuXHRcdG1lbnUuc2hvd0F0UG9zaXRpb24oeyB4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZIH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBzb3J0QW5kUmVuZGVyRmlsZXMoaXNzdWVzRmlsZXM6IFNFT1Jlc3VsdHNbXSwgaXNzdWVzTGlzdDogSFRNTEVsZW1lbnQsIHNvcnRUeXBlOiBzdHJpbmcsIHNldHRpbmdzPzogU0VPU2V0dGluZ3MpOiB2b2lkIHtcblx0XHQvLyBTb3J0IHRoZSBhcnJheSB1c2luZyB0aGUgcHJvcGVyIHNvcnRpbmcgZnVuY3Rpb25cblx0XHRjb25zdCBzb3J0ZWRGaWxlcyA9IHNvcnRGaWxlcyhbLi4uaXNzdWVzRmlsZXNdLCBzb3J0VHlwZSk7XG5cdFx0XG5cdFx0Ly8gRmluZCB0aGUgZmlsZXMgbGlzdCBjb250YWluZXJcblx0XHRjb25zdCBmaWxlc0xpc3RDb250YWluZXIgPSBpc3N1ZXNMaXN0LnF1ZXJ5U2VsZWN0b3IoJy5zZW8tZmlsZXMtbGlzdC1jb250YWluZXInKTtcblx0XHRpZiAoIWZpbGVzTGlzdENvbnRhaW5lcikgcmV0dXJuO1xuXHRcdFxuXHRcdC8vIENsZWFyIGV4aXN0aW5nIGZpbGUgaXRlbXNcblx0XHRmaWxlc0xpc3RDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnNlby1maWxlLWlzc3VlJykuZm9yRWFjaChlbCA9PiBlbC5yZW1vdmUoKSk7XG5cdFx0XG5cdFx0Ly8gUmUtcmVuZGVyIHNvcnRlZCBmaWxlc1xuXHRcdHRoaXMucmVuZGVyRmlsZXNMaXN0KHNvcnRlZEZpbGVzLCBmaWxlc0xpc3RDb250YWluZXIgYXMgSFRNTEVsZW1lbnQsIHNldHRpbmdzKTtcblx0fVxuXG5cdHByaXZhdGUgcmVuZGVyRmlsZXNMaXN0KGZpbGVzOiBTRU9SZXN1bHRzW10sIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHNldHRpbmdzPzogU0VPU2V0dGluZ3MpOiB2b2lkIHtcblx0XHRmaWxlcy5mb3JFYWNoKHJlc3VsdCA9PiB7XG5cdFx0XHRjb25zdCBmaWxlRWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWZpbGUtaXNzdWUnIH0pO1xuXHRcdFx0ZmlsZUVsLnNldEF0dHJpYnV0ZSgnZGF0YS1maWxlLXBhdGgnLCByZXN1bHQuZmlsZSk7XG5cdFx0XHRcblx0XHRcdC8vIE1ha2UgZmlsZSBwYXRoIGNsaWNrYWJsZVxuXHRcdFx0Y29uc3QgZmlsZUxpbmsgPSBmaWxlRWwuY3JlYXRlRWwoJ2EnLCB7IFxuXHRcdFx0XHR0ZXh0OiByZXN1bHQuZGlzcGxheU5hbWUgfHwgdGhpcy5nZXREaXNwbGF5UGF0aChyZXN1bHQuZmlsZSksXG5cdFx0XHRcdGNsczogJ3Nlby1maWxlLWxpbmsnLFxuXHRcdFx0XHRocmVmOiAnIydcblx0XHRcdH0pO1xuXHRcdFx0ZmlsZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdHZvaWQgdGhpcy5vcGVuRmlsZShyZXN1bHQuZmlsZSk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0Ly8gU3RhdHMgYW5kIGF1ZGl0IGJ1dHRvbiBjb250YWluZXJcblx0XHRcdGNvbnN0IHN0YXRzQ29udGFpbmVyID0gZmlsZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0cy1jb250YWluZXInIH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBDaGVjayBpZiBub3RpY2VzIHNob3VsZCBiZSBzaG93blxuXHRcdFx0Y29uc3Qgc2hvd05vdGljZXMgPSBzZXR0aW5ncyA/IFxuXHRcdFx0XHQoc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkxpbmtzICYmIHNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5FbWJlZHMpIDogXG5cdFx0XHRcdHRydWU7XG5cdFx0XHRcblx0XHRcdC8vIElzc3Vlcywgd2FybmluZ3MsIGFuZCBub3RpY2VzIHRleHRcblx0XHRcdGNvbnN0IHN0YXRzVGV4dCA9IFtdO1xuXHRcdFx0aWYgKHJlc3VsdC5pc3N1ZXNDb3VudCA+IDApIHN0YXRzVGV4dC5wdXNoKGAke3Jlc3VsdC5pc3N1ZXNDb3VudH0gaXNzdWVzYCk7XG5cdFx0XHRpZiAocmVzdWx0Lndhcm5pbmdzQ291bnQgPiAwKSBzdGF0c1RleHQucHVzaChgJHtyZXN1bHQud2FybmluZ3NDb3VudH0gd2FybmluZ3NgKTtcblx0XHRcdGlmIChzaG93Tm90aWNlcyAmJiByZXN1bHQubm90aWNlc0NvdW50ID4gMCkgc3RhdHNUZXh0LnB1c2goYCR7cmVzdWx0Lm5vdGljZXNDb3VudH0gbm90aWNlc2ApO1xuXHRcdFx0XG5cdFx0XHRzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgXG5cdFx0XHRcdHRleHQ6IHN0YXRzVGV4dC5qb2luKCcsICcpLFxuXHRcdFx0XHRjbHM6ICdzZW8tZmlsZS1zdGF0cydcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBBdWRpdCBidXR0b25cblx0XHRcdGNvbnN0IGF1ZGl0QnRuID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdFx0Y2xzOiAnY2xpY2thYmxlLWljb24gc2VvLWF1ZGl0LWJ0bicsXG5cdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnQXVkaXQgdGhpcyBub3RlJyB9XG5cdFx0XHR9KTtcblx0XHRcdHNldEljb24oYXVkaXRCdG4sICdzZWFyY2gtY2hlY2snKTtcblx0XHRcdGF1ZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5vcGVuRmlsZUFuZEF1ZGl0KHJlc3VsdC5maWxlKTtcblx0XHRcdFx0fSkoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBnZXREaXNwbGF5UGF0aChmdWxsUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcblx0XHQvLyBSZW1vdmUgbGVhZGluZyBzbGFzaCBpZiBwcmVzZW50IGFuZCBzcGxpdFxuXHRcdGNvbnN0IGNsZWFuUGF0aCA9IGZ1bGxQYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IGZ1bGxQYXRoLnNsaWNlKDEpIDogZnVsbFBhdGg7XG5cdFx0Y29uc3QgcGFydHMgPSBjbGVhblBhdGguc3BsaXQoJy8nKTtcblx0XHRpZiAocGFydHMubGVuZ3RoIDw9IDEpIHtcblx0XHRcdHJldHVybiBjbGVhblBhdGg7IC8vIFJldHVybiBhcy1pcyBpZiBubyBwYXJlbnQgZm9sZGVyIChqdXN0IGZpbGVuYW1lKVxuXHRcdH1cblx0XHRyZXR1cm4gcGFydHMuc2xpY2UoLTIpLmpvaW4oJy8nKTsgLy8gUmV0dXJuIGxhc3QgdHdvIHBhcnRzIChwYXJlbnQgZm9sZGVyICsgZmlsZSBuYW1lKVxuXHR9XG59XG4iLCAiLyoqXHJcbiAqIEZpbGUgdXRpbGl0eSBmdW5jdGlvbnMgZm9yIFNFTyBwbHVnaW5cclxuICogUHJvdmlkZXMgZnVuY3Rpb25zIHRvIGNoZWNrIGZpbGUgZXh0ZW5zaW9ucyBhbmQgZmlsdGVyIGZpbGVzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPU2V0dGluZ3MgfSBmcm9tIFwiLi4vc2V0dGluZ3NcIjtcclxuXHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYSBmaWxlIGhhcyBhIHN1cHBvcnRlZCBleHRlbnNpb24gKE1EIG9yIE1EWCBiYXNlZCBvbiBzZXR0aW5ncylcclxuICogQHBhcmFtIGZpbGUgLSBUaGUgZmlsZSB0byBjaGVja1xyXG4gKiBAcGFyYW0gc2V0dGluZ3MgLSBQbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgVHJ1ZSBpZiB0aGUgZmlsZSBleHRlbnNpb24gaXMgc3VwcG9ydGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNTdXBwb3J0ZWRGaWxlKGZpbGU6IFRGaWxlLCBzZXR0aW5nczogU0VPU2V0dGluZ3MpOiBib29sZWFuIHtcclxuXHRjb25zdCBleHRlbnNpb24gPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xyXG5cdGlmIChleHRlbnNpb24gPT09ICdtZCcpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHRpZiAoZXh0ZW5zaW9uID09PSAnbWR4JyAmJiBzZXR0aW5ncy5lbmFibGVNRFhTdXBwb3J0KSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgZmlsZSBleHRlbnNpb24gY2hlY2sgcGF0dGVybiBmb3IgZmlsdGVyaW5nIGZpbGVzXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyAtIFBsdWdpbiBzZXR0aW5nc1xyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBzdXBwb3J0ZWQgZXh0ZW5zaW9uc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cHBvcnRlZEV4dGVuc2lvbnMoc2V0dGluZ3M6IFNFT1NldHRpbmdzKTogc3RyaW5nW10ge1xyXG5cdGNvbnN0IGV4dGVuc2lvbnMgPSBbJ21kJ107XHJcblx0aWYgKHNldHRpbmdzLmVuYWJsZU1EWFN1cHBvcnQpIHtcclxuXHRcdGV4dGVuc2lvbnMucHVzaCgnbWR4Jyk7XHJcblx0fVxyXG5cdHJldHVybiBleHRlbnNpb25zO1xyXG59XHJcbiIsICJpbXBvcnQgeyBzZXRJY29uLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgU0VPUmVzdWx0cyB9IGZyb20gXCIuLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBTRU9TZXR0aW5ncyB9IGZyb20gXCIuLi9zZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBnZXREaXNwbGF5UGF0aCB9IGZyb20gXCIuL3BhbmVsLXV0aWxzXCI7XHJcblxyXG5pbnRlcmZhY2UgT2JzaWRpYW5XaW5kb3cgZXh0ZW5kcyBXaW5kb3cge1xyXG5cdGFwcDogQXBwO1xyXG59XHJcblxyXG4vKipcclxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBjb2xsYXBzZSBpY29uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVDb2xsYXBzZUljb24oKTogSFRNTEVsZW1lbnQge1xyXG5cdGNvbnN0IGljb25FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuXHRzZXRJY29uKGljb25FbCwgJ2NoZXZyb24tZG93bicpO1xyXG5cdHJldHVybiBpY29uRWw7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgUmVzdWx0c0Rpc3BsYXkge1xyXG5cdHByaXZhdGUgaXNDb2xsYXBzZWQ6IGJvb2xlYW4gPSBmYWxzZTsgLy8gVHJhY2sgY29sbGFwc2Ugc3RhdGUgKGZhbHNlID0gZXhwYW5kZWQsIHRydWUgPSBjb2xsYXBzZWQpXHJcblx0cHJpdmF0ZSBpbmRpdmlkdWFsQ29sbGFwc2VTdGF0ZXM6IE1hcDxzdHJpbmcsIGJvb2xlYW4+ID0gbmV3IE1hcCgpOyAvLyBUcmFjayBpbmRpdmlkdWFsIGl0ZW0gY29sbGFwc2Ugc3RhdGVzXHJcblx0XHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcblx0XHRwcml2YXRlIG9uRmlsZUNsaWNrOiAoZmlsZVBhdGg6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPixcclxuXHRcdHByaXZhdGUgb25GaWxlQXVkaXQ6IChmaWxlUGF0aDogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+XHJcblx0KSB7fVxyXG5cclxuXHQvLyBNZXRob2QgdG8gdXBkYXRlIHRoZSBjb250YWluZXIgKG5lZWRlZCBmb3IgcmV1c2luZyBpbnN0YW5jZXMpXHJcblx0dXBkYXRlQ29udGFpbmVyKG5ld0NvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuXHRcdHRoaXMuY29udGFpbmVyID0gbmV3Q29udGFpbmVyO1xyXG5cdH1cclxuXHJcblx0Ly8gTmF2aWdhdGlvbiBtZXRob2QgdG8ganVtcCB0byBzcGVjaWZpYyBwb3NpdGlvbnMgaW4gdGhlIG5vdGVcclxuXHRwcml2YXRlIGFzeW5jIG5hdmlnYXRlVG9Qb3NpdGlvbihwb3NpdGlvbjogeyBsaW5lOiBudW1iZXI7IHNlYXJjaFRleHQ/OiBzdHJpbmc7IGNvbnRleHQ/OiBzdHJpbmcgfSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0Ly8gR2V0IHRoZSBhcHAgaW5zdGFuY2VcclxuXHRcdFx0Y29uc3QgYXBwID0gKHdpbmRvdyBhcyB1bmtub3duIGFzIE9ic2lkaWFuV2luZG93KS5hcHA7XHJcblx0XHRcdGlmICghYXBwKSB7XHJcblx0XHRcdFx0Y29uc29sZS53YXJuKCdPYnNpZGlhbiBhcHAgbm90IGZvdW5kJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgYWN0aXZlIGZpbGVcclxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGlmICghYWN0aXZlRmlsZSkge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ05vIGFjdGl2ZSBmaWxlIGZvdW5kIGZvciBuYXZpZ2F0aW9uJyk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBPcGVuIHRoZSBmaWxlIGlmIGl0J3Mgbm90IGFscmVhZHkgb3BlblxyXG5cdFx0YXdhaXQgdGhpcy5vbkZpbGVDbGljayhhY3RpdmVGaWxlLnBhdGgpO1xyXG5cdFx0XHJcblx0XHQvLyBHZXQgdGhlIG1hcmtkb3duIHZpZXcgLSB0cnkgZGlmZmVyZW50IGFwcHJvYWNoZXNcclxuXHRcdC8vIE5vdGU6IFVzaW5nIHVua25vd24gZm9yIE9ic2lkaWFuJ3MgaW50ZXJuYWwgdmlldyB0eXBlcyB0aGF0IGRvbid0IGhhdmUgcHVibGljIHR5cGUgZGVmaW5pdGlvbnNcclxuXHRcdGxldCBtYXJrZG93blZpZXc6IHVua25vd24gPSBudWxsO1xyXG5cdFx0bGV0IGVkaXRvcjogdW5rbm93biA9IG51bGw7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcnkgZ2V0dGluZyBsZWF2ZXMgb2YgdHlwZSBtYXJrZG93biAocmVwbGFjZW1lbnQgZm9yIGRlcHJlY2F0ZWQgYWN0aXZlTGVhZilcclxuXHRcdFx0aWYgKGFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKSB7XHJcblx0XHRcdFx0Y29uc3QgbGVhdmVzID0gYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XHJcblx0XHRcdFx0aWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XHJcblx0XHRcdFx0XHRtYXJrZG93blZpZXcgPSBsZWF2ZXNbMF0/LnZpZXc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBUcnkgZ2V0dGluZyBhbGwgbGVhdmVzIHVzaW5nIHdvcmtzcGFjZSBpdGVyYXRpb25cclxuXHRcdFx0aWYgKCFtYXJrZG93blZpZXcpIHtcclxuXHRcdFx0XHQvLyBVc2Ugd29ya3NwYWNlIGl0ZXJhdGlvbiB0byBmaW5kIG1hcmtkb3duIHZpZXdzXHJcblx0XHRcdFx0YXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAobGVhZi52aWV3ICYmICdlZGl0b3InIGluIGxlYWYudmlldyAmJiAhbWFya2Rvd25WaWV3KSB7XHJcblx0XHRcdFx0XHRcdG1hcmtkb3duVmlldyA9IGxlYWYudmlldztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFtYXJrZG93blZpZXcpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ05vIG1hcmtkb3duIHZpZXcgZm91bmQnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFR5cGUgZ3VhcmQgZm9yIG1hcmtkb3duIHZpZXcgd2l0aCBlZGl0b3IgcHJvcGVydHlcclxuXHRcdFx0aWYgKHR5cGVvZiBtYXJrZG93blZpZXcgPT09ICdvYmplY3QnICYmIG1hcmtkb3duVmlldyAhPT0gbnVsbCAmJiAnZWRpdG9yJyBpbiBtYXJrZG93blZpZXcpIHtcclxuXHRcdFx0XHRlZGl0b3IgPSAobWFya2Rvd25WaWV3IGFzIHsgZWRpdG9yOiB1bmtub3duIH0pLmVkaXRvcjtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFlZGl0b3IpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ05vIGVkaXRvciBmb3VuZCBpbiBtYXJrZG93biB2aWV3Jyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUeXBlIGd1YXJkIGZvciBlZGl0b3Igd2l0aCByZXF1aXJlZCBtZXRob2RzXHJcblx0XHRcdGlmICh0eXBlb2YgZWRpdG9yICE9PSAnb2JqZWN0JyB8fCBlZGl0b3IgPT09IG51bGwpIHtcclxuXHRcdFx0XHRjb25zb2xlLndhcm4oJ0VkaXRvciBpcyBub3QgYW4gb2JqZWN0Jyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBlZGl0b3JPYmogPSBlZGl0b3IgYXMge1xyXG5cdFx0XHRcdHNldEN1cnNvcj86IChwb3M6IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH0pID0+IHZvaWQ7XHJcblx0XHRcdFx0c2Nyb2xsSW50b1ZpZXc/OiAocG9zOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9IHwgbnVtYmVyKSA9PiB2b2lkO1xyXG5cdFx0XHRcdGdldExpbmU/OiAobGluZTogbnVtYmVyKSA9PiB7IGxlbmd0aDogbnVtYmVyIH07XHJcblx0XHRcdFx0YWRkSGlnaGxpZ2h0cz86IChoaWdobGlnaHRzOiBBcnJheTx7IGZyb206IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH07IHRvOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9IH0+KSA9PiB2b2lkO1xyXG5cdFx0XHRcdHJlbW92ZUhpZ2hsaWdodHM/OiAoKSA9PiB2b2lkO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gTmF2aWdhdGUgdG8gdGhlIHNwZWNpZmljIGxpbmVcclxuXHRcdFx0aWYgKHBvc2l0aW9uLmxpbmUgJiYgZWRpdG9yT2JqLnNldEN1cnNvcikge1xyXG5cdFx0XHRcdGNvbnN0IGxpbmVJbmRleCA9IE1hdGgubWF4KDAsIHBvc2l0aW9uLmxpbmUgLSAxKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBTZXQgY3Vyc29yIHBvc2l0aW9uXHJcblx0XHRcdFx0ZWRpdG9yT2JqLnNldEN1cnNvcih7IGxpbmU6IGxpbmVJbmRleCwgY2g6IDAgfSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gU2ltcGxlIHNjcm9sbCB0byBsaW5lIC0gbm8gZmFuY3kgc3R1ZmZcclxuXHRcdFx0XHRpZiAoZWRpdG9yT2JqLnNjcm9sbEludG9WaWV3KSB7XHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRlZGl0b3JPYmouc2Nyb2xsSW50b1ZpZXcoeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiAwIH0pO1xyXG5cdFx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHRcdC8vIElmIHRoYXQgZmFpbHMsIHRyeSB3aXRoIGp1c3QgdGhlIGxpbmUgbnVtYmVyXHJcblx0XHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdFx0ZWRpdG9yT2JqLnNjcm9sbEludG9WaWV3KGxpbmVJbmRleCk7XHJcblx0XHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHRcdC8vIElmIGFsbCBlbHNlIGZhaWxzLCBqdXN0IHNldCB0aGUgY3Vyc29yIChhbHJlYWR5IGRvbmUgYWJvdmUpXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gSGlnaGxpZ2h0IHRoZSBsaW5lIGJyaWVmbHlcclxuXHRcdFx0XHRpZiAoZWRpdG9yT2JqLmdldExpbmUgJiYgZWRpdG9yT2JqLmFkZEhpZ2hsaWdodHMgJiYgZWRpdG9yT2JqLnJlbW92ZUhpZ2hsaWdodHMpIHtcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IGxpbmVMZW5ndGggPSBlZGl0b3JPYmouZ2V0TGluZShsaW5lSW5kZXgpLmxlbmd0aDtcclxuXHRcdFx0XHRcdFx0ZWRpdG9yT2JqLmFkZEhpZ2hsaWdodHMoW3tcclxuXHRcdFx0XHRcdFx0XHRmcm9tOiB7IGxpbmU6IGxpbmVJbmRleCwgY2g6IDAgfSxcclxuXHRcdFx0XHRcdFx0XHR0bzogeyBsaW5lOiBsaW5lSW5kZXgsIGNoOiBsaW5lTGVuZ3RoIH1cclxuXHRcdFx0XHRcdFx0fV0pO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGhpZ2hsaWdodCBhZnRlciAyIHNlY29uZHNcclxuXHRcdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRcdFx0XHRcdGlmIChlZGl0b3JPYmoucmVtb3ZlSGlnaGxpZ2h0cykge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRlZGl0b3JPYmoucmVtb3ZlSGlnaGxpZ2h0cygpO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gSWdub3JlIGhpZ2hsaWdodCByZW1vdmFsIGVycm9yc1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSwgMjAwMCk7XHJcblx0XHRcdFx0XHR9IGNhdGNoIHtcclxuXHRcdFx0XHRcdFx0Ly8gSWdub3JlIGhpZ2hsaWdodCBlcnJvcnNcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG5hdmlnYXRpbmcgdG8gcG9zaXRpb246JywgZXJyb3IpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVuZGVyUmVzdWx0cyhyZXN1bHRzOiBTRU9SZXN1bHRzKTogdm9pZCB7XHJcblx0XHQvLyBVc2UgcmF3IG5vdGljZXMgY291bnQgc28gbm90aWNlcyBmcm9tIFBvdGVudGlhbGx5IEJyb2tlbiBMaW5rcyBhcmUgdmlzaWJsZSBhbmQgY291bnRlZFxyXG5cdFx0bGV0IGZpbHRlcmVkTm90aWNlc0NvdW50ID0gcmVzdWx0cy5ub3RpY2VzQ291bnQ7XHJcblx0XHRcclxuXHRcdC8vIE92ZXJhbGwgc2NvcmUgd2l0aCBjb2xsYXBzaWJsZSB0b2dnbGVcclxuXHRcdGNvbnN0IHNjb3JlRWwgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc2NvcmUtaGVhZGVyJyB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gTGVmdCBzaWRlOiBTY29yZSB0ZXh0IChub3QgYm9sZCwgbm90IGxhcmdlKVxyXG5cdFx0Y29uc3Qgc2NvcmVUZXh0ID0gc2NvcmVFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc2NvcmUtdGV4dCcgfSk7XHJcblx0XHRzY29yZVRleHQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdTY29yZTogJyB9KTtcclxuXHRcdGNvbnN0IHNjb3JlTnVtYmVyID0gc2NvcmVUZXh0LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgJHtNYXRoLnJvdW5kKHJlc3VsdHMub3ZlcmFsbFNjb3JlKX0lYCB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gQXBwbHkgY29sb3IgY29kaW5nIHRvIHRoZSBzY29yZVxyXG5cdFx0aWYgKHJlc3VsdHMub3ZlcmFsbFNjb3JlID49IDgwKSB7XHJcblx0XHRcdHNjb3JlTnVtYmVyLmFkZENsYXNzKCdzZW8tc2NvcmUtZXhjZWxsZW50Jyk7XHJcblx0XHR9IGVsc2UgaWYgKHJlc3VsdHMub3ZlcmFsbFNjb3JlID49IDYwKSB7XHJcblx0XHRcdHNjb3JlTnVtYmVyLmFkZENsYXNzKCdzZW8tc2NvcmUtZ29vZCcpO1xyXG5cdFx0fSBlbHNlIGlmIChyZXN1bHRzLm92ZXJhbGxTY29yZSA+PSA0MCkge1xyXG5cdFx0XHRzY29yZU51bWJlci5hZGRDbGFzcygnc2VvLXNjb3JlLWZhaXInKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNjb3JlTnVtYmVyLmFkZENsYXNzKCdzZW8tc2NvcmUtcG9vcicpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAocmVzdWx0cy5pc3N1ZXNDb3VudCA+IDAgfHwgcmVzdWx0cy53YXJuaW5nc0NvdW50ID4gMCB8fCBmaWx0ZXJlZE5vdGljZXNDb3VudCA+IDApIHtcclxuXHRcdFx0c2NvcmVUZXh0LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBgIChgIH0pO1xyXG5cdFx0XHRzY29yZVRleHQuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG5cdFx0XHRcdHRleHQ6IGAke3Jlc3VsdHMuaXNzdWVzQ291bnR9IGlzc3Vlc2AsXHJcblx0XHRcdFx0Y2xzOiAnc2VvLWlzc3Vlcy1jb3VudC10ZXh0J1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2NvcmVUZXh0LmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiAnLCAnIH0pO1xyXG5cdFx0XHRzY29yZVRleHQuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG5cdFx0XHRcdHRleHQ6IGAke3Jlc3VsdHMud2FybmluZ3NDb3VudH0gd2FybmluZ3NgLFxyXG5cdFx0XHRcdGNsczogJ3Nlby13YXJuaW5ncy1jb3VudC10ZXh0J1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0aWYgKGZpbHRlcmVkTm90aWNlc0NvdW50ID4gMCkge1xyXG5cdFx0XHRcdHNjb3JlVGV4dC5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogJywgJyB9KTtcclxuXHRcdFx0XHRzY29yZVRleHQuY3JlYXRlRWwoJ3NwYW4nLCB7IFxyXG5cdFx0XHRcdFx0dGV4dDogYCR7ZmlsdGVyZWROb3RpY2VzQ291bnR9IG5vdGljZXNgLFxyXG5cdFx0XHRcdFx0Y2xzOiAnc2VvLW5vdGljZXMtY291bnQtdGV4dCdcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzY29yZVRleHQuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICcpJyB9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBUZXh0IGlzIGFscmVhZHkgaW4gc2VudGVuY2UgY2FzZTsgZXhjbGFtYXRpb24gbWFyayBpcyBhcHByb3ByaWF0ZSBmb3Igc3VjY2VzcyBtZXNzYWdlXHJcblx0XHRcdHNjb3JlVGV4dC5jcmVhdGVFbCgnc3BhbicsIHsgXHJcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxyXG5cdFx0XHRcdHRleHQ6ICcgKEFsbCBjaGVja3MgcGFzc2VkISknLFxyXG5cdFx0XHRcdGNsczogJ3Nlby1zdWNjZXNzJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gUmlnaHQgc2lkZTogVG9nZ2xlIGJ1dHRvbiAoc3R5bGVkIGxpa2UgZ2xvYmFsIHNvcnQgaWNvbilcclxuXHRcdGNvbnN0IHRvZ2dsZUJ0biA9IHNjb3JlRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXRvZ2dsZS1pY29uJyB9KTtcclxuXHRcdC8vIEFwcGx5IHRoZSBjdXJyZW50IGNvbGxhcHNlIHN0YXRlIHRvIHRoZSBpY29uXHJcblx0XHRzZXRJY29uKHRvZ2dsZUJ0biwgdGhpcy5pc0NvbGxhcHNlZCA/ICdjaGV2cm9ucy11cC1kb3duJyA6ICdjaGV2cm9ucy1kb3duLXVwJyk7XHJcblx0XHRcclxuXHRcdHRvZ2dsZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdC8vIFRvZ2dsZSB0aGUgc3RhdGVcclxuXHRcdFx0dGhpcy5pc0NvbGxhcHNlZCA9ICF0aGlzLmlzQ29sbGFwc2VkO1xyXG5cdFx0XHQvLyBjaGV2cm9ucy1kb3duLXVwID0gXCJjb2xsYXBzZSBhbGxcIiwgY2hldnJvbnMtdXAtZG93biA9IFwiZXhwYW5kIGFsbFwiXHJcblx0XHRcdHNldEljb24odG9nZ2xlQnRuLCB0aGlzLmlzQ29sbGFwc2VkID8gJ2NoZXZyb25zLXVwLWRvd24nIDogJ2NoZXZyb25zLWRvd24tdXAnKTtcclxuXHRcdFx0dGhpcy50b2dnbGVDaGVja3NWaXNpYmlsaXR5KCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBJbmRpdmlkdWFsIGNoZWNrcyBjb250YWluZXJcclxuXHRcdGNvbnN0IGNoZWNrc0NvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1jaGVja3MnIH0pO1xyXG5cdFx0XHJcblx0XHRPYmplY3QuZW50cmllcyhyZXN1bHRzLmNoZWNrcykuZm9yRWFjaCgoW2NoZWNrTmFtZSwgY2hlY2tSZXN1bHRzXSkgPT4ge1xyXG5cdFx0XHRpZiAoY2hlY2tSZXN1bHRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWx3YXlzIHNob3cgUG90ZW50aWFsbHkgQnJva2VuIExpbmtzIHNvIG5vdGljZS1vbmx5IGNhc2VzIGFyZSB2aXNpYmxlXHJcblx0XHRcdFxyXG5cdFx0XHQvLyBEZXRlcm1pbmUgdGhlIGNoZWNrIHN0YXR1cyBmb3IgY29sb3IgY29kaW5nXHJcblx0XHRcdGNvbnN0IGNoZWNrSGFzRXJyb3JzID0gY2hlY2tSZXN1bHRzLnNvbWUociA9PiByLnNldmVyaXR5ID09PSAnZXJyb3InKTtcclxuXHRcdFx0Y29uc3QgY2hlY2tIYXNXYXJuaW5ncyA9IGNoZWNrUmVzdWx0cy5zb21lKHIgPT4gci5zZXZlcml0eSA9PT0gJ3dhcm5pbmcnKTtcclxuXHRcdFx0Y29uc3QgY2hlY2tIYXNOb3RpY2VzID0gY2hlY2tSZXN1bHRzLnNvbWUociA9PiByLnNldmVyaXR5ID09PSAnbm90aWNlJyk7XHJcblx0XHRcdGNvbnN0IGNoZWNrSGFzT25seUluZm8gPSBjaGVja1Jlc3VsdHMuZXZlcnkociA9PiByLnNldmVyaXR5ID09PSAnaW5mbycpO1xyXG5cdFx0XHRcclxuXHRcdFx0bGV0IHN0YXR1c0NsYXNzID0gJ3Nlby1wYXNzZWQnOyAvLyBEZWZhdWx0IHRvIGdyZWVuIGZvciBwYXNzZWQgY2hlY2tzXHJcblx0XHRcdGlmIChjaGVja0hhc0Vycm9ycykge1xyXG5cdFx0XHRcdHN0YXR1c0NsYXNzID0gJ3Nlby1lcnJvcic7XHJcblx0XHRcdH0gZWxzZSBpZiAoY2hlY2tIYXNXYXJuaW5ncykge1xyXG5cdFx0XHRcdHN0YXR1c0NsYXNzID0gJ3Nlby13YXJuaW5nJztcclxuXHRcdFx0fSBlbHNlIGlmIChjaGVja0hhc05vdGljZXMpIHtcclxuXHRcdFx0XHRzdGF0dXNDbGFzcyA9ICdzZW8tbm90aWNlJztcclxuXHRcdFx0fSBlbHNlIGlmIChjaGVja0hhc09ubHlJbmZvKSB7XHJcblx0XHRcdFx0c3RhdHVzQ2xhc3MgPSAnc2VvLXBhc3NlZCc7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGNoZWNrRWwgPSBjaGVja3NDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiBgc2VvLWNoZWNrICR7c3RhdHVzQ2xhc3N9YCB9KTtcclxuXHRcdFx0Y29uc3QgaGVhZGVyID0gY2hlY2tFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tY2hlY2staGVhZGVyIHNlby1jb2xsYXBzaWJsZS1oZWFkZXInIH0pO1xyXG5cdFx0XHRoZWFkZXIuc2V0QXR0cmlidXRlKCdkYXRhLWNoZWNrLW5hbWUnLCBjaGVja05hbWUpOyAvLyBTdG9yZSBjaGVjayBuYW1lIGZvciBzdGF0ZSB0cmFja2luZ1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ29udmVydCBjYW1lbENhc2UgdG8gc2VudGVuY2UgY2FzZSB3aXRoIHNwZWNpYWwgaGFuZGxpbmdcclxuXHRcdFx0bGV0IGRpc3BsYXlOYW1lID0gY2hlY2tOYW1lLnJlcGxhY2UoLyhbQS1aXSkvZywgJyAkMScpLnRyaW0oKVxyXG5cdFx0XHRcdC5yZXBsYWNlKC9eLi8sIHN0ciA9PiBzdHIudG9VcHBlckNhc2UoKSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBzcGVjaWZpYyBjaGVjayBuYW1lc1xyXG5cdFx0XHRpZiAoY2hlY2tOYW1lID09PSAnYnJva2VuTGlua3MnKSB7XHJcblx0XHRcdFx0ZGlzcGxheU5hbWUgPSAnQnJva2VuIEludGVybmFsIExpbmtzJztcclxuXHRcdFx0fSBlbHNlIGlmIChjaGVja05hbWUgPT09ICdleHRlcm5hbEJyb2tlbkxpbmtzJykge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgbm90aWNlLWJhc2VkIChleHRlcm5hbCBsaW5rcyBsaXN0aW5nKSBvciBlcnJvci1iYXNlZCAoYnJva2VuIGxpbmtzKVxyXG5cdFx0XHRcdGNvbnN0IGhhc05vdGljZXMgPSBjaGVja1Jlc3VsdHMuc29tZShyID0+IHIuc2V2ZXJpdHkgPT09ICdub3RpY2UnKTtcclxuXHRcdFx0XHRjb25zdCBoYXNFcnJvcnMgPSBjaGVja1Jlc3VsdHMuc29tZShyID0+IHIuc2V2ZXJpdHkgPT09ICdlcnJvcicpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChoYXNOb3RpY2VzICYmICFoYXNFcnJvcnMpIHtcclxuXHRcdFx0XHRcdGRpc3BsYXlOYW1lID0gJ0V4dGVybmFsIExpbmtzJztcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0ZGlzcGxheU5hbWUgPSAnRXh0ZXJuYWwgQnJva2VuIExpbmtzJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSBpZiAoY2hlY2tOYW1lID09PSAnZHVwbGljYXRlVGl0bGVzJykge1xyXG5cdFx0XHRcdGRpc3BsYXlOYW1lID0gJ0R1cGxpY2F0ZSBUaXRsZXMnO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGNoZWNrTmFtZSA9PT0gJ2R1cGxpY2F0ZURlc2NyaXB0aW9ucycpIHtcclxuXHRcdFx0XHRkaXNwbGF5TmFtZSA9ICdEdXBsaWNhdGUgRGVzY3JpcHRpb25zJztcclxuXHRcdFx0fSBlbHNlIGlmIChjaGVja05hbWUgPT09ICdkdXBsaWNhdGVDb250ZW50Jykge1xyXG5cdFx0XHRcdGRpc3BsYXlOYW1lID0gJ0R1cGxpY2F0ZSBDb250ZW50JztcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQWRkIGNvbGxhcHNlIGljb25cclxuXHRcdFx0Y29uc3QgY29sbGFwc2VJY29uID0gaGVhZGVyLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdzZW8tY29sbGFwc2UtaWNvbicgfSk7XHJcblx0XHRcdGNvbGxhcHNlSWNvbi5hcHBlbmRDaGlsZChjcmVhdGVDb2xsYXBzZUljb24oKSk7XHJcblx0XHRcdFxyXG5cdFx0XHRoZWFkZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IGRpc3BsYXlOYW1lIH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc3RhdHVzSWNvbiA9IGhlYWRlci5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnc2VvLXN0YXR1cycgfSk7XHJcblx0XHRcdGNvbnN0IGhhc0Vycm9ycyA9IGNoZWNrUmVzdWx0cy5zb21lKHIgPT4gci5zZXZlcml0eSA9PT0gJ2Vycm9yJyk7XHJcblx0XHRcdGNvbnN0IGhhc1dhcm5pbmdzID0gY2hlY2tSZXN1bHRzLnNvbWUociA9PiByLnNldmVyaXR5ID09PSAnd2FybmluZycpO1xyXG5cdFx0XHRjb25zdCBoYXNOb3RpY2VzID0gY2hlY2tSZXN1bHRzLnNvbWUociA9PiByLnNldmVyaXR5ID09PSAnbm90aWNlJyk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBVc2UgTHVjaWRlIGljb25zIGZvciBzdGF0dXNcclxuXHRcdFx0aWYgKGhhc0Vycm9ycykge1xyXG5cdFx0XHRcdHNldEljb24oc3RhdHVzSWNvbiwgJ3gtY2lyY2xlJyk7XHJcblx0XHRcdH0gZWxzZSBpZiAoaGFzV2FybmluZ3MpIHtcclxuXHRcdFx0XHRzZXRJY29uKHN0YXR1c0ljb24sICd0cmlhbmdsZS1hbGVydCcpO1xyXG5cdFx0XHR9IGVsc2UgaWYgKGhhc05vdGljZXMpIHtcclxuXHRcdFx0XHRzZXRJY29uKHN0YXR1c0ljb24sICdpbmZvJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0c2V0SWNvbihzdGF0dXNJY29uLCAnY2lyY2xlLWNoZWNrJyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlc3VsdHNcclxuXHRcdFx0Y29uc3QgcmVzdWx0c0xpc3QgPSBjaGVja0VsLmNyZWF0ZUVsKCd1bCcsIHsgY2xzOiAnc2VvLXJlc3VsdHMgc2VvLXJlc3VsdHMtbGlzdC1leHBhbmRlZCcgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBcHBseSBzYXZlZCBjb2xsYXBzZSBzdGF0ZVxyXG5cdFx0XHRjb25zdCBzYXZlZENvbGxhcHNlU3RhdGUgPSB0aGlzLmluZGl2aWR1YWxDb2xsYXBzZVN0YXRlcy5nZXQoY2hlY2tOYW1lKTtcclxuXHRcdFx0aWYgKHNhdmVkQ29sbGFwc2VTdGF0ZSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0aWYgKHNhdmVkQ29sbGFwc2VTdGF0ZSkge1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LmFkZCgnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0XHRcdHJlc3VsdHNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1yZXN1bHRzLWxpc3QtZXhwYW5kZWQnKTtcclxuXHRcdFx0XHRcdGNvbnN0IGljb24gPSBjb2xsYXBzZUljb24ucXVlcnlTZWxlY3Rvcignc3ZnJyk7XHJcblx0XHRcdFx0XHRpZiAoaWNvbikge1xyXG5cdFx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tY29sbGFwc2UtaWNvbi1ub3JtYWwnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LmFkZCgnc2VvLXJlc3VsdHMtbGlzdC1leHBhbmRlZCcpO1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0XHRcdGNvbnN0IGljb24gPSBjb2xsYXBzZUljb24ucXVlcnlTZWxlY3Rvcignc3ZnJyk7XHJcblx0XHRcdFx0XHRpZiAoaWNvbikge1xyXG5cdFx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ3Nlby1jb2xsYXBzZS1pY29uLW5vcm1hbCcpO1xyXG5cdFx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNoZWNrUmVzdWx0cy5mb3JFYWNoKHJlc3VsdCA9PiB7XHJcblx0XHRcdFx0Y29uc3QgbGkgPSByZXN1bHRzTGlzdC5jcmVhdGVFbCgnbGknLCB7IFxyXG5cdFx0XHRcdFx0Y2xzOiBgc2VvLXJlc3VsdCBzZW8tJHtyZXN1bHQuc2V2ZXJpdHl9YFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIENyZWF0ZSBjbGlja2FibGUgbWVzc2FnZSBpZiBwb3NpdGlvbiBpbmZvIGlzIGF2YWlsYWJsZVxyXG5cdFx0XHRcdGlmIChyZXN1bHQucG9zaXRpb24pIHtcclxuXHRcdFx0XHRcdGNvbnN0IG1lc3NhZ2VFbCA9IGxpLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuXHRcdFx0XHRcdFx0dGV4dDogcmVzdWx0Lm1lc3NhZ2UsXHJcblx0XHRcdFx0XHRcdGNsczogJ3Nlby1yZXN1bHQtbWVzc2FnZSBzZW8tY2xpY2thYmxlJ1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFkZCBjbGljayBoYW5kbGVyIGZvciBuYXZpZ2F0aW9uXHJcblx0XHRcdFx0XHRtZXNzYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm5hdmlnYXRlVG9Qb3NpdGlvbihyZXN1bHQucG9zaXRpb24hKTtcclxuXHRcdFx0XHRcdFx0fSkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBBZGQgdmlzdWFsIGluZGljYXRvciB0aGF0IGl0J3MgY2xpY2thYmxlXHJcblx0XHRcdFx0XHRtZXNzYWdlRWwuYWRkQ2xhc3MoJ3Nlby1jbGlja2FibGUtbWVzc2FnZScpO1xyXG5cdFx0XHRcdFx0bWVzc2FnZUVsLnRpdGxlID0gJ0NsaWNrIHRvIGp1bXAgdG8gdGhpcyBpc3N1ZSBpbiB0aGUgbm90ZSc7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIE5vbi1jbGlja2FibGUgbWVzc2FnZSBmb3IgcmVzdWx0cyB3aXRob3V0IHBvc2l0aW9uIGluZm9cclxuXHRcdFx0XHRcdGxpLmNyZWF0ZUVsKCdzcGFuJywgeyBcclxuXHRcdFx0XHRcdFx0dGV4dDogcmVzdWx0Lm1lc3NhZ2UsXHJcblx0XHRcdFx0XHRcdGNsczogJ3Nlby1yZXN1bHQtbWVzc2FnZSdcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAocmVzdWx0LnN1Z2dlc3Rpb24pIHtcclxuXHRcdFx0XHRcdGNvbnN0IHN1Z2dlc3Rpb25FbCA9IGxpLmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG5cdFx0XHRcdFx0XHRjbHM6ICdzZW8tc3VnZ2VzdGlvbidcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQvLyBDaGVjayBpZiBzdWdnZXN0aW9uIGNvbnRhaW5zIEhUTUwgKGZpbGUgbGlua3MpXHJcblx0XHRcdFx0XHRpZiAocmVzdWx0LnN1Z2dlc3Rpb24uaW5jbHVkZXMoJzxhIGhyZWY9XCIjXCIgZGF0YS1maWxlLXBhdGg9JykpIHtcclxuXHRcdFx0XHRcdFx0Ly8gUGFyc2UgSFRNTCBzYWZlbHkgdXNpbmcgRE9NUGFyc2VyXHJcblx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhyZXN1bHQuc3VnZ2VzdGlvbiwgJ3RleHQvaHRtbCcpO1xyXG5cdFx0XHRcdFx0XHRjb25zdCBib2R5ID0gZG9jLmJvZHk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHQvLyBNb3ZlIGFsbCBub2RlcyBmcm9tIHBhcnNlZCBib2R5IHRvIHN1Z2dlc3Rpb24gZWxlbWVudFxyXG5cdFx0XHRcdFx0XHR3aGlsZSAoYm9keS5maXJzdENoaWxkKSB7XHJcblx0XHRcdFx0XHRcdFx0c3VnZ2VzdGlvbkVsLmFwcGVuZENoaWxkKGJvZHkuZmlyc3RDaGlsZCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdC8vIFVzZSBldmVudCBkZWxlZ2F0aW9uIG9uIHRoZSBzdWdnZXN0aW9uIGVsZW1lbnRcclxuXHRcdFx0XHRcdFx0c3VnZ2VzdGlvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRcdGlmICh0YXJnZXQgJiYgdGFyZ2V0LnRhZ05hbWUgPT09ICdBJyAmJiB0YXJnZXQuaGFzQXR0cmlidXRlKCdkYXRhLWZpbGUtcGF0aCcpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZVBhdGggPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWZpbGUtcGF0aCcpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoZmlsZVBhdGgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLm9uRmlsZUNsaWNrKGZpbGVQYXRoKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH0pKCk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0c3VnZ2VzdGlvbkVsLnRleHRDb250ZW50ID0gcmVzdWx0LnN1Z2dlc3Rpb247XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEFkZCBtb3VzZWRvd24gaGFuZGxlciBmb3IgY29sbGFwc2UgZnVuY3Rpb25hbGl0eSAod29ya3MgYmV0dGVyIHdpdGhvdXQgZm9jdXMpXHJcblx0XHRcdGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEdldCBvciBpbml0aWFsaXplIHRoZSBjb2xsYXBzZSBzdGF0ZSBmb3IgdGhpcyBjaGVja1xyXG5cdFx0XHRcdGNvbnN0IGN1cnJlbnRTdGF0ZSA9IHRoaXMuaW5kaXZpZHVhbENvbGxhcHNlU3RhdGVzLmdldChjaGVja05hbWUpID8/IGZhbHNlO1xyXG5cdFx0XHRcdGNvbnN0IG5ld1N0YXRlID0gIWN1cnJlbnRTdGF0ZTtcclxuXHRcdFx0XHR0aGlzLmluZGl2aWR1YWxDb2xsYXBzZVN0YXRlcy5zZXQoY2hlY2tOYW1lLCBuZXdTdGF0ZSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gQXBwbHkgdGhlIG5ldyBzdGF0ZVxyXG5cdFx0XHRcdGlmIChuZXdTdGF0ZSkge1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2VvLXJlc3VsdHMtbGlzdC1leHBhbmRlZCcpO1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LmFkZCgnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0XHRcdHJlc3VsdHNMaXN0LmNsYXNzTGlzdC5hZGQoJ3Nlby1yZXN1bHRzLWxpc3QtZXhwYW5kZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ly8gUm90YXRlIHRoZSBjb2xsYXBzZSBpY29uXHJcblx0XHRcdFx0Y29uc3QgaWNvbiA9IGNvbGxhcHNlSWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcclxuXHRcdFx0XHRpZiAoaWNvbikge1xyXG5cdFx0XHRcdFx0aWYgKG5ld1N0YXRlKSB7XHJcblx0XHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LnJlbW92ZSgnc2VvLWNvbGxhcHNlLWljb24tbm9ybWFsJyk7XHJcblx0XHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tcm90YXRlZCcpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tY29sbGFwc2UtaWNvbi1yb3RhdGVkJyk7XHJcblx0XHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tbm9ybWFsJyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIElmIGFueSBpbmRpdmlkdWFsIGl0ZW0gaXMgZXhwYW5kZWQsIHJlc2V0IG1haW4gdG9nZ2xlIHRvIFwiY29sbGFwc2UgYWxsXCIgc3RhdGVcclxuXHRcdFx0XHRpZiAoIW5ld1N0YXRlKSB7XHJcblx0XHRcdFx0XHQvLyBJdGVtIHdhcyBqdXN0IGV4cGFuZGVkLCByZXNldCBtYWluIHRvZ2dsZSB0byBcImNvbGxhcHNlIGFsbFwiIHN0YXRlXHJcblx0XHRcdFx0XHR0aGlzLmlzQ29sbGFwc2VkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRjb25zdCB0b2dnbGVCdG4gPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc2VvLXRvZ2dsZS1pY29uJykgYXMgSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFx0XHRpZiAodG9nZ2xlQnRuKSB7XHJcblx0XHRcdFx0XHRcdHNldEljb24odG9nZ2xlQnRuLCAnY2hldnJvbnMtZG93bi11cCcpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJlbmRlckdsb2JhbFJlc3VsdHMocmVzdWx0czogU0VPUmVzdWx0c1tdLCBzZXR0aW5ncz86IFNFT1NldHRpbmdzKTogdm9pZCB7XHJcblx0XHRjb25zdCBzdW1tYXJ5ID0gdGhpcy5jb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXZhdWx0LXN1bW1hcnknIH0pO1xyXG5cdFx0XHJcblx0XHRjb25zdCB0b3RhbEZpbGVzID0gcmVzdWx0cy5sZW5ndGg7XHJcblx0XHRjb25zdCB0b3RhbElzc3VlcyA9IHJlc3VsdHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIuaXNzdWVzQ291bnQsIDApO1xyXG5cdFx0Y29uc3QgdG90YWxXYXJuaW5ncyA9IHJlc3VsdHMucmVkdWNlKChzdW0sIHIpID0+IHN1bSArIHIud2FybmluZ3NDb3VudCwgMCk7XHJcblx0XHRcclxuXHRcdC8vIFVzZSByYXcgc3VtIG9mIG5vdGljZXMgc28gUEJMIG5vdGljZXMgYXJlIGluY2x1ZGVkXHJcblx0XHRjb25zdCB0b3RhbE5vdGljZXMgPSByZXN1bHRzLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyByLm5vdGljZXNDb3VudCwgMCk7XHJcblx0XHRcclxuXHRcdGNvbnN0IGF2Z1Njb3JlID0gTWF0aC5yb3VuZChcclxuXHRcdFx0cmVzdWx0cy5yZWR1Y2UoKHN1bSwgcikgPT4gc3VtICsgci5vdmVyYWxsU2NvcmUsIDApIC8gdG90YWxGaWxlc1xyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0Ly8gQ2hlY2sgaWYgbm90aWNlcyBzaG91bGQgYmUgc2hvd24gKGJvdGggcG90ZW50aWFsbHkgYnJva2VuIGNoZWNrcyBtdXN0IGJlIGVuYWJsZWQpXHJcblx0XHRjb25zdCBzaG93Tm90aWNlcyA9IHNldHRpbmdzID8gXHJcblx0XHRcdChzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuTGlua3MgJiYgc2V0dGluZ3MuY2hlY2tQb3RlbnRpYWxseUJyb2tlbkVtYmVkcykgOiBcclxuXHRcdFx0dHJ1ZTtcclxuXHJcblx0XHQvLyBDcmVhdGUgc3RhdHMgZ3JpZFxyXG5cdFx0Y29uc3Qgc3RhdHNHcmlkID0gc3VtbWFyeS5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdHMtZ3JpZCcgfSk7XHJcblx0XHRcclxuXHRcdC8vIE92ZXJhbGwgc2NvcmUgZmlyc3Qgd2l0aCBjb2xvciBjb2RpbmdcclxuXHRcdGNvbnN0IHNjb3JlU3RhdCA9IHN0YXRzR3JpZC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdC1pdGVtJyB9KTtcclxuXHRcdGNvbnN0IHNjb3JlTnVtYmVyID0gc2NvcmVTdGF0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LW51bWJlcicsIHRleHQ6IGAke2F2Z1Njb3JlfSVgIH0pO1xyXG5cdFx0aWYgKGF2Z1Njb3JlID49IDgwKSB7XHJcblx0XHRcdHNjb3JlTnVtYmVyLmFkZENsYXNzKCdzZW8tc2NvcmUtZXhjZWxsZW50Jyk7XHJcblx0XHR9IGVsc2UgaWYgKGF2Z1Njb3JlID49IDYwKSB7XHJcblx0XHRcdHNjb3JlTnVtYmVyLmFkZENsYXNzKCdzZW8tc2NvcmUtZ29vZCcpO1xyXG5cdFx0fSBlbHNlIGlmIChhdmdTY29yZSA+PSA0MCkge1xyXG5cdFx0XHRzY29yZU51bWJlci5hZGRDbGFzcygnc2VvLXNjb3JlLWZhaXInKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNjb3JlTnVtYmVyLmFkZENsYXNzKCdzZW8tc2NvcmUtcG9vcicpO1xyXG5cdFx0fVxyXG5cdFx0c2NvcmVTdGF0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LWxhYmVsJywgdGV4dDogJ0F2ZXJhZ2Ugc2NvcmUnIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBJc3N1ZXMgY291bnQgd2l0aCBjb2xvciBjb2RpbmdcclxuXHRcdGNvbnN0IGlzc3Vlc1N0YXQgPSBzdGF0c0dyaWQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXQtaXRlbScgfSk7XHJcblx0XHRjb25zdCBpc3N1ZXNOdW1iZXIgPSBpc3N1ZXNTdGF0LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LW51bWJlcicsIHRleHQ6IHRvdGFsSXNzdWVzLnRvU3RyaW5nKCkgfSk7XHJcblx0XHRpZiAodG90YWxJc3N1ZXMgPiAwKSB7XHJcblx0XHRcdGlzc3Vlc051bWJlci5hZGRDbGFzcygnc2VvLWlzc3Vlcy1jb3VudCcpO1xyXG5cdFx0fVxyXG5cdFx0aXNzdWVzU3RhdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdC1sYWJlbCcsIHRleHQ6ICdJc3N1ZXMnIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBXYXJuaW5ncyBjb3VudCB3aXRoIGNvbG9yIGNvZGluZ1xyXG5cdFx0Y29uc3Qgd2FybmluZ3NTdGF0ID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LWl0ZW0nIH0pO1xyXG5cdFx0Y29uc3Qgd2FybmluZ3NOdW1iZXIgPSB3YXJuaW5nc1N0YXQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXQtbnVtYmVyJywgdGV4dDogdG90YWxXYXJuaW5ncy50b1N0cmluZygpIH0pO1xyXG5cdFx0aWYgKHRvdGFsV2FybmluZ3MgPiAwKSB7XHJcblx0XHRcdHdhcm5pbmdzTnVtYmVyLmFkZENsYXNzKCdzZW8td2FybmluZ3MtY291bnQnKTtcclxuXHRcdH1cclxuXHRcdHdhcm5pbmdzU3RhdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdC1sYWJlbCcsIHRleHQ6ICdXYXJuaW5ncycgfSk7XHJcblx0XHRcclxuXHRcdC8vIE5vdGljZXMgY291bnQgd2l0aCBjb2xvciBjb2RpbmcgKG9ubHkgc2hvdyBpZiBub3RpY2VzIGFyZSBlbmFibGVkKVxyXG5cdFx0aWYgKHNob3dOb3RpY2VzKSB7XHJcblx0XHRcdGNvbnN0IG5vdGljZXNTdGF0ID0gc3RhdHNHcmlkLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0LWl0ZW0nIH0pO1xyXG5cdFx0XHRjb25zdCBub3RpY2VzTnVtYmVyID0gbm90aWNlc1N0YXQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXN0YXQtbnVtYmVyJywgdGV4dDogdG90YWxOb3RpY2VzLnRvU3RyaW5nKCkgfSk7XHJcblx0XHRcdGlmICh0b3RhbE5vdGljZXMgPiAwKSB7XHJcblx0XHRcdFx0bm90aWNlc051bWJlci5hZGRDbGFzcygnc2VvLW5vdGljZXMtY291bnQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRub3RpY2VzU3RhdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdC1sYWJlbCcsIHRleHQ6ICdOb3RpY2VzJyB9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJlbmRlcklzc3Vlc0xpc3QocmVzdWx0czogU0VPUmVzdWx0c1tdLCBjdXJyZW50U29ydDogc3RyaW5nLCBvblNvcnRDaGFuZ2U6IChzb3J0VHlwZTogc3RyaW5nKSA9PiB2b2lkLCBvblNob3dTb3J0TWVudTogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkLCBzZXR0aW5ncz86IFNFT1NldHRpbmdzKTogdm9pZCB7XHJcblx0XHQvLyBDaGVjayBpZiBub3RpY2VzIHNob3VsZCBiZSBzaG93biAoYm90aCBwb3RlbnRpYWxseSBicm9rZW4gY2hlY2tzIG11c3QgYmUgZW5hYmxlZClcclxuXHRcdGNvbnN0IHNob3dOb3RpY2VzID0gc2V0dGluZ3MgPyBcclxuXHRcdFx0KHNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rcyAmJiBzZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuRW1iZWRzKSA6IFxyXG5cdFx0XHR0cnVlO1xyXG5cdFx0XHJcblx0XHRjb25zdCBpc3N1ZXNGaWxlcyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4ge1xyXG5cdFx0XHRjb25zdCBoYXNJc3N1ZXMgPSByLmlzc3Vlc0NvdW50ID4gMDtcclxuXHRcdFx0Y29uc3QgaGFzV2FybmluZ3MgPSByLndhcm5pbmdzQ291bnQgPiAwO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gVXNlIHJhdyBub3RpY2VzIGNvdW50IHNvIGl0IG1hdGNoZXMgdmlzaWJsZSBlbnRyaWVzXHJcblx0XHRcdGNvbnN0IGhhc05vdGljZXMgPSBzaG93Tm90aWNlcyAmJiByLm5vdGljZXNDb3VudCA+IDA7XHJcblx0XHRcdHJldHVybiBoYXNJc3N1ZXMgfHwgaGFzV2FybmluZ3MgfHwgaGFzTm90aWNlcztcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGlzc3Vlc0ZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuXHRcdGNvbnN0IGlzc3Vlc0xpc3QgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8taXNzdWVzLWxpc3QnIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBIZWFkZXIgd2l0aCBzb3J0aW5nIGJ1dHRvbnMgYW5kIGNvbGxhcHNlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IGlzc3Vlc0hlYWRlciA9IGlzc3Vlc0xpc3QuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWlzc3Vlcy1oZWFkZXItY29udGFpbmVyJyB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gQ29sbGFwc2UgaWNvbiAob25seSB0aGlzIHNob3VsZCBiZSBjbGlja2FibGUpXHJcblx0XHRjb25zdCBjb2xsYXBzZUljb24gPSBpc3N1ZXNIZWFkZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3Nlby1jb2xsYXBzZS1pY29uIHNlby1jb2xsYXBzaWJsZS1oZWFkZXInIH0pO1xyXG5cdFx0Y29sbGFwc2VJY29uLmFwcGVuZENoaWxkKGNyZWF0ZUNvbGxhcHNlSWNvbigpKTtcclxuXHRcdFxyXG5cdFx0aXNzdWVzSGVhZGVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0ZpbGVzIHdpdGggcmVzdWx0cycsIGNsczogJ3Nlby1pc3N1ZXMtaGVhZGVyJyB9KTtcclxuXHRcdFxyXG5cdFx0Ly8gU29ydCBidXR0b25cclxuXHRcdGNvbnN0IHNvcnRCdG4gPSBpc3N1ZXNIZWFkZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0Y2xzOiAnc2VvLXNvcnQtYnRuJyxcclxuXHRcdFx0YXR0cjogeyAnYXJpYS1sYWJlbCc6ICdTb3J0IGZpbGVzJyB9XHJcblx0XHR9KTtcclxuXHRcdHNldEljb24oc29ydEJ0biwgJ2Fycm93LXVwLW5hcnJvdy13aWRlJyk7XHJcblx0XHRzb3J0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TaG93U29ydE1lbnUpO1xyXG5cdFx0XHJcblx0XHQvLyBGaWxlcyBsaXN0IGNvbnRhaW5lclxyXG5cdFx0Y29uc3QgZmlsZXNMaXN0Q29udGFpbmVyID0gaXNzdWVzTGlzdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tZmlsZXMtbGlzdC1jb250YWluZXInIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBBcHBseSBzYXZlZCBzb3J0IHByZWZlcmVuY2VcclxuXHRcdGNvbnN0IHNvcnRlZEZpbGVzID0gdGhpcy5zb3J0RmlsZXMoaXNzdWVzRmlsZXMsIGN1cnJlbnRTb3J0KTtcclxuXHRcdFxyXG5cdFx0c29ydGVkRmlsZXMuZm9yRWFjaChyZXN1bHQgPT4ge1xyXG5cdFx0XHRjb25zdCBmaWxlRWwgPSBmaWxlc0xpc3RDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWZpbGUtaXNzdWUnIH0pO1xyXG5cdFx0XHRmaWxlRWwuc2V0QXR0cmlidXRlKCdkYXRhLWZpbGUtcGF0aCcsIHJlc3VsdC5maWxlKTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIE1ha2UgZmlsZSBwYXRoIGNsaWNrYWJsZVxyXG5cdFx0XHRjb25zdCBmaWxlTGluayA9IGZpbGVFbC5jcmVhdGVFbCgnYScsIHsgXHJcblx0XHRcdFx0dGV4dDogcmVzdWx0LmRpc3BsYXlOYW1lIHx8IGdldERpc3BsYXlQYXRoKHJlc3VsdC5maWxlKSxcclxuXHRcdFx0XHRjbHM6ICdzZW8tZmlsZS1saW5rJyxcclxuXHRcdFx0XHRocmVmOiAnIydcclxuXHRcdFx0fSk7XHJcblx0XHRcdGZpbGVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5vbkZpbGVDbGljayhyZXN1bHQuZmlsZSk7XHJcblx0XHRcdFx0fSkoKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBTdGF0cyBhbmQgYXVkaXQgYnV0dG9uIGNvbnRhaW5lclxyXG5cdFx0XHRjb25zdCBzdGF0c0NvbnRhaW5lciA9IGZpbGVFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tc3RhdHMtY29udGFpbmVyJyB9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIElzc3Vlcywgd2FybmluZ3MsIGFuZCBub3RpY2VzIHRleHRcclxuXHRcdFx0Y29uc3Qgc3RhdHNUZXh0ID0gW107XHJcblx0XHRcdGlmIChyZXN1bHQuaXNzdWVzQ291bnQgPiAwKSBzdGF0c1RleHQucHVzaChgJHtyZXN1bHQuaXNzdWVzQ291bnR9IGlzc3Vlc2ApO1xyXG5cdFx0XHRpZiAocmVzdWx0Lndhcm5pbmdzQ291bnQgPiAwKSBzdGF0c1RleHQucHVzaChgJHtyZXN1bHQud2FybmluZ3NDb3VudH0gd2FybmluZ3NgKTtcclxuXHRcdFx0aWYgKHNob3dOb3RpY2VzICYmIHJlc3VsdC5ub3RpY2VzQ291bnQgPiAwKSBzdGF0c1RleHQucHVzaChgJHtyZXN1bHQubm90aWNlc0NvdW50fSBub3RpY2VzYCk7XHJcblx0XHRcdFxyXG5cdFx0XHRzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgXHJcblx0XHRcdFx0dGV4dDogc3RhdHNUZXh0LmpvaW4oJywgJyksXHJcblx0XHRcdFx0Y2xzOiAnc2VvLWZpbGUtc3RhdHMnXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQXVkaXQgYnV0dG9uXHJcblx0XHRcdGNvbnN0IGF1ZGl0QnRuID0gc3RhdHNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuXHRcdFx0XHRjbHM6ICdjbGlja2FibGUtaWNvbiBzZW8tYXVkaXQtYnRuJyxcclxuXHRcdFx0XHRhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ0F1ZGl0IHRoaXMgbm90ZScgfVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0c2V0SWNvbihhdWRpdEJ0biwgJ3NlYXJjaC1jaGVjaycpO1xyXG5cdFx0XHRhdWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5vbkZpbGVBdWRpdChyZXN1bHQuZmlsZSk7XHJcblx0XHRcdFx0fSkoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBBZGQgY29sbGFwc2UgZnVuY3Rpb25hbGl0eSB0byBvbmx5IHRoZSBhcnJvdyBpY29uXHJcblx0XHRjb2xsYXBzZUljb24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRjb25zdCBpc0NvbGxhcHNlZCA9IGZpbGVzTGlzdENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ3Nlby1yZXN1bHRzLWxpc3QtY29sbGFwc2VkJyk7XHJcblx0XHRcdGlmIChpc0NvbGxhcHNlZCkge1xyXG5cdFx0XHRcdGZpbGVzTGlzdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdGZpbGVzTGlzdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdzZW8tcmVzdWx0cy1saXN0LWV4cGFuZGVkJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZmlsZXNMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1yZXN1bHRzLWxpc3QtZXhwYW5kZWQnKTtcclxuXHRcdFx0XHRmaWxlc0xpc3RDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gUm90YXRlIHRoZSBjb2xsYXBzZSBpY29uXHJcblx0XHRcdGNvbnN0IGljb24gPSBjb2xsYXBzZUljb24ucXVlcnlTZWxlY3Rvcignc3ZnJyk7XHJcblx0XHRcdGlmIChpY29uKSB7XHJcblx0XHRcdFx0aWYgKGlzQ29sbGFwc2VkKSB7XHJcblx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LmFkZCgnc2VvLWNvbGxhcHNlLWljb24tbm9ybWFsJyk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LnJlbW92ZSgnc2VvLWNvbGxhcHNlLWljb24tbm9ybWFsJyk7XHJcblx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFkZCBcIkZpbGVzIHRoYXQgcGFzc1wiIHNlY3Rpb25cclxuXHRcdHRoaXMucmVuZGVyUGFzc2luZ0ZpbGVzTGlzdChyZXN1bHRzLCBjdXJyZW50U29ydCwgc2hvd05vdGljZXMpO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSByZW5kZXJQYXNzaW5nRmlsZXNMaXN0KHJlc3VsdHM6IFNFT1Jlc3VsdHNbXSwgY3VycmVudFNvcnQ6IHN0cmluZywgc2hvd05vdGljZXM6IGJvb2xlYW4pOiB2b2lkIHtcclxuXHRcdC8vIEZpbHRlciBmb3IgZmlsZXMgdGhhdCBoYXZlIG5vIGlzc3VlcyBvciB3YXJuaW5ncyAob25seSBub3RpY2VzIG9yIG5vdGhpbmcpXHJcblx0XHRjb25zdCBwYXNzaW5nRmlsZXMgPSByZXN1bHRzLmZpbHRlcihyID0+IHtcclxuXHRcdFx0Y29uc3QgaGFzSXNzdWVzID0gci5pc3N1ZXNDb3VudCA+IDA7XHJcblx0XHRcdGNvbnN0IGhhc1dhcm5pbmdzID0gci53YXJuaW5nc0NvdW50ID4gMDtcclxuXHRcdFx0cmV0dXJuICFoYXNJc3N1ZXMgJiYgIWhhc1dhcm5pbmdzO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKHBhc3NpbmdGaWxlcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcblx0XHRjb25zdCBwYXNzaW5nTGlzdCA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1pc3N1ZXMtbGlzdCcgfSk7XHJcblx0XHRcclxuXHRcdC8vIEhlYWRlciB3aXRoIGNvbGxhcHNlIGZ1bmN0aW9uYWxpdHlcclxuXHRcdGNvbnN0IHBhc3NpbmdIZWFkZXIgPSBwYXNzaW5nTGlzdC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8taXNzdWVzLWhlYWRlci1jb250YWluZXInIH0pO1xyXG5cdFx0XHJcblx0XHQvLyBDb2xsYXBzZSBpY29uIChvbmx5IHRoaXMgc2hvdWxkIGJlIGNsaWNrYWJsZSkgLSBzdGFydCB3aXRoIHJpZ2h0IGFycm93IChjb2xsYXBzZWQgc3RhdGUpXHJcblx0XHRjb25zdCBjb2xsYXBzZUljb24gPSBwYXNzaW5nSGVhZGVyLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdzZW8tY29sbGFwc2UtaWNvbiBzZW8tY29sbGFwc2libGUtaGVhZGVyJyB9KTtcclxuXHRcdGNvbGxhcHNlSWNvbi5hcHBlbmRDaGlsZChjcmVhdGVDb2xsYXBzZUljb24oKSk7XHJcblx0XHRcclxuXHRcdC8vIFN0YXJ0IHdpdGggcmlnaHQgYXJyb3cgKGNvbGxhcHNlZCBzdGF0ZSkgYW5kIGFkZCByb3RhdGlvbiBjbGFzc1xyXG5cdFx0Y29uc3QgaWNvbiA9IGNvbGxhcHNlSWNvbi5xdWVyeVNlbGVjdG9yKCdzdmcnKTtcclxuXHRcdGlmIChpY29uKSB7XHJcblx0XHRcdC8vIFJvdGF0ZSB0aGUgZG93biBhcnJvdyB0byBwb2ludCByaWdodCAoY29sbGFwc2VkIHN0YXRlKVxyXG5cdFx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gQ2VudGVyIHRoZSBoZWFkaW5nXHJcblx0XHRjb25zdCBoZWFkaW5nQ29udGFpbmVyID0gcGFzc2luZ0hlYWRlci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8taGVhZGluZy1jZW50ZXInIH0pO1xyXG5cdFx0aGVhZGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdGaWxlcyB0aGF0IHBhc3MnLCBjbHM6ICdzZW8taXNzdWVzLWhlYWRlcicgfSk7XHJcblx0XHRcclxuXHRcdC8vIEZpbGVzIGxpc3QgY29udGFpbmVyIChjb2xsYXBzZWQgYnkgZGVmYXVsdClcclxuXHRcdGNvbnN0IGZpbGVzTGlzdENvbnRhaW5lciA9IHBhc3NpbmdMaXN0LmNyZWF0ZUVsKCdkaXYnLCB7IFxyXG5cdFx0XHRjbHM6ICdzZW8tZmlsZXMtbGlzdC1jb250YWluZXIgc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnIFxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdC8vIEFwcGx5IHNhbWUgc29ydGluZyBhcyB0aGUgbWFpbiBsaXN0XHJcblx0XHRjb25zdCBzb3J0ZWRGaWxlcyA9IHRoaXMuc29ydEZpbGVzKHBhc3NpbmdGaWxlcywgY3VycmVudFNvcnQpO1xyXG5cdFx0XHJcblx0XHRzb3J0ZWRGaWxlcy5mb3JFYWNoKHJlc3VsdCA9PiB7XHJcblx0XHRcdGNvbnN0IGZpbGVFbCA9IGZpbGVzTGlzdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tZmlsZS1pc3N1ZScgfSk7XHJcblx0XHRcdGZpbGVFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsZS1wYXRoJywgcmVzdWx0LmZpbGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gTWFrZSBmaWxlIHBhdGggY2xpY2thYmxlXHJcblx0XHRcdGNvbnN0IGZpbGVMaW5rID0gZmlsZUVsLmNyZWF0ZUVsKCdhJywgeyBcclxuXHRcdFx0XHR0ZXh0OiByZXN1bHQuZGlzcGxheU5hbWUgfHwgZ2V0RGlzcGxheVBhdGgocmVzdWx0LmZpbGUpLFxyXG5cdFx0XHRcdGNsczogJ3Nlby1maWxlLWxpbmsnLFxyXG5cdFx0XHRcdGhyZWY6ICcjJ1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0ZmlsZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9uRmlsZUNsaWNrKHJlc3VsdC5maWxlKTtcclxuXHRcdFx0XHR9KSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdC8vIFN0YXRzIGFuZCBhdWRpdCBidXR0b24gY29udGFpbmVyXHJcblx0XHRcdGNvbnN0IHN0YXRzQ29udGFpbmVyID0gZmlsZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1zdGF0cy1jb250YWluZXInIH0pO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gT25seSBzaG93IG5vdGljZXMgaWYgdGhleSBleGlzdFxyXG5cdFx0XHRpZiAoc2hvd05vdGljZXMgJiYgcmVzdWx0Lm5vdGljZXNDb3VudCA+IDApIHtcclxuXHRcdFx0XHRzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgXHJcblx0XHRcdFx0XHR0ZXh0OiBgJHtyZXN1bHQubm90aWNlc0NvdW50fSBub3RpY2VzYCxcclxuXHRcdFx0XHRcdGNsczogJ3Nlby1maWxlLXN0YXRzJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBdWRpdCBidXR0b25cclxuXHRcdFx0Y29uc3QgYXVkaXRCdG4gPSBzdGF0c0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG5cdFx0XHRcdGNsczogJ2NsaWNrYWJsZS1pY29uIHNlby1hdWRpdC1idG4nLFxyXG5cdFx0XHRcdGF0dHI6IHsgJ2FyaWEtbGFiZWwnOiAnQXVkaXQgdGhpcyBub3RlJyB9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzZXRJY29uKGF1ZGl0QnRuLCAnc2VhcmNoLWNoZWNrJyk7XHJcblx0XHRcdGF1ZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLm9uRmlsZUF1ZGl0KHJlc3VsdC5maWxlKTtcclxuXHRcdFx0XHR9KSgpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEFkZCBjb2xsYXBzZSBmdW5jdGlvbmFsaXR5IHRvIHRoZSBoZWFkZXJcclxuXHRcdGNvbGxhcHNlSWNvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBpc0NvbGxhcHNlZCA9IGZpbGVzTGlzdENvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoJ3Nlby1yZXN1bHRzLWxpc3QtY29sbGFwc2VkJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoaXNDb2xsYXBzZWQpIHtcclxuXHRcdFx0XHRmaWxlc0xpc3RDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnc2VvLXJlc3VsdHMtbGlzdC1jb2xsYXBzZWQnKTtcclxuXHRcdFx0XHRmaWxlc0xpc3RDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnc2VvLXJlc3VsdHMtbGlzdC1leHBhbmRlZCcpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGZpbGVzTGlzdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tcmVzdWx0cy1saXN0LWV4cGFuZGVkJyk7XHJcblx0XHRcdFx0ZmlsZXNMaXN0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Nlby1yZXN1bHRzLWxpc3QtY29sbGFwc2VkJyk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFJvdGF0ZSB0aGUgY29sbGFwc2UgaWNvbiB3aXRoIHNtb290aCB0cmFuc2l0aW9uXHJcblx0XHRcdGNvbnN0IGljb24gPSBjb2xsYXBzZUljb24ucXVlcnlTZWxlY3Rvcignc3ZnJyk7XHJcblx0XHRcdGlmIChpY29uKSB7XHJcblx0XHRcdFx0aWYgKGlzQ29sbGFwc2VkKSB7XHJcblx0XHRcdFx0XHQvLyBHb2luZyBmcm9tIGNvbGxhcHNlZCB0byBleHBhbmRlZDogcmVtb3ZlIHJvdGF0aW9uIChkb3duIGFycm93KVxyXG5cdFx0XHRcdFx0aWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tY29sbGFwc2UtaWNvbi1yb3RhdGVkJyk7XHJcblx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ3Nlby1jb2xsYXBzZS1pY29uLW5vcm1hbCcpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBHb2luZyBmcm9tIGV4cGFuZGVkIHRvIGNvbGxhcHNlZDogYWRkIHJvdGF0aW9uIChyaWdodCBhcnJvdylcclxuXHRcdFx0XHRcdGljb24uY2xhc3NMaXN0LnJlbW92ZSgnc2VvLWNvbGxhcHNlLWljb24tbm9ybWFsJyk7XHJcblx0XHRcdFx0XHRpY29uLmNsYXNzTGlzdC5hZGQoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBzb3J0RmlsZXMoZmlsZXM6IFNFT1Jlc3VsdHNbXSwgc29ydFR5cGU6IHN0cmluZyk6IFNFT1Jlc3VsdHNbXSB7XHJcblx0XHRjb25zdCBzb3J0ZWRGaWxlcyA9IFsuLi5maWxlc107XHJcblx0XHRcclxuXHRcdHN3aXRjaCAoc29ydFR5cGUpIHtcclxuXHRcdFx0Y2FzZSAnbm90aWNlcy1kZXNjJzpcclxuXHRcdFx0XHQvLyBTb3J0IGJ5IG5vdGljZXMgKGhpZ2ggZmlyc3QpLCB0aGVuIGlzc3VlcyAoaGlnaCBmaXJzdCksIHRoZW4gd2FybmluZ3MgKGhpZ2ggZmlyc3QpLCB0aGVuIGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBub3RpY2VzQ29tcGFyZSA9IGIubm90aWNlc0NvdW50IC0gYS5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0XHRpZiAobm90aWNlc0NvbXBhcmUgIT09IDApIHJldHVybiBub3RpY2VzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGlzc3Vlc0NvbXBhcmUgPSBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHRcdGlmIChpc3N1ZXNDb21wYXJlICE9PSAwKSByZXR1cm4gaXNzdWVzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IHdhcm5pbmdzQ29tcGFyZSA9IGIud2FybmluZ3NDb3VudCAtIGEud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHRcdGlmICh3YXJuaW5nc0NvbXBhcmUgIT09IDApIHJldHVybiB3YXJuaW5nc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGFGaWxlTmFtZS5sb2NhbGVDb21wYXJlKGJGaWxlTmFtZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ25vdGljZXMtYXNjJzpcclxuXHRcdFx0XHQvLyBTb3J0IGJ5IG5vdGljZXMgKGxvdyBmaXJzdCksIHRoZW4gaXNzdWVzIChsb3cgZmlyc3QpLCB0aGVuIHdhcm5pbmdzIChsb3cgZmlyc3QpLCB0aGVuIGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBub3RpY2VzQ29tcGFyZSA9IGEubm90aWNlc0NvdW50IC0gYi5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0XHRpZiAobm90aWNlc0NvbXBhcmUgIT09IDApIHJldHVybiBub3RpY2VzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGlzc3Vlc0NvbXBhcmUgPSBhLmlzc3Vlc0NvdW50IC0gYi5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHRcdGlmIChpc3N1ZXNDb21wYXJlICE9PSAwKSByZXR1cm4gaXNzdWVzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IHdhcm5pbmdzQ29tcGFyZSA9IGEud2FybmluZ3NDb3VudCAtIGIud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHRcdGlmICh3YXJuaW5nc0NvbXBhcmUgIT09IDApIHJldHVybiB3YXJuaW5nc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGFGaWxlTmFtZS5sb2NhbGVDb21wYXJlKGJGaWxlTmFtZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3dhcm5pbmdzLWRlc2MnOlxyXG5cdFx0XHRcdC8vIFNvcnQgYnkgd2FybmluZ3MgKGhpZ2ggZmlyc3QpLCB0aGVuIGJ5IGlzc3VlcyAoaGlnaCBmaXJzdCksIHRoZW4gYnkgZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHdhcm5pbmdzQ29tcGFyZSA9IGIud2FybmluZ3NDb3VudCAtIGEud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHRcdGlmICh3YXJuaW5nc0NvbXBhcmUgIT09IDApIHJldHVybiB3YXJuaW5nc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCBpc3N1ZXNDb21wYXJlID0gYi5pc3N1ZXNDb3VudCAtIGEuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0XHRpZiAoaXNzdWVzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIGlzc3Vlc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGFGaWxlTmFtZS5sb2NhbGVDb21wYXJlKGJGaWxlTmFtZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ3dhcm5pbmdzLWFzYyc6XHJcblx0XHRcdFx0Ly8gU29ydCBieSB3YXJuaW5ncyAobG93IGZpcnN0KSwgdGhlbiBieSBpc3N1ZXMgKGxvdyBmaXJzdCksIHRoZW4gYnkgZmlsZSBuYW1lIEEtWlxyXG5cdFx0XHRcdHNvcnRlZEZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHdhcm5pbmdzQ29tcGFyZSA9IGEud2FybmluZ3NDb3VudCAtIGIud2FybmluZ3NDb3VudDtcclxuXHRcdFx0XHRcdGlmICh3YXJuaW5nc0NvbXBhcmUgIT09IDApIHJldHVybiB3YXJuaW5nc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCBpc3N1ZXNDb21wYXJlID0gYS5pc3N1ZXNDb3VudCAtIGIuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0XHRpZiAoaXNzdWVzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIGlzc3Vlc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGFGaWxlTmFtZS5sb2NhbGVDb21wYXJlKGJGaWxlTmFtZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJ2lzc3Vlcy1kZXNjJzpcclxuXHRcdFx0XHQvLyBTb3J0IGJ5IGlzc3VlcyAoaGlnaCBmaXJzdCksIHRoZW4gYnkgd2FybmluZ3MgKGhpZ2ggZmlyc3QpLCB0aGVuIGJ5IGZpbGUgbmFtZSBBLVpcclxuXHRcdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0XHRjb25zdCBpc3N1ZXNDb21wYXJlID0gYi5pc3N1ZXNDb3VudCAtIGEuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0XHRpZiAoaXNzdWVzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIGlzc3Vlc0NvbXBhcmU7XHJcblx0XHRcdFx0XHRjb25zdCB3YXJuaW5nc0NvbXBhcmUgPSBiLndhcm5pbmdzQ291bnQgLSBhLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0XHRpZiAod2FybmluZ3NDb21wYXJlICE9PSAwKSByZXR1cm4gd2FybmluZ3NDb21wYXJlO1xyXG5cdFx0XHRcdFx0Y29uc3QgYUZpbGVOYW1lID0gYS5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRjb25zdCBiRmlsZU5hbWUgPSBiLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdHJldHVybiBhRmlsZU5hbWUubG9jYWxlQ29tcGFyZShiRmlsZU5hbWUpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdpc3N1ZXMtYXNjJzpcclxuXHRcdFx0XHQvLyBTb3J0IGJ5IGlzc3VlcyAobG93IGZpcnN0KSwgdGhlbiBieSB3YXJuaW5ncyAobG93IGZpcnN0KSwgdGhlbiBieSBmaWxlIG5hbWUgQS1aXHJcblx0XHRcdFx0c29ydGVkRmlsZXMuc29ydCgoYSwgYikgPT4ge1xyXG5cdFx0XHRcdFx0Y29uc3QgaXNzdWVzQ29tcGFyZSA9IGEuaXNzdWVzQ291bnQgLSBiLmlzc3Vlc0NvdW50O1xyXG5cdFx0XHRcdFx0aWYgKGlzc3Vlc0NvbXBhcmUgIT09IDApIHJldHVybiBpc3N1ZXNDb21wYXJlO1xyXG5cdFx0XHRcdFx0Y29uc3Qgd2FybmluZ3NDb21wYXJlID0gYS53YXJuaW5nc0NvdW50IC0gYi53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdFx0aWYgKHdhcm5pbmdzQ29tcGFyZSAhPT0gMCkgcmV0dXJuIHdhcm5pbmdzQ29tcGFyZTtcclxuXHRcdFx0XHRcdGNvbnN0IGFGaWxlTmFtZSA9IGEuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgYkZpbGVOYW1lID0gYi5maWxlLnNwbGl0KCcvJykucG9wKCkgfHwgJyc7XHJcblx0XHRcdFx0XHRyZXR1cm4gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnZmlsZW5hbWUtYXNjJzpcclxuXHRcdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBQcmltYXJ5OiBmaWxlIG5hbWUgQS1aXHJcblx0XHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWVDb21wYXJlID0gYUZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYkZpbGVOYW1lKTtcclxuXHRcdFx0XHRcdGlmIChmaWxlTmFtZUNvbXBhcmUgIT09IDApIHJldHVybiBmaWxlTmFtZUNvbXBhcmU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNlY29uZGFyeTogcGFyZW50IGZvbGRlciBBLVogKHJvb3QgZmlsZXMgZmlyc3QpXHJcblx0XHRcdFx0XHRjb25zdCBhUGFydHMgPSBhLmZpbGUuc3BsaXQoJy8nKTtcclxuXHRcdFx0XHRcdGNvbnN0IGJQYXJ0cyA9IGIuZmlsZS5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgYVBhcmVudCA9IGFQYXJ0cy5sZW5ndGggPiAxID8gKGFQYXJ0c1thUGFydHMubGVuZ3RoIC0gMl0gfHwgJycpIDogJyc7XHJcblx0XHRcdFx0XHRjb25zdCBiUGFyZW50ID0gYlBhcnRzLmxlbmd0aCA+IDEgPyAoYlBhcnRzW2JQYXJ0cy5sZW5ndGggLSAyXSB8fCAnJykgOiAnJztcclxuXHRcdFx0XHRcdGNvbnN0IHBhcmVudENvbXBhcmUgPSBhUGFyZW50LmxvY2FsZUNvbXBhcmUoYlBhcmVudCk7XHJcblx0XHRcdFx0XHRpZiAocGFyZW50Q29tcGFyZSAhPT0gMCkgcmV0dXJuIHBhcmVudENvbXBhcmU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFRlcnRpYXJ5OiBpc3N1ZXMgKGhpZ2ggZmlyc3QpXHJcblx0XHRcdFx0XHRpZiAoYi5pc3N1ZXNDb3VudCAhPT0gYS5pc3N1ZXNDb3VudCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gYi5pc3N1ZXNDb3VudCAtIGEuaXNzdWVzQ291bnQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBRdWF0ZXJuYXJ5OiB3YXJuaW5ncyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRcdGlmIChiLndhcm5pbmdzQ291bnQgIT09IGEud2FybmluZ3NDb3VudCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gYi53YXJuaW5nc0NvdW50IC0gYS53YXJuaW5nc0NvdW50O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gUXVpbmFyeTogbm90aWNlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRcdHJldHVybiBiLm5vdGljZXNDb3VudCAtIGEubm90aWNlc0NvdW50O1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICdmaWxlbmFtZS1kZXNjJzpcclxuXHRcdFx0XHRzb3J0ZWRGaWxlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0XHQvLyBQcmltYXJ5OiBmaWxlIG5hbWUgWi1BXHJcblx0XHRcdFx0XHRjb25zdCBhRmlsZU5hbWUgPSBhLmZpbGUuc3BsaXQoJy8nKS5wb3AoKSB8fCAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJGaWxlTmFtZSA9IGIuZmlsZS5zcGxpdCgnLycpLnBvcCgpIHx8ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgZmlsZU5hbWVDb21wYXJlID0gYkZpbGVOYW1lLmxvY2FsZUNvbXBhcmUoYUZpbGVOYW1lKTtcclxuXHRcdFx0XHRcdGlmIChmaWxlTmFtZUNvbXBhcmUgIT09IDApIHJldHVybiBmaWxlTmFtZUNvbXBhcmU7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIFNlY29uZGFyeTogcGFyZW50IGZvbGRlciBaLUEgKHJvb3QgZmlsZXMgbGFzdClcclxuXHRcdFx0XHRcdGNvbnN0IGFQYXJ0cyA9IGEuZmlsZS5zcGxpdCgnLycpO1xyXG5cdFx0XHRcdFx0Y29uc3QgYlBhcnRzID0gYi5maWxlLnNwbGl0KCcvJyk7XHJcblx0XHRcdFx0XHRjb25zdCBhUGFyZW50ID0gYVBhcnRzLmxlbmd0aCA+IDEgPyAoYVBhcnRzW2FQYXJ0cy5sZW5ndGggLSAyXSB8fCAnJykgOiAnJztcclxuXHRcdFx0XHRcdGNvbnN0IGJQYXJlbnQgPSBiUGFydHMubGVuZ3RoID4gMSA/IChiUGFydHNbYlBhcnRzLmxlbmd0aCAtIDJdIHx8ICcnKSA6ICcnO1xyXG5cdFx0XHRcdFx0Y29uc3QgcGFyZW50Q29tcGFyZSA9IGJQYXJlbnQubG9jYWxlQ29tcGFyZShhUGFyZW50KTtcclxuXHRcdFx0XHRcdGlmIChwYXJlbnRDb21wYXJlICE9PSAwKSByZXR1cm4gcGFyZW50Q29tcGFyZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Ly8gVGVydGlhcnk6IGlzc3VlcyAoaGlnaCBmaXJzdClcclxuXHRcdFx0XHRcdGlmIChiLmlzc3Vlc0NvdW50ICE9PSBhLmlzc3Vlc0NvdW50KSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBiLmlzc3Vlc0NvdW50IC0gYS5pc3N1ZXNDb3VudDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIFF1YXRlcm5hcnk6IHdhcm5pbmdzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdFx0aWYgKGIud2FybmluZ3NDb3VudCAhPT0gYS53YXJuaW5nc0NvdW50KSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBiLndhcm5pbmdzQ291bnQgLSBhLndhcm5pbmdzQ291bnQ7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBRdWluYXJ5OiBub3RpY2VzIChoaWdoIGZpcnN0KVxyXG5cdFx0XHRcdFx0cmV0dXJuIGIubm90aWNlc0NvdW50IC0gYS5ub3RpY2VzQ291bnQ7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiBzb3J0ZWRGaWxlcztcclxuXHR9XHJcblx0XHJcblx0cHJpdmF0ZSB0b2dnbGVDaGVja3NWaXNpYmlsaXR5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY2hlY2tzQ29udGFpbmVyID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLnNlby1jaGVja3MnKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdGlmICghY2hlY2tzQ29udGFpbmVyKSByZXR1cm47XHJcblx0XHRcclxuXHRcdC8vIEdldCBhbGwgaW5kaXZpZHVhbCBjb2xsYXBzZSBoZWFkZXJzIGFuZCBmb3JjZSB0aGVtIHRvIHRoZSBhcHByb3ByaWF0ZSBzdGF0ZVxyXG5cdFx0Y29uc3QgYWxsSGVhZGVycyA9IGNoZWNrc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2VvLWNoZWNrLWhlYWRlcicpO1xyXG5cdFx0YWxsSGVhZGVycy5mb3JFYWNoKChoZWFkZXIpID0+IHtcclxuXHRcdFx0Y29uc3QgaHRtbEhlYWRlciA9IGhlYWRlciBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0Y29uc3QgcmVzdWx0c0xpc3QgPSBodG1sSGVhZGVyLnBhcmVudEVsZW1lbnQ/LnF1ZXJ5U2VsZWN0b3IoJy5zZW8tcmVzdWx0cycpIGFzIEhUTUxFbGVtZW50O1xyXG5cdFx0XHRjb25zdCBjb2xsYXBzZUljb24gPSBodG1sSGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5zZW8tY29sbGFwc2UtaWNvbiBzdmcnKSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHJcblx0XHRcdC8vIEZpbmQgdGhlIGNoZWNrIG5hbWUgZm9yIHRoaXMgaGVhZGVyIHRvIHVwZGF0ZSB0aGUgc3RhdGUgbWFwXHJcblx0XHRcdGNvbnN0IGNoZWNrTmFtZSA9IHRoaXMuZmluZENoZWNrTmFtZUZvckhlYWRlcihodG1sSGVhZGVyKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChyZXN1bHRzTGlzdCAmJiBjb2xsYXBzZUljb24pIHtcclxuXHRcdFx0XHQvLyBVcGRhdGUgdGhlIGluZGl2aWR1YWwgc3RhdGUgbWFwXHJcblx0XHRcdFx0aWYgKGNoZWNrTmFtZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5pbmRpdmlkdWFsQ29sbGFwc2VTdGF0ZXMuc2V0KGNoZWNrTmFtZSwgdGhpcy5pc0NvbGxhcHNlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIEZvcmNlIHRvIHRoZSBzdGF0ZSBiYXNlZCBvbiBtYWluIHRvZ2dsZVxyXG5cdFx0XHRcdGlmICh0aGlzLmlzQ29sbGFwc2VkKSB7XHJcblx0XHRcdFx0XHQvLyBGb3JjZSBhbGwgdG8gY29sbGFwc2VkXHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tcmVzdWx0cy1saXN0LWV4cGFuZGVkJyk7XHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QuYWRkKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdFx0Y29sbGFwc2VJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1jb2xsYXBzZS1pY29uLW5vcm1hbCcpO1xyXG5cdFx0XHRcdFx0Y29sbGFwc2VJY29uLmNsYXNzTGlzdC5hZGQoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gRm9yY2UgYWxsIHRvIGV4cGFuZGVkXHJcblx0XHRcdFx0XHRyZXN1bHRzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzZW8tcmVzdWx0cy1saXN0LWNvbGxhcHNlZCcpO1xyXG5cdFx0XHRcdFx0cmVzdWx0c0xpc3QuY2xhc3NMaXN0LmFkZCgnc2VvLXJlc3VsdHMtbGlzdC1leHBhbmRlZCcpO1xyXG5cdFx0XHRcdFx0Y29sbGFwc2VJY29uLmNsYXNzTGlzdC5yZW1vdmUoJ3Nlby1jb2xsYXBzZS1pY29uLXJvdGF0ZWQnKTtcclxuXHRcdFx0XHRcdGNvbGxhcHNlSWNvbi5jbGFzc0xpc3QuYWRkKCdzZW8tY29sbGFwc2UtaWNvbi1ub3JtYWwnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHQvLyBIZWxwZXIgbWV0aG9kIHRvIGZpbmQgdGhlIGNoZWNrIG5hbWUgZm9yIGEgZ2l2ZW4gaGVhZGVyXHJcblx0cHJpdmF0ZSBmaW5kQ2hlY2tOYW1lRm9ySGVhZGVyKGhlYWRlcjogSFRNTEVsZW1lbnQpOiBzdHJpbmcgfCBudWxsIHtcclxuXHRcdC8vIEdldCB0aGUgY2hlY2sgbmFtZSBmcm9tIHRoZSBkYXRhIGF0dHJpYnV0ZVxyXG5cdFx0cmV0dXJuIGhlYWRlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2hlY2stbmFtZScpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXG4gKiBQYW5lbCByZW5kZXJpbmcgbG9naWMgZm9yIFNFTyBzaWRlIHBhbmVsXG4gKiBIYW5kbGVzIHRoZSBjb21wbGV4IHJlbmRlcmluZyBvZiBib3RoIGN1cnJlbnQgYW5kIGdsb2JhbCBwYW5lbHNcbiAqL1xuXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCBTRU9QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcbmltcG9ydCB7IFNFT1Jlc3VsdHMgfSBmcm9tIFwiLi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldFZhdWx0Rm9sZGVyc0luZm8gfSBmcm9tIFwiLi9wYW5lbC11dGlsc1wiO1xuaW1wb3J0IHsgUGFuZWxBY3Rpb25zIH0gZnJvbSBcIi4vcGFuZWwtYWN0aW9uc1wiO1xuaW1wb3J0IHsgUmVzdWx0c0Rpc3BsYXkgfSBmcm9tIFwiLi9yZXN1bHRzLWRpc3BsYXlcIjtcbmltcG9ydCB7IFNFT1NpZGVQYW5lbCB9IGZyb20gXCIuL3NpZGUtcGFuZWxcIjtcbmltcG9ydCB7IGlzU3VwcG9ydGVkRmlsZSB9IGZyb20gXCIuLi91dGlscy9maWxlLXV0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBQYW5lbFJlbmRlcmVyIHtcblx0Y29uc3RydWN0b3IoXG5cdFx0cHJpdmF0ZSBhcHA6IEFwcCxcblx0XHRwcml2YXRlIHBsdWdpbjogU0VPUGx1Z2luLFxuXHRcdHByaXZhdGUgYWN0aW9uczogUGFuZWxBY3Rpb25zXG5cdCkge31cblxuXHQvKipcblx0ICogUmVuZGVycyB0aGUgbWFpbiBwYW5lbCBjb250ZW50XG5cdCAqL1xuXHRyZW5kZXIoXG5cdFx0Y29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxuXHRcdHBhbmVsVHlwZTogJ2N1cnJlbnQnIHwgJ2dsb2JhbCcsXG5cdFx0Y3VycmVudE5vdGVSZXN1bHRzOiBTRU9SZXN1bHRzIHwgbnVsbCxcblx0XHRnbG9iYWxSZXN1bHRzOiBTRU9SZXN1bHRzW10sXG5cdFx0b25SZWZyZXNoQ2xpY2s6IChidG46IEhUTUxCdXR0b25FbGVtZW50KSA9PiBQcm9taXNlPHZvaWQ+LFxuXHRcdG9uRXh0ZXJuYWxMaW5rc0NsaWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+XG5cdCkge1xuXHRcdHRyeSB7XG5cdFx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoJ3Nlby1wYW5lbCcpO1xuXG5cdFx0XHQvLyBIZWFkZXIgd2l0aCBwcm9wZXIgc3BhY2luZ1xuXHRcdFx0Y29uc3QgaGVhZGVyID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLXBhbmVsLWhlYWRlcicgfSk7XG5cdFx0XHRoZWFkZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiBwYW5lbFR5cGUgPT09ICdjdXJyZW50JyA/ICdTRU8gYXVkaXQ6IGN1cnJlbnQgbm90ZScgOiAnU0VPIGF1ZGl0OiB2YXVsdCcgfSk7XG5cblx0XHRcdC8vIFNob3cgY3VycmVudCBub3RlIGZpbGUgcGF0aCBpZiBhdmFpbGFibGVcblx0XHRcdGlmIChwYW5lbFR5cGUgPT09ICdjdXJyZW50Jykge1xuXHRcdFx0XHR0aGlzLnJlbmRlckN1cnJlbnROb3RlSGVhZGVyKGhlYWRlciwgY3VycmVudE5vdGVSZXN1bHRzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFNob3cgdmF1bHQgZm9sZGVycyBpbmZvcm1hdGlvbiBmb3IgZ2xvYmFsIHBhbmVsXG5cdFx0XHRcdGNvbnN0IGZpbGVDb3VudCA9IGdsb2JhbFJlc3VsdHMubGVuZ3RoO1xuXHRcdFx0XHRjb25zdCBmb2xkZXJzSW5mbyA9IGdldFZhdWx0Rm9sZGVyc0luZm8odGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NhbkRpcmVjdG9yaWVzLCBmaWxlQ291bnQpO1xuXHRcdFx0XHRjb25zdCBmb2xkZXJzRWwgPSBoZWFkZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2VvLWZpbGVuYW1lJyB9KTtcblx0XHRcdFx0Zm9sZGVyc0VsLnRleHRDb250ZW50ID0gZm9sZGVyc0luZm87XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjdGlvbiBidXR0b24gYXQgdGhlIHRvcFxuXHRcdFx0aWYgKHBhbmVsVHlwZSA9PT0gJ2N1cnJlbnQnKSB7XG5cdFx0XHRcdHRoaXMucmVuZGVyQ3VycmVudE5vdGVBY3Rpb25zKGNvbnRhaW5lckVsLCBvblJlZnJlc2hDbGljaywgb25FeHRlcm5hbExpbmtzQ2xpY2spO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb250ZW50IGJhc2VkIG9uIHBhbmVsIHR5cGVcblx0XHRcdGlmIChwYW5lbFR5cGUgPT09ICdjdXJyZW50Jykge1xuXHRcdFx0XHR0aGlzLnJlbmRlckN1cnJlbnROb3RlQ29udGVudChjb250YWluZXJFbCwgY3VycmVudE5vdGVSZXN1bHRzKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChnbG9iYWxSZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckdsb2JhbFJlc3VsdHMoY29udGFpbmVyRWwsIGdsb2JhbFJlc3VsdHMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc3Qgbm9HbG9iYWwgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tbm8tcmVzdWx0cycgfSk7XG5cdFx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBDb250YWlucyBxdW90ZWQgdGV4dCB3aGljaCBpcyBhbHJlYWR5IGluIHNlbnRlbmNlIGNhc2Vcblx0XHRcdFx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9ic2lkaWFubWQvdWkvc2VudGVuY2UtY2FzZVxuXHRcdFx0XHRub0dsb2JhbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ0NsaWNrIFwiQXVkaXQgYWxsIG5vdGVzXCIgdG8gYXVkaXQgeW91ciBmaWxlcyBpbiB5b3VyIGNvbmZpZ3VyZWQgZGlyZWN0b3JpZXMuJyB9KTtcblx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciByZW5kZXJpbmcgU0VPIHBhbmVsOicsIGVycm9yKTtcblx0XHRcdC8vIEZhbHNlIHBvc2l0aXZlOiBcIlNFT1wiIGlzIGEgcHJvcGVyIG5vdW4gKGFjcm9ueW0pIGFuZCBzaG91bGQgYmUgY2FwaXRhbGl6ZWRcblx0XHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYnNpZGlhbm1kL3VpL3NlbnRlbmNlLWNhc2Vcblx0XHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdFcnJvciBsb2FkaW5nIFNFTyBwYW5lbC4gUGxlYXNlIHRyeSBhZ2Fpbi4nIH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBSZW5kZXJzIHRoZSBjdXJyZW50IG5vdGUgaGVhZGVyIHdpdGggZmlsZSBwYXRoXG5cdCAqL1xuXHRwcml2YXRlIHJlbmRlckN1cnJlbnROb3RlSGVhZGVyKGhlYWRlcjogSFRNTEVsZW1lbnQsIGN1cnJlbnROb3RlUmVzdWx0czogU0VPUmVzdWx0cyB8IG51bGwpIHtcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRpZiAoYWN0aXZlRmlsZSAmJiBpc1N1cHBvcnRlZEZpbGUoYWN0aXZlRmlsZSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpKSB7XG5cdFx0XHRjb25zdCBmaWxlbmFtZUVsID0gaGVhZGVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1maWxlbmFtZScgfSk7XG5cdFx0XHRcblx0XHRcdC8vIEdldCB0aGUgY29ycmVjdCBkaXNwbGF5IG5hbWUgYmFzZWQgb24gdGhlIGN1cnJlbnQgYWN0aXZlIGZpbGVcblx0XHRcdGxldCBkaXNwbGF5TmFtZSA9IGFjdGl2ZUZpbGUucGF0aDtcblx0XHRcdFxuXHRcdFx0Ly8gSWYgd2UgaGF2ZSBjdXJyZW50IG5vdGUgcmVzdWx0cyBmb3IgdGhpcyBzcGVjaWZpYyBmaWxlLCB1c2UgaXRzIGRpc3BsYXkgbmFtZVxuXHRcdFx0aWYgKGN1cnJlbnROb3RlUmVzdWx0cyAmJiBjdXJyZW50Tm90ZVJlc3VsdHMuZmlsZSA9PT0gYWN0aXZlRmlsZS5wYXRoKSB7XG5cdFx0XHRcdGRpc3BsYXlOYW1lID0gY3VycmVudE5vdGVSZXN1bHRzLmRpc3BsYXlOYW1lIHx8IGFjdGl2ZUZpbGUucGF0aDtcblx0XHRcdH1cblx0XHRcdC8vIElmIHdlIGhhdmUgZ2xvYmFsIHJlc3VsdHMgZm9yIHRoaXMgZmlsZSwgdXNlIGl0cyBkaXNwbGF5IG5hbWVcblx0XHRcdGVsc2UgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhY2hlZEdsb2JhbFJlc3VsdHMpIHtcblx0XHRcdFx0Y29uc3QgZ2xvYmFsUmVzdWx0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FjaGVkR2xvYmFsUmVzdWx0cy5maW5kKFxuXHRcdFx0XHRcdHJlc3VsdCA9PiByZXN1bHQuZmlsZSA9PT0gYWN0aXZlRmlsZS5wYXRoXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGlmIChnbG9iYWxSZXN1bHQpIHtcblx0XHRcdFx0XHRkaXNwbGF5TmFtZSA9IGdsb2JhbFJlc3VsdC5kaXNwbGF5TmFtZSB8fCBhY3RpdmVGaWxlLnBhdGg7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0ZmlsZW5hbWVFbC50ZXh0Q29udGVudCA9IGBUYXJnZXQgbm90ZTogJHtkaXNwbGF5TmFtZX1gO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBSZW5kZXJzIGFjdGlvbiBidXR0b25zIGZvciBjdXJyZW50IG5vdGUgcGFuZWxcblx0ICovXG5cdHByaXZhdGUgcmVuZGVyQ3VycmVudE5vdGVBY3Rpb25zKFxuXHRcdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgXG5cdFx0b25SZWZyZXNoQ2xpY2s6IChidG46IEhUTUxCdXR0b25FbGVtZW50KSA9PiBQcm9taXNlPHZvaWQ+LFxuXHRcdG9uRXh0ZXJuYWxMaW5rc0NsaWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+XG5cdCkge1xuXHRcdGNvbnN0IGF1ZGl0Q3VycmVudEJ0biA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuXHRcdFx0dGV4dDogJ1JlZnJlc2gnLFxuXHRcdFx0Y2xzOiAnbW9kLWN0YSBzZW8tYnRuIHNlby10b3AtYnRuJyxcblx0XHRcdGF0dHI6IHsgJ2RhdGEtcmVmcmVzaC1idG4nOiAndHJ1ZScgfVxuXHRcdH0pO1xuXHRcdFxuXHRcdC8vIFVzZSBvbmx5IGNsaWNrIGV2ZW50IHRvIGF2b2lkIGRvdWJsZSBleGVjdXRpb25cblx0XHRhdWRpdEN1cnJlbnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0YXdhaXQgb25SZWZyZXNoQ2xpY2soYXVkaXRDdXJyZW50QnRuKTtcblx0XHRcdH0pKCk7XG5cdFx0fSk7XG5cblx0XHQvLyBFeHRlcm5hbCBsaW5rcyBidXR0b24gKG9ubHkgc2hvdyBpZiBlbmFibGVkIGluIHNldHRpbmdzIGFuZCB2YXVsdC13aWRlIGlzIGRpc2FibGVkKVxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtCdXR0b24gJiYgIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2spIHtcblx0XHRcdGNvbnN0IGV4dGVybmFsTGlua3NCdG4gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcblx0XHRcdFx0dGV4dDogJ0NoZWNrIGV4dGVybmFsIGxpbmtzIGZvciA0MDRzJyxcblx0XHRcdFx0Y2xzOiAnc2VvLWJ0bidcblx0XHRcdH0pO1xuXHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdFx0dm9pZCAoYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4uZGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4udGV4dENvbnRlbnQgPSAnVGhpcyBtYXkgdGFrZSBzb21lIHRpbWUuLi4nO1xuXHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4uYWRkQ2xhc3MoJ3Nlby1idG4tZGlzYWJsZWQnKTtcblx0XHRcdFx0XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGF3YWl0IG9uRXh0ZXJuYWxMaW5rc0NsaWNrKCk7XG5cdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4udGV4dENvbnRlbnQgPSAnQ2hlY2sgZXh0ZXJuYWwgbGlua3MgZm9yIDQwNHMnO1xuXHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5yZW1vdmVDbGFzcygnc2VvLWJ0bi1kaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5hZGRDbGFzcygnc2VvLWJ0bi1lbmFibGVkJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJlbmRlcnMgY3VycmVudCBub3RlIGNvbnRlbnRcblx0ICovXG5cdHByaXZhdGUgcmVuZGVyQ3VycmVudE5vdGVDb250ZW50KGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgY3VycmVudE5vdGVSZXN1bHRzOiBTRU9SZXN1bHRzIHwgbnVsbCkge1xuXHRcdC8vIENoZWNrIGlmIHdlIGhhdmUgcmVzdWx0cyBmb3IgdGhlIGN1cnJlbnQgZmlsZSBmcm9tIGdsb2JhbCBhdWRpdFxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuXHRcdGxldCBjdXJyZW50RmlsZVJlc3VsdHM6IFNFT1Jlc3VsdHMgfCBudWxsID0gbnVsbDtcblx0XHRcblx0XHRpZiAoYWN0aXZlRmlsZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzKSB7XG5cdFx0XHQvLyBGaW5kIHJlc3VsdHMgZm9yIHRoZSBjdXJyZW50IGZpbGUgaW4gdGhlIGdsb2JhbCByZXN1bHRzXG5cdFx0XHRjdXJyZW50RmlsZVJlc3VsdHMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jYWNoZWRHbG9iYWxSZXN1bHRzLmZpbmQoXG5cdFx0XHRcdHJlc3VsdCA9PiByZXN1bHQuZmlsZSA9PT0gYWN0aXZlRmlsZS5wYXRoXG5cdFx0XHQpIHx8IG51bGw7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFNob3cgcmVzdWx0cyBpZiB3ZSBoYXZlIHRoZW0gKGVpdGhlciBmcm9tIGN1cnJlbnQgbm90ZSBhdWRpdCBvciBnbG9iYWwgYXVkaXQpXG5cdFx0Y29uc3QgcmVzdWx0c1RvU2hvdyA9IGN1cnJlbnROb3RlUmVzdWx0cyB8fCBjdXJyZW50RmlsZVJlc3VsdHM7XG5cdFx0aWYgKHJlc3VsdHNUb1Nob3cpIHtcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyByZXN1bHRzIGNvbnRhaW5lciBhbmQgcmVuZGVyIHJlc3VsdHNcblx0XHRcdGNvbnN0IG5ld1Jlc3VsdHNDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZW8tcmVzdWx0cy1jb250YWluZXInIH0pO1xuXHRcdFx0XG5cdFx0XHQvLyBDcmVhdGUgYSBuZXcgcmVzdWx0cyBkaXNwbGF5IGluc3RhbmNlIGZvciB0aGlzIGNvbnRhaW5lclxuXHRcdFx0Y29uc3QgdGVtcFJlc3VsdHNEaXNwbGF5ID0gbmV3IFJlc3VsdHNEaXNwbGF5KFxuXHRcdFx0XHRuZXdSZXN1bHRzQ29udGFpbmVyLFxuXHRcdFx0XHRhc3luYyAoZmlsZVBhdGg6IHN0cmluZykgPT4gYXdhaXQgdGhpcy5hY3Rpb25zLm9wZW5GaWxlKGZpbGVQYXRoKSxcblx0XHRcdFx0YXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpID0+IGF3YWl0IHRoaXMuYWN0aW9ucy5vcGVuRmlsZUFuZEF1ZGl0KGZpbGVQYXRoKVxuXHRcdFx0KTtcblx0XHRcdHRlbXBSZXN1bHRzRGlzcGxheS5yZW5kZXJSZXN1bHRzKHJlc3VsdHNUb1Nob3cpO1xuXHRcdFx0XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnN0IG5vUmVzdWx0cyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3Nlby1uby1yZXN1bHRzJyB9KTtcblx0XHRcdGNvbnN0IGZpbGVUeXBlVGV4dCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZU1EWFN1cHBvcnQgPyAnbWFya2Rvd24gb3IgTURYIGZpbGUnIDogJ21hcmtkb3duIGZpbGUnO1xuXHRcdFx0bm9SZXN1bHRzLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgT3BlbiBhICR7ZmlsZVR5cGVUZXh0fSBhbmQgY2xpY2sgXCJSZWZyZXNoXCIgdG8gYXVkaXQgaXQuYCB9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogUmVuZGVycyBnbG9iYWwgcmVzdWx0cyB3aXRoIHNvcnRpbmcgYW5kIGZpbHRlcmluZ1xuXHQgKi9cblx0cHJpdmF0ZSByZW5kZXJHbG9iYWxSZXN1bHRzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgZ2xvYmFsUmVzdWx0czogU0VPUmVzdWx0c1tdKSB7XG5cdFx0Ly8gQ3JlYXRlIGEgdGVtcG9yYXJ5IHJlc3VsdHMgZGlzcGxheSBpbnN0YW5jZSBmb3IgZ2xvYmFsIHJlc3VsdHNcblx0XHRjb25zdCB0ZW1wUmVzdWx0c0Rpc3BsYXkgPSBuZXcgUmVzdWx0c0Rpc3BsYXkoXG5cdFx0XHRjb250YWluZXJFbCxcblx0XHRcdGFzeW5jIChmaWxlUGF0aDogc3RyaW5nKSA9PiBhd2FpdCB0aGlzLmFjdGlvbnMub3BlbkZpbGUoZmlsZVBhdGgpLFxuXHRcdFx0YXN5bmMgKGZpbGVQYXRoOiBzdHJpbmcpID0+IGF3YWl0IHRoaXMuYWN0aW9ucy5vcGVuRmlsZUFuZEF1ZGl0KGZpbGVQYXRoKVxuXHRcdCk7XG5cdFx0XG5cdFx0Ly8gUmVuZGVyIHN1bW1hcnkgc3RhdHNcblx0XHR0ZW1wUmVzdWx0c0Rpc3BsYXkucmVuZGVyR2xvYmFsUmVzdWx0cyhnbG9iYWxSZXN1bHRzLCB0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG5cblx0XHQvLyBBZGQgcmVmcmVzaCBidXR0b24gYmVsb3cgc3RhdHNcblx0XHRjb25zdCByZWZyZXNoQnRuID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdHRleHQ6ICdSZWZyZXNoJyxcblx0XHRcdGNsczogJ21vZC1jdGEgc2VvLWJ0biBzZW8tcmVmcmVzaC1idG4nLFxuXHRcdFx0YXR0cjogeyAnZGF0YS1yZWZyZXNoLWJ0bic6ICd0cnVlJyB9XG5cdFx0fSk7XG5cblx0XHQvLyBFeHRlcm5hbCBsaW5rcyBidXR0b24gKG9ubHkgc2hvdyBpZiBlbmFibGVkIGluIHNldHRpbmdzIGFuZCB2YXVsdC13aWRlIGlzIGRpc2FibGVkKVxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFeHRlcm5hbExpbmtCdXR0b24gJiYgIXRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUV4dGVybmFsTGlua1ZhdWx0Q2hlY2spIHtcblx0XHRcdGNvbnN0IGV4dGVybmFsTGlua3NCdG4gPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHR0ZXh0OiAnQ2hlY2sgYWxsIDQwNHMnLFxuXHRcdFx0XHRjbHM6ICdzZW8tYnRuJ1xuXHRcdFx0fSk7XG5cdFx0XHRleHRlcm5hbExpbmtzQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi50ZXh0Q29udGVudCA9ICdDaGVja2luZy4uLic7XG5cdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5hZGRDbGFzcygnc2VvLWJ0bi1kaXNhYmxlZCcpO1xuXG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLmFjdGlvbnMuY2hlY2tBbGxFeHRlcm5hbExpbmtzKCk7XG5cdFx0XHRcdFx0XHRpZiAocmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRcdC8vIERpc3BhdGNoIGNvbXBsZXRpb24gZXZlbnQgdG8gdXBkYXRlIHRoZSBwYW5lbFxuXHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnc2VvLXJlZnJlc2gtY29tcGxldGUnLCB7XG5cdFx0XHRcdFx0XHRcdFx0ZGV0YWlsOiB7IHJlc3VsdHMgfVxuXHRcdFx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4uZGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGV4dGVybmFsTGlua3NCdG4udGV4dENvbnRlbnQgPSAnQ2hlY2sgYWxsIDQwNHMnO1xuXHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5yZW1vdmVDbGFzcygnc2VvLWJ0bi1kaXNhYmxlZCcpO1xuXHRcdFx0XHRcdFx0ZXh0ZXJuYWxMaW5rc0J0bi5hZGRDbGFzcygnc2VvLWJ0bi1lbmFibGVkJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJlZnJlc2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHRoaXMgaXMgYSBjYW5jZWwgb3BlcmF0aW9uXG5cdFx0XHRcdGlmIChyZWZyZXNoQnRuLnRleHRDb250ZW50ID09PSAnQ2FuY2VsJykge1xuXHRcdFx0XHRcdC8vIENhbmNlbCB0aGUgb25nb2luZyBhdWRpdFxuXHRcdFx0XHRcdGlmIChTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyKSB7XG5cdFx0XHRcdFx0XHRTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyLmFib3J0KCk7XG5cdFx0XHRcdFx0XHRTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyID0gbnVsbDtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ1ZhdWx0IGF1ZGl0IGNhbmNlbGxlZCBieSB1c2VyJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlZnJlc2hCdG4udGV4dENvbnRlbnQgPSAnUmVmcmVzaCc7XG5cdFx0XHRcdFx0cmVmcmVzaEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Ly8gU3RhcnQgbmV3IGF1ZGl0XG5cdFx0XHRcdHJlZnJlc2hCdG4udGV4dENvbnRlbnQgPSAnQ2FuY2VsJztcblx0XHRcdFx0cmVmcmVzaEJ0bi5kaXNhYmxlZCA9IGZhbHNlOyAvLyBLZWVwIGVuYWJsZWQgc28gdXNlciBjYW4gY2FuY2VsXG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBDcmVhdGUgYWJvcnQgY29udHJvbGxlciBmb3IgdmF1bHQgYXVkaXRcblx0XHRcdFx0U0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblx0XHRcdFx0XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuYWN0aW9ucy5yZWZyZXNoR2xvYmFsUmVzdWx0cyhTRU9TaWRlUGFuZWwuZ2xvYmFsQXVkaXRDb250cm9sbGVyPy5zaWduYWwpO1xuXHRcdFx0XHRcdGlmIChyZXN1bHRzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRcdC8vIE9ubHkgZGlzcGF0Y2ggY29tcGxldGlvbiBldmVudCBpZiBhdWRpdCB3YXNuJ3QgY2FuY2VsbGVkXG5cdFx0XHRcdFx0XHRpZiAoU0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlciAmJiAhU0VPU2lkZVBhbmVsLmdsb2JhbEF1ZGl0Q29udHJvbGxlci5zaWduYWwuYWJvcnRlZCkge1xuXHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnc2VvLXJlZnJlc2gtY29tcGxldGUnLCB7IFxuXHRcdFx0XHRcdFx0XHRcdGRldGFpbDogeyByZXN1bHRzIH0gXG5cdFx0XHRcdFx0XHRcdH0pKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIGNhbmNlbGxhdGlvbiBvciBvdGhlciBlcnJvcnNcblx0XHRcdFx0XHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoJ1ZhdWx0IGF1ZGl0IGNhbmNlbGxlZCBpbiBwYW5lbCByZW5kZXJlcicpO1xuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgZGlzcGF0Y2ggY29tcGxldGlvbiBldmVudCBmb3IgY2FuY2VsbGVkIGF1ZGl0c1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCdFcnJvciBpbiB2YXVsdCBhdWRpdDonLCBlcnJvcik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdHJlZnJlc2hCdG4udGV4dENvbnRlbnQgPSAnUmVmcmVzaCc7XG5cdFx0XHRcdFx0cmVmcmVzaEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KSgpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gUmVuZGVyIGlzc3VlcyBsaXN0IHdpdGggc29ydGluZ1xuXHRcdHRlbXBSZXN1bHRzRGlzcGxheS5yZW5kZXJJc3N1ZXNMaXN0KFxuXHRcdFx0Z2xvYmFsUmVzdWx0cyxcblx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRTb3J0LFxuXHRcdFx0KHNvcnRUeXBlOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0Ly8gVGhpcyB3aWxsIGJlIGhhbmRsZWQgYnkgdGhlIGNhbGxpbmcgY29kZVxuXHRcdFx0XHRjb250YWluZXJFbC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnc2VvLXNvcnQtY2hhbmdlJywgeyBcblx0XHRcdFx0XHRkZXRhaWw6IHsgc29ydFR5cGUgfSBcblx0XHRcdFx0fSkpO1xuXHRcdFx0fSxcblx0XHRcdChldmVudDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBub3RpY2VzIHNob3VsZCBiZSBzaG93blxuXHRcdFx0XHRjb25zdCBzaG93Tm90aWNlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoZWNrUG90ZW50aWFsbHlCcm9rZW5MaW5rcyAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGVja1BvdGVudGlhbGx5QnJva2VuRW1iZWRzO1xuXHRcdFx0XHRjb25zdCBpc3N1ZXNGaWxlcyA9IGdsb2JhbFJlc3VsdHMuZmlsdGVyKHIgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGhhc0lzc3VlcyA9IHIuaXNzdWVzQ291bnQgPiAwO1xuXHRcdFx0XHRcdGNvbnN0IGhhc1dhcm5pbmdzID0gci53YXJuaW5nc0NvdW50ID4gMDtcblx0XHRcdFx0XHRjb25zdCBoYXNOb3RpY2VzID0gc2hvd05vdGljZXMgJiYgci5ub3RpY2VzQ291bnQgPiAwO1xuXHRcdFx0XHRcdHJldHVybiBoYXNJc3N1ZXMgfHwgaGFzV2FybmluZ3MgfHwgaGFzTm90aWNlcztcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRoaXMuYWN0aW9ucy5zaG93U29ydE1lbnUoZXZlbnQsIGlzc3Vlc0ZpbGVzLCBjb250YWluZXJFbCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdFNvcnQsIChzb3J0VHlwZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdFx0Y29udGFpbmVyRWwuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3Nlby1zb3J0LWNoYW5nZScsIHsgXG5cdFx0XHRcdFx0XHRkZXRhaWw6IHsgc29ydFR5cGUgfSBcblx0XHRcdFx0XHR9KSk7XG5cdFx0XHRcdH0sIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdH0sXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5nc1xuXHRcdCk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCBTRU9QbHVnaW4gZnJvbSBcIi4uL21haW5cIjtcclxuaW1wb3J0IHsgU0VPU2lkZVBhbmVsIH0gZnJvbSBcIi4vc2lkZS1wYW5lbFwiO1xyXG5pbXBvcnQgeyBTRU9DdXJyZW50UGFuZWxWaWV3VHlwZSwgU0VPR2xvYmFsUGFuZWxWaWV3VHlwZSB9IGZyb20gXCIuL3BhbmVsLWNvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBpc1N1cHBvcnRlZEZpbGUgfSBmcm9tIFwiLi4vdXRpbHMvZmlsZS11dGlsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhbmVsTWFuYWdlciB7XHJcblx0Y29uc3RydWN0b3IoXHJcblx0XHRwcml2YXRlIGFwcDogQXBwLFxyXG5cdFx0cHJpdmF0ZSBwbHVnaW46IFNFT1BsdWdpblxyXG5cdCkge31cclxuXHJcblx0b3BlbkN1cnJlbnRQYW5lbCgpIHtcclxuXHRcdHZvaWQgdGhpcy5vcGVuUGFuZWwoU0VPQ3VycmVudFBhbmVsVmlld1R5cGUsICdjdXJyZW50Jyk7XHJcblx0fVxyXG5cclxuXHRvcGVuR2xvYmFsUGFuZWwoKSB7XHJcblx0XHR2b2lkIHRoaXMub3BlblBhbmVsKFNFT0dsb2JhbFBhbmVsVmlld1R5cGUsICdnbG9iYWwnKTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgb3BlblBhbmVsKHZpZXdUeXBlOiBzdHJpbmcsIHBhbmVsVHlwZTogJ2N1cnJlbnQnIHwgJ2dsb2JhbCcpIHtcclxuXHRcdC8vIEVuc3VyZSB0aGUgcmlnaHQgc2lkZWJhciBpcyBvcGVuXHJcblx0XHRpZiAodGhpcy5hcHAud29ya3NwYWNlLnJpZ2h0U3BsaXQuY29sbGFwc2VkKSB7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yaWdodFNwbGl0LmV4cGFuZCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRyeSB0byBmaW5kIGV4aXN0aW5nIHBhbmVsIGZpcnN0XHJcblx0XHRjb25zdCBleGlzdGluZ0xlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKHZpZXdUeXBlKVswXTtcclxuXHJcblx0XHRpZiAoZXhpc3RpbmdMZWFmKSB7XHJcblx0XHRcdC8vIElmIHBhbmVsIGV4aXN0cywganVzdCByZXZlYWwgaXQgYW5kIG1ha2UgaXQgYWN0aXZlXHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGV4aXN0aW5nTGVhZik7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGV4aXN0aW5nTGVhZik7XHJcblxyXG5cdFx0XHQvLyBTdG9yZSByZWZlcmVuY2UgZm9yIHNldHRpbmdzIHVwZGF0ZXNcclxuXHRcdFx0aWYgKGV4aXN0aW5nTGVhZi52aWV3IGluc3RhbmNlb2YgU0VPU2lkZVBhbmVsKSB7XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2lkZVBhbmVsID0gZXhpc3RpbmdMZWFmLnZpZXc7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEVuc3VyZSBpY29uIGxvYWRzIHByb3Blcmx5IC0gdXNlIHNldFRpbWVvdXQgZm9yIHBhbmVsIHRpbWluZ1xyXG5cdFx0XHRpZiAoZXhpc3RpbmdMZWFmLnZpZXcgaW5zdGFuY2VvZiBTRU9TaWRlUGFuZWwpIHtcclxuXHRcdFx0XHRjb25zdCBwYW5lbCA9IGV4aXN0aW5nTGVhZi52aWV3O1xyXG5cdFx0XHRcdGlmICh0eXBlb2YgcGFuZWwuZm9yY2VJY29uUmVmcmVzaCA9PT0gJ2Z1bmN0aW9uJykge1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiBwYW5lbC5mb3JjZUljb25SZWZyZXNoKCksIDEwMCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBDcmVhdGUgbmV3IHBhbmVsIGluIHRoZSByaWdodCBzaWRlIC0gdXNlIHRoZSBzaW1wbGUsIGRpcmVjdCBhcHByb2FjaFxyXG5cdFx0XHRjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XHJcblxyXG5cdFx0XHRpZiAobGVhZikge1xyXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgcGFuZWwgbWFudWFsbHkgLSB0aGlzIGlzIHRoZSBtb3N0IHJlbGlhYmxlIGFwcHJvYWNoXHJcblx0XHRcdFx0Y29uc3QgcGFuZWwgPSBuZXcgU0VPU2lkZVBhbmVsKHRoaXMucGx1Z2luLCBwYW5lbFR5cGUsIGxlYWYpO1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNpZGVQYW5lbCA9IHBhbmVsOyAvLyBTdG9yZSByZWZlcmVuY2UgZm9yIHNldHRpbmdzIHVwZGF0ZXNcclxuXHRcdFx0XHRhd2FpdCBsZWFmLm9wZW4ocGFuZWwpO1xyXG5cdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGxlYWYpO1xyXG5cclxuXHRcdFx0XHQvLyBFbnN1cmUgaWNvbiBsb2FkcyBwcm9wZXJseSBhZnRlciBvcGVuaW5nXHJcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgU0VPU2lkZVBhbmVsKSB7XHJcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgbGVhZi52aWV3LmZvcmNlSWNvblJlZnJlc2ggPT09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdFx0XHRsZWFmLnZpZXcuZm9yY2VJY29uUmVmcmVzaCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSwgMTAwKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Z2V0RmlsZXNUb0NoZWNrKCk6IFByb21pc2U8VEZpbGVbXT4ge1xyXG5cdFx0Y29uc3QgeyB2YXVsdCB9ID0gdGhpcy5hcHA7XHJcblx0XHRjb25zdCB7IHNjYW5EaXJlY3RvcmllcywgaWdub3JlVW5kZXJzY29yZUZpbGVzLCBlbmFibGVNRFhTdXBwb3J0IH0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdFxyXG5cdFx0bGV0IGZpbGVzOiBURmlsZVtdO1xyXG5cdFx0XHJcblx0XHRpZiAoIXNjYW5EaXJlY3Rvcmllcy50cmltKCkpIHtcclxuXHRcdFx0Ly8gU2NhbiBhbGwgbWFya2Rvd24gZmlsZXNcclxuXHRcdFx0ZmlsZXMgPSB2YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQvLyBBZGQgTURYIGZpbGVzIGlmIGVuYWJsZWRcclxuXHRcdFx0aWYgKGVuYWJsZU1EWFN1cHBvcnQpIHtcclxuXHRcdFx0XHRjb25zdCBtZHhGaWxlcyA9IHZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKChmaWxlKTogZmlsZSBpcyBURmlsZSA9PiBcclxuXHRcdFx0XHRcdGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpID09PSAnbWR4J1xyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0ZmlsZXMgPSBbLi4uZmlsZXMsIC4uLm1keEZpbGVzXTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc3QgZGlyZWN0b3JpZXMgPSBzY2FuRGlyZWN0b3JpZXMuc3BsaXQoJywnKS5tYXAoZGlyID0+IGRpci50cmltKCkpO1xyXG5cdFx0XHRmaWxlcyA9IFtdO1xyXG5cdFx0XHRcclxuXHRcdFx0Zm9yIChjb25zdCBkaXIgb2YgZGlyZWN0b3JpZXMpIHtcclxuXHRcdFx0XHRjb25zdCBmb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGlyKTtcclxuXHRcdFx0XHRpZiAoZm9sZGVyICYmIGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuXHRcdFx0XHRcdC8vIEdldCBtYXJrZG93biBmaWxlc1xyXG5cdFx0XHRcdFx0Y29uc3QgbWRGaWxlcyA9IHZhdWx0LmdldE1hcmtkb3duRmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBcclxuXHRcdFx0XHRcdFx0ZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZGlyICsgJy8nKSB8fCBmaWxlLnBhdGggPT09IGRpclxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdGZpbGVzLnB1c2goLi4ubWRGaWxlcyk7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdC8vIEFkZCBNRFggZmlsZXMgaWYgZW5hYmxlZFxyXG5cdFx0XHRcdFx0aWYgKGVuYWJsZU1EWFN1cHBvcnQpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgbWR4RmlsZXMgPSB2YXVsdC5nZXRGaWxlcygpLmZpbHRlcigoZmlsZSk6IGZpbGUgaXMgVEZpbGUgPT4gXHJcblx0XHRcdFx0XHRcdFx0ZmlsZSBpbnN0YW5jZW9mIFRGaWxlICYmIFxyXG5cdFx0XHRcdFx0XHRcdGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdtZHgnICYmXHJcblx0XHRcdFx0XHRcdFx0KGZpbGUucGF0aC5zdGFydHNXaXRoKGRpciArICcvJykgfHwgZmlsZS5wYXRoID09PSBkaXIpXHJcblx0XHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHRcdGZpbGVzLnB1c2goLi4ubWR4RmlsZXMpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBGaWx0ZXIgdG8gb25seSBzdXBwb3J0ZWQgZmlsZSB0eXBlc1xyXG5cdFx0ZmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiBpc1N1cHBvcnRlZEZpbGUoZmlsZSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpKTtcclxuXHRcdFxyXG5cdFx0Ly8gRmlsdGVyIG91dCBmaWxlcyB3aXRoIHVuZGVyc2NvcmUgcHJlZml4IGlmIHNldHRpbmcgaXMgZW5hYmxlZFxyXG5cdFx0aWYgKGlnbm9yZVVuZGVyc2NvcmVGaWxlcykge1xyXG5cdFx0XHRmaWxlcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+IHtcclxuXHRcdFx0XHRjb25zdCBmaWxlTmFtZSA9IGZpbGUuYmFzZW5hbWU7XHJcblx0XHRcdFx0cmV0dXJuICFmaWxlTmFtZS5zdGFydHNXaXRoKCdfJyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZpbGVzKTtcclxuXHR9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBFcnJvciBoYW5kbGluZyB1dGlsaXRpZXMgZm9yIHRoZSBTRU8gcGx1Z2luXHJcbiAqIFByb3ZpZGVzIGNvbnNpc3RlbnQgZXJyb3IgaGFuZGxpbmcgYW5kIHVzZXIgZmVlZGJhY2tcclxuICovXHJcblxyXG5pbXBvcnQgeyBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbi8qKlxyXG4gKiBFcnJvciBzZXZlcml0eSBsZXZlbHNcclxuICovXHJcbmV4cG9ydCBlbnVtIEVycm9yU2V2ZXJpdHkge1xyXG5cdElORk8gPSAnaW5mbycsXHJcblx0V0FSTklORyA9ICd3YXJuaW5nJyxcclxuXHRFUlJPUiA9ICdlcnJvcicsXHJcblx0Q1JJVElDQUwgPSAnY3JpdGljYWwnXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXN1bHQgb2YgYW4gZXJyb3IgaGFuZGxpbmcgb3BlcmF0aW9uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yUmVzdWx0IHtcclxuXHRtZXNzYWdlOiBzdHJpbmc7XHJcblx0c2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHk7XHJcblx0c3VnZ2VzdGlvbj86IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIEN1c3RvbSBlcnJvciBjbGFzcyBmb3IgU0VPIHBsdWdpbiBlcnJvcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTRU9QbHVnaW5FcnJvciBleHRlbmRzIEVycm9yIHtcclxuXHRwdWJsaWMgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHk7XHJcblx0cHVibGljIHVzZXJNZXNzYWdlOiBzdHJpbmc7XHJcblx0cHVibGljIHN1Z2dlc3Rpb24/OiBzdHJpbmc7XHJcblxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0bWVzc2FnZTogc3RyaW5nLFxyXG5cdFx0c2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkgPSBFcnJvclNldmVyaXR5LkVSUk9SLFxyXG5cdFx0dXNlck1lc3NhZ2U/OiBzdHJpbmcsXHJcblx0XHRzdWdnZXN0aW9uPzogc3RyaW5nXHJcblx0KSB7XHJcblx0XHRzdXBlcihtZXNzYWdlKTtcclxuXHRcdHRoaXMubmFtZSA9ICdTRU9QbHVnaW5FcnJvcic7XHJcblx0XHR0aGlzLnNldmVyaXR5ID0gc2V2ZXJpdHk7XHJcblx0XHR0aGlzLnVzZXJNZXNzYWdlID0gdXNlck1lc3NhZ2UgfHwgbWVzc2FnZTtcclxuXHRcdHRoaXMuc3VnZ2VzdGlvbiA9IHN1Z2dlc3Rpb247XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogSGFuZGxlcyBlcnJvcnMgd2l0aCB1c2VyLWZyaWVuZGx5IG1lc3NhZ2VzIGFuZCBsb2dnaW5nXHJcbiAqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciB0byBoYW5kbGVcclxuICogQHBhcmFtIGNvbnRleHQgLSBDb250ZXh0IGFib3V0IHdoZXJlIHRoZSBlcnJvciBvY2N1cnJlZFxyXG4gKiBAcGFyYW0gc2hvd05vdGljZSAtIFdoZXRoZXIgdG8gc2hvdyBhIG5vdGljZSB0byB0aGUgdXNlclxyXG4gKiBAcmV0dXJucyBGb3JtYXR0ZWQgZXJyb3IgaW5mb3JtYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihcclxuXHRlcnJvcjogdW5rbm93bixcclxuXHRjb250ZXh0OiBzdHJpbmcsXHJcblx0c2hvd05vdGljZTogYm9vbGVhbiA9IHRydWVcclxuKTogeyBtZXNzYWdlOiBzdHJpbmc7IHNldmVyaXR5OiBFcnJvclNldmVyaXR5OyBzdWdnZXN0aW9uPzogc3RyaW5nIH0ge1xyXG5cdGxldCBtZXNzYWdlOiBzdHJpbmc7XHJcblx0bGV0IHNldmVyaXR5OiBFcnJvclNldmVyaXR5ID0gRXJyb3JTZXZlcml0eS5FUlJPUjtcclxuXHRsZXQgc3VnZ2VzdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cclxuXHRpZiAoZXJyb3IgaW5zdGFuY2VvZiBTRU9QbHVnaW5FcnJvcikge1xyXG5cdFx0bWVzc2FnZSA9IGVycm9yLnVzZXJNZXNzYWdlO1xyXG5cdFx0c2V2ZXJpdHkgPSBlcnJvci5zZXZlcml0eTtcclxuXHRcdHN1Z2dlc3Rpb24gPSBlcnJvci5zdWdnZXN0aW9uO1xyXG5cdH0gZWxzZSBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xyXG5cdFx0bWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XHJcblx0XHRzZXZlcml0eSA9IEVycm9yU2V2ZXJpdHkuRVJST1I7XHJcblx0XHRzdWdnZXN0aW9uID0gJ1BsZWFzZSB0cnkgYWdhaW4gb3IgY2hlY2sgdGhlIHBsdWdpbiBzZXR0aW5ncyc7XHJcblx0fSBlbHNlIHtcclxuXHRcdG1lc3NhZ2UgPSAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCc7XHJcblx0XHRzZXZlcml0eSA9IEVycm9yU2V2ZXJpdHkuQ1JJVElDQUw7XHJcblx0XHRzdWdnZXN0aW9uID0gJ1BsZWFzZSByZXN0YXJ0IE9ic2lkaWFuIGFuZCB0cnkgYWdhaW4nO1xyXG5cdH1cclxuXHJcblx0Ly8gTG9nIGVycm9yIGZvciBkZWJ1Z2dpbmdcclxuXHRjb25zb2xlLmVycm9yKGBbU0VPIFBsdWdpbl0gRXJyb3IgaW4gJHtjb250ZXh0fTpgLCBlcnJvcik7XHJcblxyXG5cdC8vIFNob3cgbm90aWNlIHRvIHVzZXIgaWYgcmVxdWVzdGVkXHJcblx0aWYgKHNob3dOb3RpY2UpIHtcclxuXHRcdGNvbnN0IG5vdGljZU1lc3NhZ2UgPSBzdWdnZXN0aW9uXHJcblx0XHRcdD8gYCR7bWVzc2FnZX0gLSAke3N1Z2dlc3Rpb259YFxyXG5cdFx0XHQ6IG1lc3NhZ2U7XHJcblxyXG5cdFx0bmV3IE5vdGljZShub3RpY2VNZXNzYWdlLCA1MDAwKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB7IG1lc3NhZ2UsIHNldmVyaXR5LCBzdWdnZXN0aW9uIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXcmFwcyBhc3luYyBmdW5jdGlvbnMgd2l0aCBlcnJvciBoYW5kbGluZ1xyXG4gKiBAcGFyYW0gZm4gLSBUaGUgYXN5bmMgZnVuY3Rpb24gdG8gd3JhcFxyXG4gKiBAcGFyYW0gY29udGV4dCAtIENvbnRleHQgZm9yIGVycm9yIHJlcG9ydGluZ1xyXG4gKiBAcGFyYW0gZmFsbGJhY2sgLSBGYWxsYmFjayB2YWx1ZSB0byByZXR1cm4gb24gZXJyb3JcclxuICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBmdW5jdGlvbiByZXN1bHQgb3IgZmFsbGJhY2tcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoRXJyb3JIYW5kbGluZzxUPihcclxuXHRmbjogKCkgPT4gUHJvbWlzZTxUPiB8IFQsXHJcblx0Y29udGV4dDogc3RyaW5nLFxyXG5cdGZhbGxiYWNrOiBUXHJcbik6IFByb21pc2U8VD4ge1xyXG5cdHRyeSB7XHJcblx0XHRyZXR1cm4gYXdhaXQgZm4oKTtcclxuXHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0aGFuZGxlRXJyb3IoZXJyb3IsIGNvbnRleHQsIHRydWUpO1xyXG5cdFx0cmV0dXJuIGZhbGxiYWNrO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBzYWZlIGFzeW5jIGZ1bmN0aW9uIHRoYXQgaGFuZGxlcyBlcnJvcnMgZ3JhY2VmdWxseVxyXG4gKiBAcGFyYW0gZm4gLSBUaGUgYXN5bmMgZnVuY3Rpb24gdG8gbWFrZSBzYWZlXHJcbiAqIEBwYXJhbSBjb250ZXh0IC0gQ29udGV4dCBmb3IgZXJyb3IgcmVwb3J0aW5nXHJcbiAqIEBwYXJhbSBmYWxsYmFjayAtIEZhbGxiYWNrIHZhbHVlIHRvIHJldHVybiBvbiBlcnJvclxyXG4gKiBAcmV0dXJucyBTYWZlIGFzeW5jIGZ1bmN0aW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2FmZUFzeW5jRnVuY3Rpb248VCBleHRlbmRzIHVua25vd25bXSwgUj4oXHJcblx0Zm46ICguLi5hcmdzOiBUKSA9PiBQcm9taXNlPFI+LFxyXG5cdGNvbnRleHQ6IHN0cmluZyxcclxuXHRmYWxsYmFjazogUlxyXG4pIHtcclxuXHRyZXR1cm4gYXN5bmMgKC4uLmFyZ3M6IFQpOiBQcm9taXNlPFI+ID0+IHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHJldHVybiBhd2FpdCBmbiguLi5hcmdzKTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdGhhbmRsZUVycm9yKGVycm9yLCBjb250ZXh0LCB0cnVlKTtcclxuXHRcdFx0cmV0dXJuIGZhbGxiYWNrO1xyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCByZXF1aXJlZCBwYXJhbWV0ZXJzIGFyZSBub3QgbnVsbC91bmRlZmluZWRcclxuICogQHBhcmFtIHBhcmFtcyAtIE9iamVjdCB3aXRoIHBhcmFtZXRlciBuYW1lcyBhbmQgdmFsdWVzXHJcbiAqIEBwYXJhbSBjb250ZXh0IC0gQ29udGV4dCBmb3IgZXJyb3IgcmVwb3J0aW5nXHJcbiAqIEB0aHJvd3MgU0VPUGx1Z2luRXJyb3IgaWYgYW55IHJlcXVpcmVkIHBhcmFtZXRlciBpcyBtaXNzaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVSZXF1aXJlZFBhcmFtcyhcclxuXHRwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+LFxyXG5cdGNvbnRleHQ6IHN0cmluZ1xyXG4pOiB2b2lkIHtcclxuXHRjb25zdCBtaXNzaW5nID0gT2JqZWN0LmVudHJpZXMocGFyYW1zKVxyXG5cdFx0LmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZClcclxuXHRcdC5tYXAoKFtuYW1lXSkgPT4gbmFtZSk7XHJcblxyXG5cdGlmIChtaXNzaW5nLmxlbmd0aCA+IDApIHtcclxuXHRcdHRocm93IG5ldyBTRU9QbHVnaW5FcnJvcihcclxuXHRcdFx0YE1pc3NpbmcgcmVxdWlyZWQgcGFyYW1ldGVyczogJHttaXNzaW5nLmpvaW4oJywgJyl9YCxcclxuXHRcdFx0RXJyb3JTZXZlcml0eS5FUlJPUixcclxuXHRcdFx0YE1pc3NpbmcgcmVxdWlyZWQgcGFyYW1ldGVyczogJHttaXNzaW5nLmpvaW4oJywgJyl9YCxcclxuXHRcdFx0J1BsZWFzZSBjaGVjayB5b3VyIHBsdWdpbiBjb25maWd1cmF0aW9uJ1xyXG5cdFx0KTtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgaGFuZGxlcyBlcnJvcnNcclxuICogQHBhcmFtIGZuIC0gVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlXHJcbiAqIEBwYXJhbSBkZWxheSAtIERlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG4gKiBAcGFyYW0gY29udGV4dCAtIENvbnRleHQgZm9yIGVycm9yIHJlcG9ydGluZ1xyXG4gKiBAcmV0dXJucyBEZWJvdW5jZWQgZnVuY3Rpb24gd2l0aCBlcnJvciBoYW5kbGluZ1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlYm91bmNlZEZ1bmN0aW9uPFQgZXh0ZW5kcyB1bmtub3duW10sIFI+KFxyXG5cdGZuOiAoLi4uYXJnczogVCkgPT4gUHJvbWlzZTxSPixcclxuXHRkZWxheTogbnVtYmVyLFxyXG5cdGNvbnRleHQ6IHN0cmluZ1xyXG4pIHtcclxuXHRsZXQgdGltZW91dElkOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xyXG5cclxuXHRyZXR1cm4gYXN5bmMgKC4uLmFyZ3M6IFQpOiBQcm9taXNlPFIgfCB1bmRlZmluZWQ+ID0+IHtcclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG5cdFx0XHRpZiAodGltZW91dElkKSB7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZuKC4uLmFyZ3MpO1xyXG5cdFx0XHRcdFx0XHRyZXNvbHZlKHJlc3VsdCk7XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRcdFx0XHRoYW5kbGVFcnJvcihlcnJvciwgY29udGV4dCwgdHJ1ZSk7XHJcblx0XHRcdFx0XHRcdHJlc29sdmUodW5kZWZpbmVkKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KSgpO1xyXG5cdFx0XHR9LCBkZWxheSk7XHJcblx0XHR9KTtcclxuXHR9O1xyXG59XHJcbiIsICIvKipcclxuICogQ2FjaGUgbWFuYWdlbWVudCB1dGlsaXRpZXMgZm9yIHRoZSBTRU8gcGx1Z2luXHJcbiAqIFByb3ZpZGVzIGludGVsbGlnZW50IGNhY2hpbmcgd2l0aCBzaXplIGxpbWl0cyBhbmQgZXhwaXJhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNFT1Jlc3VsdHMgfSBmcm9tIFwiLi4vdHlwZXNcIjtcclxuXHJcbi8qKlxyXG4gKiBDYWNoZSBlbnRyeSBpbnRlcmZhY2VcclxuICovXHJcbmludGVyZmFjZSBDYWNoZUVudHJ5PFQ+IHtcclxuXHR2YWx1ZTogVDtcclxuXHR0aW1lc3RhbXA6IG51bWJlcjtcclxuXHRhY2Nlc3NDb3VudDogbnVtYmVyO1xyXG5cdGxhc3RBY2Nlc3NlZDogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogQ2FjaGUgY29uZmlndXJhdGlvblxyXG4gKi9cclxuaW50ZXJmYWNlIENhY2hlQ29uZmlnIHtcclxuXHRtYXhTaXplOiBudW1iZXI7XHJcblx0bWF4QWdlOiBudW1iZXI7IC8vIGluIG1pbGxpc2Vjb25kc1xyXG5cdGNsZWFudXBJbnRlcnZhbDogbnVtYmVyOyAvLyBpbiBtaWxsaXNlY29uZHNcclxufVxyXG5cclxuLyoqXHJcbiAqIEdlbmVyaWMgY2FjaGUgbWFuYWdlciB3aXRoIExSVSBldmljdGlvbiBhbmQgVFRMXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ2FjaGVNYW5hZ2VyPFQ+IHtcclxuXHRwcml2YXRlIGNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIENhY2hlRW50cnk8VD4+KCk7XHJcblx0cHJpdmF0ZSBjb25maWc6IENhY2hlQ29uZmlnO1xyXG5cdHByaXZhdGUgY2xlYW51cFRpbWVyOiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRJbnRlcnZhbD4gfCBudWxsID0gbnVsbDtcclxuXHJcblx0Y29uc3RydWN0b3IoY29uZmlnOiBQYXJ0aWFsPENhY2hlQ29uZmlnPiA9IHt9KSB7XHJcblx0XHR0aGlzLmNvbmZpZyA9IHtcclxuXHRcdFx0bWF4U2l6ZTogY29uZmlnLm1heFNpemUgfHwgMTAwLFxyXG5cdFx0XHRtYXhBZ2U6IGNvbmZpZy5tYXhBZ2UgfHwgMzAgKiA2MCAqIDEwMDAsIC8vIDMwIG1pbnV0ZXNcclxuXHRcdFx0Y2xlYW51cEludGVydmFsOiBjb25maWcuY2xlYW51cEludGVydmFsIHx8IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRlc1xyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLnN0YXJ0Q2xlYW51cFRpbWVyKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgYSB2YWx1ZSBmcm9tIGNhY2hlXHJcblx0ICogQHBhcmFtIGtleSAtIENhY2hlIGtleVxyXG5cdCAqIEByZXR1cm5zIENhY2hlZCB2YWx1ZSBvciB1bmRlZmluZWRcclxuXHQgKi9cclxuXHRnZXQoa2V5OiBzdHJpbmcpOiBUIHwgdW5kZWZpbmVkIHtcclxuXHRcdGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcclxuXHRcdGlmICghZW50cnkpIHtcclxuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBlbnRyeSBoYXMgZXhwaXJlZFxyXG5cdFx0aWYgKHRoaXMuaXNFeHBpcmVkKGVudHJ5KSkge1xyXG5cdFx0XHR0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVwZGF0ZSBhY2Nlc3Mgc3RhdGlzdGljc1xyXG5cdFx0ZW50cnkuYWNjZXNzQ291bnQrKztcclxuXHRcdGVudHJ5Lmxhc3RBY2Nlc3NlZCA9IERhdGUubm93KCk7XHJcblxyXG5cdFx0cmV0dXJuIGVudHJ5LnZhbHVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogU2V0IGEgdmFsdWUgaW4gY2FjaGVcclxuXHQgKiBAcGFyYW0ga2V5IC0gQ2FjaGUga2V5XHJcblx0ICogQHBhcmFtIHZhbHVlIC0gVmFsdWUgdG8gY2FjaGVcclxuXHQgKi9cclxuXHRzZXQoa2V5OiBzdHJpbmcsIHZhbHVlOiBUKTogdm9pZCB7XHJcblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgZW50cnkgaWYgaXQgZXhpc3RzXHJcblx0XHRpZiAodGhpcy5jYWNoZS5oYXMoa2V5KSkge1xyXG5cdFx0XHR0aGlzLmNhY2hlLmRlbGV0ZShrZXkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gZXZpY3QgZW50cmllc1xyXG5cdFx0aWYgKHRoaXMuY2FjaGUuc2l6ZSA+PSB0aGlzLmNvbmZpZy5tYXhTaXplKSB7XHJcblx0XHRcdHRoaXMuZXZpY3RMUlUoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBZGQgbmV3IGVudHJ5XHJcblx0XHR0aGlzLmNhY2hlLnNldChrZXksIHtcclxuXHRcdFx0dmFsdWUsXHJcblx0XHRcdHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuXHRcdFx0YWNjZXNzQ291bnQ6IDEsXHJcblx0XHRcdGxhc3RBY2Nlc3NlZDogRGF0ZS5ub3coKSxcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBrZXkgZXhpc3RzIGluIGNhY2hlXHJcblx0ICogQHBhcmFtIGtleSAtIENhY2hlIGtleVxyXG5cdCAqIEByZXR1cm5zIFRydWUgaWYga2V5IGV4aXN0cyBhbmQgaXMgbm90IGV4cGlyZWRcclxuXHQgKi9cclxuXHRoYXMoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IGVudHJ5ID0gdGhpcy5jYWNoZS5nZXQoa2V5KTtcclxuXHRcdGlmICghZW50cnkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLmlzRXhwaXJlZChlbnRyeSkpIHtcclxuXHRcdFx0dGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVsZXRlIGEgc3BlY2lmaWMga2V5IGZyb20gY2FjaGVcclxuXHQgKiBAcGFyYW0ga2V5IC0gQ2FjaGUga2V5XHJcblx0ICovXHJcblx0ZGVsZXRlKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5jYWNoZS5kZWxldGUoa2V5KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENsZWFyIGFsbCBjYWNoZSBlbnRyaWVzXHJcblx0ICovXHJcblx0Y2xlYXIoKTogdm9pZCB7XHJcblx0XHR0aGlzLmNhY2hlLmNsZWFyKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgY2FjaGUgc3RhdGlzdGljc1xyXG5cdCAqL1xyXG5cdGdldFN0YXRzKCkge1xyXG5cdFx0Y29uc3QgZW50cmllcyA9IEFycmF5LmZyb20odGhpcy5jYWNoZS52YWx1ZXMoKSk7XHJcblx0XHRcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHNpemU6IHRoaXMuY2FjaGUuc2l6ZSxcclxuXHRcdFx0bWF4U2l6ZTogdGhpcy5jb25maWcubWF4U2l6ZSxcclxuXHRcdFx0aGl0UmF0ZTogdGhpcy5jYWxjdWxhdGVIaXRSYXRlKCksXHJcblx0XHRcdG9sZGVzdEVudHJ5OiBNYXRoLm1pbiguLi5lbnRyaWVzLm1hcChlID0+IGUudGltZXN0YW1wKSksXHJcblx0XHRcdG5ld2VzdEVudHJ5OiBNYXRoLm1heCguLi5lbnRyaWVzLm1hcChlID0+IGUudGltZXN0YW1wKSksXHJcblx0XHRcdGV4cGlyZWRFbnRyaWVzOiBlbnRyaWVzLmZpbHRlcihlID0+IHRoaXMuaXNFeHBpcmVkKGUpKS5sZW5ndGgsXHJcblx0XHR9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2xlYW4gdXAgZXhwaXJlZCBlbnRyaWVzXHJcblx0ICovXHJcblx0Y2xlYW51cCgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IGV4cGlyZWRLZXlzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuXHRcdGZvciAoY29uc3QgW2tleSwgZW50cnldIG9mIHRoaXMuY2FjaGUuZW50cmllcygpKSB7XHJcblx0XHRcdGlmICh0aGlzLmlzRXhwaXJlZChlbnRyeSkpIHtcclxuXHRcdFx0XHRleHBpcmVkS2V5cy5wdXNoKGtleSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRleHBpcmVkS2V5cy5mb3JFYWNoKGtleSA9PiB0aGlzLmNhY2hlLmRlbGV0ZShrZXkpKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIERlc3Ryb3kgdGhlIGNhY2hlIG1hbmFnZXIgYW5kIGNsZWFudXAgcmVzb3VyY2VzXHJcblx0ICovXHJcblx0ZGVzdHJveSgpOiB2b2lkIHtcclxuXHRcdGlmICh0aGlzLmNsZWFudXBUaW1lcikge1xyXG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMuY2xlYW51cFRpbWVyKTtcclxuXHRcdFx0dGhpcy5jbGVhbnVwVGltZXIgPSBudWxsO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5jbGVhcigpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYW4gZW50cnkgaGFzIGV4cGlyZWRcclxuXHQgKi9cclxuXHRwcml2YXRlIGlzRXhwaXJlZChlbnRyeTogQ2FjaGVFbnRyeTxUPik6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIERhdGUubm93KCkgLSBlbnRyeS50aW1lc3RhbXAgPiB0aGlzLmNvbmZpZy5tYXhBZ2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBFdmljdCBsZWFzdCByZWNlbnRseSB1c2VkIGVudHJ5XHJcblx0ICovXHJcblx0cHJpdmF0ZSBldmljdExSVSgpOiB2b2lkIHtcclxuXHRcdGxldCBvbGRlc3RLZXkgPSAnJztcclxuXHRcdGxldCBvbGRlc3RUaW1lID0gRGF0ZS5ub3coKTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IFtrZXksIGVudHJ5XSBvZiB0aGlzLmNhY2hlLmVudHJpZXMoKSkge1xyXG5cdFx0XHRpZiAoZW50cnkubGFzdEFjY2Vzc2VkIDwgb2xkZXN0VGltZSkge1xyXG5cdFx0XHRcdG9sZGVzdFRpbWUgPSBlbnRyeS5sYXN0QWNjZXNzZWQ7XHJcblx0XHRcdFx0b2xkZXN0S2V5ID0ga2V5O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKG9sZGVzdEtleSkge1xyXG5cdFx0XHR0aGlzLmNhY2hlLmRlbGV0ZShvbGRlc3RLZXkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2FsY3VsYXRlIGNhY2hlIGhpdCByYXRlXHJcblx0ICovXHJcblx0cHJpdmF0ZSBjYWxjdWxhdGVIaXRSYXRlKCk6IG51bWJlciB7XHJcblx0XHRjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbSh0aGlzLmNhY2hlLnZhbHVlcygpKTtcclxuXHRcdGNvbnN0IHRvdGFsQWNjZXNzZXMgPSBlbnRyaWVzLnJlZHVjZSgoc3VtLCBlbnRyeSkgPT4gc3VtICsgZW50cnkuYWNjZXNzQ291bnQsIDApO1xyXG5cdFx0cmV0dXJuIHRvdGFsQWNjZXNzZXMgPiAwID8gZW50cmllcy5sZW5ndGggLyB0b3RhbEFjY2Vzc2VzIDogMDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFN0YXJ0IHRoZSBjbGVhbnVwIHRpbWVyXHJcblx0ICovXHJcblx0cHJpdmF0ZSBzdGFydENsZWFudXBUaW1lcigpOiB2b2lkIHtcclxuXHRcdHRoaXMuY2xlYW51cFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmNsZWFudXAoKTtcclxuXHRcdH0sIHRoaXMuY29uZmlnLmNsZWFudXBJbnRlcnZhbCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogU0VPLXNwZWNpZmljIGNhY2hlIG1hbmFnZXIgZm9yIHNjYW4gcmVzdWx0c1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNFT0NhY2hlTWFuYWdlciB7XHJcblx0cHJpdmF0ZSByZXN1bHRzQ2FjaGU6IENhY2hlTWFuYWdlcjxTRU9SZXN1bHRzW10+O1xyXG5cdHByaXZhdGUgZmlsZUNhY2hlOiBDYWNoZU1hbmFnZXI8c3RyaW5nPjsgLy8gRm9yIGZpbGUgY29udGVudCBjYWNoaW5nXHJcblxyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy5yZXN1bHRzQ2FjaGUgPSBuZXcgQ2FjaGVNYW5hZ2VyPFNFT1Jlc3VsdHNbXT4oe1xyXG5cdFx0XHRtYXhTaXplOiA1MCwgLy8gU3RvcmUgdXAgdG8gNTAgc2NhbiByZXN1bHRzXHJcblx0XHRcdG1heEFnZTogNjAgKiA2MCAqIDEwMDAsIC8vIDEgaG91clxyXG5cdFx0XHRjbGVhbnVwSW50ZXJ2YWw6IDEwICogNjAgKiAxMDAwLCAvLyAxMCBtaW51dGVzXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmZpbGVDYWNoZSA9IG5ldyBDYWNoZU1hbmFnZXI8c3RyaW5nPih7XHJcblx0XHRcdG1heFNpemU6IDIwMCwgLy8gU3RvcmUgdXAgdG8gMjAwIGZpbGUgY29udGVudHNcclxuXHRcdFx0bWF4QWdlOiAzMCAqIDYwICogMTAwMCwgLy8gMzAgbWludXRlc1xyXG5cdFx0XHRjbGVhbnVwSW50ZXJ2YWw6IDUgKiA2MCAqIDEwMDAsIC8vIDUgbWludXRlc1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgY2FjaGVkIHNjYW4gcmVzdWx0c1xyXG5cdCAqIEBwYXJhbSBrZXkgLSBDYWNoZSBrZXkgKHVzdWFsbHkgc2NhbiB0eXBlICsgdGltZXN0YW1wKVxyXG5cdCAqIEByZXR1cm5zIENhY2hlZCByZXN1bHRzIG9yIHVuZGVmaW5lZFxyXG5cdCAqL1xyXG5cdGdldFJlc3VsdHMoa2V5OiBzdHJpbmcpOiBTRU9SZXN1bHRzW10gfCB1bmRlZmluZWQge1xyXG5cdFx0cmV0dXJuIHRoaXMucmVzdWx0c0NhY2hlLmdldChrZXkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2FjaGUgc2NhbiByZXN1bHRzXHJcblx0ICogQHBhcmFtIGtleSAtIENhY2hlIGtleVxyXG5cdCAqIEBwYXJhbSByZXN1bHRzIC0gUmVzdWx0cyB0byBjYWNoZVxyXG5cdCAqL1xyXG5cdHNldFJlc3VsdHMoa2V5OiBzdHJpbmcsIHJlc3VsdHM6IFNFT1Jlc3VsdHNbXSk6IHZvaWQge1xyXG5cdFx0dGhpcy5yZXN1bHRzQ2FjaGUuc2V0KGtleSwgcmVzdWx0cyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXQgY2FjaGVkIGZpbGUgY29udGVudFxyXG5cdCAqIEBwYXJhbSBmaWxlUGF0aCAtIEZpbGUgcGF0aFxyXG5cdCAqIEByZXR1cm5zIENhY2hlZCBjb250ZW50IG9yIHVuZGVmaW5lZFxyXG5cdCAqL1xyXG5cdGdldEZpbGVDb250ZW50KGZpbGVQYXRoOiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xyXG5cdFx0cmV0dXJuIHRoaXMuZmlsZUNhY2hlLmdldChmaWxlUGF0aCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDYWNoZSBmaWxlIGNvbnRlbnRcclxuXHQgKiBAcGFyYW0gZmlsZVBhdGggLSBGaWxlIHBhdGhcclxuXHQgKiBAcGFyYW0gY29udGVudCAtIENvbnRlbnQgdG8gY2FjaGVcclxuXHQgKi9cclxuXHRzZXRGaWxlQ29udGVudChmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMuZmlsZUNhY2hlLnNldChmaWxlUGF0aCwgY29udGVudCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDbGVhciBhbGwgY2FjaGVzXHJcblx0ICovXHJcblx0Y2xlYXJBbGwoKTogdm9pZCB7XHJcblx0XHR0aGlzLnJlc3VsdHNDYWNoZS5jbGVhcigpO1xyXG5cdFx0dGhpcy5maWxlQ2FjaGUuY2xlYXIoKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEdldCBjYWNoZSBzdGF0aXN0aWNzXHJcblx0ICovXHJcblx0Z2V0U3RhdHMoKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRyZXN1bHRzOiB0aGlzLnJlc3VsdHNDYWNoZS5nZXRTdGF0cygpLFxyXG5cdFx0XHRmaWxlczogdGhpcy5maWxlQ2FjaGUuZ2V0U3RhdHMoKSxcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDbGVhbiB1cCBleHBpcmVkIGVudHJpZXNcclxuXHQgKi9cclxuXHRjbGVhbnVwKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5yZXN1bHRzQ2FjaGUuY2xlYW51cCgpO1xyXG5cdFx0dGhpcy5maWxlQ2FjaGUuY2xlYW51cCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRGVzdHJveSBjYWNoZSBtYW5hZ2Vyc1xyXG5cdCAqL1xyXG5cdGRlc3Ryb3koKTogdm9pZCB7XHJcblx0XHR0aGlzLnJlc3VsdHNDYWNoZS5kZXN0cm95KCk7XHJcblx0XHR0aGlzLmZpbGVDYWNoZS5kZXN0cm95KCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogR2xvYmFsIGNhY2hlIG1hbmFnZXIgaW5zdGFuY2VcclxuICovXHJcbmV4cG9ydCBjb25zdCBzZW9DYWNoZSA9IG5ldyBTRU9DYWNoZU1hbmFnZXIoKTtcclxuXHJcbi8qKlxyXG4gKiBDbGVhciBhbGwgU0VPIGNhY2hlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWxsQ2FjaGUoKTogdm9pZCB7XHJcblx0c2VvQ2FjaGUuY2xlYXJBbGwoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBjYWNoZSBzdGF0aXN0aWNzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVTdGF0cygpIHtcclxuXHRyZXR1cm4gc2VvQ2FjaGUuZ2V0U3RhdHMoKTtcclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVPLFNBQVMsZUFBZSxVQUEwQjtBQUV4RCxRQUFNLFlBQVksU0FBUyxXQUFXLEdBQUcsSUFBSSxTQUFTLE1BQU0sQ0FBQyxJQUFJO0FBQ2pFLFFBQU0sUUFBUSxVQUFVLE1BQU0sR0FBRztBQUNqQyxNQUFJLE1BQU0sVUFBVSxHQUFHO0FBQ3RCLFdBQU87QUFBQSxFQUNSO0FBQ0EsU0FBTyxNQUFNLE1BQU0sRUFBRSxFQUFFLEtBQUssR0FBRztBQUNoQztBQUVPLFNBQVMsb0JBQW9CLGlCQUF5QixXQUE0QjtBQUN4RixNQUFJLFdBQVc7QUFDZixNQUFJLENBQUMsbUJBQW1CLGdCQUFnQixLQUFLLE1BQU0sSUFBSTtBQUN0RCxnQkFBWTtBQUFBLEVBQ2IsT0FBTztBQUNOLFVBQU0sVUFBVSxnQkFBZ0IsTUFBTSxHQUFHLEVBQUUsSUFBSSxPQUFLLEVBQUUsS0FBSyxDQUFDLEVBQUUsT0FBTyxPQUFLLEVBQUUsU0FBUyxDQUFDO0FBQ3RGLGdCQUFZLFFBQVEsS0FBSyxJQUFJO0FBQUEsRUFDOUI7QUFFQSxNQUFJLGNBQWMsUUFBVztBQUM1QixnQkFBWSxLQUFLLFNBQVM7QUFBQSxFQUMzQjtBQUVBLFNBQU87QUFDUjtBQUVPLFNBQVMsVUFBVSxPQUFxQixVQUFnQztBQUM5RSxRQUFNLGNBQWMs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QUNoRCxvQkFBTSxRQUFRLFVBQVE7QUFuVjdCO0FBb1ZRLHNCQUFNLFFBQU8sVUFBSyxnQkFBTCxtQkFBa0I7QUFDL0Isb0JBQUksU0FBUyx3QkFBd0I7QUFDcEMsdUJBQUssT0FBTztBQUFBLGdCQUNiO0FBQUEsY0FDRCxDQUFDO0FBQUEsWUFDRixDQUFDO0FBQUEsVUFDRixHQUFHLEdBQUc7QUFBQSxRQUNQO0FBQUEsTUFDRDtBQUFBLElBQ0QsU0FBUyxPQUFPO0FBQ2Ysa0JBQVksT0FBTyx3QkFBd0IsSUFBSTtBQUFBLElBQ2hEO0FBQUEsRUFDRDtBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAiZnJvbnRtYXR0ZXIiLCAibGluZXMiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInJ1blNFT0NoZWNrIiwgImNsZWFyQ2FjaGVGb3JGaWxlIiwgImNsZWFyQWxsQ2FjaGUiLCAiaW1wb3J0X29ic2lkaWFuIiwgImUiLCAiaGFzTm90aWNlcyIsICJoYXNFcnJvcnMiLCAidG9nZ2xlQnRuIiwgImljb24iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJjbGVhckFsbENhY2hlIiwgImNsZWFyQWxsQ2FjaGUiLCAicnVuU0VPQ2hlY2siXQp9Cg==
